Calendar=function(a,g,f,h){this.timeout=this.getDateText=this.getDateToolTip=this.getDateStatus=this.currentDateEl=this.activeDiv=null;this.onSelected=f||null;this.onClose=h||null;this.hidden=this.dragging=false;this.minYear=1970;this.maxYear=2050;this.dateFormat=Calendar._TT.DEF_DATE_FORMAT;this.ttDateFormat=Calendar._TT.TT_DATE_FORMAT;this.weekNumbers=this.isPopup=true;this.firstDayOfWeek=typeof a=="number"?a:Calendar._FD;this.showsOtherMonths=false;this.dateStr=g;this.ar_days=null;this.showsTime=
false;this.time24=true;this.yearStep=2;this.hiliteToday=true;this.activeYear=this.hilitedYear=this.activeMonth=this.hilitedMonth=this.yearsCombo=this.monthsCombo=this.firstdayname=this.tbody=this.element=this.table=this.multiple=null;this.dateClicked=false;if(typeof Calendar._SDN=="undefined"){if(typeof Calendar._SDN_len=="undefined")Calendar._SDN_len=3;a=[];for(g=8;g>0;)a[--g]=Calendar._DN[g].substr(0,Calendar._SDN_len);Calendar._SDN=a;if(typeof Calendar._SMN_len=="undefined")Calendar._SMN_len=3;
a=[];for(g=12;g>0;)a[--g]=Calendar._MN[g].substr(0,Calendar._SMN_len);Calendar._SMN=a}};Calendar._C=null;Calendar.is_ie=/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent);Calendar.is_ie5=Calendar.is_ie&&/msie 5\.0/i.test(navigator.userAgent);Calendar.is_opera=/opera/i.test(navigator.userAgent);Calendar.is_khtml=/Konqueror|Safari|KHTML/i.test(navigator.userAgent);
Calendar.getAbsolutePos=function(a){var g=0,f=0,h=/^div$/i.test(a.tagName);if(h&&a.scrollLeft)g=a.scrollLeft;if(h&&a.scrollTop)f=a.scrollTop;g={x:a.offsetLeft-g,y:a.offsetTop-f};if(a.offsetParent){a=this.getAbsolutePos(a.offsetParent);g.x+=a.x;g.y+=a.y}return g};Calendar.isRelated=function(a,g){var f=g.relatedTarget;if(!f){var h=g.type;if(h=="mouseover")f=g.fromElement;else if(h=="mouseout")f=g.toElement}for(;f;){if(f==a)return true;f=f.parentNode}return false};
Calendar.removeClass=function(a,g){if(a&&a.className){for(var f=a.className.split(" "),h=[],j=f.length;j>0;)if(f[--j]!=g)h[h.length]=f[j];a.className=h.join(" ")}};Calendar.addClass=function(a,g){Calendar.removeClass(a,g);a.className+=" "+g};Calendar.getElement=function(a){for(a=Calendar.is_ie?window.event.srcElement:a.currentTarget;a.nodeType!=1||/^div$/i.test(a.tagName);)a=a.parentNode;return a};
Calendar.getTargetElement=function(a){for(a=Calendar.is_ie?window.event.srcElement:a.target;a.nodeType!=1;)a=a.parentNode;return a};Calendar.stopEvent=function(a){a||(a=window.event);if(Calendar.is_ie){a.cancelBubble=true;a.returnValue=false}else{a.preventDefault();a.stopPropagation()}return false};Calendar.addEvent=function(a,g,f){if(a.attachEvent)a.attachEvent("on"+g,f);else if(a.addEventListener)a.addEventListener(g,f,true);else a["on"+g]=f};
Calendar.removeEvent=function(a,g,f){if(a.detachEvent)a.detachEvent("on"+g,f);else if(a.removeEventListener)a.removeEventListener(g,f,true);else a["on"+g]=null};Calendar.createElement=function(a,g){var f=null;f=document.createElementNS?document.createElementNS("http://www.w3.org/1999/xhtml",a):document.createElement(a);typeof g!="undefined"&&g.appendChild(f);return f};
Calendar._add_evs=function(a){with(Calendar){addEvent(a,"mouseover",dayMouseOver);addEvent(a,"mousedown",dayMouseDown);addEvent(a,"mouseout",dayMouseOut);if(is_ie){addEvent(a,"dblclick",dayMouseDblClick);a.setAttribute("unselectable",true)}}};Calendar.findMonth=function(a){if(typeof a.month!="undefined")return a;else if(typeof a.parentNode.month!="undefined")return a.parentNode;return null};
Calendar.findYear=function(a){if(typeof a.year!="undefined")return a;else if(typeof a.parentNode.year!="undefined")return a.parentNode;return null};
Calendar.showMonthsCombo=function(){var a=Calendar._C;if(!a)return false;var g=a.activeDiv,f=a.monthsCombo;a.hilitedMonth&&Calendar.removeClass(a.hilitedMonth,"hilite");a.activeMonth&&Calendar.removeClass(a.activeMonth,"active");var h=a.monthsCombo.getElementsByTagName("div")[a.date.getMonth()];Calendar.addClass(h,"active");a.activeMonth=h;a=f.style;a.display="block";if(g.navtype<0)a.left=g.offsetLeft+"px";else{f=f.offsetWidth;if(typeof f=="undefined")f=50;a.left=g.offsetLeft+g.offsetWidth-f+"px"}a.top=
g.offsetTop+g.offsetHeight+"px"};
Calendar.showYearsCombo=function(a){var g=Calendar._C;if(!g)return false;var f=g.activeDiv,h=g.yearsCombo;g.hilitedYear&&Calendar.removeClass(g.hilitedYear,"hilite");g.activeYear&&Calendar.removeClass(g.activeYear,"active");g.activeYear=null;for(var j=g.date.getFullYear()+(a?1:-1),b=h.firstChild,c=false,e=12;e>0;--e){if(j>=g.minYear&&j<=g.maxYear){b.innerHTML=j;b.year=j;b.style.display="block";c=true}else b.style.display="none";b=b.nextSibling;j+=a?g.yearStep:-g.yearStep}if(c){a=h.style;a.display=
"block";if(f.navtype<0)a.left=f.offsetLeft+"px";else{h=h.offsetWidth;if(typeof h=="undefined")h=50;a.left=f.offsetLeft+f.offsetWidth-h+"px"}a.top=f.offsetTop+f.offsetHeight+"px"}};
Calendar.tableMouseUp=function(a){var g=Calendar._C;if(!g)return false;g.timeout&&clearTimeout(g.timeout);var f=g.activeDiv;if(!f)return false;var h=Calendar.getTargetElement(a);a||(a=window.event);Calendar.removeClass(f,"active");if(h==f||h.parentNode==f)Calendar.cellClick(f,a);var j=Calendar.findMonth(h);f=null;if(j){f=new Date(g.date);if(j.month!=f.getMonth()){f.setMonth(j.month);g.setDate(f);g.dateClicked=false;g.callHandler()}}else if(h=Calendar.findYear(h)){f=new Date(g.date);if(h.year!=f.getFullYear()){f.setFullYear(h.year);
g.setDate(f);g.dateClicked=false;g.callHandler()}}with(Calendar){removeEvent(document,"mouseup",tableMouseUp);removeEvent(document,"mouseover",tableMouseOver);removeEvent(document,"mousemove",tableMouseOver);g._hideCombos();_C=null;return stopEvent(a)}};
Calendar.tableMouseOver=function(a){var g=Calendar._C;if(g){var f=g.activeDiv,h=Calendar.getTargetElement(a);if(h==f||h.parentNode==f){Calendar.addClass(f,"hilite active");Calendar.addClass(f.parentNode,"rowhilite")}else{if(typeof f.navtype=="undefined"||f.navtype!=50&&(f.navtype==0||Math.abs(f.navtype)>2))Calendar.removeClass(f,"active");Calendar.removeClass(f,"hilite");Calendar.removeClass(f.parentNode,"rowhilite")}a||(a=window.event);if(f.navtype==50&&h!=f){var j=Calendar.getAbsolutePos(f),b=f.offsetWidth,
c=a.clientX,e=true;if(c>j.x+b){c=c-j.x-b;e=false}else c=j.x-c;if(c<0)c=0;j=f._range;b=f._current;c=Math.floor(c/10)%j.length;for(var k=j.length;--k>=0;)if(j[k]==b)break;for(;c-- >0;)if(e){if(--k<0)k=j.length-1}else if(++k>=j.length)k=0;f.innerHTML=j[k];g.onUpdateTime()}if(f=Calendar.findMonth(h))if(f.month!=g.date.getMonth()){g.hilitedMonth&&Calendar.removeClass(g.hilitedMonth,"hilite");Calendar.addClass(f,"hilite");g.hilitedMonth=f}else g.hilitedMonth&&Calendar.removeClass(g.hilitedMonth,"hilite");
else{g.hilitedMonth&&Calendar.removeClass(g.hilitedMonth,"hilite");if(h=Calendar.findYear(h))if(h.year!=g.date.getFullYear()){g.hilitedYear&&Calendar.removeClass(g.hilitedYear,"hilite");Calendar.addClass(h,"hilite");g.hilitedYear=h}else g.hilitedYear&&Calendar.removeClass(g.hilitedYear,"hilite");else g.hilitedYear&&Calendar.removeClass(g.hilitedYear,"hilite")}return Calendar.stopEvent(a)}};Calendar.tableMouseDown=function(a){if(Calendar.getTargetElement(a)==Calendar.getElement(a))return Calendar.stopEvent(a)};
Calendar.calDragIt=function(a){var g=Calendar._C;if(!(g&&g.dragging))return false;var f,h;if(Calendar.is_ie){h=window.event.clientY+document.body.scrollTop;f=window.event.clientX+document.body.scrollLeft}else{f=a.pageX;h=a.pageY}g.hideShowCovered();var j=g.element.style;j.left=f-g.xOffs+"px";j.top=h-g.yOffs+"px";return Calendar.stopEvent(a)};
Calendar.calDragEnd=function(a){var g=Calendar._C;if(!g)return false;g.dragging=false;with(Calendar){removeEvent(document,"mousemove",calDragIt);removeEvent(document,"mouseup",calDragEnd);tableMouseUp(a)}g.hideShowCovered()};
Calendar.dayMouseDown=function(a){var g=Calendar.getElement(a);if(g.disabled)return false;var f=g.calendar;f.activeDiv=g;Calendar._C=f;if(g.navtype!=300)with(Calendar){if(g.navtype==50){g._current=g.innerHTML;addEvent(document,"mousemove",tableMouseOver)}else addEvent(document,Calendar.is_ie5?"mousemove":"mouseover",tableMouseOver);addClass(g,"hilite active");addEvent(document,"mouseup",tableMouseUp)}else f.isPopup&&f._dragStart(a);if(g.navtype==-1||g.navtype==1){f.timeout&&clearTimeout(f.timeout);
f.timeout=setTimeout("Calendar.showMonthsCombo()",250)}else if(g.navtype==-2||g.navtype==2){f.timeout&&clearTimeout(f.timeout);f.timeout=setTimeout(g.navtype>0?"Calendar.showYearsCombo(true)":"Calendar.showYearsCombo(false)",250)}else f.timeout=null;return Calendar.stopEvent(a)};Calendar.dayMouseDblClick=function(a){Calendar.cellClick(Calendar.getElement(a),a||window.event);Calendar.is_ie&&document.selection.empty()};
Calendar.dayMouseOver=function(a){var g=Calendar.getElement(a);if(Calendar.isRelated(g,a)||Calendar._C||g.disabled)return false;if(g.ttip){if(g.ttip.substr(0,1)=="_")g.ttip=g.caldate.print(g.calendar.ttDateFormat)+g.ttip.substr(1);g.calendar.tooltips.innerHTML=g.ttip}if(g.navtype!=300){Calendar.addClass(g,"hilite");g.caldate&&Calendar.addClass(g.parentNode,"rowhilite")}return Calendar.stopEvent(a)};
Calendar.dayMouseOut=function(a){with(Calendar){var g=getElement(a);if(isRelated(g,a)||_C||g.disabled)return false;removeClass(g,"hilite");g.caldate&&removeClass(g.parentNode,"rowhilite");if(g.calendar)g.calendar.tooltips.innerHTML=_TT.SEL_DATE;return stopEvent(a)}};
Calendar.cellClick=function(a,g){var f=a.calendar,h=false,j=false,b=null;if(typeof a.navtype=="undefined"){if(f.currentDateEl){Calendar.removeClass(f.currentDateEl,"selected");Calendar.addClass(a,"selected");h=f.currentDateEl==a;if(!h)f.currentDateEl=a}f.date.setDateOnly(a.caldate);b=f.date;var c=!(f.dateClicked=!a.otherMonth);if(!c&&!f.currentDateEl)f._toggleMultipleDate(new Date(b));else j=!a.disabled;c&&f._init(f.firstDayOfWeek,b)}else{if(a.navtype==200){Calendar.removeClass(a,"hilite");f.callCloseHandler();
return}b=new Date(f.date);a.navtype==0&&b.setDateOnly(new Date);f.dateClicked=false;c=b.getFullYear();var e=b.getMonth(),k=function(m){var o=b.getDate(),n=b.getMonthDays(m);o>n&&b.setDate(n);b.setMonth(m)};switch(a.navtype){case 400:Calendar.removeClass(a,"hilite");h=Calendar._TT.ABOUT;if(typeof h!="undefined")h+=f.showsTime?Calendar._TT.ABOUT_TIME:"";else h='Help and about box text is not translated into this language.\nIf you know this language and you feel generous please update\nthe corresponding file in "lang" subdir to match calendar-en.js\nand send it back to <mihai_bazon@yahoo.com> to get it into the distribution  ;-)\n\nThank you!\nhttp://dynarch.com/mishoo/calendar.epl\n';
alert(h);return;case -2:c>f.minYear&&b.setFullYear(c-1);break;case -1:if(e>0)k(e-1);else if(c-- >f.minYear){b.setFullYear(c);k(11)}break;case 1:if(e<11)k(e+1);else if(c<f.maxYear){b.setFullYear(c+1);k(0)}break;case 2:c<f.maxYear&&b.setFullYear(c+1);break;case 100:f.setFirstDayOfWeek(a.fdow);return;case 50:h=a._range;j=a.innerHTML;for(c=h.length;--c>=0;)if(h[c]==j)break;if(g&&g.shiftKey){if(--c<0)c=h.length-1}else if(++c>=h.length)c=0;a.innerHTML=h[c];f.onUpdateTime();return;case 0:if(typeof f.getDateStatus==
"function"&&f.getDateStatus(b,b.getFullYear(),b.getMonth(),b.getDate()))return false}if(b.equalsTo(f.date)){if(a.navtype==0)j=h=true}else{f.setDate(b);j=true}}j&&g&&f.callHandler();if(h){Calendar.removeClass(a,"hilite");g&&f.callCloseHandler()}};
Calendar.prototype.create=function(a){var g=null;if(a){g=a;this.isPopup=false}else{g=document.getElementsByTagName("body")[0];this.isPopup=true}this.date=this.dateStr?new Date(this.dateStr):new Date;this.table=a=Calendar.createElement("table");a.cellSpacing=0;a.cellPadding=0;a.calendar=this;Calendar.addEvent(a,"mousedown",Calendar.tableMouseDown);var f=Calendar.createElement("div");this.element=f;f.className="calendar";if(this.isPopup){f.style.position="absolute";f.style.display="none"}f.appendChild(a);
var h=Calendar.createElement("thead",a),j=null,b=null,c=this;f=function(m,o,n){j=Calendar.createElement("td",b);j.colSpan=o;j.className="button";if(n!=0&&Math.abs(n)<=2)j.className+=" nav";Calendar._add_evs(j);j.calendar=c;j.navtype=n;j.innerHTML="<div unselectable='on'>"+m+"</div>";return j};b=Calendar.createElement("tr",h);var e=6;this.isPopup&&--e;this.weekNumbers&&++e;f("?",1,400).ttip=Calendar._TT.INFO;this.title=f("",e,300);this.title.className="title";if(this.isPopup){this.title.ttip=Calendar._TT.DRAG_TO_MOVE;
this.title.style.cursor="move";f("&#x00d7;",1,200).ttip=Calendar._TT.CLOSE}b=Calendar.createElement("tr",h);b.className="headrow";this._nav_py=f("&#x00ab;",1,-2);this._nav_py.ttip=Calendar._TT.PREV_YEAR;this._nav_pm=f("&#x2039;",1,-1);this._nav_pm.ttip=Calendar._TT.PREV_MONTH;this._nav_now=f(Calendar._TT.TODAY,this.weekNumbers?4:3,0);this._nav_now.ttip=Calendar._TT.GO_TODAY;this._nav_nm=f("&#x203a;",1,1);this._nav_nm.ttip=Calendar._TT.NEXT_MONTH;this._nav_ny=f("&#x00bb;",1,2);this._nav_ny.ttip=Calendar._TT.NEXT_YEAR;
b=Calendar.createElement("tr",h);b.className="daynames";if(this.weekNumbers){j=Calendar.createElement("td",b);j.className="name wn";j.innerHTML=Calendar._TT.WK}for(h=7;h>0;--h){j=Calendar.createElement("td",b);if(!h){j.navtype=100;j.calendar=this;Calendar._add_evs(j)}}this.firstdayname=this.weekNumbers?b.firstChild.nextSibling:b.firstChild;this._displayWeekdays();this.tbody=e=Calendar.createElement("tbody",a);for(h=6;h>0;--h){b=Calendar.createElement("tr",e);if(this.weekNumbers)j=Calendar.createElement("td",
b);for(var k=7;k>0;--k){j=Calendar.createElement("td",b);j.calendar=this;Calendar._add_evs(j)}}if(this.showsTime){b=Calendar.createElement("tr",e);b.className="time";j=Calendar.createElement("td",b);j.className="time";j.colSpan=2;j.innerHTML=Calendar._TT.TIME||"&nbsp;";j=Calendar.createElement("td",b);j.className="time";j.colSpan=this.weekNumbers?4:3;(function(){function m(r,y,z,B){var C=Calendar.createElement("span",j);C.className=r;C.innerHTML=y;C.calendar=c;C.ttip=Calendar._TT.TIME_PART;C.navtype=
50;C._range=[];if(typeof z!="number")C._range=z;else for(r=z;r<=B;++r)C._range[C._range.length]=r<10&&B>=10?"0"+r:""+r;Calendar._add_evs(C);return C}var o=c.date.getHours(),n=c.date.getMinutes(),p=!c.time24,t=o>12;if(p&&t)o-=12;var x=m("hour",o,p?1:0,p?12:23);o=Calendar.createElement("span",j);o.innerHTML=":";o.className="colon";var w=m("minute",n,0,59),u=null;j=Calendar.createElement("td",b);j.className="time";j.colSpan=2;if(p)u=m("ampm",t?"pm":"am",["am","pm"]);else j.innerHTML="&nbsp;";c.onSetTime=
function(){var r,y=this.date.getHours(),z=this.date.getMinutes();if(p){if(r=y>=12)y-=12;if(y==0)y=12;u.innerHTML=r?"pm":"am"}x.innerHTML=y<10?"0"+y:y;w.innerHTML=z<10?"0"+z:z};c.onUpdateTime=function(){var r=this.date,y=parseInt(x.innerHTML,10);if(p)if(/pm/i.test(u.innerHTML)&&y<12)y+=12;else if(/am/i.test(u.innerHTML)&&y==12)y=0;var z=r.getDate(),B=r.getMonth(),C=r.getFullYear();r.setHours(y);r.setMinutes(parseInt(w.innerHTML,10));r.setFullYear(C);r.setMonth(B);r.setDate(z);this.dateClicked=false;
this.callHandler()}})()}else this.onSetTime=this.onUpdateTime=function(){};a=Calendar.createElement("tfoot",a);b=Calendar.createElement("tr",a);b.className="footrow";j=f(Calendar._TT.SEL_DATE,this.weekNumbers?8:7,300);j.className="ttip";if(this.isPopup){j.ttip=Calendar._TT.DRAG_TO_MOVE;j.style.cursor="move"}this.tooltips=j;this.monthsCombo=f=Calendar.createElement("div",this.element);f.className="combo";for(h=0;h<Calendar._MN.length;++h){a=Calendar.createElement("div");a.className=Calendar.is_ie?
"label-IEfix":"label";a.month=h;a.innerHTML=Calendar._SMN[h];f.appendChild(a)}this.yearsCombo=f=Calendar.createElement("div",this.element);f.className="combo";for(h=12;h>0;--h){a=Calendar.createElement("div");a.className=Calendar.is_ie?"label-IEfix":"label";f.appendChild(a)}this._init(this.firstDayOfWeek,this.date);g.appendChild(this.element)};
Calendar._keyEvent=function(a){var g=window._dynarch_popupCalendar;if(!g||g.multiple)return false;Calendar.is_ie&&(a=window.event);var f=Calendar.is_ie||a.type=="keypress",h=a.keyCode;if(a.ctrlKey)switch(h){case 37:f&&Calendar.cellClick(g._nav_pm);break;case 38:f&&Calendar.cellClick(g._nav_py);break;case 39:f&&Calendar.cellClick(g._nav_nm);break;case 40:f&&Calendar.cellClick(g._nav_ny);break;default:return false}else switch(h){case 32:Calendar.cellClick(g._nav_now);break;case 27:f&&g.callCloseHandler();
break;case 37:case 38:case 39:case 40:if(f){var j,b,c,e,k;f=h==37||h==38;k=h==37||h==39?1:7;var m=function(){e=g.currentDateEl;var p=e.pos;j=p&15;b=p>>4;c=g.ar_days[b][j]};m();for(var o=function(){var p=new Date(g.date);p.setDate(p.getDate()-k);g.setDate(p)},n=function(){var p=new Date(g.date);p.setDate(p.getDate()+k);g.setDate(p)};;){switch(h){case 37:if(--j>=0)c=g.ar_days[b][j];else{j=6;h=38;continue}break;case 38:if(--b>=0)c=g.ar_days[b][j];else{o();m()}break;case 39:if(++j<7)c=g.ar_days[b][j];
else{j=0;h=40;continue}break;case 40:if(++b<g.ar_days.length)c=g.ar_days[b][j];else{n();m()}}break}if(c)if(c.disabled)f?o():n();else Calendar.cellClick(c)}break;case 13:f&&Calendar.cellClick(g.currentDateEl,a);break;default:return false}return Calendar.stopEvent(a)};
Calendar.prototype._init=function(a,g){var f=new Date,h=f.getFullYear(),j=f.getMonth();f=f.getDate();this.table.style.visibility="hidden";var b=g.getFullYear();if(b<this.minYear){b=this.minYear;g.setFullYear(b)}else if(b>this.maxYear){b=this.maxYear;g.setFullYear(b)}this.firstDayOfWeek=a;this.date=new Date(g);var c=g.getMonth(),e=g.getDate();g.getMonthDays();g.setDate(1);var k=(g.getDay()-this.firstDayOfWeek)%7;if(k<0)k+=7;g.setDate(0-k);g.setDate(g.getDate()+1);k=this.tbody.firstChild;for(var m=
this.ar_days=[],o=Calendar._TT.WEEKEND,n=this.multiple?this.datesCells={}:null,p=0;p<6;++p,k=k.nextSibling){var t=k.firstChild;if(this.weekNumbers){t.className="day wn";t.innerHTML=g.getWeekNumber();t=t.nextSibling}k.className="daysrow";for(var x=false,w,u=m[p]=[],r=0;r<7;++r,t=t.nextSibling,g.setDate(w+1)){w=g.getDate();var y=g.getDay();t.className="day";t.pos=p<<4|r;u[r]=t;var z=g.getMonth()==c;if(z){t.otherMonth=false;x=true}else if(this.showsOtherMonths){t.className+=" othermonth";t.otherMonth=
true}else{t.className="emptycell";t.innerHTML="&nbsp;";t.disabled=true;continue}t.disabled=false;t.innerHTML=this.getDateText?this.getDateText(g,w):w;if(n)n[g.print("%Y%m%d")]=t;if(this.getDateStatus){var B=this.getDateStatus(g,b,c,w);if(this.getDateToolTip){var C=this.getDateToolTip(g,b,c,w);if(C)t.title=C}if(B===true){t.className+=" disabled";t.disabled=true}else{if(/disabled/i.test(B))t.disabled=true;t.className+=" "+B}}if(!t.disabled){t.caldate=new Date(g);t.ttip="_";if(!this.multiple&&z&&w==
e&&this.hiliteToday){t.className+=" selected";this.currentDateEl=t}if(g.getFullYear()==h&&g.getMonth()==j&&w==f){t.className+=" today";t.ttip+=Calendar._TT.PART_TODAY}if(o.indexOf(y.toString())!=-1)t.className+=t.otherMonth?" oweekend":" weekend"}}if(!(x||this.showsOtherMonths))k.className="emptyrow"}this.title.innerHTML=Calendar._MN[c]+", "+b;this.onSetTime();this.table.style.visibility="visible";this._initMultipleDates()};
Calendar.prototype._initMultipleDates=function(){if(this.multiple)for(var a in this.multiple){var g=this.datesCells[a];if(this.multiple[a])if(g)g.className+=" selected"}};Calendar.prototype._toggleMultipleDate=function(a){if(this.multiple){var g=a.print("%Y%m%d"),f=this.datesCells[g];if(f)if(this.multiple[g]){Calendar.removeClass(f,"selected");delete this.multiple[g]}else{Calendar.addClass(f,"selected");this.multiple[g]=a}}};
Calendar.prototype.setDateToolTipHandler=function(a){this.getDateToolTip=a};Calendar.prototype.setDate=function(a){a.equalsTo(this.date)||this._init(this.firstDayOfWeek,a)};Calendar.prototype.refresh=function(){this._init(this.firstDayOfWeek,this.date)};Calendar.prototype.setFirstDayOfWeek=function(a){this._init(a,this.date);this._displayWeekdays()};Calendar.prototype.setDateStatusHandler=Calendar.prototype.setDisabledHandler=function(a){this.getDateStatus=a};
Calendar.prototype.setRange=function(a,g){this.minYear=a;this.maxYear=g};Calendar.prototype.callHandler=function(){if(this.onSelected)this.onSelected(this,this.date.print(this.dateFormat))};Calendar.prototype.callCloseHandler=function(){if(this.onClose)this.onClose(this);this.hideShowCovered()};Calendar.prototype.destroy=function(){this.element.parentNode.removeChild(this.element);Calendar._C=null;window._dynarch_popupCalendar=null};
Calendar.prototype.reparent=function(a){var g=this.element;g.parentNode.removeChild(g);a.appendChild(g)};Calendar._checkCalendar=function(a){var g=window._dynarch_popupCalendar;if(!g)return false;for(var f=Calendar.is_ie?Calendar.getElement(a):Calendar.getTargetElement(a);f!=null&&f!=g.element;f=f.parentNode);if(f==null){window._dynarch_popupCalendar.callCloseHandler();return Calendar.stopEvent(a)}};
Calendar.prototype.show=function(){for(var a=this.table.getElementsByTagName("tr"),g=a.length;g>0;){var f=a[--g];Calendar.removeClass(f,"rowhilite");f=f.getElementsByTagName("td");for(var h=f.length;h>0;){var j=f[--h];Calendar.removeClass(j,"hilite");Calendar.removeClass(j,"active")}}this.element.style.display="block";this.hidden=false;if(this.isPopup){window._dynarch_popupCalendar=this;Calendar.addEvent(document,"keydown",Calendar._keyEvent);Calendar.addEvent(document,"keypress",Calendar._keyEvent);
Calendar.addEvent(document,"mousedown",Calendar._checkCalendar)}this.hideShowCovered()};Calendar.prototype.hide=function(){if(this.isPopup){Calendar.removeEvent(document,"keydown",Calendar._keyEvent);Calendar.removeEvent(document,"keypress",Calendar._keyEvent);Calendar.removeEvent(document,"mousedown",Calendar._checkCalendar)}this.element.style.display="none";this.hidden=true;this.hideShowCovered()};Calendar.prototype.showAt=function(a,g){var f=this.element.style;f.left=a+"px";f.top=g+"px";this.show()};
Calendar.prototype.showAtElement=function(a,g){var f=this,h=Calendar.getAbsolutePos(a);if(!g||typeof g!="string"){this.showAt(h.x,h.y+a.offsetHeight);return true}this.element.style.display="block";Calendar.continuation_for_the_fucking_khtml_browser=function(){var j=f.element.offsetWidth,b=f.element.offsetHeight;f.element.style.display="none";var c=g.substr(0,1),e="l";if(g.length>1)e=g.substr(1,1);switch(c){case "T":h.y-=b;break;case "B":h.y+=a.offsetHeight;break;case "C":h.y+=(a.offsetHeight-b)/2;
break;case "t":h.y+=a.offsetHeight-b}switch(e){case "L":h.x-=j;break;case "R":h.x+=a.offsetWidth;break;case "C":h.x+=(a.offsetWidth-j)/2;break;case "l":h.x+=a.offsetWidth-j}h.width=j;h.height=b+40;f.monthsCombo.style.display="none";if(h.x<0)h.x=0;if(h.y<0)h.y=0;j=document.createElement("div");b=j.style;b.position="absolute";b.right=b.bottom=b.width=b.height="0px";document.body.appendChild(j);b=Calendar.getAbsolutePos(j);document.body.removeChild(j);if(Calendar.is_ie){b.y+=document.body.scrollTop;
b.x+=document.body.scrollLeft}else{b.y+=window.scrollY;b.x+=window.scrollX}j=h.x+h.width-b.x;if(j>0)h.x-=j;j=h.y+h.height-b.y;if(j>0)h.y-=j;f.showAt(h.x,h.y)};Calendar.is_khtml?setTimeout("Calendar.continuation_for_the_fucking_khtml_browser()",10):Calendar.continuation_for_the_fucking_khtml_browser()};Calendar.prototype.setDateFormat=function(a){this.dateFormat=a};Calendar.prototype.setTtDateFormat=function(a){this.ttDateFormat=a};
Calendar.prototype.parseDate=function(a,g){if(!g)g=this.dateFormat;this.setDate(Date.parseDate(a,g))};
Calendar.prototype.hideShowCovered=function(){function a(x){var w=x.style.visibility;w||(w=document.defaultView&&typeof document.defaultView.getComputedStyle=="function"?Calendar.is_khtml?"":document.defaultView.getComputedStyle(x,"").getPropertyValue("visibility"):x.currentStyle?x.currentStyle.visibility:"");return w}if(Calendar.is_ie||Calendar.is_opera){var g=["applet","iframe","select"],f=this.element,h=Calendar.getAbsolutePos(f),j=h.x,b=f.offsetWidth+j,c=h.y;f=f.offsetHeight+c;for(var e=g.length;e>
0;)for(var k=document.getElementsByTagName(g[--e]),m=null,o=k.length;o>0;){m=k[--o];h=Calendar.getAbsolutePos(m);var n=h.x,p=m.offsetWidth+n;h=h.y;var t=m.offsetHeight+h;if(this.hidden||n>b||p<j||h>f||t<c){if(!m.__msh_save_visibility)m.__msh_save_visibility=a(m);m.style.visibility=m.__msh_save_visibility}else{if(!m.__msh_save_visibility)m.__msh_save_visibility=a(m);m.style.visibility="hidden"}}}};
Calendar.prototype._displayWeekdays=function(){for(var a=this.firstDayOfWeek,g=this.firstdayname,f=Calendar._TT.WEEKEND,h=0;h<7;++h){g.className="day name";var j=(h+a)%7;if(h){g.ttip=Calendar._TT.DAY_FIRST.replace("%s",Calendar._DN[j]);g.navtype=100;g.calendar=this;g.fdow=j;Calendar._add_evs(g)}f.indexOf(j.toString())!=-1&&Calendar.addClass(g,"weekend");g.innerHTML=Calendar._SDN[(h+a)%7];g=g.nextSibling}};
Calendar.prototype._hideCombos=function(){this.monthsCombo.style.display="none";this.yearsCombo.style.display="none"};
Calendar.prototype._dragStart=function(a){if(!this.dragging){this.dragging=true;var g;if(Calendar.is_ie){g=window.event.clientY+document.body.scrollTop;a=window.event.clientX+document.body.scrollLeft}else{g=a.clientY+window.scrollY;a=a.clientX+window.scrollX}var f=this.element.style;this.xOffs=a-parseInt(f.left);this.yOffs=g-parseInt(f.top);with(Calendar){addEvent(document,"mousemove",calDragIt);addEvent(document,"mouseup",calDragEnd)}}};Date._MD=[31,28,31,30,31,30,31,31,30,31,30,31];
Date.SECOND=1E3;Date.MINUTE=60*Date.SECOND;Date.HOUR=60*Date.MINUTE;Date.DAY=24*Date.HOUR;Date.WEEK=7*Date.DAY;
Date.parseDate=function(a,g){var f=new Date,h=0,j=-1,b=0,c=a.split(/\W+/),e=g.match(/%./g),k=0,m=0,o=0,n=0;for(k=0;k<c.length;++k)if(c[k])switch(e[k]){case "%d":case "%e":b=parseInt(c[k],10);break;case "%m":j=parseInt(c[k],10)-1;break;case "%Y":case "%y":h=parseInt(c[k],10);h<100&&(h+=h>29?1900:2E3);break;case "%b":case "%B":for(m=0;m<12;++m)if(Calendar._MN[m].substr(0,c[k].length).toLowerCase()==c[k].toLowerCase()){j=m;break}break;case "%H":case "%I":case "%k":case "%l":o=parseInt(c[k],10);break;
case "%P":case "%p":if(/pm/i.test(c[k])&&o<12)o+=12;else if(/am/i.test(c[k])&&o>=12)o-=12;break;case "%M":n=parseInt(c[k],10)}if(isNaN(h))h=f.getFullYear();if(isNaN(j))j=f.getMonth();if(isNaN(b))b=f.getDate();if(isNaN(o))o=f.getHours();if(isNaN(n))n=f.getMinutes();if(h!=0&&j!=-1&&b!=0)return new Date(h,j,b,o,n,0);h=0;j=-1;for(k=b=0;k<c.length;++k)if(c[k].search(/[a-zA-Z]+/)!=-1){e=-1;for(m=0;m<12;++m)if(Calendar._MN[m].substr(0,c[k].length).toLowerCase()==c[k].toLowerCase()){e=m;break}if(e!=-1){if(j!=
-1)b=j+1;j=e}}else if(parseInt(c[k],10)<=12&&j==-1)j=c[k]-1;else if(parseInt(c[k],10)>31&&h==0){h=parseInt(c[k],10);h<100&&(h+=h>29?1900:2E3)}else if(b==0)b=c[k];if(h==0)h=f.getFullYear();if(j!=-1&&b!=0)return new Date(h,j,b,o,n,0);return f};Date.prototype.getMonthDays=function(a){var g=this.getFullYear();if(typeof a=="undefined")a=this.getMonth();return 0==g%4&&(0!=g%100||0==g%400)&&a==1?29:Date._MD[a]};
Date.prototype.getDayOfYear=function(){var a=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0),g=new Date(this.getFullYear(),0,0,0,0,0);return Math.floor((a-g)/Date.DAY)};Date.prototype.getWeekNumber=function(){var a=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0),g=a.getDay();a.setDate(a.getDate()-(g+6)%7+3);g=a.valueOf();a.setMonth(0);a.setDate(4);return Math.round((g-a.valueOf())/6048E5)+1};
Date.prototype.equalsTo=function(a){return this.getFullYear()==a.getFullYear()&&this.getMonth()==a.getMonth()&&this.getDate()==a.getDate()&&this.getHours()==a.getHours()&&this.getMinutes()==a.getMinutes()};Date.prototype.setDateOnly=function(a){a=new Date(a);this.setDate(1);this.setFullYear(a.getFullYear());this.setMonth(a.getMonth());this.setDate(a.getDate())};
Date.prototype.print=function(a){var g=this.getMonth(),f=this.getDate(),h=this.getFullYear(),j=this.getWeekNumber(),b=this.getDay(),c={},e=this.getHours(),k=e>=12,m=k?e-12:e,o=this.getDayOfYear();if(m==0)m=12;var n=this.getMinutes(),p=this.getSeconds();c["%a"]=Calendar._SDN[b];c["%A"]=Calendar._DN[b];c["%b"]=Calendar._SMN[g];c["%B"]=Calendar._MN[g];c["%C"]=1+Math.floor(h/100);c["%d"]=f<10?"0"+f:f;c["%e"]=f;c["%H"]=e<10?"0"+e:e;c["%I"]=m<10?"0"+m:m;c["%j"]=o<100?o<10?"00"+o:"0"+o:o;c["%k"]=e;c["%l"]=
m;c["%m"]=g<9?"0"+(1+g):1+g;c["%M"]=n<10?"0"+n:n;c["%n"]="\n";c["%p"]=k?"PM":"AM";c["%P"]=k?"pm":"am";c["%s"]=Math.floor(this.getTime()/1E3);c["%S"]=p<10?"0"+p:p;c["%t"]="\t";c["%U"]=c["%W"]=c["%V"]=j<10?"0"+j:j;c["%u"]=b+1;c["%w"]=b;c["%y"]=(""+h).substr(2,2);c["%Y"]=h;c["%%"]="%";g=/%./g;if(!Calendar.is_ie5&&!Calendar.is_khtml)return a.replace(g,function(t){return c[t]||t});f=a.match(g);for(h=0;h<f.length;h++)if(j=c[f[h]]){g=RegExp(f[h],"g");a=a.replace(g,j)}return a};
Date.prototype.__msh_oldSetFullYear=Date.prototype.setFullYear;Date.prototype.setFullYear=function(a){var g=new Date(this);g.__msh_oldSetFullYear(a);g.getMonth()!=this.getMonth()&&this.setDate(28);this.__msh_oldSetFullYear(a)};window._dynarch_popupCalendar=null;Calendar._DN=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];Calendar._SDN=["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"];Calendar._FD=0;
Calendar._MN=["January","February","March","April","May","June","July","August","September","October","November","December"];Calendar._SMN=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];Calendar._TT={};Calendar._TT.INFO="About the calendar";
Calendar._TT.ABOUT="DHTML Date/Time Selector\n(c) dynarch.com 2002-2005 / Author: Mihai Bazon\nFor latest version visit: http://www.dynarch.com/projects/calendar/\nDistributed under GNU LGPL.  See http://gnu.org/licenses/lgpl.html for details.\n\nDate selection:\n- Use the \u00ab, \u00bb buttons to select year\n- Use the "+String.fromCharCode(8249)+", "+String.fromCharCode(8250)+" buttons to select month\n- Hold mouse button on any of the above buttons for faster selection.";
Calendar._TT.ABOUT_TIME="\n\nTime selection:\n- Click on any of the time parts to increase it\n- or Shift-click to decrease it\n- or click and drag for faster selection.";Calendar._TT.PREV_YEAR="Prev. year (hold for menu)";Calendar._TT.PREV_MONTH="Prev. month (hold for menu)";Calendar._TT.GO_TODAY="Go Today";Calendar._TT.NEXT_MONTH="Next month (hold for menu)";Calendar._TT.NEXT_YEAR="Next year (hold for menu)";Calendar._TT.SEL_DATE="Select date";Calendar._TT.DRAG_TO_MOVE="Drag to move";
Calendar._TT.PART_TODAY=" (today)";Calendar._TT.DAY_FIRST="Display %s first";Calendar._TT.WEEKEND="0,6";Calendar._TT.CLOSE="Close";Calendar._TT.TODAY="Today";Calendar._TT.TIME_PART="(Shift-)Click or drag to change value";Calendar._TT.DEF_DATE_FORMAT="%Y-%m-%d";Calendar._TT.TT_DATE_FORMAT="%a, %b %e";Calendar._TT.WK="wk";Calendar._TT.TIME="Time:";
Calendar.setup=function(a){function g(c,e){if(typeof a[c]=="undefined")a[c]=e}function f(c){var e=c.params,k=c.dateClicked||e.electric;if(k&&e.inputField){e.inputField.value=c.date.print(e.ifFormat);if(typeof e.inputField.onchange=="function")e.inputField.onchange()}if(k&&e.displayArea)e.displayArea.innerHTML=c.date.print(e.daFormat);if(k&&typeof e.onUpdate=="function")e.onUpdate(c);k&&e.flat&&typeof e.flatCallback=="function"&&e.flatCallback(c);k&&e.singleClick&&c.dateClicked&&c.callCloseHandler()}
g("inputField",null);g("displayArea",null);g("button",null);g("eventName","click");g("ifFormat","%Y/%m/%d");g("daFormat","%Y/%m/%d");g("singleClick",true);g("disableFunc",null);g("dateStatusFunc",a.disableFunc);g("dateText",null);g("firstDay",null);g("align","Br");g("range",[1900,2999]);g("weekNumbers",true);g("flat",null);g("flatCallback",null);g("onSelect",null);g("onClose",null);g("onUpdate",null);g("date",null);g("showsTime",false);g("timeFormat","24");g("electric",true);g("step",2);g("position",
null);g("cache",false);g("showOthers",false);g("multiple",null);var h=["inputField","displayArea","button"],j;for(j in h)if(typeof a[h[j]]=="string")a[h[j]]=document.getElementById(a[h[j]]);if(!(a.flat||a.multiple||a.inputField||a.displayArea||a.button)){alert("Calendar.setup:\n  Nothing to setup (no fields found).  Please check your code");return false}if(a.flat!=null){if(typeof a.flat=="string")a.flat=document.getElementById(a.flat);if(!a.flat){alert("Calendar.setup:\n  Flat specified but can't find parent.");
return false}var b=new Calendar(a.firstDay,a.date,a.onSelect||f);b.showsOtherMonths=a.showOthers;b.showsTime=a.showsTime;b.time24=a.timeFormat=="24";b.params=a;b.weekNumbers=a.weekNumbers;b.setRange(a.range[0],a.range[1]);b.setDateStatusHandler(a.dateStatusFunc);b.getDateText=a.dateText;a.ifFormat&&b.setDateFormat(a.ifFormat);a.inputField&&typeof a.inputField.value=="string"&&b.parseDate(a.inputField.value);b.create(a.flat);b.show();return false}(a.button||a.displayArea||a.inputField)["on"+a.eventName]=
function(){var c=a.inputField||a.displayArea,e=a.inputField?a.ifFormat:a.daFormat,k=false,m=window.calendar;if(c)a.date=Date.parseDate(c.value||c.innerHTML,e);if(m&&a.cache){a.date&&m.setDate(a.date);m.hide()}else{window.calendar=m=new Calendar(a.firstDay,a.date,a.onSelect||f,a.onClose||function(p){p.hide()});m.showsTime=a.showsTime;m.time24=a.timeFormat=="24";m.weekNumbers=a.weekNumbers;k=true}if(a.multiple){m.multiple={};for(c=a.multiple.length;--c>=0;){var o=a.multiple[c],n=o.print("%Y%m%d");m.multiple[n]=
o}}m.showsOtherMonths=a.showOthers;m.yearStep=a.step;m.setRange(a.range[0],a.range[1]);m.params=a;m.setDateStatusHandler(a.dateStatusFunc);m.getDateText=a.dateText;m.setDateFormat(e);k&&m.create();m.refresh();a.position?m.showAt(a.position[0],a.position[1]):m.showAtElement(a.button||a.displayArea||a.inputField,a.align);return false};return b};
$(document).ready(function(){function a(){try{f.abort()}catch(j){}$("#TotalQuantity").remove();$("#inv_quantity_ajax_throbber").length==0&&$('[name = "quantity"]').after('<div id="inv_quantity_ajax_throbber" class="ajax_throbber" style="float:right"/>');url="/eden/inv/inv_item_quantity/";url+=$('[name = "inv_item_id"]').val();f=$.getJSON(url,function(b){var c=b.inv_inv_item.quantity;b=b.supply_item_pack.quantity;var e=$('[name = "item_pack_id"] option:selected').text(),k=/\(([0-9]*)\sx/.exec(e);TotalQuantity=
'<span id = "TotalQuantity"> / '+(c*b/(k==null?1:k[1])).toFixed(2)+" "+e+" ("+S3.i18n.in_inv+")</span>";$("#inv_quantity_ajax_throbber").remove();$('[name = "quantity"]').after(TotalQuantity)})}function g(){try{f.abort()}catch(j){}var b=$('[name $= "item_id"]'),c=$('[name = "item_pack_id"]');$('[id$="item_pack_id__row1"]').show();$('[id$="item_pack_id__row"]').show();$("#item_pack_ajax_throbber").length==0&&c.after('<div id="item_pack_ajax_throbber" class="ajax_throbber style="display:inline;"/>');
c.hide();var e;e=$('[name = "item_id"]').length!=0?S3.Ap.concat("/supply/item_pack.json?item_pack.item_id=",b.val()):S3.Ap.concat("/inv/inv_item_packs/",b.val());f=$.ajax({url:e,dataType:"json",context:b,success:function(k){var m="",o="";if(k.length==0)m+='<option value="">'+S3.i18n.no_packs+"</options>";else{for(var n=0;n<k.length;n++)if(k[n].quantity==1){o=k[n].name;break}for(n=0;n<k.length;n++){m+='<option value="'+k[n].id+'">';m+=k[n].quantity==1?k[n].name:k[n].name+" ("+k[n].quantity+" x "+o+
")";m+="</option>"}}c.html(m).val(1).show();href=$("#item_pack_add").attr("href")+"&item_id="+$('[name = "item_id"]').val();$("#item_pack_add").attr("href",href).show();$("#item_pack_ajax_throbber").remove();this.attr("name")=="inv_item_id"&&a()}})}var f;$("#inv_send_item_item_pack_id").change(a);var h=$('[name $= "item_id"]').val();if(h==""|h==undefined){$('[id$="item_pack_id__row1"]').hide();$('[id$="item_pack_id__row"]').hide()}else g();$('[name $= "item_id"]').change(g);$(".quantity.ajax_more").live("click",
function(j){j.preventDefault();j=$(this);var b,c;if(j.hasClass("collapsed")){if(j.hasClass("fulfil")){c="inv";b="recv"}else if(j.hasClass("transit")){b="send";c="inv"}else if(j.hasClass("commit")){b="commit";c="req"}j.after('<div class="ajax_throbber quantity_req_ajax_throbber"/>').removeClass("collapsed").addClass("expanded");var e=/req_item\/(.*)\//i.exec($(".action-btn",j.parent().parent().parent()).attr("href"))[1];e=S3.Ap.concat("/",c,"/",b,"_item_json/",e);$.ajax({url:e,dataType:"json",context:j,
success:function(k){RecvTable='<table class="recv_table">';for(i=0;i<k.length;i++){RecvTable+="<tr><td>";if(i==0)RecvTable+=k[0].id;else{RecvURL=S3.Ap.concat("/",c,"/",b,"/",k[i].id);RecvTable+="<a href = '"+RecvURL+"'>";RecvTable+=k[i].datetime!=null?k[i].datetime.substring(0,10)+"</a>":" - </a>"}RecvTable+="</td><td>"+k[i].quantity+"</td></tr>"}RecvTable+="</table>";$(".quantity_req_ajax_throbber",this.parent()).remove();this.parent().after(RecvTable)}})}else{j.removeClass("expanded").addClass("collapsed");
$(".recv_table",j.parent().parent()).remove()}})});
(function(a,g){function f(v,G){v=v?' id="'+n+v+'"':"";return a("<div"+v+(G?' style="'+G+'"':"")+"/>")}function h(v,G){G=G==="x"?O.width():O.height();return typeof v==="string"?Math.round(/%/.test(v)?G/100*parseInt(v,10):parseInt(v,10)):v}function j(v){return s.photo||/\.(gif|png|jpg|jpeg|bmp)(?:\?([^#]*))?(?:#(\.*))?$/i.test(v)}function b(v){for(var G in v)if(a.isFunction(v[G])&&G.substring(0,2)!=="on")v[G]=v[G].call(X);v.rel=v.rel||X.rel||"nofollow";v.href=v.href||a(X).attr("href");v.title=v.title||
X.title;return v}function c(v,G){G&&G.call(X);a.event.trigger(v)}function e(){var v,G=n+"Slideshow_",D="click."+n,S,V;if(s.slideshow&&M[1]){S=function(){W.text(s.slideshowStop).unbind(D).bind(x,function(){if(K<M.length-1||s.loop)v=setTimeout(A.next,s.slideshowSpeed)}).bind(t,function(){clearTimeout(v)}).one(D+" "+w,V);H.removeClass(G+"off").addClass(G+"on");v=setTimeout(A.next,s.slideshowSpeed)};V=function(){clearTimeout(v);W.text(s.slideshowStart).unbind([x,t,w,D].join(" ")).one(D,S);H.removeClass(G+
"on").addClass(G+"off")};s.slideshowAuto?S():V()}}function k(v){if(!E){X=v;s=b(a.extend({},a.data(X,o)));M=a(X);K=0;if(s.rel!=="nofollow"){M=a("."+ka).filter(function(){return(a.data(this,o).rel||this.rel)===s.rel});K=M.index(X);if(K===-1){M=M.add(X);K=M.length-1}}if(!ea){ea=ma=true;H.show();if(s.returnFocus)try{X.blur();a(X).one(u,function(){try{this.focus()}catch(D){}})}catch(G){}P.css({opacity:+s.opacity,cursor:s.overlayClose?"pointer":"auto"}).show();s.w=h(s.initialWidth,"x");s.h=h(s.initialHeight,
"y");A.position(0);B&&O.bind("resize."+C+" scroll."+C,function(){P.css({width:O.width(),height:O.height(),top:O.scrollTop(),left:O.scrollLeft()})}).trigger("scroll."+C);c(p,s.onOpen);L.add(Z).add(ga).add(W).add(ca).hide();R.html(s.close).show()}A.load(true)}}var m={transition:"elastic",speed:300,width:false,initialWidth:"600",innerWidth:false,maxWidth:false,height:false,initialHeight:"450",innerHeight:false,maxHeight:false,scalePhotos:true,scrolling:true,inline:false,html:false,iframe:false,photo:false,
href:false,title:false,rel:false,opacity:0.9,preloading:true,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",open:false,returnFocus:true,loop:true,slideshow:false,slideshowAuto:true,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:false,onLoad:false,onComplete:false,onCleanup:false,onClosed:false,overlayClose:true,escKey:true,arrowKey:true},o="colorbox",n="cbox",p=n+"_open",t=n+"_load",x=n+"_complete",w=n+"_cleanup",u=n+
"_closed",r=n+"_purge",y=n+"_loaded",z=a.browser.msie&&!a.support.opacity,B=z&&a.browser.version<7,C=n+"_IE6",P,H,F,J,aa,ha,da,ja,M,O,N,I,T,ca,L,W,ga,Z,R,U,ia,fa,Y,X,K,s,ea,ma,E=false,A,ka=n+"Element";A=a.fn[o]=a[o]=function(v,G){var D=this,S;if(!D[0]&&D.selector)return D;v=v||{};if(G)v.onComplete=G;if(!D[0]||D.selector===undefined){D=a("<a/>");v.open=true}D.each(function(){a.data(this,o,a.extend({},a.data(this,o)||m,v));a(this).addClass(ka)});S=v.open;if(a.isFunction(S))S=S.call(D);S&&k(D[0]);return D};
A.init=function(){O=a(g);H=f().attr({id:o,"class":z?n+"IE":""});P=f("Overlay",B?"position:absolute":"").hide();F=f("Wrapper");J=f("Content").append(N=f("LoadedContent","width:0; height:0; overflow:hidden"),T=f("LoadingOverlay").add(f("LoadingGraphic")),ca=f("Title"),L=f("Current"),ga=f("Next"),Z=f("Previous"),W=f("Slideshow").bind(p,e),R=f("Close"));F.append(f().append(f("TopLeft"),aa=f("TopCenter"),f("TopRight")),f(false,"clear:left").append(ha=f("MiddleLeft"),J,da=f("MiddleRight")),f(false,"clear:left").append(f("BottomLeft"),
ja=f("BottomCenter"),f("BottomRight"))).children().children().css({"float":"left"});I=f(false,"position:absolute; width:9999px; visibility:hidden; display:none");a("body").prepend(P,H.append(F,I));J.children().hover(function(){a(this).addClass("hover")},function(){a(this).removeClass("hover")}).addClass("hover");U=aa.height()+ja.height()+J.outerHeight(true)-J.height();ia=ha.width()+da.width()+J.outerWidth(true)-J.width();fa=N.outerHeight(true);Y=N.outerWidth(true);H.css({"padding-bottom":U,"padding-right":ia}).hide();
ga.click(A.next);Z.click(A.prev);R.click(A.close);J.children().removeClass("hover");a("."+ka).live("click",function(v){if(!(v.button!==0&&typeof v.button!=="undefined"||v.ctrlKey||v.shiftKey||v.altKey)){v.preventDefault();k(this)}});P.click(function(){s.overlayClose&&A.close()});a(document).bind("keydown",function(v){if(ea&&s.escKey&&v.keyCode===27){v.preventDefault();A.close()}if(ea&&s.arrowKey&&!ma&&M[1])if(v.keyCode===37&&(K||s.loop)){v.preventDefault();Z.click()}else if(v.keyCode===39&&(K<M.length-
1||s.loop)){v.preventDefault();ga.click()}})};A.remove=function(){H.add(P).remove();a("."+ka).die("click").removeData(o).removeClass(ka)};A.position=function(v,G){function D(ba){aa[0].style.width=ja[0].style.width=J[0].style.width=ba.style.width;T[0].style.height=T[1].style.height=J[0].style.height=ha[0].style.height=da[0].style.height=ba.style.height}var S,V=Math.max(document.documentElement.clientHeight-s.h-fa-U,0)/2+O.scrollTop(),Q=Math.max(O.width()-s.w-Y-ia,0)/2+O.scrollLeft();S=H.width()===
s.w+Y&&H.height()===s.h+fa?0:v;F[0].style.width=F[0].style.height="9999px";H.dequeue().animate({width:s.w+Y,height:s.h+fa,top:V,left:Q},{duration:S,complete:function(){D(this);ma=false;F[0].style.width=s.w+Y+ia+"px";F[0].style.height=s.h+fa+U+"px";G&&G()},step:function(){D(this)}})};A.resize=function(v){if(ea){v=v||{};if(v.width)s.w=h(v.width,"x")-Y-ia;if(v.innerWidth)s.w=h(v.innerWidth,"x");N.css({width:s.w});if(v.height)s.h=h(v.height,"y")-fa-U;if(v.innerHeight)s.h=h(v.innerHeight,"y");if(!v.innerHeight&&
!v.height){v=N.wrapInner("<div style='overflow:auto'></div>").children();s.h=v.height();v.replaceWith(v.children())}N.css({height:s.h});A.position(s.transition==="none"?0:s.speed)}};A.prep=function(v){function G(V){var Q,ba,la,na,oa=M.length,pa=s.loop;A.position(V,function(){function qa(){z&&H[0].style.removeAttribute("filter")}if(ea){z&&D&&N.fadeIn(100);N.show();c(y);ca.show().html(s.title);if(oa>1){typeof s.current==="string"&&L.html(s.current.replace(/\{current\}/,K+1).replace(/\{total\}/,oa)).show();
ga[pa||K<oa-1?"show":"hide"]().html(s.next);Z[pa||K?"show":"hide"]().html(s.previous);Q=K?M[K-1]:M[oa-1];la=K<oa-1?M[K+1]:M[0];s.slideshow&&W.show();if(s.preloading){na=a.data(la,o).href||la.href;ba=a.data(Q,o).href||Q.href;na=a.isFunction(na)?na.call(la):na;ba=a.isFunction(ba)?ba.call(Q):ba;if(j(na))a("<img/>")[0].src=na;if(j(ba))a("<img/>")[0].src=ba}}T.hide();s.transition==="fade"?H.fadeTo(S,1,function(){qa()}):qa();O.bind("resize."+n,function(){A.position(0)});c(x,s.onComplete)}})}if(ea){var D,
S=s.transition==="none"?0:s.speed;O.unbind("resize."+n);N.remove();N=f("LoadedContent").html(v);N.hide().appendTo(I.show()).css({width:function(){s.w=s.w||N.width();s.w=s.mw&&s.mw<s.w?s.mw:s.w;return s.w}(),overflow:s.scrolling?"auto":"hidden"}).css({height:function(){s.h=s.h||N.height();s.h=s.mh&&s.mh<s.h?s.mh:s.h;return s.h}()}).prependTo(J);I.hide();a("#"+n+"Photo").css({cssFloat:"none",marginLeft:"auto",marginRight:"auto"});if(B)a("select").not(H.find("select")).filter(function(){return this.style.visibility!==
"hidden"}).css({visibility:"hidden"}).one(w,function(){this.style.visibility="inherit"});s.transition==="fade"?H.fadeTo(S,0,function(){G(0)}):G(S)}};A.load=function(v){var G,D,S,V=A.prep;ma=true;X=M[K];v||(s=b(a.extend({},a.data(X,o))));c(r);c(t,s.onLoad);s.h=s.height?h(s.height,"y")-fa-U:s.innerHeight&&h(s.innerHeight,"y");s.w=s.width?h(s.width,"x")-Y-ia:s.innerWidth&&h(s.innerWidth,"x");s.mw=s.w;s.mh=s.h;if(s.maxWidth){s.mw=h(s.maxWidth,"x")-Y-ia;s.mw=s.w&&s.w<s.mw?s.w:s.mw}if(s.maxHeight){s.mh=
h(s.maxHeight,"y")-fa-U;s.mh=s.h&&s.h<s.mh?s.h:s.mh}G=s.href;T.show();if(s.inline){f().hide().insertBefore(a(G)[0]).one(r,function(){a(this).replaceWith(N.children())});V(a(G))}else if(s.iframe){H.one(y,function(){var Q=a("<iframe frameborder='0' style='width:100%; height:100%; border:0; display:block'/>")[0];Q.name=n+ +new Date;Q.src=s.href;if(!s.scrolling)Q.scrolling="no";if(z)Q.allowtransparency="true";a(Q).appendTo(N).one(r,function(){Q.src="//about:blank"})});V(" ")}else if(s.html)V(s.html);
else if(j(G)){D=new Image;D.onload=function(){var Q;D.onload=null;D.id=n+"Photo";a(D).css({border:"none",display:"block",cssFloat:"left"});if(s.scalePhotos){S=function(){D.height-=D.height*Q;D.width-=D.width*Q};if(s.mw&&D.width>s.mw){Q=(D.width-s.mw)/D.width;S()}if(s.mh&&D.height>s.mh){Q=(D.height-s.mh)/D.height;S()}}if(s.h)D.style.marginTop=Math.max(s.h-D.height,0)/2+"px";if(M[1]&&(K<M.length-1||s.loop))a(D).css({cursor:"pointer"}).click(A.next);if(z)D.style.msInterpolationMode="bicubic";setTimeout(function(){V(D)},
1)};setTimeout(function(){D.src=G},1)}else G&&I.load(G,function(Q,ba,la){V(ba==="error"?"Request unsuccessful: "+la.statusText:a(this).children())})};A.next=function(){if(!ma){K=K<M.length-1?K+1:0;A.load()}};A.prev=function(){if(!ma){K=K?K-1:M.length-1;A.load()}};A.close=function(){if(ea&&!E){E=true;ea=false;c(w,s.onCleanup);O.unbind("."+n+" ."+C);P.fadeTo("fast",0);H.stop().fadeTo("fast",0,function(){c(r);N.remove();H.add(P).css({opacity:1,cursor:"auto"}).hide();setTimeout(function(){E=false;c(u,
s.onClosed)},1)})}};A.element=function(){return a(X)};A.settings=m;a(A.init)})(jQuery,this);
(function(a,g){function f(){this.debug=true;this._curInst=null;this._isInline=false;this._disabledInputs=[];this._inDialog=this._timepickerShowing=false;this._dialogClass="ui-timepicker-dialog";this._mainDivId="ui-timepicker-div";this._inlineClass="ui-timepicker-inline";this._currentClass="ui-timepicker-current";this._dayOverClass="ui-timepicker-days-cell-over";this.regional=[];this.regional[""]={hourText:"Hour",minuteText:"Minute",amPmText:["AM","PM"]};this._defaults={showOn:"focus",showAnim:"fadeIn",
showOptions:{},appendText:"",onSelect:null,onClose:null,timeSeparator:":",showPeriod:false,showLeadingZero:true,showMinutesLeadingZero:true,altField:"",defaultTime:""};a.extend(this._defaults,this.regional[""]);this.tpDiv=a('<div id="'+this._mainDivId+'" class="ui-timepicker ui-widget ui-helper-clearfix ui-corner-all " style="display: none"></div>')}function h(b,c){a.extend(b,c);for(var e in c)if(c[e]==null||c[e]==g)b[e]=c[e];return b}a.extend(a.ui,{timepicker:{version:"0.0.1"}});var j=(new Date).getTime();
a.extend(f.prototype,{markerClassName:"hasTimepicker",log:function(){this.debug&&console.log.apply("",arguments)},_widgetTimepicker:function(){return this.tpDiv},setDefaults:function(b){h(this._defaults,b||{});return this},_attachTimepicker:function(b,c){var e=null,k;for(k in this._defaults){var m=b.getAttribute("time:"+k);if(m){e=e||{};try{e[k]=eval(m)}catch(o){e[k]=m}}}k=b.nodeName.toLowerCase();m=k=="div"||k=="span";if(!b.id){this.uuid+=1;b.id="tp"+this.uuid}var n=this._newInst(a(b),m);n.settings=
a.extend({},c||{},e||{});if(k=="input")this._connectTimepicker(b,n);else m&&this._inlineTimepicker(b,n)},_newInst:function(b,c){return{id:b[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:b,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:c,tpDiv:!c?this.tpDiv:a('<div class="'+this._inlineClass+' ui-timepicker ui-widget  ui-helper-clearfix"></div>')}},_connectTimepicker:function(b,c){var e=a(b);c.append=a([]);c.trigger=a([]);if(!e.hasClass(this.markerClassName)){this._attachments(e,
c);e.addClass(this.markerClassName).keydown(this._doKeyDown).keyup(this._doKeyUp).bind("setData.timepicker",function(k,m,o){c.settings[m]=o}).bind("getData.timepicker",function(k,m){return this._get(c,m)});a.data(b,"timepicker",c)}},_doKeyDown:function(b){var c=true;a.timepicker._getInst(b.target)._keyEvent=true;if(a.timepicker._timepickerShowing)switch(b.keyCode){case 9:a.timepicker._hideTimepicker();c=false;break;case 27:a.timepicker._hideTimepicker();break;default:c=false}else if(b.keyCode==36&&
b.ctrlKey)a.timepicker._showTimepicker(this);else c=false;if(c){b.preventDefault();b.stopPropagation()}},_doKeyUp:function(b){b=a.timepicker._getInst(b.target);a.timepicker._setTimeFromField(b);a.timepicker._updateTimepicker(b)},_attachments:function(b,c){var e=this._get(c,"appendText"),k=this._get(c,"isRTL");c.append&&c.append.remove();if(e){c.append=a('<span class="'+this._appendClass+'">'+e+"</span>");b[k?"before":"after"](c.append)}b.unbind("focus",this._showTimepicker);c.trigger&&c.trigger.remove();
e=this._get(c,"showOn");if(e=="focus"||e=="both")b.focus(this._showTimepicker);if(e=="button"||e=="both"){e=this._get(c,"buttonText");var m=this._get(c,"buttonImage");c.trigger=a(this._get(c,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:m,alt:e,title:e}):a('<button type="button"></button>').addClass(this._triggerClass).html(m==""?e:a("<img/>").attr({src:m,alt:e,title:e})));b[k?"before":"after"](c.trigger);c.trigger.click(function(){a.timepicker._timepickerShowing&&a.timepicker._lastInput==
b[0]?a.timepicker._hideTimepicker():a.timepicker._showTimepicker(b[0]);return false})}},_inlineTimepicker:function(b,c){var e=a(b);if(!e.hasClass(this.markerClassName)){e.addClass(this.markerClassName).append(c.tpDiv).bind("setData.timepicker",function(k,m,o){c.settings[m]=o}).bind("getData.timepicker",function(k,m){return this._get(c,m)});a.data(b,"timepicker",c);this._setTimeFromField(c);this._updateTimepicker(c);c.tpDiv.show()}},_showTimepicker:function(b){b=b.target||b;if(b.nodeName.toLowerCase()!=
"input")b=a("input",b.parentNode)[0];if(!(a.timepicker._isDisabledTimepicker(b)||a.timepicker._lastInput==b)){var c=a.timepicker._getInst(b);a.timepicker._curInst&&a.timepicker._curInst!=c&&a.timepicker._curInst.tpDiv.stop(true,true);var e=a.timepicker._get(c,"beforeShow");h(c.settings,e?e.apply(b,[b,c]):{});c.lastVal=null;a.timepicker._lastInput=b;a.timepicker._setTimeFromField(c);if(a.timepicker._inDialog)b.value="";if(!a.timepicker._pos){a.timepicker._pos=a.timepicker._findPos(b);a.timepicker._pos[1]+=
b.offsetHeight}var k=false;a(b).parents().each(function(){k|=a(this).css("position")=="fixed";return!k});if(k&&a.browser.opera){a.timepicker._pos[0]-=document.documentElement.scrollLeft;a.timepicker._pos[1]-=document.documentElement.scrollTop}e={left:a.timepicker._pos[0],top:a.timepicker._pos[1]};a.timepicker._pos=null;c.tpDiv.css({position:"absolute",display:"block",top:"-1000px"});a.timepicker._updateTimepicker(c);c._hoursClicked=false;c._minutesClicked=false;e=a.timepicker._checkOffset(c,e,k);
c.tpDiv.css({position:a.timepicker._inDialog&&a.blockUI?"static":k?"fixed":"absolute",display:"none",left:e.left+"px",top:e.top+"px"});if(!c.inline){e=a.timepicker._get(c,"showAnim");var m=a.timepicker._get(c,"duration"),o=function(){a.timepicker._timepickerShowing=true;var n=a.timepicker._getBorders(c.tpDiv);c.tpDiv.find("iframe.ui-timepicker-cover").css({left:-n[0],top:-n[1],width:c.tpDiv.outerWidth(),height:c.tpDiv.outerHeight()})};c.tpDiv.zIndex(a(b).zIndex()+1);if(a.effects&&a.effects[e])c.tpDiv.show(e,
a.timepicker._get(c,"showOptions"),m,o);else c.tpDiv[e||"show"](e?m:null,o);if(!e||!m)o();c.input.is(":visible")&&!c.input.is(":disabled")&&c.input.focus();a.timepicker._curInst=c}}},_updateTimepicker:function(b){var c=this,e=a.timepicker._getBorders(b.tpDiv);b.tpDiv.empty().append(this._generateHTML(b)).find("iframe.ui-timepicker-cover").css({left:-e[0],top:-e[1],width:b.tpDiv.outerWidth(),height:b.tpDiv.outerHeight()}).end().find(".ui-timepicker td a").bind("mouseout",function(){a(this).removeClass("ui-state-hover");
this.className.indexOf("ui-timepicker-prev")!=-1&&a(this).removeClass("ui-timepicker-prev-hover");this.className.indexOf("ui-timepicker-next")!=-1&&a(this).removeClass("ui-timepicker-next-hover")}).bind("mouseover",function(){if(!c._isDisabledTimepicker(b.inline?b.tpDiv.parent()[0]:b.input[0])){a(this).parents(".ui-timepicker-calendar").find("a").removeClass("ui-state-hover");a(this).addClass("ui-state-hover");this.className.indexOf("ui-timepicker-prev")!=-1&&a(this).addClass("ui-timepicker-prev-hover");
this.className.indexOf("ui-timepicker-next")!=-1&&a(this).addClass("ui-timepicker-next-hover")}}).end().find("."+this._dayOverClass+" a").trigger("mouseover").end()},_generateHTML:function(b){var c,e="",k=this._get(b,"showPeriod")==true,m=this._get(b,"showLeadingZero")==true,o=this._get(b,"showMinutesLeadingZero")==true,n=this._get(b,"amPmText");e='<table class="ui-timepicker-table ui-widget-content ui-corner-all"><tr><td class="ui-timepicker-hours"><div class="ui-timepicker-title ui-widget-header ui-helper-clearfix ui-corner-all">'+
this._get(b,"hourText")+'</div><table class="ui-timepicker">';e+='<tr><th rowspan="2" class="periods">'+n[0]+"</th>";for(c=0;c<=5;c++)e+=this._generateHTMLHourCell(b,c,k,m);e+="</tr><tr>";for(c=6;c<=11;c++)e+=this._generateHTMLHourCell(b,c,k,m);e+='</tr><tr><th rowspan="2" class="periods">'+n[1]+"</th>";for(c=12;c<=17;c++)e+=this._generateHTMLHourCell(b,c,k,m);e+="</tr><tr>";for(c=18;c<=23;c++)e+=this._generateHTMLHourCell(b,c,k,m);e+='</tr></table></td><td class="ui-timepicker-minutes"><div class="ui-timepicker-title ui-widget-header ui-helper-clearfix ui-corner-all">'+
this._get(b,"minuteText")+'</div><table class="ui-timepicker"><tr>';for(c=0;c<15;c+=5)e+=this._generateHTMLMinuteCell(b,c,c<10&&o?"0"+c.toString():c.toString());e+="</tr><tr>";for(c=15;c<30;c+=5)e+=this._generateHTMLMinuteCell(b,c,c.toString());e+="</tr><tr>";for(c=30;c<45;c+=5)e+=this._generateHTMLMinuteCell(b,c,c.toString());e+="</tr><tr>";for(c=45;c<60;c+=5)e+=this._generateHTMLMinuteCell(b,c,c.toString());e+="</tr></table></td></tr></table>";return e},_generateHTMLHourCell:function(b,c,e,k){var m=
c;if(c>12&&e)m=c-12;if(m==0&&e)m=12;if(m<10&&k)m="0"+m;return'<td onclick="TP_jQuery_'+j+".timepicker.selectHours('#"+b.id+"', "+c.toString()+', this ); return false;" ondblclick="TP_jQuery_'+j+".timepicker.selectHours('#"+b.id+"', "+c.toString()+', this, true ); return false;" ><a href="#" class="ui-state-default '+(c==b.hours?"ui-state-active":"")+'">'+m.toString()+"</a></td>"},_generateHTMLMinuteCell:function(b,c,e){return'<td onclick="TP_jQuery_'+j+".timepicker.selectMinutes('#"+b.id+"', "+c.toString()+
', this ); return false;" ondblclick="TP_jQuery_'+j+".timepicker.selectMinutes('#"+b.id+"', "+c.toString()+', this, true ); return false;" ><a href="#" class="ui-state-default '+(c==b.minutes?"ui-state-active":"")+'" >'+e+"</a></td>"},_isDisabledTimepicker:function(b){if(!b)return false;for(var c=0;c<this._disabledInputs.length;c++)if(this._disabledInputs[c]==b)return true;return false},_checkOffset:function(b,c,e){var k=b.tpDiv.outerWidth(),m=b.tpDiv.outerHeight(),o=b.input?b.input.outerWidth():
0,n=b.input?b.input.outerHeight():0,p=document.documentElement.clientWidth+a(document).scrollLeft(),t=document.documentElement.clientHeight+a(document).scrollTop();c.left-=this._get(b,"isRTL")?k-o:0;c.left-=e&&c.left==b.input.offset().left?a(document).scrollLeft():0;c.top-=e&&c.top==b.input.offset().top+n?a(document).scrollTop():0;c.left-=Math.min(c.left,c.left+k>p&&p>k?Math.abs(c.left+k-p):0);c.top-=Math.min(c.top,c.top+m>t&&t>m?Math.abs(m+n):0);return c},_findPos:function(b){for(var c=this._get(this._getInst(b),
"isRTL");b&&(b.type=="hidden"||b.nodeType!=1);)b=b[c?"previousSibling":"nextSibling"];b=a(b).offset();return[b.left,b.top]},_getBorders:function(b){var c=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(c(b.css("border-left-width"))),parseFloat(c(b.css("border-top-width")))]},_checkExternalClick:function(b){if(a.timepicker._curInst){b=a(b.target);b[0].id!=a.timepicker._mainDivId&&b.parents("#"+a.timepicker._mainDivId).length==0&&!b.hasClass(a.timepicker.markerClassName)&&!b.hasClass(a.timepicker._triggerClass)&&
a.timepicker._timepickerShowing&&!(a.timepicker._inDialog&&a.blockUI)&&a.timepicker._hideTimepicker()}},_hideTimepicker:function(b){var c=this._curInst;if(!(!c||b&&c!=a.data(b,"timepicker")))if(this._timepickerShowing){b=this._get(c,"showAnim");var e=this._get(c,"duration"),k=function(){a.timepicker._tidyDialog(c);this._curInst=null};if(a.effects&&a.effects[b])c.tpDiv.hide(b,a.timepicker._get(c,"showOptions"),e,k);else c.tpDiv[b=="slideDown"?"slideUp":b=="fadeIn"?"fadeOut":"hide"](b?e:null,k);b||
k();if(b=this._get(c,"onClose"))b.apply(c.input?c.input[0]:null,[c.input?c.input.val():"",c]);this._timepickerShowing=false;this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if(a.blockUI){a.unblockUI();a("body").append(this.tpDiv)}}this._inDialog=false}},_tidyDialog:function(b){b.tpDiv.removeClass(this._dialogClass).unbind(".ui-timepicker")},_getInst:function(b){try{return a.data(b,"timepicker")}catch(c){throw"Missing instance data for this timepicker";
}},_get:function(b,c){return b.settings[c]!==g?b.settings[c]:this._defaults[c]},_setTimeFromField:function(b){if(b.input.val()!=b.lastVal){var c=this._get(b,"defaultTime"),e=this._getCurrentTimeRounded(b);if(c!="")e=c;if(b.inline==false&&b.input.val()!="")e=b.input.val();c=b.lastVal=e;c=this.parseTime(b,c);b.hours=c.hours;b.minutes=c.minutes}},_getCurrentTimeRounded:function(b){var c=new Date;b=this._get(b,"timeSeparator");var e=c.getMinutes();e=Math.round(e/5)*5;return c.getHours().toString()+b+
e.toString()},parseTime:function(b,c){var e={};e.hours=-1;e.minutes=-1;var k=this._get(b,"timeSeparator"),m=this._get(b,"amPmText");k=c.indexOf(k);if(k==-1)return e;e.hours=parseInt(c.substr(0,k),10);e.minutes=parseInt(c.substr(k+1),10);k=this._get(b,"showPeriod")==true;var o=c.toUpperCase();if(e.hours<12&&k&&o.indexOf(m[1].toUpperCase())!=-1)e.hours+=12;if(e.hours==12&&k&&o.indexOf(m[0].toUpperCase())!=-1)e.hours=0;return e},selectHours:function(b,c,e,k){b=this._getInst(a(b)[0]);a(e).parents(".ui-timepicker-hours:first").find("a").removeClass("ui-state-active");
a(e).children("a").addClass("ui-state-active");b.hours=c;this._updateSelectedValue(b);b._hoursClicked=true;if(b._minutesClicked||k)a.timepicker._hideTimepicker()},selectMinutes:function(b,c,e,k){b=this._getInst(a(b)[0]);a(e).parents(".ui-timepicker-minutes:first").find("a").removeClass("ui-state-active");a(e).children("a").addClass("ui-state-active");b.minutes=c;this._updateSelectedValue(b);b._minutesClicked=true;if(b._hoursClicked||k)a.timepicker._hideTimepicker()},_updateSelectedValue:function(b){if(b.hours<
0||b.hours>23)b.hours=12;if(b.minutes<0||b.minutes>59)b.minutes=0;var c="",e=this._get(b,"showPeriod")==true,k=this._get(b,"showLeadingZero")==true,m=this._get(b,"amPmText"),o=b.minutes?b.minutes:0,n=b.hours?b.hours:0;n||(displayHoyrs=0);if(e){if(b.hours==0)n=12;if(b.hours<12)c=m[0];else{c=m[1];if(n>12)n-=12}}e=n.toString();if(k&&n<10)e="0"+e;k=o.toString();if(o<10)k="0"+k;o=e+this._get(b,"timeSeparator")+k;if(c.length>0)o+=" "+c;if(b.input){b.input.val(o);b.input.trigger("change")}if(c=this._get(b,
"onSelect"))c.apply(b.input?b.input[0]:null,[o,b]);this._updateAlternate(b,o);return o},_updateAlternate:function(b,c){var e=this._get(b,"altField");e&&a(e).each(function(){a(this).val(c)})}});a.fn.timepicker=function(b){if(!a.timepicker.initialized){a(document).mousedown(a.timepicker._checkExternalClick).find("body").append(a.timepicker.tpDiv);a.timepicker.initialized=true}var c=Array.prototype.slice.call(arguments,1);if(typeof b=="string"&&(b=="isDisabled"||b=="getDate"||b=="widget"))return a.timepicker["_"+
b+"Datepicker"].apply(a.timepicker,[this[0]].concat(c));if(b=="option"&&arguments.length==2&&typeof arguments[1]=="string")return a.timepicker["_"+b+"Datepicker"].apply(a.timepicker,[this[0]].concat(c));return this.each(function(){typeof b=="string"?a.timepicker["_"+b+"Datepicker"].apply(a.timepicker,[this].concat(c)):a.timepicker._attachTimepicker(this,b)})};a.timepicker=new f;a.timepicker.initialized=false;a.timepicker.uuid=(new Date).getTime();a.timepicker.version="1.8.6";window["TP_jQuery_"+j]=
a})(jQuery);
(function(a){a.cluetip={version:"1.0.7"};var g,f,h,j,b,c,e,k;a.fn.cluetip=function(n,p){if(typeof n=="object"){p=n;n=null}if(n=="destroy")return this.removeData("thisInfo").unbind(".cluetip");return this.each(function(t){function x(){return false}var w=this,u=a(this),r=a.extend(true,{},a.fn.cluetip.defaults,p||{},a.metadata?u.metadata():a.meta?u.data():{}),y=false,z=+r.cluezIndex;u.data("thisInfo",{title:w.title,zIndex:z});var B=false,C=0;if(!a("#cluetip").length){a('<div id="cluetip"><div id="cluetip-outer"><h3 id="cluetip-title"></h3><div id="cluetip-inner"></div></div><div id="cluetip-extra"></div><div id="cluetip-arrows" class="cluetip-arrows"></div></div>')[m](o).hide();g=
a("#cluetip").css({position:"absolute"});h=a("#cluetip-outer").css({position:"relative",zIndex:z});f=a("#cluetip-inner");j=a("#cluetip-title");b=a("#cluetip-arrows");c=a('<div id="cluetip-waitimage"></div>').css({position:"absolute"}).insertBefore(g).hide()}var P=r.dropShadow?+r.dropShadowSteps:0;if(!e){e=a([]);for(var H=0;H<P;H++)e=e.add(a("<div></div>").css({zIndex:z-1,opacity:0.1,top:1+H,left:1+H}));e.css({position:"absolute",backgroundColor:"#000"}).prependTo(g)}var F=u.attr(r.attribute),J=r.cluetipClass;
if(!F&&!r.splitTitle&&!n)return true;if(r.local&&r.localPrefix)F=r.localPrefix+F;r.local&&r.hideLocal&&a(F+":first").hide();var aa=parseInt(r.topOffset,10),ha=parseInt(r.leftOffset,10),da,ja,M=isNaN(parseInt(r.height,10))?"auto":/\D/g.test(r.height)?r.height:r.height+"px",O,N,I,T,ca,L=parseInt(r.width,10)||275,W=L+(parseInt(g.css("paddingLeft"),10)||0)+(parseInt(g.css("paddingRight"),10)||0)+P,ga=this.offsetWidth,Z,R,U,ia,fa,Y=r.attribute!="title"?u.attr(r.titleAttribute):"";if(r.splitTitle){if(Y==
undefined)Y="";fa=Y.split(r.splitTitle);Y=fa.shift()}if(r.escapeTitle)Y=Y.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;");var X=function(E){if(!r.onActivate(u))return false;B=true;g.removeClass().css({width:L});F==u.attr("href")&&u.css("cursor",r.cursor);r.hoverClass&&u.addClass(r.hoverClass);N=u.offset().top;Z=u.offset().left;U=E.pageX;T=E.pageY;if(w.tagName.toLowerCase()!="area"){O=a(document).scrollTop();ia=a(window).width()}if(r.positionBy=="fixed"){R=ga+Z+ha;g.css({left:R})}else{R=
ga>Z&&Z>W||Z+ga+W+ha>ia?Z-W-ha:ga+Z+ha;if(w.tagName.toLowerCase()=="area"||r.positionBy=="mouse"||ga+W>ia)if(U+20+W>ia){g.addClass(" cluetip-"+J);R=U-W-ha>=0?U-W-ha-parseInt(g.css("marginLeft"),10)+parseInt(f.css("marginRight"),10):U-W/2}else R=U+ha;var A=R<0?E.pageY+aa:E.pageY;g.css({left:R>0&&r.positionBy!="bottomTop"?R:U+W/2>ia?ia/2-W/2:Math.max(U-W/2,0),zIndex:u.data("thisInfo").zIndex});b.css({zIndex:u.data("thisInfo").zIndex+1})}ja=a(window).height();if(n){if(typeof n=="function")n=n.call(w);
f.html(n);K(A)}else if(fa){E=fa.length;f.html(E?fa[0]:"");if(E>1)for(var ka=1;ka<E;ka++)f.append('<div class="split-body">'+fa[ka]+"</div>");K(A)}else if(!r.local&&F.indexOf("#")!==0)if(/\.(jpe?g|tiff?|gif|png)$/i.test(F)){f.html('<img src="'+F+'" alt="'+Y+'" />');K(A)}else if(y&&r.ajaxCache){f.html(y);K(A)}else{var v=r.ajaxSettings.beforeSend,G=r.ajaxSettings.error,D=r.ajaxSettings.success,S=r.ajaxSettings.complete;E=a.extend(true,{},r.ajaxSettings,{cache:false,url:F,beforeSend:function(V){v&&v.call(w,
V,g,f);h.children().empty();r.waitImage&&c.css({top:T+20,left:U+20,zIndex:u.data("thisInfo").zIndex-1}).show()},error:function(V,Q){if(B)G?G.call(w,V,Q,g,f):f.html("<i>sorry, the contents could not be loaded</i>")},success:function(V,Q){y=r.ajaxProcess.call(w,V);if(B){D&&D.call(w,V,Q,g,f);f.html(y)}},complete:function(V,Q){S&&S.call(w,V,Q,g,f);var ba=f[0].getElementsByTagName("img");k=ba.length;for(var la=0,na=ba.length;la<na;la++)ba[la].complete&&k--;if(k&&!a.browser.opera)a(ba).bind("load error",
function(){k--;if(k<1){c.hide();B&&K(A)}});else{c.hide();B&&K(A)}}});a.ajax(E)}else if(r.local){E=a(F+(/#\S+$/.test(F)?"":":eq("+t+")")).clone(true).show();f.html(E);K(A)}},K=function(E){g.addClass("cluetip-"+J);if(r.truncate){var A=f.text().slice(0,r.truncate)+"...";f.html(A)}Y?j.show().html(Y):r.showTitle?j.show().html("&nbsp;"):j.hide();if(r.sticky){A=a('<div id="cluetip-close"><a href="#">'+r.closeText+"</a></div>");r.closePosition=="bottom"?A.appendTo(f):r.closePosition=="title"?A.prependTo(j):
A.prependTo(f);A.bind("click.cluetip",function(){ea();return false});r.mouseOutClose?g.bind("mouseleave.cluetip",function(){ea()}):g.unbind("mouseleave.cluetip")}A="";h.css({zIndex:u.data("thisInfo").zIndex,overflow:M=="auto"?"visible":"auto",height:M});da=M=="auto"?Math.max(g.outerHeight(),g.height()):parseInt(M,10);I=N;ca=O+ja;if(r.positionBy=="fixed")I=N-r.dropShadowSteps+aa;else if(R<U&&Math.max(R,0)+W>U||r.positionBy=="bottomTop")if(N+da+aa>ca&&T-O>da+aa){I=T-da-aa;A="top"}else{I=T+aa;A="bottom"}else I=
N+da+aa>ca?da>=ja?O:ca-da-aa:u.css("display")=="block"||w.tagName.toLowerCase()=="area"||r.positionBy=="mouse"?E-aa:N-r.dropShadowSteps;if(A=="")R<Z?A="left":A="right";g.css({top:I+"px"}).removeClass().addClass("clue-"+A+"-"+J).addClass(" cluetip-"+J);if(r.arrows){E=N-I-r.dropShadowSteps;b.css({top:/(left|right)/.test(A)&&R>=0&&E>0?E+"px":/(left|right)/.test(A)?0:""}).show()}else b.hide();e.hide();g.hide()[r.fx.open](r.fx.openSpeed||0);r.dropShadow&&e.css({height:da,width:L,zIndex:u.data("thisInfo").zIndex-
1}).show();a.fn.bgiframe&&g.bgiframe();if(r.delayedClose>0)C=setTimeout(ea,r.delayedClose);r.onShow.call(w,g,f)},s=function(){B=false;c.hide();if(!r.sticky||/click|toggle/.test(r.activation)){ea();clearTimeout(C)}r.hoverClass&&u.removeClass(r.hoverClass)},ea=function(){h.parent().hide().removeClass();r.onHide.call(w,g,f);u.removeClass("cluetip-clicked");Y&&u.attr(r.titleAttribute,Y);u.css("cursor","");r.arrows&&b.css({top:""})};a(document).bind("hideCluetip",function(){ea()});if(/click|toggle/.test(r.activation))u.bind("click.cluetip",
function(E){if(g.is(":hidden")||!u.is(".cluetip-clicked")){X(E);a(".cluetip-clicked").removeClass("cluetip-clicked");u.addClass("cluetip-clicked")}else s(E);this.blur();return false});else if(r.activation=="focus"){u.bind("focus.cluetip",function(E){X(E)});u.bind("blur.cluetip",function(E){s(E)})}else{u[r.clickThrough?"unbind":"bind"]("click",x);var ma=function(E){if(r.tracking==true){var A=R-E.pageX,ka=I?I-E.pageY:N-E.pageY;u.bind("mousemove.cluetip",function(v){g.css({left:v.pageX+A,top:v.pageY+
ka})})}};a.fn.hoverIntent&&r.hoverIntent?u.hoverIntent({sensitivity:r.hoverIntent.sensitivity,interval:r.hoverIntent.interval,over:function(E){X(E);ma(E)},timeout:r.hoverIntent.timeout,out:function(E){s(E);u.unbind("mousemove.cluetip")}}):u.bind("mouseenter.cluetip",function(E){X(E);ma(E)}).bind("mouseleave.cluetip",function(E){s(E);u.unbind("mousemove.cluetip")});u.bind("mouseover.cluetip",function(){u.attr("title","")}).bind("mouseleave.cluetip",function(){u.attr("title",u.data("thisInfo").title)})}})};
a.fn.cluetip.defaults={width:275,height:"auto",cluezIndex:97,positionBy:"auto",topOffset:15,leftOffset:15,local:false,localPrefix:null,hideLocal:true,attribute:"rel",titleAttribute:"title",splitTitle:"",escapeTitle:false,showTitle:true,cluetipClass:"default",hoverClass:"",waitImage:true,cursor:"help",arrows:false,dropShadow:true,dropShadowSteps:6,sticky:false,mouseOutClose:false,activation:"hover",clickThrough:false,tracking:false,delayedClose:0,closePosition:"top",closeText:"Close",truncate:0,fx:{open:"show",
openSpeed:""},hoverIntent:{sensitivity:3,interval:50,timeout:0},onActivate:function(){return true},onShow:function(){},onHide:function(){},ajaxCache:true,ajaxProcess:function(n){return n=n.replace(/<(script|style|title)[^<]+<\/(script|style|title)>/gm,"").replace(/<(link|meta)[^>]+>/g,"")},ajaxSettings:{dataType:"html"},debug:false};var m="appendTo",o="body";a.cluetip.setup=function(n){if(n&&n.insertionType&&n.insertionType.match(/appendTo|prependTo|insertBefore|insertAfter/))m=n.insertionType;if(n&&
n.insertionElement)o=n.insertionElement}})(jQuery);
jQuery&&function(a){function g(c,e,k){for(var m="",o=0;o<e.length;o++)if(e[o].optgroup){m+='<label class="optGroup">';m+=k.optGroupSelectable?'<input type="checkbox" class="optGroup" />'+e[o].optgroup:e[o].optgroup;m+='</label><div class="optGroupContainer">';m+=g(c,e[o].options,k);m+="</div>"}else{var n=e[o],p='<label><input type="checkbox" name="'+c+'[]" value="'+n.value+'"';if(n.selected)p+=' checked="checked"';p+=" />"+n.text+"</label>";m+=p}return m}function f(c){var e=a(this),k=e.next(".multiSelectOptions"),
m=e.data("config"),o=e.data("callback");k.html("");var n="";if(m.selectAll)n+='<label class="selectAll"><input type="checkbox" class="selectAll" />'+m.selectAllText+"</label>";n+=g(e.attr("id"),c,m);k.html(n);c=k.width();n=false;if(k.height()>m.listHeight){k.css("height",m.listHeight+"px");n=true}else k.css("height","");c=n&&c==k.width()?17:0;k.width()+c<e.outerWidth()?k.css("width",e.outerWidth()-2+"px"):k.css("width",k.width()+c+"px");a.fn.bgiframe&&e.next(".multiSelectOptions").bgiframe({width:k.width(),
height:k.height()});m.selectAll&&k.find("INPUT.selectAll").click(function(){k.find("INPUT:checkbox").attr("checked",a(this).attr("checked")).parent("LABEL").toggleClass("checked",a(this).attr("checked"))});if(m.optGroupSelectable){k.addClass("optGroupHasCheckboxes");k.find("INPUT.optGroup").click(function(){a(this).parent().next().find("INPUT:checkbox").attr("checked",a(this).attr("checked")).parent("LABEL").toggleClass("checked",a(this).attr("checked"))})}k.find("INPUT:checkbox").click(function(){a(this).parent("LABEL").toggleClass("checked",
a(this).attr("checked"));b.call(e);e.focus();a(this).parent().parent().hasClass("optGroupContainer")&&j.call(e,a(this).parent().parent().prev());o&&o(a(this))});k.each(function(){a(this).find("INPUT:checked").parent().addClass("checked")});b.call(e);m.optGroupSelectable&&k.find("LABEL.optGroup").each(function(){j.call(e,a(this))});k.find("LABEL:has(INPUT)").hover(function(){a(this).parent().find("LABEL").removeClass("hover");a(this).addClass("hover")},function(){a(this).parent().find("LABEL").removeClass("hover")});
e.keydown(function(p){var t=a(this).next(".multiSelectOptions");if(t.css("visibility")!="hidden"){if(p.keyCode==9){a(this).addClass("focus").trigger("click");a(this).focus().next(":input").focus();return true}if(p.keyCode==27||p.keyCode==37||p.keyCode==39)a(this).addClass("focus").trigger("click");if(p.keyCode==40||p.keyCode==38){var x=t.find("LABEL"),w=x.index(x.filter(".hover")),u=-1;if(w<0)t.find("LABEL:first").addClass("hover");else if(p.keyCode==40&&w<x.length-1)u=w+1;else if(p.keyCode==38&&
w>0)u=w-1;if(u>=0){a(x.get(w)).removeClass("hover");a(x.get(u)).addClass("hover");h(t)}return false}if(p.keyCode==13||p.keyCode==32){p=t.find("LABEL.hover INPUT:checkbox");p.attr("checked",!p.attr("checked")).parent("LABEL").toggleClass("checked",p.attr("checked"));p.hasClass("selectAll")&&t.find("INPUT:checkbox").attr("checked",p.attr("checked")).parent("LABEL").addClass("checked").toggleClass("checked",p.attr("checked"));b.call(e);o&&o(a(this));return false}if(p.keyCode>=33&&p.keyCode<=126){x=t.find("LABEL:startsWith("+
String.fromCharCode(p.keyCode)+")");var r=x.index(x.filter("LABEL.hover"));w=x.filter(function(y){return y>r});x=(w.length>=1?w:x).filter("LABEL:first");if(x.length==1){t.find("LABEL.hover").removeClass("hover");x.addClass("hover");h(t)}}}else{if(p.keyCode==38||p.keyCode==40||p.keyCode==13||p.keyCode==32){a(this).removeClass("focus").trigger("click");t.find("LABEL:first").addClass("hover");return false}if(p.keyCode==9){t.next(":input").focus();return true}}if(p.keyCode==13)return false})}function h(c){var e=
c.find("LABEL.hover").position().top+c.find("LABEL.hover").outerHeight();e>c.innerHeight()&&c.scrollTop(c.scrollTop()+e-c.innerHeight());c.find("LABEL.hover").position().top<0&&c.scrollTop(c.scrollTop()+c.find("LABEL.hover").position().top)}function j(c){if(a(this).data("config").optGroupSelectable){var e=true;a(c).next().find("INPUT:checkbox").each(function(){if(!a(this).attr("checked"))return e=false});a(c).find("INPUT.optGroup").attr("checked",e).parent("LABEL").toggleClass("checked",e)}}function b(){var c=
a(this),e=c.next(".multiSelectOptions"),k=c.data("config"),m=0,o=true,n="";e.find("INPUT:checkbox").not(".selectAll, .optGroup").each(function(){if(a(this).attr("checked")){m++;n=n+a(this).parent().text()+", "}else o=false});n=n.replace(/\s*\,\s*$/,"");if(m==0)c.find("span").html(k.noneSelected);else if(k.oneOrMoreSelected=="*"){c.find("span").html(n);c.attr("title",n)}else c.find("span").html(k.oneOrMoreSelected.replace("%",m));k.selectAll&&e.find("INPUT.selectAll").attr("checked",o).parent("LABEL").toggleClass("checked",
o)}a.extend(a.fn,{multiSelect:function(c,e){c||(c={});if(c.selectAll==undefined)c.selectAll=true;if(c.selectAllText==undefined)c.selectAllText="Select All";if(c.noneSelected==undefined)c.noneSelected="Select options";if(c.oneOrMoreSelected==undefined)c.oneOrMoreSelected="% selected";if(c.optGroupSelectable==undefined)c.optGroupSelectable=false;if(c.listHeight==undefined)c.listHeight=150;a(this).each(function(){var k=a(this),m='<a href="javascript:;" class="multiSelect"><span></span></a>';m+='<div class="multiSelectOptions" style="position: absolute; z-index: 99999; visibility: hidden;"></div>';
a(k).after(m);var o=a(k).next(".multiSelect");o.next(".multiSelectOptions");o.find("span").css("width",a(k).width()+"px");o.data("config",c);o.data("callback",e);var n=[];a(k).children().each(function(){if(this.tagName.toUpperCase()=="OPTGROUP"){var p=[];n.push({optgroup:a(this).attr("label"),options:p});a(this).children("OPTION").each(function(){a(this).val()!=""&&p.push({text:a(this).html(),value:a(this).val(),selected:a(this).attr("selected")})})}else this.tagName.toUpperCase()=="OPTION"&&a(this).val()!=
""&&n.push({text:a(this).html(),value:a(this).val(),selected:a(this).attr("selected")})});a(k).remove();o.attr("id",a(k).attr("id"));f.call(o,n);o.hover(function(){a(this).addClass("hover")},function(){a(this).removeClass("hover")}).click(function(){a(this).hasClass("active")?a(this).multiSelectOptionsHide():a(this).multiSelectOptionsShow();return false}).focus(function(){a(this).addClass("focus")}).blur(function(){a(this).removeClass("focus")});a(document).click(function(p){a(p.target).parents().andSelf().is(".multiSelectOptions")||
o.multiSelectOptionsHide()})})},multiSelectOptionsUpdate:function(c){f.call(a(this),c)},multiSelectOptionsHide:function(){a(this).removeClass("active").removeClass("hover").next(".multiSelectOptions").css("visibility","hidden")},multiSelectOptionsShow:function(){var c=a(this),e=c.next(".multiSelectOptions");c.data("config");a(".multiSelect").multiSelectOptionsHide();e.find("LABEL").removeClass("hover");c.addClass("active").next(".multiSelectOptions").css("visibility","visible");c.focus();c.next(".multiSelectOptions").scrollTop(0);
e=c.position();c.next(".multiSelectOptions").css({top:e.top+a(this).outerHeight()+"px"});c.next(".multiSelectOptions").css({left:e.left+"px"})},selectedValuesString:function(){var c="";a(this).next(".multiSelectOptions").find("INPUT:checkbox:checked").not(".optGroup, .selectAll").each(function(){c+=a(this).attr("value")+","});return c.replace(/\s*\,\s*$/,"")}});a.expr[":"].startsWith=function(c,e,k){e=k[3];if(!e)return false;return eval("/^[/s]*"+e+"/i").test(a(c).text())}}(jQuery);
var S3MultiselectWidgetFileCounter=0;
function S3MultiselectWidgetAddClick(a){var g=a.WidgetID,f=[/DummyDisplay0/g,/DummyDisplay1/g,/DummyDisplay2/g,/DummyDisplay3/g,/DummyDisplay4/g],h=[/DummyJSON0/g,/DummyJSON1/g,/DummyJSON2/g,/DummyJSON3/g,/DummyJSON4/g],j=$("#"+g+"_json").val(),b="{",c,e=true,k=a.NewRow,m="",o="";for(i=0;i<a.ColumnFields.length;i++){var n="#"+g+"_"+a.ColumnFields[i],p=$(n),t=$(n+"_auto_text").val();DisplayValue="";if(p.is("select")){c="'"+p.val()+"'";DisplayValue=$(n+" option:selected").text();p.val("")}else if(t!=
undefined){DisplayValue=t;c=$(n+"_auto_json").val();if(a.ColumnFields[i].slice(-3)=="_id"&&c==""){DisplayValue="";break}$(n+"_auto_text").val("");$(n+"_auto_json").val("");$(n+"_auto_edit").hide()}else if(p.attr("type")=="file"){DisplayValue=p.val();if(DisplayValue!=""){m=n;o=a.ColumnFields[i]+S3MultiselectWidgetFileCounter;c="'"+o+"'";S3MultiselectWidgetFileCounter++}}else{DisplayValue=p.val();p.val("");if(p.attr("class")=="currency")DisplayValue=c.replace("$","");DisplayValue=DisplayValue.replace(/'/g,
'"');c="'"+DisplayValue+"'"}if(DisplayValue!="")e=false;k=k.replace(f[i],DisplayValue);k=k.replace(h[i],c);b=b+"'"+a.ColumnFields[i]+"':"+c+","}b=b.slice(0,-1)+"}";if(!e&&!j.match(b)){if(j!="")j+=",";j+=b;$("#"+g+"_json").val(j);$(k).insertBefore("#"+a.WidgetID+"_input_row");if(m!=""){$(m).attr("id",o);$("#"+o).attr("name",o);$("#"+o).hide();$('<input class="upload" id="drrpp_framework_file_dummy_file" type="file" />').insertAfter("#"+o)}}}
function S3MultiselectWidgetDeleteClick(a,g){var f=g.WidgetID,h=$(a).attr("row_id");$("#"+g.DummyName).val();var j=$("#"+f+"_json").val();$(a).parent().parent().remove();if(h!="New"){if(j!="")j+=",";j=j+"{'id':'"+h+"','deleted':True},"}else{h="{";for(i=0;i<g.ColumnFields.length;i++)h=h+"'"+g.ColumnFields[i]+"':'"+$(a).attr(g.ColumnFields[i])+"',";h=h.slice(0,-1)+"}";j=j.replace(h,"")}j=j.replace(",,",",");if(j.slice(-1)==",")j=j.slice(0,-1);$("#"+f+"_json").val(j)}
(function(a,g){function f(h){return!a(h).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};if(!a.ui.version){a.extend(a.ui,{version:"1.8.11",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,
PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});a.fn.extend({_focus:a.fn.focus,focus:function(h,j){return typeof h==="number"?this.each(function(){var b=this;setTimeout(function(){a(b).focus();j&&j.call(b)},h)}):this._focus.apply(this,arguments)},scrollParent:function(){var h;h=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,
"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!h.length?a(document):h},zIndex:function(h){if(h!==g)return this.css("zIndex",h);if(this.length){h=a(this[0]);for(var j;h.length&&h[0]!==document;){j=h.css("position");
if(j==="absolute"||j==="relative"||j==="fixed"){j=parseInt(h.css("zIndex"),10);if(!isNaN(j)&&j!==0)return j}h=h.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(h){h.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});a.each(["Width","Height"],function(h,j){function b(m,o,n,p){a.each(c,function(){o-=parseFloat(a.curCSS(m,"padding"+this,true))||0;if(n)o-=parseFloat(a.curCSS(m,
"border"+this+"Width",true))||0;if(p)o-=parseFloat(a.curCSS(m,"margin"+this,true))||0});return o}var c=j==="Width"?["Left","Right"]:["Top","Bottom"],e=j.toLowerCase(),k={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+j]=function(m){if(m===g)return k["inner"+j].call(this);return this.each(function(){a(this).css(e,b(this,m)+"px")})};a.fn["outer"+j]=function(m,o){if(typeof m!=="number")return k["outer"+j].call(this,m);return this.each(function(){a(this).css(e,
b(this,m,true,o)+"px")})}});a.extend(a.expr[":"],{data:function(h,j,b){return!!a.data(h,b[3])},focusable:function(h){var j=h.nodeName.toLowerCase(),b=a.attr(h,"tabindex");if("area"===j){j=h.parentNode;b=j.name;if(!h.href||!b||j.nodeName.toLowerCase()!=="map")return false;h=a("img[usemap=#"+b+"]")[0];return!!h&&f(h)}return(/input|select|textarea|button|object/.test(j)?!h.disabled:"a"==j?h.href||!isNaN(b):!isNaN(b))&&f(h)},tabbable:function(h){var j=a.attr(h,"tabindex");return(isNaN(j)||j>=0)&&a(h).is(":focusable")}});
a(function(){var h=document.body,j=h.appendChild(j=document.createElement("div"));a.extend(j.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});a.support.minHeight=j.offsetHeight===100;a.support.selectstart="onselectstart"in j;h.removeChild(j).style.display="none"});a.extend(a.ui,{plugin:{add:function(h,j,b){h=a.ui[h].prototype;for(var c in b){h.plugins[c]=h.plugins[c]||[];h.plugins[c].push([j,b[c]])}},call:function(h,j,b){if((j=h.plugins[j])&&h.element[0].parentNode)for(var c=0;c<j.length;c++)h.options[j[c][0]]&&
j[c][1].apply(h.element,b)}},contains:function(h,j){return document.compareDocumentPosition?h.compareDocumentPosition(j)&16:h!==j&&h.contains(j)},hasScroll:function(h,j){if(a(h).css("overflow")==="hidden")return false;var b=j&&j==="left"?"scrollLeft":"scrollTop",c=false;if(h[b]>0)return true;h[b]=1;c=h[b]>0;h[b]=0;return c},isOverAxis:function(h,j,b){return h>j&&h<j+b},isOver:function(h,j,b,c,e,k){return a.ui.isOverAxis(h,b,e)&&a.ui.isOverAxis(j,c,k)}})}})(jQuery);var s3_gis_pullNext;
function s3_gis_dropdown_select(a,g){s3_gis_pullNext=false;$("#gis_location_lat").val("");$("#gis_location_lon").val("");$("#gis_location_addr_street").val("");$("#gis_location_postcode").val("");var f=$("#gis_location_L"+a).val();if(f||g){var h;$.getJSONS3(a==s3_gis_maxlevel?s3_gis_url+"/search.json?filter=%3D&field=level&value=nullnone&parent="+f:s3_gis_url+"/search.json?filter=%3D&field=level&value=L"+(a+1)+"&parent="+f,function(j){if(j.length==0)h=s3_gis_empty_set;else if(j.length==1){h='<option value="'+
j[0].id+'">'+j[0].name+"</option>";s3_gis_pullNext=true}else{h=s3_gis_select_location;for(var b=0;b<j.length;b++)h+='<option value="'+j[b].id+'">'+j[b].name+"</option>"}a==s3_gis_maxlevel?$("#gis_location_").html(h):$("#gis_location_L"+(a+1)).html(h)},false,true);if(a==s3_gis_maxlevel){if(h!=s3_gis_empty_set){$("#gis_location_").removeClass("hidden").show();$("#gis_location_label_").removeClass("hidden").show();$("#gis_location_details-btn").removeClass("hidden").show()}}else{$("#gis_location_L"+
(a+1)).removeClass("hidden").show();$("#gis_location_label_L"+(a+1)).removeClass("hidden").show();$("#gis_location_details-btn").removeClass("hidden").show()}s3_gis_dropdown_hide(a+2);if(s3_gis_pullNext){f=$("#gis_location_L"+(a+1)).val();$("#"+s3_gis_location_id).val(f);s3_gis_dropdown_select(a+1)}else""==$("#gis_location_name").val()&&$("#"+s3_gis_location_id).val(f)}else{s3_gis_dropdown_hide(a+1);0==a&&""==$("#gis_location_name").val()&&$("#"+s3_gis_location_id).val("")}}
function s3_gis_dropdown_hide(a){for(l=a;l<=parseInt(s3_gis_maxlevel);l+=1){$("#gis_location_L"+l).hide().html(s3_gis_loading_locations);$("#gis_location_label_L"+l).hide()}if(a<parseInt(s3_gis_maxlevel)+2){$("#gis_location_").hide().html(s3_gis_loading_locations);$("#gis_location_label_").hide();$("#gis_location_details-btn").hide()}}
function s3_gis_save_location(a,g,f,h,j){var b=$("#gis_location_L5").val();if(undefined==b||""==b){b=$("#gis_location_L4").val();if(undefined==b||""==b){b=$("#gis_location_L3").val();if(undefined==b||""==b){b=$("#gis_location_L2").val();if(undefined==b||""==b){b=$("#gis_location_L1").val();if(undefined==b||""==b)b=$("#gis_location_L0").val()}}}}a=""==S3.gis.uuid?s3_gis_url+"/create.url?name="+a:s3_gis_url+"/update.url?uuid="+S3.gis.uuid+"&name="+a;""==g||""==f||(a=a+"&lat="+g+"&lon="+f);if(""!=h)a=
a+"&addr_street="+h.replace(/\n/g,"%0d");if(""!=j)a=a+"&addr_postcode="+j;undefined==b||""==b||(a=a+"&parent="+b);$.ajax({async:false,url:a,dataType:"json",success:function(c){if(""==S3.gis.uuid&&c.status=="success"){c=c.message.split("=")[1];$("#"+s3_gis_location_id).val(c)}}})}function s3_gis_geolocate(a){var g=a.coords.latitude;a=a.coords.longitude;$("#gis_location_lat").val(g);$("#gis_location_lon").val(a)}var s3_gis_calcDone=false,s3_gis_calcAnswer;
function s3_gis_convertDD(){var a=$("#DDMMSS_deg").val(),g=$("#DDMMSS_min").val(),f=$("#DDMMSS_sec").val(),h=false;if(a=="")a=0;else if(isNaN(a)||a>180||a<-180){alert(s3_gis_degrees_validation_error);h=true}if(g=="")g=0;else if(isNaN(g)||g>60||g<0){alert(s3_gis_minutes_validation_error);h=true}if(f=="")f=0;else if(isNaN(f)||f>60||f<0){alert(s3_gis_seconds_validation_error);h=true}if(h==false){g=g*1+f/60;s3_gis_calcAnswer=a>0?a*1+g/60:a*1-g/60;$("#DDMMSS_dec").val(s3_gis_calcAnswer);s3_gis_calcDone=
true}}function s3_gis_convertGps(){var a=0,g=0;a=$("#gps_deg").val();g=$("#gps_min").val();var f=false;if(a=="")a=0;else if(isNaN(a)||a>180||a<-180){alert(s3_gis_degrees_validation_error);f=true}if(g=="")g=0;else if(isNaN(g)||g>60||g<0){alert(s3_gis_minutes_validation_error);f=true}if(f==false){s3_gis_calcAnswer=a>0?a*1+g/60:a*1-g/60;$("#gps_dec").val(s3_gis_calcAnswer);s3_gis_calcDone=true}}
function s3_gis_convertFillBack(a){if(s3_gis_calcDone==true){a==1?$("#gis_location_lat").attr("value",s3_gis_calcAnswer):$("#gis_location_lon").attr("value",s3_gis_calcAnswer);return true}else alert(s3_gis_no_calculations_error);return false}
$(function(){if(typeof s3_gis_location_id!="undefined"){$("#gis_location_L0").change(function(){s3_gis_dropdown_select(0)});$("#gis_location_L1").change(function(){s3_gis_dropdown_select(1)});$("#gis_location_L2").change(function(){s3_gis_dropdown_select(2)});$("#gis_location_L3").change(function(){s3_gis_dropdown_select(3)});$("#gis_location_L4").change(function(){s3_gis_dropdown_select(4)});$("#gis_location_").change(function(){var g=$(this).val();""==$("#gis_location_name").val()&&$("#"+s3_gis_location_id).val(g)});
$("#gis_location_add-btn").click(function(g){if(""!=S3.gis.uuid){$("body").data("uuid",S3.gis.uuid);S3.gis.uuid=""}var f=$("#gis_location_lat").val(),h=$("#gis_location_lat").val();if(""!=f||""!=h){$("body").data("lat",f);$("body").data("lon",h);$("#gis_location_lat").val("");$("#gis_location_lon").val("")}$("#gis_location_add-btn").hide();$("#gis_location_cancel-btn").removeClass("hidden").show();$("#gis_location_").hide();$("#gis_location_label_").hide();navigator.geolocation&&$("#gis_location_geolocate-btn").removeClass("hidden").show();
$("#gis_location_map-btn").removeClass("hidden").show();$("#gis_location_name_label").removeClass("hidden").show();$("#gis_location_name").removeClass("hidden").show();$("#gis_location_addr_street_label").removeClass("hidden").show();$("#gis_location_addr_street_row").removeClass("hidden").show();$("#gis_location_postcode_label").removeClass("hidden").show();$("#gis_location_postcode_row").removeClass("hidden").show();$("#gis_location_advanced_div").removeClass("hidden").show();g.preventDefault()});
$("#gis_location_advanced_checkbox").change(function(g){if($("#gis_location_advanced_checkbox").is(":checked")){$("#gis_location_lat_label").removeClass("hidden").show();$("#gis_location_lat_row").removeClass("hidden").show();$("#gis_location_lon_label").removeClass("hidden").show();$("#gis_location_lon_row").removeClass("hidden").show()}else{$("#gis_location_lat_label").hide();$("#gis_location_lat_row").hide();$("#gis_location_lon_label").hide();$("#gis_location_lon_row").hide()}g.preventDefault()});
$("#gis_location_search-btn").click(function(g){$(this).hide();$("#gis_location_autocomplete_div").removeClass("hidden").show();g.preventDefault()});$("#gis_location_details-btn").click(function(g){$("#gis_location_map-btn").removeClass("hidden").show();$("#gis_location_addr_street_label").removeClass("hidden").show();$("#gis_location_addr_street_row").removeClass("hidden").show();$("#gis_location_postcode_label").removeClass("hidden").show();$("#gis_location_postcode_row").removeClass("hidden").show();
$("#gis_location_advanced_div").removeClass("hidden").show();g.preventDefault()});$("#gis_location_cancel-btn").click(function(g){S3.gis.uuid=$("body").data("uuid");$("#gis_location_lat").val($("body").data("lat"));$("#gis_location_lon").val($("body").data("lon"));$("#gis_location_cancel-btn").hide();$("#gis_location_name").val("");$("#gis_location_add-btn").show();if(""!=$("#gis_location_").val()){$("#gis_location_").show();$("#gis_location_label_").show();$("#gis_location_details-btn").show()}$("#gis_location_map-btn").hide();
$("#gis_location_name_label").hide();$("#gis_location_name").hide();$("#gis_location_addr_street_label").hide();$("#gis_location_addr_street_row").hide();$("#gis_location_postcode_label").hide();$("#gis_location_postcode_row").hide();$("#gis_location_advanced_div").hide();g.preventDefault()});$("#gis_location_geolocate-btn").click(function(g){navigator.geolocation.getCurrentPosition(s3_gis_geolocate);g.preventDefault()});var a={val:$("#gis_location_autocomplete").val(),accept:false};$("#gis_location_autocomplete").autocomplete({source:s3_gis_url+
"/search.json?filter=~&field=name&exclude_field=level&exclude_value=XX",minLength:2,focus:function(g,f){$("#gis_location_autocomplete").val(f.item.name);return false},select:function(g,f){$("#gis_location_autocomplete").val(f.item.name);$("#"+s3_gis_location_id).val(f.item.id);a.accept=true;var h=f.item.path,j=f.item.id,b,c,e,k,m=[];switch(f.item.level){case "L0":$("#gis_location_L0").val(j);$("#"+s3_gis_location_id).val(j);s3_gis_dropdown_select(0);break;case "L1":if(h){h=h.split("/");if(h.length==
2&&h[1]==j)$("#gis_location_L0").val(h[0]);else{s3_gis_dropdown_select(0,true);$("#gis_location_L1").val(j);$("#"+s3_gis_location_id).val(j);break}}s3_gis_dropdown_select(0,true);$("#gis_location_L1").val(j);$("#"+s3_gis_location_id).val(j);s3_gis_dropdown_select(1);break;case "L2":if(h){h=h.split("/");if(h.length==3&&h[2]==j){$("#gis_location_L0").val(h[0]);b=h[1]}else if(h.length==2&&h[1]==j)if(undefined!=$("#gis_location_L0 option[value="+h[0]+"]")[0])$("#gis_location_L0").val(h[0]);else b=h[0];
else{s3_gis_dropdown_select(1,true);$("#gis_location_L2").val(j);$("#"+s3_gis_location_id).val(j);break}}s3_gis_dropdown_select(0,true);$("#gis_location_L1").val(b);s3_gis_dropdown_select(1,true);$("#gis_location_L2").val(j);$("#"+s3_gis_location_id).val(j);s3_gis_dropdown_select(2);break;case "L3":if(h){h=h.split("/");if(h.length==4&&h[3]==j){$("#gis_location_L0").val(h[0]);b=h[1];c=h[2]}else if(h.length==3&&h[2]==j)if(undefined!=$("#gis_location_L0 option[value="+h[0]+"]")[0]){$("#gis_location_L0").val(h[0]);
m=[h[1]]}else{b=h[0];c=h[1]}else if(h.length==2&&h[1]==j)if(undefined!=$("#gis_location_L0 option[value="+h[0]+"]")[0])$("#gis_location_L0").val(h[0]);else m=[h[0]];else{s3_gis_dropdown_select(2,true);$("#gis_location_L3").val(j);$("#"+s3_gis_location_id).val(j);break}}s3_gis_dropdown_select(0,true);if(m[0])if(undefined!=$("#gis_location_L1 option[value="+m[0]+"]")[0])b=m[0];$("#gis_location_L1").val(b);s3_gis_dropdown_select(1,true);if(m[0])if(undefined!=$("#gis_location_L2 option[value="+m[0]+"]")[0])c=
m[0];$("#gis_location_L2").val(c);s3_gis_dropdown_select(2,true);$("#gis_location_L3").val(j);$("#"+s3_gis_location_id).val(j);s3_gis_dropdown_select(3);break;case "L4":if(h){h=h.split("/");if(h.length==5&&h[4]==j){$("#gis_location_L0").val(h[0]);b=h[1];c=h[2];e=h[3]}else if(h.length==4&&h[3]==j)if(undefined!=$("#gis_location_L0 option[value="+h[0]+"]")[0]){$("#gis_location_L0").val(h[0]);m=[h[1],h[2]]}else m=[h[0],h[1],h[2]];else if(h.length==3&&h[2]==j)if(undefined!=$("#gis_location_L0 option[value="+
h[0]+"]")[0]){$("#gis_location_L0").val(h[0]);m=[h[1]]}else m=[h[0],h[1]];else if(h.length==2&&h[1]==j)if(undefined!=$("#gis_location_L0 option[value="+h[0]+"]")[0])$("#gis_location_L0").val(h[0]);else m=[h[0]];else{s3_gis_dropdown_select(3,true);$("#gis_location_L4").val(j);$("#"+s3_gis_location_id).val(j);break}}s3_gis_dropdown_select(0,true);if(m[0])if(undefined!=$("#gis_location_L1 option[value="+m[0]+"]")[0])b=m[0];$("#gis_location_L1").val(b);s3_gis_dropdown_select(1,true);if(m[0])if(undefined!=
$("#gis_location_L2 option[value="+m[0]+"]")[0])c=m[0];else if(m[1])if(undefined!=$("#gis_location_L2 option[value="+m[1]+"]")[0])c=m[1];$("#gis_location_L2").val(c);s3_gis_dropdown_select(2,true);if(m[0])if(undefined!=$("#gis_location_L3 option[value="+m[0]+"]")[0])e=m[0];else if(m[1])if(undefined!=$("#gis_location_L3 option[value="+m[1]+"]")[0])e=m[1];else if(m[2])if(undefined!=$("#gis_location_L3 option[value="+m[2]+"]")[0])e=m[2];$("#gis_location_L3").val(e);s3_gis_dropdown_select(3,true);$("#gis_location_L4").val(j);
$("#"+s3_gis_location_id).val(j);s3_gis_dropdown_select(4);break;case "L5":break;default:if(h){h=h.split("/");if(h.length==6&&h[5]==j){$("#gis_location_L0").val(h[0]);b=h[1];c=h[2];e=h[4]}else if(h.length==5&&h[4]==j)if(undefined!=$("#gis_location_L0 option[value="+h[0]+"]")[0]){$("#gis_location_L0").val(h[0]);m=[h[1],h[2],h[3]]}else m=[h[0],h[1],h[2],h[3]];else if(h.length==4&&h[3]==j)if(undefined!=$("#gis_location_L0 option[value="+h[0]+"]")[0]){$("#gis_location_L0").val(h[0]);m=[h[1],h[2]]}else m=
[h[0],h[1],h[2]];else if(h.length==3&&h[2]==j)if(undefined!=$("#gis_location_L0 option[value="+h[0]+"]")[0]){$("#gis_location_L0").val(h[0]);m=[h[1]]}else m=[h[0],h[1]];else if(h.length==2&&h[1]==j)if(undefined!=$("#gis_location_L0 option[value="+h[0]+"]")[0])$("#gis_location_L0").val(h[0]);else m=[h[0]];else{s3_gis_dropdown_select(4,true);$("#gis_location_").val(j);$("#"+s3_gis_location_id).val(j);break}s3_gis_dropdown_select(0,true);if(m[0])if(undefined!=$("#gis_location_L1 option[value="+m[0]+
"]")[0])b=m[0];$("#gis_location_L1").val(b);s3_gis_dropdown_select(1,true);if(m[0])if(undefined!=$("#gis_location_L2 option[value="+m[0]+"]")[0])c=m[0];else if(m[1])if(undefined!=$("#gis_location_L2 option[value="+m[1]+"]")[0])c=m[1];$("#gis_location_L2").val(c);s3_gis_dropdown_select(2,true);if(m[0])if(undefined!=$("#gis_location_L3 option[value="+m[0]+"]")[0])e=m[0];else if(m[1])if(undefined!=$("#gis_location_L3 option[value="+m[1]+"]")[0])e=m[1];else if(m[2])if(undefined!=$("#gis_location_L3 option[value="+
m[2]+"]")[0])e=m[2];$("#gis_location_L3").val(e);s3_gis_dropdown_select(3);if(m[0])if(undefined!=$("#gis_location_L4 option[value="+m[0]+"]")[0])k=m[0];else if(m[1])if(undefined!=$("#gis_location_L4 option[value="+m[1]+"]")[0])k=m[1];else if(m[2])if(undefined!=$("#gis_location_L4 option[value="+m[2]+"]")[0])k=m[2];else if(m[3])if(undefined!=$("#gis_location_L4 option[value="+m[4]+"]")[0])k=m[3];$("#gis_location_L4").val(k);s3_gis_dropdown_select(4,true);$("#gis_location_").val(j)}$("#"+s3_gis_location_id).val(j)}$("#gis_location_autocomplete_div").hide();
$("#gis_location_search-btn").show();return false}}).data("autocomplete")._renderItem=function(g,f){return $("<li></li>").data("item.autocomplete",f).append("<a>"+f.name+"</a>").appendTo(g)};$("#gis_location_autocomplete").blur(function(){if(!$("#gis_location_autocomplete").val()){$("#"+s3_gis_location_id).val("");a.accept=true}if(a.accept)a.val=$("#gis_location_autocomplete").val();else $("#gis_location_autocomplete").val(a.val);a.accept=false});$("form").submit(function(){S3ClearNavigateAwayConfirm();
var g=$("#gis_location_name").val(),f=$("#gis_location_lat").val(),h=$("#gis_location_lon").val(),j=$("#gis_location_addr_street").val(),b=$("#gis_location_postcode").val();if(""==g)if((""==f||""==h)&&""==j&&""==b)return true;else{g=$("#gis_location_ :selected").text();if(s3_gis_loading_locations.search(g)){$("#gis_location_name").after('<div id="type__error" class="error" style="display: block;">Name field is required!</div>');$("#gis_location_name").focus();s3_navigate_away_confirm&&S3SetNavigateAwayConfirm();
return false}else{S3.gis.lat==$("#gis_location_lat").val()&&S3.gis.lon==$("#gis_location_lon").val()&&S3.gis.addr_street==$("#gis_location_addr_street").val().replace(/\n/g,"%0d")&&S3.gis.postcode==$("#gis_location_postcode").val()||s3_gis_save_location(g,f,h,j,b);return true}}s3_gis_save_location(g,f,h,j,b);return true})}});
Ext.onReady(function(){var a,g=Ext.get("gis_location_converter-btn"),f=Ext.get("gis_location_map-btn");if(f)f.on("click",function(){mapWin.show(this)});if(g)g.on("click",function(){a||(a=new Ext.Window({applyTo:"gis-convert-win",layout:"fit",width:400,height:250,closeAction:"hide",plain:true,items:new Ext.TabPanel({applyTo:"gis-convert-tabs",autoTabs:true,activeTab:0,deferredRender:false,border:false}),buttons:[{text:s3_gis_fill_lat,disabled:false,handler:function(){if(s3_gis_convertFillBack(1)){s3_gis_calcDone=
false;$("#DDMMSS_dec").val("");$("#gps_dec").val("")}}},{text:s3_gis_fill_lon,handler:function(){if(s3_gis_convertFillBack(2)){s3_gis_calcDone=false;$("#DDMMSS_dec").val("");$("#gps_dec").val("")}}}]}));a.show(this)})});
(function(a,g){function f(){this.debug=false;this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._inDialog=this._datepickerShowing=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass=
"ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su",
"Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",
minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false};a.extend(this._defaults,this.regional[""]);this.dpDiv=a('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')}function h(b,c){a.extend(b,c);for(var e in c)if(c[e]==
null||c[e]==g)b[e]=c[e];return b}a.extend(a.ui,{datepicker:{version:"1.8.11"}});var j=(new Date).getTime();a.extend(f.prototype,{markerClassName:"hasDatepicker",log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(b){h(this._defaults,b||{});return this},_attachDatepicker:function(b,c){var e=null,k;for(k in this._defaults){var m=b.getAttribute("date:"+k);if(m){e=e||{};try{e[k]=eval(m)}catch(o){e[k]=m}}}k=b.nodeName.toLowerCase();
m=k=="div"||k=="span";if(!b.id){this.uuid+=1;b.id="dp"+this.uuid}var n=this._newInst(a(b),m);n.settings=a.extend({},c||{},e||{});if(k=="input")this._connectDatepicker(b,n);else m&&this._inlineDatepicker(b,n)},_newInst:function(b,c){return{id:b[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:b,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:c,dpDiv:!c?this.dpDiv:a('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')}},
_connectDatepicker:function(b,c){var e=a(b);c.append=a([]);c.trigger=a([]);if(!e.hasClass(this.markerClassName)){this._attachments(e,c);e.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(k,m,o){c.settings[m]=o}).bind("getData.datepicker",function(k,m){return this._get(c,m)});this._autoSize(c);a.data(b,"datepicker",c)}},_attachments:function(b,c){var e=this._get(c,"appendText"),k=this._get(c,"isRTL");c.append&&
c.append.remove();if(e){c.append=a('<span class="'+this._appendClass+'">'+e+"</span>");b[k?"before":"after"](c.append)}b.unbind("focus",this._showDatepicker);c.trigger&&c.trigger.remove();e=this._get(c,"showOn");if(e=="focus"||e=="both")b.focus(this._showDatepicker);if(e=="button"||e=="both"){e=this._get(c,"buttonText");var m=this._get(c,"buttonImage");c.trigger=a(this._get(c,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:m,alt:e,title:e}):a('<button type="button"></button>').addClass(this._triggerClass).html(m==
""?e:a("<img/>").attr({src:m,alt:e,title:e})));b[k?"before":"after"](c.trigger);c.trigger.click(function(){a.datepicker._datepickerShowing&&a.datepicker._lastInput==b[0]?a.datepicker._hideDatepicker():a.datepicker._showDatepicker(b[0]);return false})}},_autoSize:function(b){if(this._get(b,"autoSize")&&!b.inline){var c=new Date(2009,11,20),e=this._get(b,"dateFormat");if(e.match(/[DM]/)){var k=function(m){for(var o=0,n=0,p=0;p<m.length;p++)if(m[p].length>o){o=m[p].length;n=p}return n};c.setMonth(k(this._get(b,
e.match(/MM/)?"monthNames":"monthNamesShort")));c.setDate(k(this._get(b,e.match(/DD/)?"dayNames":"dayNamesShort"))+20-c.getDay())}b.input.attr("size",this._formatDate(b,c).length)}},_inlineDatepicker:function(b,c){var e=a(b);if(!e.hasClass(this.markerClassName)){e.addClass(this.markerClassName).append(c.dpDiv).bind("setData.datepicker",function(k,m,o){c.settings[m]=o}).bind("getData.datepicker",function(k,m){return this._get(c,m)});a.data(b,"datepicker",c);this._setDate(c,this._getDefaultDate(c),
true);this._updateDatepicker(c);this._updateAlternate(c);c.dpDiv.show()}},_dialogDatepicker:function(b,c,e,k,m){b=this._dialogInst;if(!b){this.uuid+=1;this._dialogInput=a('<input type="text" id="'+("dp"+this.uuid)+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>');this._dialogInput.keydown(this._doKeyDown);a("body").append(this._dialogInput);b=this._dialogInst=this._newInst(this._dialogInput,false);b.settings={};a.data(this._dialogInput[0],"datepicker",b)}h(b.settings,k||{});
c=c&&c.constructor==Date?this._formatDate(b,c):c;this._dialogInput.val(c);this._pos=m?m.length?m:[m.pageX,m.pageY]:null;if(!this._pos)this._pos=[document.documentElement.clientWidth/2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/2-150+(document.documentElement.scrollTop||document.body.scrollTop)];this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");b.settings.onSelect=e;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);
this._showDatepicker(this._dialogInput[0]);a.blockUI&&a.blockUI(this.dpDiv);a.data(this._dialogInput[0],"datepicker",b);return this},_destroyDatepicker:function(b){var c=a(b),e=a.data(b,"datepicker");if(c.hasClass(this.markerClassName)){var k=b.nodeName.toLowerCase();a.removeData(b,"datepicker");if(k=="input"){e.append.remove();e.trigger.remove();c.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",
this._doKeyUp)}else if(k=="div"||k=="span")c.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(b){var c=a(b),e=a.data(b,"datepicker");if(c.hasClass(this.markerClassName)){var k=b.nodeName.toLowerCase();if(k=="input"){b.disabled=false;e.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""})}else if(k=="div"||k=="span")c.children("."+this._inlineClass).children().removeClass("ui-state-disabled");this._disabledInputs=a.map(this._disabledInputs,
function(m){return m==b?null:m})}},_disableDatepicker:function(b){var c=a(b),e=a.data(b,"datepicker");if(c.hasClass(this.markerClassName)){var k=b.nodeName.toLowerCase();if(k=="input"){b.disabled=true;e.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else if(k=="div"||k=="span")c.children("."+this._inlineClass).children().addClass("ui-state-disabled");this._disabledInputs=a.map(this._disabledInputs,function(m){return m==b?null:
m});this._disabledInputs[this._disabledInputs.length]=b}},_isDisabledDatepicker:function(b){if(!b)return false;for(var c=0;c<this._disabledInputs.length;c++)if(this._disabledInputs[c]==b)return true;return false},_getInst:function(b){try{return a.data(b,"datepicker")}catch(c){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(b,c,e){var k=this._getInst(b);if(arguments.length==2&&typeof c=="string")return c=="defaults"?a.extend({},a.datepicker._defaults):k?c=="all"?a.extend({},
k.settings):this._get(k,c):null;var m=c||{};if(typeof c=="string"){m={};m[c]=e}if(k){this._curInst==k&&this._hideDatepicker();var o=this._getDateDatepicker(b,true),n=this._getMinMaxDate(k,"min"),p=this._getMinMaxDate(k,"max");h(k.settings,m);if(n!==null&&m.dateFormat!==g&&m.minDate===g)k.settings.minDate=this._formatDate(k,n);if(p!==null&&m.dateFormat!==g&&m.maxDate===g)k.settings.maxDate=this._formatDate(k,p);this._attachments(a(b),k);this._autoSize(k);this._setDateDatepicker(b,o);this._updateDatepicker(k)}},
_changeDatepicker:function(b,c,e){this._optionDatepicker(b,c,e)},_refreshDatepicker:function(b){(b=this._getInst(b))&&this._updateDatepicker(b)},_setDateDatepicker:function(b,c){var e=this._getInst(b);if(e){this._setDate(e,c);this._updateDatepicker(e);this._updateAlternate(e)}},_getDateDatepicker:function(b,c){var e=this._getInst(b);e&&!e.inline&&this._setDateFromField(e,c);return e?this._getDate(e):null},_doKeyDown:function(b){var c=a.datepicker._getInst(b.target),e=true,k=c.dpDiv.is(".ui-datepicker-rtl");
c._keyEvent=true;if(a.datepicker._datepickerShowing)switch(b.keyCode){case 9:a.datepicker._hideDatepicker();e=false;break;case 13:e=a("td."+a.datepicker._dayOverClass+":not(."+a.datepicker._currentClass+")",c.dpDiv);e[0]?a.datepicker._selectDay(b.target,c.selectedMonth,c.selectedYear,e[0]):a.datepicker._hideDatepicker();return false;case 27:a.datepicker._hideDatepicker();break;case 33:a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(c,"stepBigMonths"):-a.datepicker._get(c,"stepMonths"),
"M");break;case 34:a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(c,"stepBigMonths"):+a.datepicker._get(c,"stepMonths"),"M");break;case 35:if(b.ctrlKey||b.metaKey)a.datepicker._clearDate(b.target);e=b.ctrlKey||b.metaKey;break;case 36:if(b.ctrlKey||b.metaKey)a.datepicker._gotoToday(b.target);e=b.ctrlKey||b.metaKey;break;case 37:if(b.ctrlKey||b.metaKey)a.datepicker._adjustDate(b.target,k?+1:-1,"D");e=b.ctrlKey||b.metaKey;if(b.originalEvent.altKey)a.datepicker._adjustDate(b.target,b.ctrlKey?
-a.datepicker._get(c,"stepBigMonths"):-a.datepicker._get(c,"stepMonths"),"M");break;case 38:if(b.ctrlKey||b.metaKey)a.datepicker._adjustDate(b.target,-7,"D");e=b.ctrlKey||b.metaKey;break;case 39:if(b.ctrlKey||b.metaKey)a.datepicker._adjustDate(b.target,k?-1:+1,"D");e=b.ctrlKey||b.metaKey;if(b.originalEvent.altKey)a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(c,"stepBigMonths"):+a.datepicker._get(c,"stepMonths"),"M");break;case 40:if(b.ctrlKey||b.metaKey)a.datepicker._adjustDate(b.target,
+7,"D");e=b.ctrlKey||b.metaKey;break;default:e=false}else if(b.keyCode==36&&b.ctrlKey)a.datepicker._showDatepicker(this);else e=false;if(e){b.preventDefault();b.stopPropagation()}},_doKeyPress:function(b){var c=a.datepicker._getInst(b.target);if(a.datepicker._get(c,"constrainInput")){c=a.datepicker._possibleChars(a.datepicker._get(c,"dateFormat"));var e=String.fromCharCode(b.charCode==g?b.keyCode:b.charCode);return b.ctrlKey||b.metaKey||e<" "||!c||c.indexOf(e)>-1}},_doKeyUp:function(b){b=a.datepicker._getInst(b.target);
if(b.input.val()!=b.lastVal)try{if(a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),b.input?b.input.val():null,a.datepicker._getFormatConfig(b))){a.datepicker._setDateFromField(b);a.datepicker._updateAlternate(b);a.datepicker._updateDatepicker(b)}}catch(c){a.datepicker.log(c)}return true},_showDatepicker:function(b){b=b.target||b;if(b.nodeName.toLowerCase()!="input")b=a("input",b.parentNode)[0];if(!(a.datepicker._isDisabledDatepicker(b)||a.datepicker._lastInput==b)){var c=a.datepicker._getInst(b);
a.datepicker._curInst&&a.datepicker._curInst!=c&&a.datepicker._curInst.dpDiv.stop(true,true);var e=a.datepicker._get(c,"beforeShow");h(c.settings,e?e.apply(b,[b,c]):{});c.lastVal=null;a.datepicker._lastInput=b;a.datepicker._setDateFromField(c);if(a.datepicker._inDialog)b.value="";if(!a.datepicker._pos){a.datepicker._pos=a.datepicker._findPos(b);a.datepicker._pos[1]+=b.offsetHeight}var k=false;a(b).parents().each(function(){k|=a(this).css("position")=="fixed";return!k});if(k&&a.browser.opera){a.datepicker._pos[0]-=
document.documentElement.scrollLeft;a.datepicker._pos[1]-=document.documentElement.scrollTop}e={left:a.datepicker._pos[0],top:a.datepicker._pos[1]};a.datepicker._pos=null;c.dpDiv.empty();c.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});a.datepicker._updateDatepicker(c);e=a.datepicker._checkOffset(c,e,k);c.dpDiv.css({position:a.datepicker._inDialog&&a.blockUI?"static":k?"fixed":"absolute",display:"none",left:e.left+"px",top:e.top+"px"});if(!c.inline){e=a.datepicker._get(c,"showAnim");
var m=a.datepicker._get(c,"duration"),o=function(){a.datepicker._datepickerShowing=true;var n=c.dpDiv.find("iframe.ui-datepicker-cover");if(n.length){var p=a.datepicker._getBorders(c.dpDiv);n.css({left:-p[0],top:-p[1],width:c.dpDiv.outerWidth(),height:c.dpDiv.outerHeight()})}};c.dpDiv.zIndex(a(b).zIndex()+1);if(a.effects&&a.effects[e])c.dpDiv.show(e,a.datepicker._get(c,"showOptions"),m,o);else c.dpDiv[e||"show"](e?m:null,o);if(!e||!m)o();c.input.is(":visible")&&!c.input.is(":disabled")&&c.input.focus();
a.datepicker._curInst=c}}},_updateDatepicker:function(b){var c=this,e=a.datepicker._getBorders(b.dpDiv);b.dpDiv.empty().append(this._generateHTML(b));var k=b.dpDiv.find("iframe.ui-datepicker-cover");k.length&&k.css({left:-e[0],top:-e[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()});b.dpDiv.find("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a").bind("mouseout",function(){a(this).removeClass("ui-state-hover");this.className.indexOf("ui-datepicker-prev")!=
-1&&a(this).removeClass("ui-datepicker-prev-hover");this.className.indexOf("ui-datepicker-next")!=-1&&a(this).removeClass("ui-datepicker-next-hover")}).bind("mouseover",function(){if(!c._isDisabledDatepicker(b.inline?b.dpDiv.parent()[0]:b.input[0])){a(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");a(this).addClass("ui-state-hover");this.className.indexOf("ui-datepicker-prev")!=-1&&a(this).addClass("ui-datepicker-prev-hover");this.className.indexOf("ui-datepicker-next")!=
-1&&a(this).addClass("ui-datepicker-next-hover")}}).end().find("."+this._dayOverClass+" a").trigger("mouseover").end();e=this._getNumberOfMonths(b);k=e[1];k>1?b.dpDiv.addClass("ui-datepicker-multi-"+k).css("width",17*k+"em"):b.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");b.dpDiv[(e[0]!=1||e[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi");b.dpDiv[(this._get(b,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");b==a.datepicker._curInst&&a.datepicker._datepickerShowing&&
b.input&&b.input.is(":visible")&&!b.input.is(":disabled")&&b.input[0]!=document.activeElement&&b.input.focus();if(b.yearshtml){var m=b.yearshtml;setTimeout(function(){m===b.yearshtml&&b.dpDiv.find("select.ui-datepicker-year:first").replaceWith(b.yearshtml);m=b.yearshtml=null},0)}},_getBorders:function(b){var c=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(c(b.css("border-left-width"))),parseFloat(c(b.css("border-top-width")))]},_checkOffset:function(b,c,e){var k=b.dpDiv.outerWidth(),
m=b.dpDiv.outerHeight(),o=b.input?b.input.outerWidth():0,n=b.input?b.input.outerHeight():0,p=document.documentElement.clientWidth+a(document).scrollLeft(),t=document.documentElement.clientHeight+a(document).scrollTop();c.left-=this._get(b,"isRTL")?k-o:0;c.left-=e&&c.left==b.input.offset().left?a(document).scrollLeft():0;c.top-=e&&c.top==b.input.offset().top+n?a(document).scrollTop():0;c.left-=Math.min(c.left,c.left+k>p&&p>k?Math.abs(c.left+k-p):0);c.top-=Math.min(c.top,c.top+m>t&&t>m?Math.abs(m+n):
0);return c},_findPos:function(b){for(var c=this._get(this._getInst(b),"isRTL");b&&(b.type=="hidden"||b.nodeType!=1||a.expr.filters.hidden(b));)b=b[c?"previousSibling":"nextSibling"];b=a(b).offset();return[b.left,b.top]},_hideDatepicker:function(b){var c=this._curInst;if(!(!c||b&&c!=a.data(b,"datepicker")))if(this._datepickerShowing){b=this._get(c,"showAnim");var e=this._get(c,"duration"),k=function(){a.datepicker._tidyDialog(c);this._curInst=null};if(a.effects&&a.effects[b])c.dpDiv.hide(b,a.datepicker._get(c,
"showOptions"),e,k);else c.dpDiv[b=="slideDown"?"slideUp":b=="fadeIn"?"fadeOut":"hide"](b?e:null,k);b||k();if(b=this._get(c,"onClose"))b.apply(c.input?c.input[0]:null,[c.input?c.input.val():"",c]);this._datepickerShowing=false;this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if(a.blockUI){a.unblockUI();a("body").append(this.dpDiv)}}this._inDialog=false}},_tidyDialog:function(b){b.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},
_checkExternalClick:function(b){if(a.datepicker._curInst){b=a(b.target);b[0].id!=a.datepicker._mainDivId&&b.parents("#"+a.datepicker._mainDivId).length==0&&!b.hasClass(a.datepicker.markerClassName)&&!b.hasClass(a.datepicker._triggerClass)&&a.datepicker._datepickerShowing&&!(a.datepicker._inDialog&&a.blockUI)&&a.datepicker._hideDatepicker()}},_adjustDate:function(b,c,e){b=a(b);var k=this._getInst(b[0]);if(!this._isDisabledDatepicker(b[0])){this._adjustInstDate(k,c+(e=="M"?this._get(k,"showCurrentAtPos"):
0),e);this._updateDatepicker(k)}},_gotoToday:function(b){b=a(b);var c=this._getInst(b[0]);if(this._get(c,"gotoCurrent")&&c.currentDay){c.selectedDay=c.currentDay;c.drawMonth=c.selectedMonth=c.currentMonth;c.drawYear=c.selectedYear=c.currentYear}else{var e=new Date;c.selectedDay=e.getDate();c.drawMonth=c.selectedMonth=e.getMonth();c.drawYear=c.selectedYear=e.getFullYear()}this._notifyChange(c);this._adjustDate(b)},_selectMonthYear:function(b,c,e){b=a(b);var k=this._getInst(b[0]);k._selectingMonthYear=
false;k["selected"+(e=="M"?"Month":"Year")]=k["draw"+(e=="M"?"Month":"Year")]=parseInt(c.options[c.selectedIndex].value,10);this._notifyChange(k);this._adjustDate(b)},_clickMonthYear:function(b){var c=this._getInst(a(b)[0]);c.input&&c._selectingMonthYear&&setTimeout(function(){c.input.focus()},0);c._selectingMonthYear=!c._selectingMonthYear},_selectDay:function(b,c,e,k){var m=a(b);if(!(a(k).hasClass(this._unselectableClass)||this._isDisabledDatepicker(m[0]))){m=this._getInst(m[0]);m.selectedDay=m.currentDay=
a("a",k).html();m.selectedMonth=m.currentMonth=c;m.selectedYear=m.currentYear=e;this._selectDate(b,this._formatDate(m,m.currentDay,m.currentMonth,m.currentYear))}},_clearDate:function(b){b=a(b);this._getInst(b[0]);this._selectDate(b,"")},_selectDate:function(b,c){var e=this._getInst(a(b)[0]);c=c!=null?c:this._formatDate(e);e.input&&e.input.val(c);this._updateAlternate(e);var k=this._get(e,"onSelect");if(k)k.apply(e.input?e.input[0]:null,[c,e]);else e.input&&e.input.trigger("change");if(e.inline)this._updateDatepicker(e);
else{this._hideDatepicker();this._lastInput=e.input[0];typeof e.input[0]!="object"&&e.input.focus();this._lastInput=null}},_updateAlternate:function(b){var c=this._get(b,"altField");if(c){var e=this._get(b,"altFormat")||this._get(b,"dateFormat"),k=this._getDate(b),m=this.formatDate(e,k,this._getFormatConfig(b));a(c).each(function(){a(this).val(m)})}},noWeekends:function(b){b=b.getDay();return[b>0&&b<6,""]},iso8601Week:function(b){b=new Date(b.getTime());b.setDate(b.getDate()+4-(b.getDay()||7));var c=
b.getTime();b.setMonth(0);b.setDate(1);return Math.floor(Math.round((c-b)/864E5)/7)+1},parseDate:function(b,c,e){if(b==null||c==null)throw"Invalid arguments";c=typeof c=="object"?c.toString():c+"";if(c=="")return null;var k=(e?e.shortYearCutoff:null)||this._defaults.shortYearCutoff;k=typeof k!="string"?k:(new Date).getFullYear()%100+parseInt(k,10);for(var m=(e?e.dayNamesShort:null)||this._defaults.dayNamesShort,o=(e?e.dayNames:null)||this._defaults.dayNames,n=(e?e.monthNamesShort:null)||this._defaults.monthNamesShort,
p=(e?e.monthNames:null)||this._defaults.monthNames,t=e=-1,x=-1,w=-1,u=false,r=function(F){(F=P+1<b.length&&b.charAt(P+1)==F)&&P++;return F},y=function(F){var J=r(F);F=c.substring(C).match(RegExp("^\\d{1,"+(F=="@"?14:F=="!"?20:F=="y"&&J?4:F=="o"?3:2)+"}"));if(!F)throw"Missing number at position "+C;C+=F[0].length;return parseInt(F[0],10)},z=function(F,J,aa){F=r(F)?aa:J;for(J=0;J<F.length;J++)if(c.substr(C,F[J].length).toLowerCase()==F[J].toLowerCase()){C+=F[J].length;return J+1}throw"Unknown name at position "+
C;},B=function(){if(c.charAt(C)!=b.charAt(P))throw"Unexpected literal at position "+C;C++},C=0,P=0;P<b.length;P++)if(u)if(b.charAt(P)=="'"&&!r("'"))u=false;else B();else switch(b.charAt(P)){case "d":x=y("d");break;case "D":z("D",m,o);break;case "o":w=y("o");break;case "m":t=y("m");break;case "M":t=z("M",n,p);break;case "y":e=y("y");break;case "@":var H=new Date(y("@"));e=H.getFullYear();t=H.getMonth()+1;x=H.getDate();break;case "!":H=new Date((y("!")-this._ticksTo1970)/1E4);e=H.getFullYear();t=H.getMonth()+
1;x=H.getDate();break;case "'":if(r("'"))B();else u=true;break;default:B()}if(e==-1)e=(new Date).getFullYear();else if(e<100)e+=(new Date).getFullYear()-(new Date).getFullYear()%100+(e<=k?0:-100);if(w>-1){t=1;x=w;do{k=this._getDaysInMonth(e,t-1);if(x<=k)break;t++;x-=k}while(1)}H=this._daylightSavingAdjust(new Date(e,t-1,x));if(H.getFullYear()!=e||H.getMonth()+1!=t||H.getDate()!=x)throw"Invalid date";return H},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",
RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*864E9,formatDate:function(b,c,e){if(!c)return"";var k=(e?e.dayNamesShort:null)||this._defaults.dayNamesShort,m=(e?e.dayNames:null)||this._defaults.dayNames,o=(e?e.monthNamesShort:null)||this._defaults.monthNamesShort;e=(e?e.monthNames:null)||this._defaults.monthNames;var n=function(r){(r=u+1<b.length&&b.charAt(u+
1)==r)&&u++;return r},p=function(r,y,z){y=""+y;if(n(r))for(;y.length<z;)y="0"+y;return y},t=function(r,y,z,B){return n(r)?B[y]:z[y]},x="",w=false;if(c)for(var u=0;u<b.length;u++)if(w)if(b.charAt(u)=="'"&&!n("'"))w=false;else x+=b.charAt(u);else switch(b.charAt(u)){case "d":x+=p("d",c.getDate(),2);break;case "D":x+=t("D",c.getDay(),k,m);break;case "o":x+=p("o",(c.getTime()-(new Date(c.getFullYear(),0,0)).getTime())/864E5,3);break;case "m":x+=p("m",c.getMonth()+1,2);break;case "M":x+=t("M",c.getMonth(),
o,e);break;case "y":x+=n("y")?c.getFullYear():(c.getYear()%100<10?"0":"")+c.getYear()%100;break;case "@":x+=c.getTime();break;case "!":x+=c.getTime()*1E4+this._ticksTo1970;break;case "'":if(n("'"))x+="'";else w=true;break;default:x+=b.charAt(u)}return x},_possibleChars:function(b){for(var c="",e=false,k=function(o){(o=m+1<b.length&&b.charAt(m+1)==o)&&m++;return o},m=0;m<b.length;m++)if(e)if(b.charAt(m)=="'"&&!k("'"))e=false;else c+=b.charAt(m);else switch(b.charAt(m)){case "d":case "m":case "y":case "@":c+=
"0123456789";break;case "D":case "M":return null;case "'":if(k("'"))c+="'";else e=true;break;default:c+=b.charAt(m)}return c},_get:function(b,c){return b.settings[c]!==g?b.settings[c]:this._defaults[c]},_setDateFromField:function(b,c){if(b.input.val()!=b.lastVal){var e=this._get(b,"dateFormat"),k=b.lastVal=b.input?b.input.val():null,m,o;m=o=this._getDefaultDate(b);var n=this._getFormatConfig(b);try{m=this.parseDate(e,k,n)||o}catch(p){this.log(p);k=c?"":k}b.selectedDay=m.getDate();b.drawMonth=b.selectedMonth=
m.getMonth();b.drawYear=b.selectedYear=m.getFullYear();b.currentDay=k?m.getDate():0;b.currentMonth=k?m.getMonth():0;b.currentYear=k?m.getFullYear():0;this._adjustInstDate(b)}},_getDefaultDate:function(b){return this._restrictMinMax(b,this._determineDate(b,this._get(b,"defaultDate"),new Date))},_determineDate:function(b,c,e){var k=function(m){var o=new Date;o.setDate(o.getDate()+m);return o};if(c=(c=c==null||c===""?e:typeof c=="string"?function(m){try{return a.datepicker.parseDate(a.datepicker._get(b,
"dateFormat"),m,a.datepicker._getFormatConfig(b))}catch(o){}var n=(m.toLowerCase().match(/^c/)?a.datepicker._getDate(b):null)||new Date,p=n.getFullYear(),t=n.getMonth();n=n.getDate();for(var x=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,w=x.exec(m);w;){switch(w[2]||"d"){case "d":case "D":n+=parseInt(w[1],10);break;case "w":case "W":n+=parseInt(w[1],10)*7;break;case "m":case "M":t+=parseInt(w[1],10);n=Math.min(n,a.datepicker._getDaysInMonth(p,t));break;case "y":case "Y":p+=parseInt(w[1],10);n=Math.min(n,
a.datepicker._getDaysInMonth(p,t))}w=x.exec(m)}return new Date(p,t,n)}(c):typeof c=="number"?isNaN(c)?e:k(c):new Date(c.getTime()))&&c.toString()=="Invalid Date"?e:c){c.setHours(0);c.setMinutes(0);c.setSeconds(0);c.setMilliseconds(0)}return this._daylightSavingAdjust(c)},_daylightSavingAdjust:function(b){if(!b)return null;b.setHours(b.getHours()>12?b.getHours()+2:0);return b},_setDate:function(b,c,e){var k=!c,m=b.selectedMonth,o=b.selectedYear;c=this._restrictMinMax(b,this._determineDate(b,c,new Date));
b.selectedDay=b.currentDay=c.getDate();b.drawMonth=b.selectedMonth=b.currentMonth=c.getMonth();b.drawYear=b.selectedYear=b.currentYear=c.getFullYear();if((m!=b.selectedMonth||o!=b.selectedYear)&&!e)this._notifyChange(b);this._adjustInstDate(b);if(b.input)b.input.val(k?"":this._formatDate(b))},_getDate:function(b){return!b.currentYear||b.input&&b.input.val()==""?null:this._daylightSavingAdjust(new Date(b.currentYear,b.currentMonth,b.currentDay))},_generateHTML:function(b){var c=new Date;c=this._daylightSavingAdjust(new Date(c.getFullYear(),
c.getMonth(),c.getDate()));var e=this._get(b,"isRTL"),k=this._get(b,"showButtonPanel"),m=this._get(b,"hideIfNoPrevNext"),o=this._get(b,"navigationAsDateFormat"),n=this._getNumberOfMonths(b),p=this._get(b,"showCurrentAtPos"),t=this._get(b,"stepMonths"),x=n[0]!=1||n[1]!=1,w=this._daylightSavingAdjust(!b.currentDay?new Date(9999,9,9):new Date(b.currentYear,b.currentMonth,b.currentDay)),u=this._getMinMaxDate(b,"min"),r=this._getMinMaxDate(b,"max");p=b.drawMonth-p;var y=b.drawYear;if(p<0){p+=12;y--}if(r){var z=
this._daylightSavingAdjust(new Date(r.getFullYear(),r.getMonth()-n[0]*n[1]+1,r.getDate()));for(z=u&&z<u?u:z;this._daylightSavingAdjust(new Date(y,p,1))>z;){p--;if(p<0){p=11;y--}}}b.drawMonth=p;b.drawYear=y;z=this._get(b,"prevText");z=!o?z:this.formatDate(z,this._daylightSavingAdjust(new Date(y,p-t,1)),this._getFormatConfig(b));z=this._canAdjustMonth(b,-1,y,p)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+j+".datepicker._adjustDate('#"+b.id+"', -"+t+", 'M');\" title=\""+z+'"><span class="ui-icon ui-icon-circle-triangle-'+
(e?"e":"w")+'">'+z+"</span></a>":m?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+z+'"><span class="ui-icon ui-icon-circle-triangle-'+(e?"e":"w")+'">'+z+"</span></a>";var B=this._get(b,"nextText");B=!o?B:this.formatDate(B,this._daylightSavingAdjust(new Date(y,p+t,1)),this._getFormatConfig(b));m=this._canAdjustMonth(b,+1,y,p)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+j+".datepicker._adjustDate('#"+b.id+"', +"+t+", 'M');\" title=\""+B+'"><span class="ui-icon ui-icon-circle-triangle-'+
(e?"w":"e")+'">'+B+"</span></a>":m?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+B+'"><span class="ui-icon ui-icon-circle-triangle-'+(e?"w":"e")+'">'+B+"</span></a>";t=this._get(b,"currentText");B=this._get(b,"gotoCurrent")&&b.currentDay?w:c;t=!o?t:this.formatDate(t,B,this._getFormatConfig(b));o=!b.inline?'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+j+'.datepicker._hideDatepicker();">'+this._get(b,
"closeText")+"</button>":"";k=k?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(e?o:"")+(this._isInRange(b,B)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+j+".datepicker._gotoToday('#"+b.id+"');\">"+t+"</button>":"")+(e?"":o)+"</div>":"";o=parseInt(this._get(b,"firstDay"),10);o=isNaN(o)?0:o;t=this._get(b,"showWeek");B=this._get(b,"dayNames");this._get(b,"dayNamesShort");var C=this._get(b,"dayNamesMin"),P=
this._get(b,"monthNames"),H=this._get(b,"monthNamesShort"),F=this._get(b,"beforeShowDay"),J=this._get(b,"showOtherMonths"),aa=this._get(b,"selectOtherMonths");this._get(b,"calculateWeek");for(var ha=this._getDefaultDate(b),da="",ja=0;ja<n[0];ja++){for(var M="",O=0;O<n[1];O++){var N=this._daylightSavingAdjust(new Date(y,p,b.selectedDay)),I=" ui-corner-all",T="";if(x){T+='<div class="ui-datepicker-group';if(n[1]>1)switch(O){case 0:T+=" ui-datepicker-group-first";I=" ui-corner-"+(e?"right":"left");break;
case n[1]-1:T+=" ui-datepicker-group-last";I=" ui-corner-"+(e?"left":"right");break;default:T+=" ui-datepicker-group-middle";I=""}T+='">'}T+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+I+'">'+(/all|left/.test(I)&&ja==0?e?m:z:"")+(/all|right/.test(I)&&ja==0?e?z:m:"")+this._generateMonthYearHeader(b,p,y,u,r,ja>0||O>0,P,H)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var ca=t?'<th class="ui-datepicker-week-col">'+this._get(b,"weekHeader")+"</th>":"";for(I=0;I<
7;I++){var L=(I+o)%7;ca+="<th"+((I+o+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+B[L]+'">'+C[L]+"</span></th>"}T+=ca+"</tr></thead><tbody>";ca=this._getDaysInMonth(y,p);if(y==b.selectedYear&&p==b.selectedMonth)b.selectedDay=Math.min(b.selectedDay,ca);I=(this._getFirstDayOfMonth(y,p)-o+7)%7;ca=x?6:Math.ceil((I+ca)/7);L=this._daylightSavingAdjust(new Date(y,p,1-I));for(var W=0;W<ca;W++){T+="<tr>";var ga=!t?"":'<td class="ui-datepicker-week-col">'+this._get(b,"calculateWeek")(L)+"</td>";
for(I=0;I<7;I++){var Z=F?F.apply(b.input?b.input[0]:null,[L]):[true,""],R=L.getMonth()!=p,U=R&&!aa||!Z[0]||u&&L<u||r&&L>r;ga+='<td class="'+((I+o+6)%7>=5?" ui-datepicker-week-end":"")+(R?" ui-datepicker-other-month":"")+(L.getTime()==N.getTime()&&p==b.selectedMonth&&b._keyEvent||ha.getTime()==L.getTime()&&ha.getTime()==N.getTime()?" "+this._dayOverClass:"")+(U?" "+this._unselectableClass+" ui-state-disabled":"")+(R&&!J?"":" "+Z[1]+(L.getTime()==w.getTime()?" "+this._currentClass:"")+(L.getTime()==
c.getTime()?" ui-datepicker-today":""))+'"'+((!R||J)&&Z[2]?' title="'+Z[2]+'"':"")+(U?"":' onclick="DP_jQuery_'+j+".datepicker._selectDay('#"+b.id+"',"+L.getMonth()+","+L.getFullYear()+', this);return false;"')+">"+(R&&!J?"&#xa0;":U?'<span class="ui-state-default">'+L.getDate()+"</span>":'<a class="ui-state-default'+(L.getTime()==c.getTime()?" ui-state-highlight":"")+(L.getTime()==w.getTime()?" ui-state-active":"")+(R?" ui-priority-secondary":"")+'" href="#">'+L.getDate()+"</a>")+"</td>";L.setDate(L.getDate()+
1);L=this._daylightSavingAdjust(L)}T+=ga+"</tr>"}p++;if(p>11){p=0;y++}T+="</tbody></table>"+(x?"</div>"+(n[0]>0&&O==n[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"");M+=T}da+=M}da+=k+(a.browser.msie&&parseInt(a.browser.version,10)<7&&!b.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':"");b._keyEvent=false;return da},_generateMonthYearHeader:function(b,c,e,k,m,o,n,p){var t=this._get(b,"changeMonth"),x=this._get(b,"changeYear"),w=this._get(b,
"showMonthAfterYear"),u='<div class="ui-datepicker-title">',r="";if(o||!t)r+='<span class="ui-datepicker-month">'+n[c]+"</span>";else{n=k&&k.getFullYear()==e;var y=m&&m.getFullYear()==e;r+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+j+".datepicker._selectMonthYear('#"+b.id+"', this, 'M');\" onclick=\"DP_jQuery_"+j+".datepicker._clickMonthYear('#"+b.id+"');\">";for(var z=0;z<12;z++)if((!n||z>=k.getMonth())&&(!y||z<=m.getMonth()))r+='<option value="'+z+'"'+(z==c?' selected="selected"':
"")+">"+p[z]+"</option>";r+="</select>"}w||(u+=r+(o||!(t&&x)?"&#xa0;":""));b.yearshtml="";if(o||!x)u+='<span class="ui-datepicker-year">'+e+"</span>";else{p=this._get(b,"yearRange").split(":");var B=(new Date).getFullYear();n=function(C){C=C.match(/c[+-].*/)?e+parseInt(C.substring(1),10):C.match(/[+-].*/)?B+parseInt(C,10):parseInt(C,10);return isNaN(C)?B:C};c=n(p[0]);p=Math.max(c,n(p[1]||""));c=k?Math.max(c,k.getFullYear()):c;p=m?Math.min(p,m.getFullYear()):p;for(b.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+
j+".datepicker._selectMonthYear('#"+b.id+"', this, 'Y');\" onclick=\"DP_jQuery_"+j+".datepicker._clickMonthYear('#"+b.id+"');\">";c<=p;c++)b.yearshtml+='<option value="'+c+'"'+(c==e?' selected="selected"':"")+">"+c+"</option>";b.yearshtml+="</select>";if(a.browser.mozilla)u+='<select class="ui-datepicker-year"><option value="'+e+'" selected="selected">'+e+"</option></select>";else{u+=b.yearshtml;b.yearshtml=null}}u+=this._get(b,"yearSuffix");if(w)u+=(o||!(t&&x)?"&#xa0;":"")+r;u+="</div>";return u},
_adjustInstDate:function(b,c,e){var k=b.drawYear+(e=="Y"?c:0),m=b.drawMonth+(e=="M"?c:0);c=Math.min(b.selectedDay,this._getDaysInMonth(k,m))+(e=="D"?c:0);k=this._restrictMinMax(b,this._daylightSavingAdjust(new Date(k,m,c)));b.selectedDay=k.getDate();b.drawMonth=b.selectedMonth=k.getMonth();b.drawYear=b.selectedYear=k.getFullYear();if(e=="M"||e=="Y")this._notifyChange(b)},_restrictMinMax:function(b,c){var e=this._getMinMaxDate(b,"min"),k=this._getMinMaxDate(b,"max");e=e&&c<e?e:c;return k&&e>k?k:e},
_notifyChange:function(b){var c=this._get(b,"onChangeMonthYear");if(c)c.apply(b.input?b.input[0]:null,[b.selectedYear,b.selectedMonth+1,b])},_getNumberOfMonths:function(b){b=this._get(b,"numberOfMonths");return b==null?[1,1]:typeof b=="number"?[1,b]:b},_getMinMaxDate:function(b,c){return this._determineDate(b,this._get(b,c+"Date"),null)},_getDaysInMonth:function(b,c){return 32-this._daylightSavingAdjust(new Date(b,c,32)).getDate()},_getFirstDayOfMonth:function(b,c){return(new Date(b,c,1)).getDay()},
_canAdjustMonth:function(b,c,e,k){var m=this._getNumberOfMonths(b);e=this._daylightSavingAdjust(new Date(e,k+(c<0?c:m[0]*m[1]),1));c<0&&e.setDate(this._getDaysInMonth(e.getFullYear(),e.getMonth()));return this._isInRange(b,e)},_isInRange:function(b,c){var e=this._getMinMaxDate(b,"min"),k=this._getMinMaxDate(b,"max");return(!e||c.getTime()>=e.getTime())&&(!k||c.getTime()<=k.getTime())},_getFormatConfig:function(b){var c=this._get(b,"shortYearCutoff");c=typeof c!="string"?c:(new Date).getFullYear()%
100+parseInt(c,10);return{shortYearCutoff:c,dayNamesShort:this._get(b,"dayNamesShort"),dayNames:this._get(b,"dayNames"),monthNamesShort:this._get(b,"monthNamesShort"),monthNames:this._get(b,"monthNames")}},_formatDate:function(b,c,e,k){if(!c){b.currentDay=b.selectedDay;b.currentMonth=b.selectedMonth;b.currentYear=b.selectedYear}c=c?typeof c=="object"?c:this._daylightSavingAdjust(new Date(k,e,c)):this._daylightSavingAdjust(new Date(b.currentYear,b.currentMonth,b.currentDay));return this.formatDate(this._get(b,
"dateFormat"),c,this._getFormatConfig(b))}});a.fn.datepicker=function(b){if(!this.length)return this;if(!a.datepicker.initialized){a(document).mousedown(a.datepicker._checkExternalClick).find("body").append(a.datepicker.dpDiv);a.datepicker.initialized=true}var c=Array.prototype.slice.call(arguments,1);if(typeof b=="string"&&(b=="isDisabled"||b=="getDate"||b=="widget"))return a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c));if(b=="option"&&arguments.length==2&&typeof arguments[1]==
"string")return a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c));return this.each(function(){typeof b=="string"?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this].concat(c)):a.datepicker._attachDatepicker(this,b)})};a.datepicker=new f;a.datepicker.initialized=false;a.datepicker.uuid=(new Date).getTime();a.datepicker.version="1.8.11";window["DP_jQuery_"+j]=a})(jQuery);
(function(a,g){if(a.cleanData){var f=a.cleanData;a.cleanData=function(j){for(var b=0,c;(c=j[b])!=null;b++)a(c).triggerHandler("remove");f(j)}}else{var h=a.fn.remove;a.fn.remove=function(j,b){return this.each(function(){if(!b)if(!j||a.filter(j,[this]).length)a("*",this).add([this]).each(function(){a(this).triggerHandler("remove")});return h.call(a(this),j,b)})}}a.widget=function(j,b,c){var e=j.split(".")[0],k;j=j.split(".")[1];k=e+"-"+j;if(!c){c=b;b=a.Widget}a.expr[":"][k]=function(m){return!!a.data(m,
j)};a[e]=a[e]||{};a[e][j]=function(m,o){arguments.length&&this._createWidget(m,o)};b=new b;b.options=a.extend(true,{},b.options);a[e][j].prototype=a.extend(true,b,{namespace:e,widgetName:j,widgetEventPrefix:a[e][j].prototype.widgetEventPrefix||j,widgetBaseClass:k},c);a.widget.bridge(j,a[e][j])};a.widget.bridge=function(j,b){a.fn[j]=function(c){var e=typeof c==="string",k=Array.prototype.slice.call(arguments,1),m=this;c=!e&&k.length?a.extend.apply(null,[true,c].concat(k)):c;if(e&&c.charAt(0)==="_")return m;
e?this.each(function(){var o=a.data(this,j),n=o&&a.isFunction(o[c])?o[c].apply(o,k):o;if(n!==o&&n!==g){m=n;return false}}):this.each(function(){var o=a.data(this,j);o?o.option(c||{})._init():a.data(this,j,new b(c,this))});return m}};a.Widget=function(j,b){arguments.length&&this._createWidget(j,b)};a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(j,b){a.data(b,this.widgetName,this);this.element=a(b);this.options=a.extend(true,{},this.options,
this._getCreateOptions(),j);var c=this;this.element.bind("remove."+this.widgetName,function(){c.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},
widget:function(){return this.element},option:function(j,b){var c=j;if(arguments.length===0)return a.extend({},this.options);if(typeof j==="string"){if(b===g)return this.options[j];c={};c[j]=b}this._setOptions(c);return this},_setOptions:function(j){var b=this;a.each(j,function(c,e){b._setOption(c,e)});return this},_setOption:function(j,b){this.options[j]=b;if(j==="disabled")this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",b);return this},
enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(j,b,c){var e=this.options[j];b=a.Event(b);b.type=(j===this.widgetEventPrefix?j:this.widgetEventPrefix+j).toLowerCase();c=c||{};if(b.originalEvent){j=a.event.props.length;for(var k;j;){k=a.event.props[--j];b[k]=b.originalEvent[k]}}this.element.trigger(b,c);return!(a.isFunction(e)&&e.call(this.element[0],b,c)===false||b.isDefaultPrevented())}}})(jQuery);
function popup(a){newwindow=window.open(a,"name","height=400,width=600");window.focus&&newwindow.focus();return false}function collapse(a){jQuery("#"+a).slideToggle()}function fade(a,g){g>0?jQuery("#"+a).hide().fadeIn("slow"):jQuery("#"+a).show().fadeOut("slow")}
function ajax(a,g,f){query="";if(typeof g=="string"){if(d=jQuery(g).serialize())query=d}else{pcs=[];for(i=0;i<g.length;i++)(q=jQuery("#"+g[i]).serialize())&&pcs.push(q);if(pcs.length>0)query=pcs.join("&")}jQuery.ajax({type:"POST",url:a,data:query,success:function(h){if(f)f==":eval"?eval(h):jQuery("#"+f).html(h)}})}String.prototype.reverse=function(){return this.split("").reverse().join("")};
function web2py_ajax_init(){jQuery(".hidden").hide();jQuery(".error").hide().slideDown("slow");jQuery(".flash").click(function(){jQuery(this).fadeOut("slow");return false});jQuery("input.string").attr("size",50);jQuery("textarea.text").attr("cols",50).attr("rows",10);jQuery("input.integer").keyup(function(){this.value=this.value.reverse().replace(/[^0-9\-]|\-(?=.)/g,"").reverse()});jQuery("input.double").keyup(function(){this.value=this.value.reverse().replace(/[^0-9\-\.]|[\-](?=.)|[\.](?=[0-9]*[\.])/g,
"").reverse()})}jQuery(document).ready(function(){jQuery(".flash").hide().slideDown("slow");jQuery(".flash").html()!=""&&jQuery(".flash").slideDown("slow");web2py_ajax_init()});function web2py_trap_form(a,g){jQuery("#"+g+" form").each(function(){var f=jQuery(this);f.hasClass("no_trap")||f.submit(function(){jQuery(".flash").hide().html("");web2py_ajax_page("post",a,f.serialize(),g);return false})})}
function web2py_ajax_page(a,g,f,h){jQuery.ajax({type:a,url:g,data:f,beforeSend:function(j){j.setRequestHeader("web2py-component-location",document.location);j.setRequestHeader("web2py-component-element",h)},complete:function(j){(command=j.getResponseHeader("web2py-component-command"))&&eval(command);(flash=j.getResponseHeader("web2py-component-flash"))&&jQuery(".flash").html(flash).slideDown()},success:function(j){jQuery("#"+h).html(j);web2py_trap_form(g,h);web2py_ajax_init()}})}
function web2py_component(a,g){jQuery(document).ready(function(){web2py_ajax_page("get",a,null,g)})}(function(a){a.fn.elementExists=function(){return jQuery(this).length>0}})(jQuery);(function(a){a.fn.formElementType=function(){return jQuery(this).elementExists()?jQuery(this).attr("type"):""}})(jQuery);(function(a){a.fn.isTextBox=function(){return jQuery(this).formElementType()==="text"}})(jQuery);(function(a){a.fn.isTextArea=function(){return jQuery(this).formElementType()==="textarea"}})(jQuery);
(function(a){a.fn.isPassword=function(){return jQuery(this).formElementType()==="password"}})(jQuery);(function(a){a.fn.isHiddenInput=function(){return jQuery(this).formElementType()==="hidden"}})(jQuery);(function(a){a.fn.isCheckBox=function(){return jQuery(this).formElementType()==="checkbox"}})(jQuery);(function(a){a.fn.isRadioBox=function(){return jQuery(this).formElementType()==="radio"}})(jQuery);(function(a){a.fn.isButton=function(){return jQuery(this).formElementType()==="button"}})(jQuery);
(function(a){a.fn.isSubmitButton=function(){return jQuery(this).formElementType()==="submit"}})(jQuery);(function(a){a.fn.isResetButton=function(){return jQuery(this).formElementType()==="reset"}})(jQuery);(function(a){a.fn.isSelectBox=function(){var g=jQuery(this).formElementType(),f=this.attr("size");return g!=="select-one"?false:typeof f==="undefined"?false:parseInt(f)>1}})(jQuery);(function(a){a.fn.isMultiSelectBox=function(){return jQuery(this).formElementType()==="select-multiple"}})(jQuery);
(function(a){a.fn.isDropDownList=function(){var g=jQuery(this).formElementType(),f=this.attr("size");return g!=="select-one"?false:typeof f==="undefined"?true:parseInt(f)<=1}})(jQuery);(function(a){a.fn.isChecked=function(){return jQuery(this).is(":checked")}})(jQuery);
(function(a){a.fn.isSelected=function(){var g=jQuery(this);if(arguments.length===0)return false;var f=false,h=arguments[0],j=arguments;if(g.isRadioBox()){g=jQuery("input[type='radio'][name='"+g.attr("name")+"'][checked]");if(g.length===1)return h===g.val()}else if(g.isSelectBox()||g.isDropDownList()){g=jQuery("#"+g.attr("id")+" option:selected");if(g.length===1)return h===g.val()}else if(g.isMultiSelectBox()){g=jQuery("#"+g.attr("id")+" option:selected");jQuery.each(g,function(){var b=jQuery(this);
f=false;for(var c=0;c<j.length;c++)if(j[c]===b.val()){f=true;break}})}return f}})(jQuery);
(function(a){a.fn.selectedItem=function(g){var f=jQuery(this);if(typeof g==="undefined"||isNaN(g))g=0;if(f.isRadioBox()){var h=jQuery("input[type='radio'][name='"+f.attr("name")+"'][checked]");if(g>h.length-1)g=h.length-1;else if(g<0)g=0;if(h.length>0)return jQuery(h[g])}else if(f.isSelectBox()||f.isMultiSelectBox()||f.isDropDownList()){h=jQuery("#"+f.attr("id")+" option:selected");if(g>h.length-1)g=h.length-1;else if(g<0)g=0;if(h.length>0)return jQuery(h[g])}return f}})(jQuery);
(function(a){a.fn.firstSelectedItem=function(){return jQuery(this).selectedItem()}})(jQuery);(function(a){a.fn.lastSelectedItem=function(){return jQuery(this).selectedItem(Number.MAX_VALUE)}})(jQuery);(function(a){a.fn.selectedValue=function(){return jQuery(this).selectedItem(0).val()}})(jQuery);
(function(a){a.fn.selectedValues=function(){var g=[],f=jQuery(this);if(f.isMultiSelectBox()){f=jQuery("#"+f.attr("id")+" option:selected");jQuery.each(f,function(){g.push(jQuery(this).val())})}else g.push(f.selectedValue());return g}})(jQuery);
(function(a){a.fn.itemExists=function(g){var f=jQuery(this),h=false;if(f.isRadioBox())h=jQuery("input[type='radio'][name='"+f.attr("name")+"'][value='"+g+"']").length===1;else if(f.isSelectBox()||f.isMultiSelectBox()||f.isDropDownList()){f=jQuery("#"+f.attr("id")+" option");jQuery.each(f,function(){if(jQuery(this).val()===g){h=true;return false}})}else return jQuery(this).val()===g;return h}})(jQuery);
jQuery(document).ready(function(){jQuery(".s3_checkbox_label").cluetip({activation:"hover",positionBy:"auto",local:true,hideLocal:false,showTitle:false,topOffset:0,mouseOutClose:true,arrows:true,clickThrough:true})});
jQuery.fn.fancyZoom=function(a){function g(n){if(e)return false;e=true;var p=$($(this).attr("href")),t=a.height,x=window.innerWidth||window.document.documentElement.clientWidth||window.document.body.clientWidth,w=window.innerHeight||window.document.documentElement.clientHeight||window.document.body.clientHeight,u=window.pageYOffset||window.document.documentElement.scrollTop||window.document.body.scrollTop,r={width:x,height:w,x:window.pageXOffset||window.document.documentElement.scrollLeft||window.document.body.scrollLeft,
y:u};x=(a.width||p.width())+60;w=(t||p.height())+60;t=Math.max(r.height/2-w/2+u,0);r=r.width/2-x/2;u=n.pageY;n=n.pageX;m.attr("curTop",u);m.attr("curLeft",n);m.attr("scaleImg",a.scaleImg?"true":"false");$("#zoom").hide().css({position:"absolute",top:u+"px",left:n+"px",width:"1px",height:"1px"});j();m.hide();a.closeOnClick&&$("#zoom").click(f);if(a.scaleImg){o.html(p.html());$("#zoom_content img").css("width","100%")}else o.html("");$("#zoom").animate({top:t+"px",left:r+"px",opacity:"show",width:x,
height:w},500,null,function(){a.scaleImg!=true&&o.html(p.html());b();m.show();e=false});return false}function f(){if(e)return false;e=true;$("#zoom").unbind("click");j();m.attr("scaleImg")!="true"&&o.html("");m.hide();$("#zoom").animate({top:m.attr("curTop")+"px",left:m.attr("curLeft")+"px",opacity:"hide",width:"1px",height:"1px"},500,null,function(){m.attr("scaleImg")=="true"&&o.html("");b();e=false});return false}function h(n){$("#zoom_table td").each(function(){var x=$(this).css("background-image").replace(/\.(png|gif|none)\"\)$/,
"."+n+'")');$(this).css("background-image",x)});var p=m.children("img"),t=p.attr("src").replace(/\.(png|gif|none)$/,"."+n);p.attr("src",t)}function j(){$.browser.msie&&parseFloat($.browser.version)>=7&&h("gif")}function b(){$.browser.msie&&$.browser.version>=7&&h("png")}var c=(a=a||{})&&a.directory?a.directory:"images",e=false;if($("#zoom").length==0){var k=$.browser.msie?"gif":"png";$("body").append('<div id="zoom" style="display:none;">                   <table id="zoom_table" style="border-collapse:collapse; width:100%; height:100%;">                     <tbody>                       <tr>                         <td class="tl" style="background:url('+
c+"/tl."+k+') 0 0 no-repeat; width:20px height:20px; overflow:hidden;" />                         <td class="tm" style="background:url('+c+"/tm."+k+') 0 0 repeat-x; height:20px; overflow:hidden;" />                         <td class="tr" style="background:url('+c+"/tr."+k+') 100% 0 no-repeat; width:20px height:20px; overflow:hidden;" />                       </tr>                       <tr>                         <td class="ml" style="background:url('+c+"/ml."+k+') 0 0 repeat-y; width:20px; overflow:hidden;" />                         <td class="mm" style="background:#fff; vertical-align:top; padding:10px;">                           <div id="zoom_content">                           </div>                         </td>                         <td class="mr" style="background:url('+
c+"/mr."+k+') 100% 0 repeat-y;  width:20px; overflow:hidden;" />                       </tr>                       <tr>                         <td class="bl" style="background:url('+c+"/bl."+k+') 0 100% no-repeat; width:20px height:20px; overflow:hidden;" />                         <td class="bm" style="background:url('+c+"/bm."+k+') 0 100% repeat-x; height:20px; overflow:hidden;" />                         <td class="br" style="background:url('+c+"/br."+k+') 100% 100% no-repeat; width:20px height:20px; overflow:hidden;" />                       </tr>                     </tbody>                   </table>                   <a href="#" title="Close" id="zoom_close" style="position:absolute; top:0; left:0;">                     <img src="'+
c+"/closebox."+k+'" alt="Close" style="border:none; margin:0; padding:0;" />                   </a>                 </div>');$("html").click(function(n){$(n.target).parents("#zoom:visible").length==0&&f()});$(document).keyup(function(n){n.keyCode==27&&$("#zoom:visible").length>0&&f()});$("#zoom_close").click(f)}$("#zoom");$("#zoom_table");var m=$("#zoom_close"),o=$("#zoom_content");$("td.ml,td.mm,td.mr");this.each(function(){$($(this).attr("href")).hide();$(this).click(g)});return this};
(function(a){a.ui=a.ui||{};var g=/left|center|right/,f=/top|center|bottom/,h=a.fn.position,j=a.fn.offset;a.fn.position=function(b){if(!b||!b.of)return h.apply(this,arguments);b=a.extend({},b);var c=a(b.of),e=c[0],k=(b.collision||"flip").split(" "),m=b.offset?b.offset.split(" "):[0,0],o,n,p;if(e.nodeType===9){o=c.width();n=c.height();p={top:0,left:0}}else if(e.setTimeout){o=c.width();n=c.height();p={top:c.scrollTop(),left:c.scrollLeft()}}else if(e.preventDefault){b.at="left top";o=n=0;p={top:b.of.pageY,
left:b.of.pageX}}else{o=c.outerWidth();n=c.outerHeight();p=c.offset()}a.each(["my","at"],function(){var t=(b[this]||"").split(" ");if(t.length===1)t=g.test(t[0])?t.concat(["center"]):f.test(t[0])?["center"].concat(t):["center","center"];t[0]=g.test(t[0])?t[0]:"center";t[1]=f.test(t[1])?t[1]:"center";b[this]=t});if(k.length===1)k[1]=k[0];m[0]=parseInt(m[0],10)||0;if(m.length===1)m[1]=m[0];m[1]=parseInt(m[1],10)||0;if(b.at[0]==="right")p.left+=o;else if(b.at[0]==="center")p.left+=o/2;if(b.at[1]==="bottom")p.top+=
n;else if(b.at[1]==="center")p.top+=n/2;p.left+=m[0];p.top+=m[1];return this.each(function(){var t=a(this),x=t.outerWidth(),w=t.outerHeight(),u=parseInt(a.curCSS(this,"marginLeft",true))||0,r=parseInt(a.curCSS(this,"marginTop",true))||0,y=x+u+(parseInt(a.curCSS(this,"marginRight",true))||0),z=w+r+(parseInt(a.curCSS(this,"marginBottom",true))||0),B=a.extend({},p),C;if(b.my[0]==="right")B.left-=x;else if(b.my[0]==="center")B.left-=x/2;if(b.my[1]==="bottom")B.top-=w;else if(b.my[1]==="center")B.top-=
w/2;B.left=Math.round(B.left);B.top=Math.round(B.top);C={left:B.left-u,top:B.top-r};a.each(["left","top"],function(P,H){if(a.ui.position[k[P]])a.ui.position[k[P]][H](B,{targetWidth:o,targetHeight:n,elemWidth:x,elemHeight:w,collisionPosition:C,collisionWidth:y,collisionHeight:z,offset:m,my:b.my,at:b.at})});a.fn.bgiframe&&t.bgiframe();t.offset(a.extend(B,{using:b.using}))})};a.ui.position={fit:{left:function(b,c){var e=a(window);e=c.collisionPosition.left+c.collisionWidth-e.width()-e.scrollLeft();b.left=
e>0?b.left-e:Math.max(b.left-c.collisionPosition.left,b.left)},top:function(b,c){var e=a(window);e=c.collisionPosition.top+c.collisionHeight-e.height()-e.scrollTop();b.top=e>0?b.top-e:Math.max(b.top-c.collisionPosition.top,b.top)}},flip:{left:function(b,c){if(c.at[0]!=="center"){var e=a(window);e=c.collisionPosition.left+c.collisionWidth-e.width()-e.scrollLeft();var k=c.my[0]==="left"?-c.elemWidth:c.my[0]==="right"?c.elemWidth:0,m=c.at[0]==="left"?c.targetWidth:-c.targetWidth,o=-2*c.offset[0];b.left+=
c.collisionPosition.left<0?k+m+o:e>0?k+m+o:0}},top:function(b,c){if(c.at[1]!=="center"){var e=a(window);e=c.collisionPosition.top+c.collisionHeight-e.height()-e.scrollTop();var k=c.my[1]==="top"?-c.elemHeight:c.my[1]==="bottom"?c.elemHeight:0,m=c.at[1]==="top"?c.targetHeight:-c.targetHeight,o=-2*c.offset[1];b.top+=c.collisionPosition.top<0?k+m+o:e>0?k+m+o:0}}}};if(!a.offset.setOffset){a.offset.setOffset=function(b,c){if(/static/.test(a.curCSS(b,"position")))b.style.position="relative";var e=a(b),
k=e.offset(),m=parseInt(a.curCSS(b,"top",true),10)||0,o=parseInt(a.curCSS(b,"left",true),10)||0;k={top:c.top-k.top+m,left:c.left-k.left+o};"using"in c?c.using.call(b,k):e.css(k)};a.fn.offset=function(b){var c=this[0];if(!c||!c.ownerDocument)return null;if(b)return this.each(function(){a.offset.setOffset(this,b)});return j.call(this)}}})(jQuery);
(function(a){var g=0;a.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:false,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var f=this,h=this.element[0].ownerDocument,j;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(b){if(!(f.options.disabled||f.element.attr("readonly"))){j=
false;var c=a.ui.keyCode;switch(b.keyCode){case c.PAGE_UP:f._move("previousPage",b);break;case c.PAGE_DOWN:f._move("nextPage",b);break;case c.UP:f._move("previous",b);b.preventDefault();break;case c.DOWN:f._move("next",b);b.preventDefault();break;case c.ENTER:case c.NUMPAD_ENTER:if(f.menu.active){j=true;b.preventDefault()}case c.TAB:if(!f.menu.active)break;f.menu.select(b);break;case c.ESCAPE:f.element.val(f.term);f.close(b);break;default:clearTimeout(f.searching);f.searching=setTimeout(function(){if(f.term!=
f.element.val()){f.selectedItem=null;f.search(null,b)}},f.options.delay)}}}).bind("keypress.autocomplete",function(b){if(j){j=false;b.preventDefault()}}).bind("focus.autocomplete",function(){if(!f.options.disabled){f.selectedItem=null;f.previous=f.element.val()}}).bind("blur.autocomplete",function(b){if(!f.options.disabled){clearTimeout(f.searching);f.closing=setTimeout(function(){f.close(b);f._change(b)},150)}});this._initSource();this.response=function(){return f._response.apply(f,arguments)};this.menu=
a("<ul></ul>").addClass("ui-autocomplete").appendTo(a(this.options.appendTo||"body",h)[0]).mousedown(function(b){var c=f.menu.element[0];a(b.target).closest(".ui-menu-item").length||setTimeout(function(){a(document).one("mousedown",function(e){e.target!==f.element[0]&&e.target!==c&&!a.ui.contains(c,e.target)&&f.close()})},1);setTimeout(function(){clearTimeout(f.closing)},13)}).menu({focus:function(b,c){var e=c.item.data("item.autocomplete");false!==f._trigger("focus",b,{item:e})&&/^key/.test(b.originalEvent.type)&&
f.element.val(e.value)},selected:function(b,c){var e=c.item.data("item.autocomplete"),k=f.previous;if(f.element[0]!==h.activeElement){f.element.focus();f.previous=k;setTimeout(function(){f.previous=k;f.selectedItem=e},1)}false!==f._trigger("select",b,{item:e})&&f.element.val(e.value);f.term=f.element.val();f.close(b);f.selectedItem=e},blur:function(){f.menu.element.is(":visible")&&f.element.val()!==f.term&&f.element.val(f.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu");
a.fn.bgiframe&&this.menu.element.bgiframe()},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");this.menu.element.remove();a.Widget.prototype.destroy.call(this)},_setOption:function(f,h){a.Widget.prototype._setOption.apply(this,arguments);f==="source"&&this._initSource();if(f==="appendTo")this.menu.element.appendTo(a(h||"body",this.element[0].ownerDocument)[0]);f==="disabled"&&
h&&this.xhr&&this.xhr.abort()},_initSource:function(){var f=this,h,j;if(a.isArray(this.options.source)){h=this.options.source;this.source=function(b,c){c(a.ui.autocomplete.filter(h,b.term))}}else if(typeof this.options.source==="string"){j=this.options.source;this.source=function(b,c){f.xhr&&f.xhr.abort();f.xhr=a.ajax({url:j,data:b,dataType:"json",autocompleteRequest:++g,success:function(e){this.autocompleteRequest===g&&c(e)},error:function(){this.autocompleteRequest===g&&c([])}})}}else this.source=
this.options.source},search:function(f,h){f=f!=null?f:this.element.val();this.term=this.element.val();if(f.length<this.options.minLength)return this.close(h);clearTimeout(this.closing);if(this._trigger("search",h)!==false)return this._search(f)},_search:function(f){this.pending++;this.element.addClass("ui-autocomplete-loading");this.source({term:f},this.response)},_response:function(f){if(!this.options.disabled&&f&&f.length){f=this._normalize(f);this._suggest(f);this._trigger("open")}else this.close();
this.pending--;this.pending||this.element.removeClass("ui-autocomplete-loading")},close:function(f){clearTimeout(this.closing);if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.deactivate();this._trigger("close",f)}},_change:function(f){this.previous!==this.element.val()&&this._trigger("change",f,{item:this.selectedItem})},_normalize:function(f){if(f.length&&f[0].label&&f[0].value)return f;return a.map(f,function(h){if(typeof h==="string")return{label:h,value:h};return a.extend({label:h.label||
h.value,value:h.value||h.label},h)})},_suggest:function(f){var h=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(h,f);this.menu.deactivate();this.menu.refresh();h.show();this._resizeMenu();h.position(a.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next(new a.Event("mouseover"))},_resizeMenu:function(){var f=this.menu.element;f.outerWidth(Math.max(f.width("").outerWidth(),this.element.outerWidth()))},_renderMenu:function(f,h){var j=this;
a.each(h,function(b,c){j._renderItem(f,c)})},_renderItem:function(f,h){return a("<li></li>").data("item.autocomplete",h).append(a("<a></a>").text(h.label)).appendTo(f)},_move:function(f,h){if(this.menu.element.is(":visible"))if(this.menu.first()&&/^previous/.test(f)||this.menu.last()&&/^next/.test(f)){this.element.val(this.term);this.menu.deactivate()}else this.menu[f](h);else this.search(null,h)},widget:function(){return this.menu.element}});a.extend(a.ui.autocomplete,{escapeRegex:function(f){return f.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,
"\\$&")},filter:function(f,h){var j=RegExp(a.ui.autocomplete.escapeRegex(h),"i");return a.grep(f,function(b){return j.test(b.label||b.value||b)})}})})(jQuery);
(function(a){a.widget("ui.menu",{_create:function(){var g=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(f){if(a(f.target).closest(".ui-menu-item a").length){f.preventDefault();g.select(f)}});this.refresh()},refresh:function(){var g=this;this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").attr("tabindex",
-1).mouseenter(function(f){g.activate(f,a(this).parent())}).mouseleave(function(){g.deactivate()})},activate:function(g,f){this.deactivate();if(this.hasScroll()){var h=f.offset().top-this.element.offset().top,j=this.element.attr("scrollTop"),b=this.element.height();if(h<0)this.element.attr("scrollTop",j+h);else h>=b&&this.element.attr("scrollTop",j+h-b+f.height())}this.active=f.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",g,{item:f})},
deactivate:function(){if(this.active){this.active.children("a").removeClass("ui-state-hover").removeAttr("id");this._trigger("blur");this.active=null}},next:function(g){this.move("next",".ui-menu-item:first",g)},previous:function(g){this.move("prev",".ui-menu-item:last",g)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(g,f,h){if(this.active){g=this.active[g+"All"](".ui-menu-item").eq(0);
g.length?this.activate(h,g):this.activate(h,this.element.children(f))}else this.activate(h,this.element.children(f))},nextPage:function(g){if(this.hasScroll())if(!this.active||this.last())this.activate(g,this.element.children(".ui-menu-item:first"));else{var f=this.active.offset().top,h=this.element.height(),j=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-f-h+a(this).height();return b<10&&b>-10});j.length||(j=this.element.children(".ui-menu-item:last"));this.activate(g,
j)}else this.activate(g,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(g){if(this.hasScroll())if(!this.active||this.first())this.activate(g,this.element.children(".ui-menu-item:last"));else{var f=this.active.offset().top,h=this.element.height();result=this.element.children(".ui-menu-item").filter(function(){var j=a(this).offset().top-f+h-a(this).height();return j<10&&j>-10});result.length||(result=this.element.children(".ui-menu-item:first"));
this.activate(g,result)}else this.activate(g,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element.attr("scrollHeight")},select:function(g){this._trigger("selected",g,{item:this.active})}})})(jQuery);$(document).ready(function(){S3.rtl?$('div.label label[id!="delete_record__label"]').prepend(":"):$('div.label label[id!="delete_record__label"]').append(":")});var S3={};S3.gis={};var popupWin=null;
function openPopup(a){if(!popupWin||popupWin.closed)popupWin=window.open(a,"popupWin","width=640, height=480");else popupWin.focus()}
$(document).ready(function(){try{$(".zoom").fancyZoom({scaleImg:true,closeOnClick:true,directory:S3.Ap.concat("/static/media")})}catch(a){}$("input.date").datepicker({changeMonth:true,changeYear:true,showOn:"both",buttonImage:S3.Ap.concat("/static/img/jquery-ui/calendar.gif"),buttonImageOnly:true,dateFormat:"yy-mm-dd",isRTL:S3.rtl});$(".error").hide().slideDown("slow");$(".error").click(function(){$(this).fadeOut("slow");return false});$(".warning").hide().slideDown("slow");$(".warning").click(function(){$(this).fadeOut("slow");
return false});$(".information").hide().slideDown("slow");$(".information").click(function(){$(this).fadeOut("slow");return false});$(".confirmation").hide().slideDown("slow");$(".confirmation").click(function(){$(this).fadeOut("slow");return false});$(".hoverable").hover(function(){$(this).addClass("hovered")},function(){$(this).removeClass("hovered")});$("#modulenav li").hover(function(){var f=$(this).width(),h=$("ul",this).width();h!=null&&h<f&&$("ul",this).css({width:f.toString()+"px"});$("ul",
this).css("display","block")},function(){$("ul",this).css("display","none")});$("#subnav li").hover(function(){var f=$(this).width()-2;$("ul",this).css({display:"block",width:f.toString()+"px"})},function(){$("ul",this).css("display","none")});$("a.colorbox").attr("href",function(f,h){var j="";try{j=$(this).parents("tr").attr("id").replace(/__row/,"")}catch(b){if(j=="")return h}var c=h;if(h.indexOf("&caller=")==-1)c=h+"&caller="+j;return c});$(".colorbox").click(function(){$.fn.colorbox({iframe:true,
width:"99%",height:"99%",href:this.href,title:this.title});return false});$(".tooltip").cluetip({activation:"hover",sticky:false,splitTitle:"|"});var g='<img src="'+S3.Ap.concat("/static/img/cross2.png")+'" alt="close" />';$(".stickytip").cluetip({activation:"hover",sticky:true,closePosition:"title",closeText:g,splitTitle:"|"});$(".ajaxtip").cluetip({activation:"click",sticky:true,closePosition:"title",closeText:g,width:380});now=new Date;$("form").append("<input type='hidden' value="+now.getTimezoneOffset()+
" name='_utc_offset'/>")});function s3_tb_remove(){$.fn.colorbox.close()}
(function(a){a.ajaxS3=function(g){var f=a.extend({},a.ajaxS3Settings,g);f.tryCount=0;if(g.message)s3_showStatus(S3.i18n.ajax_get+" "+(g.message?g.message:S3.i18n.ajax_fmd)+"...",this.ajaxS3Settings.msgTimeout);f.success=function(h,j){s3_hideStatus();g.success&&g.success(h,j)};f.error=function(h,j){if(j=="timeout"){this.tryCount++;if(this.tryCount<=this.retryLimit){s3_showStatus(S3.i18n.ajax_get+" "+(g.message?g.message:S3.i18n.ajax_fmd)+"... "+S3.i18n.ajax_rtr+" "+this.tryCount,a.ajaxS3Settings.msgTimeout);
a.ajax(this)}else s3_showStatus(S3.i18n.ajax_wht+" "+(this.retryLimit+1)+" "+S3.i18n.ajax_gvn,a.ajaxS3Settings.msgTimeout,false,true)}else h.status==500?s3_showStatus(S3.i18n.ajax_500,a.ajaxS3Settings.msgTimeout,false,true):s3_showStatus(S3.i18n.ajax_dwn,a.ajaxS3Settings.msgTimeout,false,true)};a.ajax(f)};a.postS3=function(g,f,h,j){return a.ajaxS3({type:"POST",url:g,data:f,success:h,dataType:j})};a.getS3=function(g,f,h,j,b,c){if(a.isFunction(f)){c=b;b=j;j=h;h=f;f=null}if(c)var e=false;return a.ajaxS3({type:"GET",
url:g,async:e,data:f,success:h,dataType:j,message:b})};a.getJSONS3=function(g,f,h,j,b){if(a.isFunction(f)){b=j;j=h;h=f;f=null}b||(b=false);return a.getS3(g,f,h,"json",j,b)};a.ajaxS3Settings={timeout:1E4,msgTimeout:2E3,retryLimit:10,dataType:"json",async:true,type:"GET"};a.ajaxS3Setup=function(g){a.extend(a.ajaxS3Settings,g)}})($);
function S3StatusBar(a,g){var f=this,h=null;this.elementId="_showstatus";this.prependMultiline=true;this.showCloseButton=false;this.afterTimeoutText=null;this.cssClass="statusbar";this.highlightClass="statusbarhighlight";this.errorClass="statusbarerror";this.closeButtonClass="statusbarclose";this.additive=false;$.extend(this,g);if(a)h=$(a);h||(h=$("<div id='_statusbar' class='"+f.cssClass+"'><div class='"+f.closeButtonClass+"'>"+(f.showCloseButton?" X </div></div>":"")).appendTo(document.body).show());
$("."+f.cssClass).click(function(){$(h).hide()});this.show=function(j,b,c,e){if(c||c==undefined&&f.additive){j="<div style='margin-bottom: 2px;' >"+j+"</div>";f.prependMultiline?h.prepend(j):h.append(j)}else if(f.showCloseButton){c=h.find("div.statusbarclose");h.text(j).prepend(c)}else h.text(j);h.show();if(b){e?h.addClass(f.errorClass):h.addClass(f.highlightClass);setTimeout(function(){h.removeClass(f.highlightClass);f.afterTimeoutText&&f.show(f.afterTimeoutText)},b)}};this.release=function(){if(_statusbar){$("#_statusbar").remove();
_statusbar=undefined}}}var _statusbar=null;function s3_showStatus(a,g,f,h){_statusbar||(_statusbar=new S3StatusBar);_statusbar.show(a,g,f,h)}function s3_hideStatus(){_statusbar&&_statusbar.release()}function S3SetNavigateAwayConfirm(){window.onbeforeunload=function(){return S3.i18n.unsaved_changes}}function S3ClearNavigateAwayConfirm(){window.onbeforeunload=function(){}}
function S3EnableNavigateAwayConfirm(){$(document).ready(function(){$("[class=error]").length>0&&S3SetNavigateAwayConfirm();$(":input:not(input[id=gis_location_advanced_checkbox])").keypress(S3SetNavigateAwayConfirm);$(":input:not(input[id=gis_location_advanced_checkbox])").change(S3SetNavigateAwayConfirm);$("form").submit(S3ClearNavigateAwayConfirm)})}function S3ConfirmClick(a,g){$(a).click(function(f){if(confirm(g))return true;else{f.preventDefault();return false}})}
function s3_viewMap(a){a=S3.Ap.concat("/gis/display_feature/")+a;var g=$("#map").html();a="<iframe width='640' height='480' src='"+a+"'></iframe>";var f=$('<a href="#">'+S3.i18n.close_map+"</a>");f.bind("click",function(h){$("#map").html(g);h.preventDefault()});$("#map").html(a);$("#map").append($("<div style='margin-bottom: 10px' />").append(f))}
function s3_viewMapMulti(a,g,f,h){a=S3.Ap.concat("/gis/display_feature//?module=")+a+"&resource="+g+"&instance="+f+"&jresource="+h;var j=$("#map").html();a='<iframe width="640" height="480" src="'+a+'"></iframe>';g=$('<a href="#">'+S3.i18n.close_map+"</a>");g.bind("click",function(b){$("#map").html(j);b.preventDefault()});$("#map").html(a);$("#map").append($("<div style='margin-bottom: 10px' />").append(g))};
