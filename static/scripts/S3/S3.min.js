Calendar=function(a,b,e,g){this.timeout=this.getDateText=this.getDateToolTip=this.getDateStatus=this.currentDateEl=this.activeDiv=null;this.onSelected=e||null;this.onClose=g||null;this.hidden=this.dragging=!1;this.minYear=1970;this.maxYear=2050;this.dateFormat=Calendar._TT.DEF_DATE_FORMAT;this.ttDateFormat=Calendar._TT.TT_DATE_FORMAT;this.weekNumbers=this.isPopup=!0;this.firstDayOfWeek=typeof a=="number"?a:Calendar._FD;this.showsOtherMonths=!1;this.dateStr=b;this.ar_days=null;this.showsTime=!1;this.time24=
!0;this.yearStep=2;this.hiliteToday=!0;this.activeYear=this.hilitedYear=this.activeMonth=this.hilitedMonth=this.yearsCombo=this.monthsCombo=this.firstdayname=this.tbody=this.element=this.table=this.multiple=null;this.dateClicked=!1;if(typeof Calendar._SDN=="undefined"){if(typeof Calendar._SDN_len=="undefined")Calendar._SDN_len=3;a=[];for(b=8;b>0;)a[--b]=Calendar._DN[b].substr(0,Calendar._SDN_len);Calendar._SDN=a;if(typeof Calendar._SMN_len=="undefined")Calendar._SMN_len=3;a=[];for(b=12;b>0;)a[--b]=
Calendar._MN[b].substr(0,Calendar._SMN_len);Calendar._SMN=a}};Calendar._C=null;Calendar.is_ie=/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent);Calendar.is_ie5=Calendar.is_ie&&/msie 5\.0/i.test(navigator.userAgent);Calendar.is_opera=/opera/i.test(navigator.userAgent);Calendar.is_khtml=/Konqueror|Safari|KHTML/i.test(navigator.userAgent);
Calendar.getAbsolutePos=function(a){var b=0,e=0,g=/^div$/i.test(a.tagName);if(g&&a.scrollLeft)b=a.scrollLeft;if(g&&a.scrollTop)e=a.scrollTop;b={x:a.offsetLeft-b,y:a.offsetTop-e};a.offsetParent&&(a=this.getAbsolutePos(a.offsetParent),b.x+=a.x,b.y+=a.y);return b};Calendar.isRelated=function(a,b){var e=b.relatedTarget;if(!e){var g=b.type;if(g=="mouseover")e=b.fromElement;else if(g=="mouseout")e=b.toElement}for(;e;){if(e==a)return!0;e=e.parentNode}return!1};
Calendar.removeClass=function(a,b){if(a&&a.className){for(var e=a.className.split(" "),g=[],h=e.length;h>0;)e[--h]!=b&&(g[g.length]=e[h]);a.className=g.join(" ")}};Calendar.addClass=function(a,b){Calendar.removeClass(a,b);a.className+=" "+b};Calendar.getElement=function(a){for(a=Calendar.is_ie?window.event.srcElement:a.currentTarget;a.nodeType!=1||/^div$/i.test(a.tagName);)a=a.parentNode;return a};
Calendar.getTargetElement=function(a){for(a=Calendar.is_ie?window.event.srcElement:a.target;a.nodeType!=1;)a=a.parentNode;return a};Calendar.stopEvent=function(a){a||(a=window.event);Calendar.is_ie?(a.cancelBubble=!0,a.returnValue=!1):(a.preventDefault(),a.stopPropagation());return!1};Calendar.addEvent=function(a,b,e){a.attachEvent?a.attachEvent("on"+b,e):a.addEventListener?a.addEventListener(b,e,!0):a["on"+b]=e};
Calendar.removeEvent=function(a,b,e){a.detachEvent?a.detachEvent("on"+b,e):a.removeEventListener?a.removeEventListener(b,e,!0):a["on"+b]=null};Calendar.createElement=function(a,b){var e=null;e=document.createElementNS?document.createElementNS("http://www.w3.org/1999/xhtml",a):document.createElement(a);typeof b!="undefined"&&b.appendChild(e);return e};
Calendar._add_evs=function(a){with(Calendar)addEvent(a,"mouseover",dayMouseOver),addEvent(a,"mousedown",dayMouseDown),addEvent(a,"mouseout",dayMouseOut),is_ie&&(addEvent(a,"dblclick",dayMouseDblClick),a.setAttribute("unselectable",!0))};Calendar.findMonth=function(a){if(typeof a.month!="undefined")return a;else if(typeof a.parentNode.month!="undefined")return a.parentNode;return null};
Calendar.findYear=function(a){if(typeof a.year!="undefined")return a;else if(typeof a.parentNode.year!="undefined")return a.parentNode;return null};
Calendar.showMonthsCombo=function(){var a=Calendar._C;if(!a)return!1;var b=a.activeDiv,e=a.monthsCombo;a.hilitedMonth&&Calendar.removeClass(a.hilitedMonth,"hilite");a.activeMonth&&Calendar.removeClass(a.activeMonth,"active");var g=a.monthsCombo.getElementsByTagName("div")[a.date.getMonth()];Calendar.addClass(g,"active");a.activeMonth=g;a=e.style;a.display="block";b.navtype<0?a.left=b.offsetLeft+"px":(e=e.offsetWidth,typeof e=="undefined"&&(e=50),a.left=b.offsetLeft+b.offsetWidth-e+"px");a.top=b.offsetTop+
b.offsetHeight+"px"};
Calendar.showYearsCombo=function(a){var b=Calendar._C;if(!b)return!1;var e=b.activeDiv,g=b.yearsCombo;b.hilitedYear&&Calendar.removeClass(b.hilitedYear,"hilite");b.activeYear&&Calendar.removeClass(b.activeYear,"active");b.activeYear=null;for(var h=b.date.getFullYear()+(a?1:-1),c=g.firstChild,f=!1,m=12;m>0;--m)h>=b.minYear&&h<=b.maxYear?(c.innerHTML=h,c.year=h,c.style.display="block",f=!0):c.style.display="none",c=c.nextSibling,h+=a?b.yearStep:-b.yearStep;if(f)a=g.style,a.display="block",e.navtype<
0?a.left=e.offsetLeft+"px":(g=g.offsetWidth,typeof g=="undefined"&&(g=50),a.left=e.offsetLeft+e.offsetWidth-g+"px"),a.top=e.offsetTop+e.offsetHeight+"px"};
Calendar.tableMouseUp=function(a){var b=Calendar._C;if(!b)return!1;b.timeout&&clearTimeout(b.timeout);var e=b.activeDiv;if(!e)return!1;var g=Calendar.getTargetElement(a);a||(a=window.event);Calendar.removeClass(e,"active");(g==e||g.parentNode==e)&&Calendar.cellClick(e,a);var h=Calendar.findMonth(g);e=null;if(h){if(e=new Date(b.date),h.month!=e.getMonth())e.setMonth(h.month),b.setDate(e),b.dateClicked=!1,b.callHandler()}else if(g=Calendar.findYear(g))if(e=new Date(b.date),g.year!=e.getFullYear())e.setFullYear(g.year),
b.setDate(e),b.dateClicked=!1,b.callHandler();with(Calendar)return removeEvent(document,"mouseup",tableMouseUp),removeEvent(document,"mouseover",tableMouseOver),removeEvent(document,"mousemove",tableMouseOver),b._hideCombos(),_C=null,stopEvent(a)};
Calendar.tableMouseOver=function(a){var b=Calendar._C;if(b){var e=b.activeDiv,g=Calendar.getTargetElement(a);g==e||g.parentNode==e?(Calendar.addClass(e,"hilite active"),Calendar.addClass(e.parentNode,"rowhilite")):((typeof e.navtype=="undefined"||e.navtype!=50&&(e.navtype==0||Math.abs(e.navtype)>2))&&Calendar.removeClass(e,"active"),Calendar.removeClass(e,"hilite"),Calendar.removeClass(e.parentNode,"rowhilite"));a||(a=window.event);if(e.navtype==50&&g!=e){var h=Calendar.getAbsolutePos(e),c=e.offsetWidth,
f=a.clientX,m=!0;f>h.x+c?(f=f-h.x-c,m=!1):f=h.x-f;f<0&&(f=0);h=e._range;c=e._current;f=Math.floor(f/10)%h.length;for(var j=h.length;--j>=0;)if(h[j]==c)break;for(;f-- >0;)m?--j<0&&(j=h.length-1):++j>=h.length&&(j=0);e.innerHTML=h[j];b.onUpdateTime()}(e=Calendar.findMonth(g))?e.month!=b.date.getMonth()?(b.hilitedMonth&&Calendar.removeClass(b.hilitedMonth,"hilite"),Calendar.addClass(e,"hilite"),b.hilitedMonth=e):b.hilitedMonth&&Calendar.removeClass(b.hilitedMonth,"hilite"):(b.hilitedMonth&&Calendar.removeClass(b.hilitedMonth,
"hilite"),(g=Calendar.findYear(g))?g.year!=b.date.getFullYear()?(b.hilitedYear&&Calendar.removeClass(b.hilitedYear,"hilite"),Calendar.addClass(g,"hilite"),b.hilitedYear=g):b.hilitedYear&&Calendar.removeClass(b.hilitedYear,"hilite"):b.hilitedYear&&Calendar.removeClass(b.hilitedYear,"hilite"));return Calendar.stopEvent(a)}};Calendar.tableMouseDown=function(a){if(Calendar.getTargetElement(a)==Calendar.getElement(a))return Calendar.stopEvent(a)};
Calendar.calDragIt=function(a){var b=Calendar._C;if(!b||!b.dragging)return!1;var e,g;Calendar.is_ie?(g=window.event.clientY+document.body.scrollTop,e=window.event.clientX+document.body.scrollLeft):(e=a.pageX,g=a.pageY);b.hideShowCovered();var h=b.element.style;h.left=e-b.xOffs+"px";h.top=g-b.yOffs+"px";return Calendar.stopEvent(a)};
Calendar.calDragEnd=function(a){var b=Calendar._C;if(!b)return!1;b.dragging=!1;with(Calendar)removeEvent(document,"mousemove",calDragIt),removeEvent(document,"mouseup",calDragEnd),tableMouseUp(a);b.hideShowCovered()};
Calendar.dayMouseDown=function(a){var b=Calendar.getElement(a);if(b.disabled)return!1;var e=b.calendar;e.activeDiv=b;Calendar._C=e;if(b.navtype!=300)with(Calendar)b.navtype==50?(b._current=b.innerHTML,addEvent(document,"mousemove",tableMouseOver)):addEvent(document,Calendar.is_ie5?"mousemove":"mouseover",tableMouseOver),addClass(b,"hilite active"),addEvent(document,"mouseup",tableMouseUp);else e.isPopup&&e._dragStart(a);b.navtype==-1||b.navtype==1?(e.timeout&&clearTimeout(e.timeout),e.timeout=setTimeout("Calendar.showMonthsCombo()",
250)):b.navtype==-2||b.navtype==2?(e.timeout&&clearTimeout(e.timeout),e.timeout=setTimeout(b.navtype>0?"Calendar.showYearsCombo(true)":"Calendar.showYearsCombo(false)",250)):e.timeout=null;return Calendar.stopEvent(a)};Calendar.dayMouseDblClick=function(a){Calendar.cellClick(Calendar.getElement(a),a||window.event);Calendar.is_ie&&document.selection.empty()};
Calendar.dayMouseOver=function(a){var b=Calendar.getElement(a);if(Calendar.isRelated(b,a)||Calendar._C||b.disabled)return!1;if(b.ttip){if(b.ttip.substr(0,1)=="_")b.ttip=b.caldate.print(b.calendar.ttDateFormat)+b.ttip.substr(1);b.calendar.tooltips.innerHTML=b.ttip}b.navtype!=300&&(Calendar.addClass(b,"hilite"),b.caldate&&Calendar.addClass(b.parentNode,"rowhilite"));return Calendar.stopEvent(a)};
Calendar.dayMouseOut=function(a){with(Calendar){var b=getElement(a);if(isRelated(b,a)||_C||b.disabled)return!1;removeClass(b,"hilite");b.caldate&&removeClass(b.parentNode,"rowhilite");if(b.calendar)b.calendar.tooltips.innerHTML=_TT.SEL_DATE;return stopEvent(a)}};
Calendar.cellClick=function(a,b){var e=a.calendar,g=!1,h=!1,c=null;if(typeof a.navtype=="undefined"){if(e.currentDateEl&&(Calendar.removeClass(e.currentDateEl,"selected"),Calendar.addClass(a,"selected"),g=e.currentDateEl==a,!g))e.currentDateEl=a;e.date.setDateOnly(a.caldate);c=e.date;var f=!(e.dateClicked=!a.otherMonth);!f&&!e.currentDateEl?e._toggleMultipleDate(new Date(c)):h=!a.disabled;f&&e._init(e.firstDayOfWeek,c)}else{if(a.navtype==200){Calendar.removeClass(a,"hilite");e.callCloseHandler();
return}c=new Date(e.date);a.navtype==0&&c.setDateOnly(new Date);e.dateClicked=!1;f=c.getFullYear();var m=c.getMonth(),j=function(a){var f=c.getDate(),m=c.getMonthDays(a);f>m&&c.setDate(m);c.setMonth(a)};switch(a.navtype){case 400:Calendar.removeClass(a,"hilite");g=Calendar._TT.ABOUT;typeof g!="undefined"?g+=e.showsTime?Calendar._TT.ABOUT_TIME:"":g='Help and about box text is not translated into this language.\nIf you know this language and you feel generous please update\nthe corresponding file in "lang" subdir to match calendar-en.js\nand send it back to <mihai_bazon@yahoo.com> to get it into the distribution  ;-)\n\nThank you!\nhttp://dynarch.com/mishoo/calendar.epl\n';
alert(g);return;case -2:f>e.minYear&&c.setFullYear(f-1);break;case -1:m>0?j(m-1):f-- >e.minYear&&(c.setFullYear(f),j(11));break;case 1:m<11?j(m+1):f<e.maxYear&&(c.setFullYear(f+1),j(0));break;case 2:f<e.maxYear&&c.setFullYear(f+1);break;case 100:e.setFirstDayOfWeek(a.fdow);return;case 50:g=a._range;h=a.innerHTML;for(f=g.length;--f>=0;)if(g[f]==h)break;b&&b.shiftKey?--f<0&&(f=g.length-1):++f>=g.length&&(f=0);a.innerHTML=g[f];e.onUpdateTime();return;case 0:if(typeof e.getDateStatus=="function"&&e.getDateStatus(c,
c.getFullYear(),c.getMonth(),c.getDate()))return!1}c.equalsTo(e.date)?a.navtype==0&&(h=g=!0):(e.setDate(c),h=!0)}h&&b&&e.callHandler();g&&(Calendar.removeClass(a,"hilite"),b&&e.callCloseHandler())};
Calendar.prototype.create=function(a){var b=null;a?(b=a,this.isPopup=!1):(b=document.getElementsByTagName("body")[0],this.isPopup=!0);this.date=this.dateStr?new Date(this.dateStr):new Date;this.table=a=Calendar.createElement("table");a.cellSpacing=0;a.cellPadding=0;a.calendar=this;Calendar.addEvent(a,"mousedown",Calendar.tableMouseDown);var e=Calendar.createElement("div");this.element=e;e.className="calendar";if(this.isPopup)e.style.position="absolute",e.style.display="none";e.appendChild(a);var g=
Calendar.createElement("thead",a),h=null,c=null,f=this;e=function(a,m,b){h=Calendar.createElement("td",c);h.colSpan=m;h.className="button";b!=0&&Math.abs(b)<=2&&(h.className+=" nav");Calendar._add_evs(h);h.calendar=f;h.navtype=b;h.innerHTML="<div unselectable='on'>"+a+"</div>";return h};c=Calendar.createElement("tr",g);var m=6;this.isPopup&&--m;this.weekNumbers&&++m;e("?",1,400).ttip=Calendar._TT.INFO;this.title=e("",m,300);this.title.className="title";if(this.isPopup)this.title.ttip=Calendar._TT.DRAG_TO_MOVE,
this.title.style.cursor="move",e("&#x00d7;",1,200).ttip=Calendar._TT.CLOSE;c=Calendar.createElement("tr",g);c.className="headrow";this._nav_py=e("&#x00ab;",1,-2);this._nav_py.ttip=Calendar._TT.PREV_YEAR;this._nav_pm=e("&#x2039;",1,-1);this._nav_pm.ttip=Calendar._TT.PREV_MONTH;this._nav_now=e(Calendar._TT.TODAY,this.weekNumbers?4:3,0);this._nav_now.ttip=Calendar._TT.GO_TODAY;this._nav_nm=e("&#x203a;",1,1);this._nav_nm.ttip=Calendar._TT.NEXT_MONTH;this._nav_ny=e("&#x00bb;",1,2);this._nav_ny.ttip=Calendar._TT.NEXT_YEAR;
c=Calendar.createElement("tr",g);c.className="daynames";if(this.weekNumbers)h=Calendar.createElement("td",c),h.className="name wn",h.innerHTML=Calendar._TT.WK;for(g=7;g>0;--g)if(h=Calendar.createElement("td",c),!g)h.navtype=100,h.calendar=this,Calendar._add_evs(h);this.firstdayname=this.weekNumbers?c.firstChild.nextSibling:c.firstChild;this._displayWeekdays();this.tbody=m=Calendar.createElement("tbody",a);for(g=6;g>0;--g){c=Calendar.createElement("tr",m);this.weekNumbers&&(h=Calendar.createElement("td",
c));for(var j=7;j>0;--j)h=Calendar.createElement("td",c),h.calendar=this,Calendar._add_evs(h)}this.showsTime?(c=Calendar.createElement("tr",m),c.className="time",h=Calendar.createElement("td",c),h.className="time",h.colSpan=2,h.innerHTML=Calendar._TT.TIME||"&nbsp;",h=Calendar.createElement("td",c),h.className="time",h.colSpan=this.weekNumbers?4:3,function(){function a(c,m,e,b){var g=Calendar.createElement("span",h);g.className=c;g.innerHTML=m;g.calendar=f;g.ttip=Calendar._TT.TIME_PART;g.navtype=50;
g._range=[];if(typeof e!="number")g._range=e;else for(c=e;c<=b;++c)g._range[g._range.length]=c<10&&b>=10?"0"+c:""+c;Calendar._add_evs(g);return g}var m=f.date.getHours(),b=f.date.getMinutes(),e=!f.time24,g=m>12;e&&g&&(m-=12);var j=a("hour",m,e?1:0,e?12:23);m=Calendar.createElement("span",h);m.innerHTML=":";m.className="colon";var v=a("minute",b,0,59),u=null;h=Calendar.createElement("td",c);h.className="time";h.colSpan=2;e?u=a("ampm",g?"pm":"am",["am","pm"]):h.innerHTML="&nbsp;";f.onSetTime=function(){var a,
c=this.date.getHours(),f=this.date.getMinutes();if(e)(a=c>=12)&&(c-=12),c==0&&(c=12),u.innerHTML=a?"pm":"am";j.innerHTML=c<10?"0"+c:c;v.innerHTML=f<10?"0"+f:f};f.onUpdateTime=function(){var a=this.date,c=parseInt(j.innerHTML,10);e&&(/pm/i.test(u.innerHTML)&&c<12?c+=12:/am/i.test(u.innerHTML)&&c==12&&(c=0));var f=a.getDate(),m=a.getMonth(),b=a.getFullYear();a.setHours(c);a.setMinutes(parseInt(v.innerHTML,10));a.setFullYear(b);a.setMonth(m);a.setDate(f);this.dateClicked=!1;this.callHandler()}}()):this.onSetTime=
this.onUpdateTime=function(){};a=Calendar.createElement("tfoot",a);c=Calendar.createElement("tr",a);c.className="footrow";h=e(Calendar._TT.SEL_DATE,this.weekNumbers?8:7,300);h.className="ttip";if(this.isPopup)h.ttip=Calendar._TT.DRAG_TO_MOVE,h.style.cursor="move";this.tooltips=h;this.monthsCombo=e=Calendar.createElement("div",this.element);e.className="combo";for(g=0;g<Calendar._MN.length;++g)a=Calendar.createElement("div"),a.className=Calendar.is_ie?"label-IEfix":"label",a.month=g,a.innerHTML=Calendar._SMN[g],
e.appendChild(a);this.yearsCombo=e=Calendar.createElement("div",this.element);e.className="combo";for(g=12;g>0;--g)a=Calendar.createElement("div"),a.className=Calendar.is_ie?"label-IEfix":"label",e.appendChild(a);this._init(this.firstDayOfWeek,this.date);b.appendChild(this.element)};
Calendar._keyEvent=function(a){var b=window._dynarch_popupCalendar;if(!b||b.multiple)return!1;Calendar.is_ie&&(a=window.event);var e=Calendar.is_ie||a.type=="keypress",g=a.keyCode;if(a.ctrlKey)switch(g){case 37:e&&Calendar.cellClick(b._nav_pm);break;case 38:e&&Calendar.cellClick(b._nav_py);break;case 39:e&&Calendar.cellClick(b._nav_nm);break;case 40:e&&Calendar.cellClick(b._nav_ny);break;default:return!1}else switch(g){case 32:Calendar.cellClick(b._nav_now);break;case 27:e&&b.callCloseHandler();break;
case 37:case 38:case 39:case 40:if(e){var h,c,f,m,j;e=g==37||g==38;j=g==37||g==39?1:7;var k=function(){m=b.currentDateEl;var a=m.pos;h=a&15;c=a>>4;f=b.ar_days[c][h]};k();for(var p=function(){var a=new Date(b.date);a.setDate(a.getDate()-j);b.setDate(a)},n=function(){var a=new Date(b.date);a.setDate(a.getDate()+j);b.setDate(a)};;){switch(g){case 37:if(--h>=0)f=b.ar_days[c][h];else{h=6;g=38;continue}break;case 38:--c>=0?f=b.ar_days[c][h]:(p(),k());break;case 39:if(++h<7)f=b.ar_days[c][h];else{h=0;g=
40;continue}break;case 40:++c<b.ar_days.length?f=b.ar_days[c][h]:(n(),k())}break}f&&(f.disabled?e?p():n():Calendar.cellClick(f))}break;case 13:e&&Calendar.cellClick(b.currentDateEl,a);break;default:return!1}return Calendar.stopEvent(a)};
Calendar.prototype._init=function(a,b){var e=new Date,g=e.getFullYear(),h=e.getMonth();e=e.getDate();this.table.style.visibility="hidden";var c=b.getFullYear();if(c<this.minYear)c=this.minYear,b.setFullYear(c);else if(c>this.maxYear)c=this.maxYear,b.setFullYear(c);this.firstDayOfWeek=a;this.date=new Date(b);var f=b.getMonth(),m=b.getDate();b.getMonthDays();b.setDate(1);var j=(b.getDay()-this.firstDayOfWeek)%7;j<0&&(j+=7);b.setDate(0-j);b.setDate(b.getDate()+1);j=this.tbody.firstChild;for(var k=this.ar_days=
[],p=Calendar._TT.WEEKEND,n=this.multiple?this.datesCells={}:null,s=0;s<6;++s,j=j.nextSibling){var t=j.firstChild;if(this.weekNumbers)t.className="day wn",t.innerHTML=b.getWeekNumber(),t=t.nextSibling;j.className="daysrow";for(var y=!1,v,u=k[s]=[],r=0;r<7;++r,t=t.nextSibling,b.setDate(v+1)){v=b.getDate();var A=b.getDay();t.className="day";t.pos=s<<4|r;u[r]=t;var x=b.getMonth()==f;if(x)t.otherMonth=!1,y=!0;else if(this.showsOtherMonths)t.className+=" othermonth",t.otherMonth=!0;else{t.className="emptycell";
t.innerHTML="&nbsp;";t.disabled=!0;continue}t.disabled=!1;t.innerHTML=this.getDateText?this.getDateText(b,v):v;n&&(n[b.print("%Y%m%d")]=t);if(this.getDateStatus){var w=this.getDateStatus(b,c,f,v);if(this.getDateToolTip){var H=this.getDateToolTip(b,c,f,v);if(H)t.title=H}if(w===!0)t.className+=" disabled",t.disabled=!0;else{if(/disabled/i.test(w))t.disabled=!0;t.className+=" "+w}}if(!t.disabled){t.caldate=new Date(b);t.ttip="_";if(!this.multiple&&x&&v==m&&this.hiliteToday)t.className+=" selected",this.currentDateEl=
t;b.getFullYear()==g&&b.getMonth()==h&&v==e&&(t.className+=" today",t.ttip+=Calendar._TT.PART_TODAY);p.indexOf(A.toString())!=-1&&(t.className+=t.otherMonth?" oweekend":" weekend")}}if(!y&&!this.showsOtherMonths)j.className="emptyrow"}this.title.innerHTML=Calendar._MN[f]+", "+c;this.onSetTime();this.table.style.visibility="visible";this._initMultipleDates()};
Calendar.prototype._initMultipleDates=function(){if(this.multiple)for(var a in this.multiple){var b=this.datesCells[a];this.multiple[a]&&b&&(b.className+=" selected")}};Calendar.prototype._toggleMultipleDate=function(a){if(this.multiple){var b=a.print("%Y%m%d"),e=this.datesCells[b];e&&(this.multiple[b]?(Calendar.removeClass(e,"selected"),delete this.multiple[b]):(Calendar.addClass(e,"selected"),this.multiple[b]=a))}};Calendar.prototype.setDateToolTipHandler=function(a){this.getDateToolTip=a};
Calendar.prototype.setDate=function(a){a.equalsTo(this.date)||this._init(this.firstDayOfWeek,a)};Calendar.prototype.refresh=function(){this._init(this.firstDayOfWeek,this.date)};Calendar.prototype.setFirstDayOfWeek=function(a){this._init(a,this.date);this._displayWeekdays()};Calendar.prototype.setDateStatusHandler=Calendar.prototype.setDisabledHandler=function(a){this.getDateStatus=a};Calendar.prototype.setRange=function(a,b){this.minYear=a;this.maxYear=b};
Calendar.prototype.callHandler=function(){if(this.onSelected)this.onSelected(this,this.date.print(this.dateFormat))};Calendar.prototype.callCloseHandler=function(){if(this.onClose)this.onClose(this);this.hideShowCovered()};Calendar.prototype.destroy=function(){this.element.parentNode.removeChild(this.element);Calendar._C=null;window._dynarch_popupCalendar=null};Calendar.prototype.reparent=function(a){var b=this.element;b.parentNode.removeChild(b);a.appendChild(b)};
Calendar._checkCalendar=function(a){var b=window._dynarch_popupCalendar;if(!b)return!1;for(var e=Calendar.is_ie?Calendar.getElement(a):Calendar.getTargetElement(a);e!=null&&e!=b.element;e=e.parentNode);if(e==null)return window._dynarch_popupCalendar.callCloseHandler(),Calendar.stopEvent(a)};
Calendar.prototype.show=function(){for(var a=this.table.getElementsByTagName("tr"),b=a.length;b>0;){var e=a[--b];Calendar.removeClass(e,"rowhilite");e=e.getElementsByTagName("td");for(var g=e.length;g>0;){var h=e[--g];Calendar.removeClass(h,"hilite");Calendar.removeClass(h,"active")}}this.element.style.display="block";this.hidden=!1;if(this.isPopup)window._dynarch_popupCalendar=this,Calendar.addEvent(document,"keydown",Calendar._keyEvent),Calendar.addEvent(document,"keypress",Calendar._keyEvent),
Calendar.addEvent(document,"mousedown",Calendar._checkCalendar);this.hideShowCovered()};Calendar.prototype.hide=function(){this.isPopup&&(Calendar.removeEvent(document,"keydown",Calendar._keyEvent),Calendar.removeEvent(document,"keypress",Calendar._keyEvent),Calendar.removeEvent(document,"mousedown",Calendar._checkCalendar));this.element.style.display="none";this.hidden=!0;this.hideShowCovered()};Calendar.prototype.showAt=function(a,b){var e=this.element.style;e.left=a+"px";e.top=b+"px";this.show()};
Calendar.prototype.showAtElement=function(a,b){var e=this,g=Calendar.getAbsolutePos(a);if(!b||typeof b!="string")return this.showAt(g.x,g.y+a.offsetHeight),!0;this.element.style.display="block";Calendar.continuation_for_the_fucking_khtml_browser=function(){var h=e.element.offsetWidth,c=e.element.offsetHeight;e.element.style.display="none";var f=b.substr(0,1),m="l";b.length>1&&(m=b.substr(1,1));switch(f){case "T":g.y-=c;break;case "B":g.y+=a.offsetHeight;break;case "C":g.y+=(a.offsetHeight-c)/2;break;
case "t":g.y+=a.offsetHeight-c}switch(m){case "L":g.x-=h;break;case "R":g.x+=a.offsetWidth;break;case "C":g.x+=(a.offsetWidth-h)/2;break;case "l":g.x+=a.offsetWidth-h}g.width=h;g.height=c+40;e.monthsCombo.style.display="none";if(g.x<0)g.x=0;if(g.y<0)g.y=0;h=document.createElement("div");c=h.style;c.position="absolute";c.right=c.bottom=c.width=c.height="0px";document.body.appendChild(h);c=Calendar.getAbsolutePos(h);document.body.removeChild(h);Calendar.is_ie?(c.y+=document.body.scrollTop,c.x+=document.body.scrollLeft):
(c.y+=window.scrollY,c.x+=window.scrollX);h=g.x+g.width-c.x;h>0&&(g.x-=h);h=g.y+g.height-c.y;h>0&&(g.y-=h);e.showAt(g.x,g.y)};Calendar.is_khtml?setTimeout("Calendar.continuation_for_the_fucking_khtml_browser()",10):Calendar.continuation_for_the_fucking_khtml_browser()};Calendar.prototype.setDateFormat=function(a){this.dateFormat=a};Calendar.prototype.setTtDateFormat=function(a){this.ttDateFormat=a};Calendar.prototype.parseDate=function(a,b){if(!b)b=this.dateFormat;this.setDate(Date.parseDate(a,b))};
Calendar.prototype.hideShowCovered=function(){function a(a){var c=a.style.visibility;c||(c=document.defaultView&&typeof document.defaultView.getComputedStyle=="function"?Calendar.is_khtml?"":document.defaultView.getComputedStyle(a,"").getPropertyValue("visibility"):a.currentStyle?a.currentStyle.visibility:"");return c}if(Calendar.is_ie||Calendar.is_opera){var b=["applet","iframe","select"],e=this.element,g=Calendar.getAbsolutePos(e),h=g.x,c=e.offsetWidth+h,f=g.y;e=e.offsetHeight+f;for(var m=b.length;m>
0;)for(var j=document.getElementsByTagName(b[--m]),k=null,p=j.length;p>0;){k=j[--p];g=Calendar.getAbsolutePos(k);var n=g.x,s=k.offsetWidth+n;g=g.y;var t=k.offsetHeight+g;if(this.hidden||n>c||s<h||g>e||t<f){if(!k.__msh_save_visibility)k.__msh_save_visibility=a(k);k.style.visibility=k.__msh_save_visibility}else{if(!k.__msh_save_visibility)k.__msh_save_visibility=a(k);k.style.visibility="hidden"}}}};
Calendar.prototype._displayWeekdays=function(){for(var a=this.firstDayOfWeek,b=this.firstdayname,e=Calendar._TT.WEEKEND,g=0;g<7;++g){b.className="day name";var h=(g+a)%7;if(g)b.ttip=Calendar._TT.DAY_FIRST.replace("%s",Calendar._DN[h]),b.navtype=100,b.calendar=this,b.fdow=h,Calendar._add_evs(b);e.indexOf(h.toString())!=-1&&Calendar.addClass(b,"weekend");b.innerHTML=Calendar._SDN[(g+a)%7];b=b.nextSibling}};
Calendar.prototype._hideCombos=function(){this.monthsCombo.style.display="none";this.yearsCombo.style.display="none"};
Calendar.prototype._dragStart=function(a){if(!this.dragging){this.dragging=!0;var b;Calendar.is_ie?(b=window.event.clientY+document.body.scrollTop,a=window.event.clientX+document.body.scrollLeft):(b=a.clientY+window.scrollY,a=a.clientX+window.scrollX);var e=this.element.style;this.xOffs=a-parseInt(e.left);this.yOffs=b-parseInt(e.top);with(Calendar)addEvent(document,"mousemove",calDragIt),addEvent(document,"mouseup",calDragEnd)}};Date._MD=[31,28,31,30,31,30,31,31,30,31,30,31];Date.SECOND=1E3;
Date.MINUTE=60*Date.SECOND;Date.HOUR=60*Date.MINUTE;Date.DAY=24*Date.HOUR;Date.WEEK=7*Date.DAY;
Date.parseDate=function(a,b){var e=new Date,g=0,h=-1,c=0,f=a.split(/\W+/),m=b.match(/%./g),j=0,k=0,p=0,n=0;for(j=0;j<f.length;++j)if(f[j])switch(m[j]){case "%d":case "%e":c=parseInt(f[j],10);break;case "%m":h=parseInt(f[j],10)-1;break;case "%Y":case "%y":g=parseInt(f[j],10);g<100&&(g+=g>29?1900:2E3);break;case "%b":case "%B":for(k=0;k<12;++k)if(Calendar._MN[k].substr(0,f[j].length).toLowerCase()==f[j].toLowerCase()){h=k;break}break;case "%H":case "%I":case "%k":case "%l":p=parseInt(f[j],10);break;
case "%P":case "%p":/pm/i.test(f[j])&&p<12?p+=12:/am/i.test(f[j])&&p>=12&&(p-=12);break;case "%M":n=parseInt(f[j],10)}isNaN(g)&&(g=e.getFullYear());isNaN(h)&&(h=e.getMonth());isNaN(c)&&(c=e.getDate());isNaN(p)&&(p=e.getHours());isNaN(n)&&(n=e.getMinutes());if(g!=0&&h!=-1&&c!=0)return new Date(g,h,c,p,n,0);g=0;h=-1;for(j=c=0;j<f.length;++j)if(f[j].search(/[a-zA-Z]+/)!=-1){m=-1;for(k=0;k<12;++k)if(Calendar._MN[k].substr(0,f[j].length).toLowerCase()==f[j].toLowerCase()){m=k;break}m!=-1&&(h!=-1&&(c=h+
1),h=m)}else parseInt(f[j],10)<=12&&h==-1?h=f[j]-1:parseInt(f[j],10)>31&&g==0?(g=parseInt(f[j],10),g<100&&(g+=g>29?1900:2E3)):c==0&&(c=f[j]);g==0&&(g=e.getFullYear());if(h!=-1&&c!=0)return new Date(g,h,c,p,n,0);return e};Date.prototype.getMonthDays=function(a){var b=this.getFullYear();typeof a=="undefined"&&(a=this.getMonth());return 0==b%4&&(0!=b%100||0==b%400)&&a==1?29:Date._MD[a]};
Date.prototype.getDayOfYear=function(){var a=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0),b=new Date(this.getFullYear(),0,0,0,0,0);return Math.floor((a-b)/Date.DAY)};Date.prototype.getWeekNumber=function(){var a=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0),b=a.getDay();a.setDate(a.getDate()-(b+6)%7+3);b=a.valueOf();a.setMonth(0);a.setDate(4);return Math.round((b-a.valueOf())/6048E5)+1};
Date.prototype.equalsTo=function(a){return this.getFullYear()==a.getFullYear()&&this.getMonth()==a.getMonth()&&this.getDate()==a.getDate()&&this.getHours()==a.getHours()&&this.getMinutes()==a.getMinutes()};Date.prototype.setDateOnly=function(a){a=new Date(a);this.setDate(1);this.setFullYear(a.getFullYear());this.setMonth(a.getMonth());this.setDate(a.getDate())};
Date.prototype.print=function(a){var b=this.getMonth(),e=this.getDate(),g=this.getFullYear(),h=this.getWeekNumber(),c=this.getDay(),f={},m=this.getHours(),j=m>=12,k=j?m-12:m,p=this.getDayOfYear();k==0&&(k=12);var n=this.getMinutes(),s=this.getSeconds();f["%a"]=Calendar._SDN[c];f["%A"]=Calendar._DN[c];f["%b"]=Calendar._SMN[b];f["%B"]=Calendar._MN[b];f["%C"]=1+Math.floor(g/100);f["%d"]=e<10?"0"+e:e;f["%e"]=e;f["%H"]=m<10?"0"+m:m;f["%I"]=k<10?"0"+k:k;f["%j"]=p<100?p<10?"00"+p:"0"+p:p;f["%k"]=m;f["%l"]=
k;f["%m"]=b<9?"0"+(1+b):1+b;f["%M"]=n<10?"0"+n:n;f["%n"]="\n";f["%p"]=j?"PM":"AM";f["%P"]=j?"pm":"am";f["%s"]=Math.floor(this.getTime()/1E3);f["%S"]=s<10?"0"+s:s;f["%t"]="\t";f["%U"]=f["%W"]=f["%V"]=h<10?"0"+h:h;f["%u"]=c+1;f["%w"]=c;f["%y"]=(""+g).substr(2,2);f["%Y"]=g;f["%%"]="%";b=/%./g;if(!Calendar.is_ie5&&!Calendar.is_khtml)return a.replace(b,function(a){return f[a]||a});e=a.match(b);for(g=0;g<e.length;g++)if(h=f[e[g]])b=RegExp(e[g],"g"),a=a.replace(b,h);return a};
Date.prototype.__msh_oldSetFullYear=Date.prototype.setFullYear;Date.prototype.setFullYear=function(a){var b=new Date(this);b.__msh_oldSetFullYear(a);b.getMonth()!=this.getMonth()&&this.setDate(28);this.__msh_oldSetFullYear(a)};window._dynarch_popupCalendar=null;Calendar._DN=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];Calendar._SDN=["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"];Calendar._FD=0;
Calendar._MN=["January","February","March","April","May","June","July","August","September","October","November","December"];Calendar._SMN=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];Calendar._TT={};Calendar._TT.INFO="About the calendar";
Calendar._TT.ABOUT="DHTML Date/Time Selector\n(c) dynarch.com 2002-2005 / Author: Mihai Bazon\nFor latest version visit: http://www.dynarch.com/projects/calendar/\nDistributed under GNU LGPL.  See http://gnu.org/licenses/lgpl.html for details.\n\nDate selection:\n- Use the \u00ab, \u00bb buttons to select year\n- Use the "+String.fromCharCode(8249)+", "+String.fromCharCode(8250)+" buttons to select month\n- Hold mouse button on any of the above buttons for faster selection.";
Calendar._TT.ABOUT_TIME="\n\nTime selection:\n- Click on any of the time parts to increase it\n- or Shift-click to decrease it\n- or click and drag for faster selection.";Calendar._TT.PREV_YEAR="Prev. year (hold for menu)";Calendar._TT.PREV_MONTH="Prev. month (hold for menu)";Calendar._TT.GO_TODAY="Go Today";Calendar._TT.NEXT_MONTH="Next month (hold for menu)";Calendar._TT.NEXT_YEAR="Next year (hold for menu)";Calendar._TT.SEL_DATE="Select date";Calendar._TT.DRAG_TO_MOVE="Drag to move";
Calendar._TT.PART_TODAY=" (today)";Calendar._TT.DAY_FIRST="Display %s first";Calendar._TT.WEEKEND="0,6";Calendar._TT.CLOSE="Close";Calendar._TT.TODAY="Today";Calendar._TT.TIME_PART="(Shift-)Click or drag to change value";Calendar._TT.DEF_DATE_FORMAT="%Y-%m-%d";Calendar._TT.TT_DATE_FORMAT="%a, %b %e";Calendar._TT.WK="wk";Calendar._TT.TIME="Time:";
Calendar.setup=function(a){function b(c,m){typeof a[c]=="undefined"&&(a[c]=m)}function e(a){var c=a.params,b=a.dateClicked||c.electric;if(b&&c.inputField&&(c.inputField.value=a.date.print(c.ifFormat),typeof c.inputField.onchange=="function"))c.inputField.onchange();if(b&&c.displayArea)c.displayArea.innerHTML=a.date.print(c.daFormat);if(b&&typeof c.onUpdate=="function")c.onUpdate(a);b&&c.flat&&typeof c.flatCallback=="function"&&c.flatCallback(a);b&&c.singleClick&&a.dateClicked&&a.callCloseHandler()}
b("inputField",null);b("displayArea",null);b("button",null);b("eventName","click");b("ifFormat","%Y/%m/%d");b("daFormat","%Y/%m/%d");b("singleClick",!0);b("disableFunc",null);b("dateStatusFunc",a.disableFunc);b("dateText",null);b("firstDay",null);b("align","Br");b("range",[1900,2999]);b("weekNumbers",!0);b("flat",null);b("flatCallback",null);b("onSelect",null);b("onClose",null);b("onUpdate",null);b("date",null);b("showsTime",!1);b("timeFormat","24");b("electric",!0);b("step",2);b("position",null);
b("cache",!1);b("showOthers",!1);b("multiple",null);var g=["inputField","displayArea","button"],h;for(h in g)typeof a[g[h]]=="string"&&(a[g[h]]=document.getElementById(a[g[h]]));if(!a.flat&&!a.multiple&&!a.inputField&&!a.displayArea&&!a.button)return alert("Calendar.setup:\n  Nothing to setup (no fields found).  Please check your code"),!1;if(a.flat!=null){if(typeof a.flat=="string")a.flat=document.getElementById(a.flat);if(!a.flat)return alert("Calendar.setup:\n  Flat specified but can't find parent."),
!1;var c=new Calendar(a.firstDay,a.date,a.onSelect||e);c.showsOtherMonths=a.showOthers;c.showsTime=a.showsTime;c.time24=a.timeFormat=="24";c.params=a;c.weekNumbers=a.weekNumbers;c.setRange(a.range[0],a.range[1]);c.setDateStatusHandler(a.dateStatusFunc);c.getDateText=a.dateText;a.ifFormat&&c.setDateFormat(a.ifFormat);a.inputField&&typeof a.inputField.value=="string"&&c.parseDate(a.inputField.value);c.create(a.flat);c.show();return!1}(a.button||a.displayArea||a.inputField)["on"+a.eventName]=function(){var c=
a.inputField||a.displayArea,m=a.inputField?a.ifFormat:a.daFormat,b=!1,g=window.calendar;if(c)a.date=Date.parseDate(c.value||c.innerHTML,m);!g||!a.cache?(window.calendar=g=new Calendar(a.firstDay,a.date,a.onSelect||e,a.onClose||function(a){a.hide()}),g.showsTime=a.showsTime,g.time24=a.timeFormat=="24",g.weekNumbers=a.weekNumbers,b=!0):(a.date&&g.setDate(a.date),g.hide());if(a.multiple){g.multiple={};for(c=a.multiple.length;--c>=0;){var h=a.multiple[c],n=h.print("%Y%m%d");g.multiple[n]=h}}g.showsOtherMonths=
a.showOthers;g.yearStep=a.step;g.setRange(a.range[0],a.range[1]);g.params=a;g.setDateStatusHandler(a.dateStatusFunc);g.getDateText=a.dateText;g.setDateFormat(m);b&&g.create();g.refresh();a.position?g.showAt(a.position[0],a.position[1]):g.showAtElement(a.button||a.displayArea||a.inputField,a.align);return!1};return c};
$(document).ready(function(){function a(){try{e.abort()}catch(a){}$("#TotalQuantity").remove();$("#inv_quantity_ajax_throbber").length==0&&$('[name = "quantity"]').after('<div id="inv_quantity_ajax_throbber" class="ajax_throbber" style="float:right"/>');url="/eden/inv/inv_item_quantity/";url+=$('[name = "inv_item_id"]').val();e=$.getJSON(url,function(a){var f=a.inv_inv_item.quantity;a=a.supply_item_pack.quantity;var m=$('[name = "item_pack_id"] option:selected').text(),b=/\(([0-9]*)\sx/.exec(m);TotalQuantity=
'<span id = "TotalQuantity"> / '+(f*a/(b==null?1:b[1])).toFixed(2)+" "+m+" ("+S3.i18n.in_inv+")</span>";$("#inv_quantity_ajax_throbber").remove();$('[name = "quantity"]').after(TotalQuantity)})}function b(){try{e.abort()}catch(b){}var c=$('[name $= "item_id"]'),f=$('[name = "item_pack_id"]');$('[id$="item_pack_id__row1"]').show();$('[id$="item_pack_id__row"]').show();$("#item_pack_ajax_throbber").length==0&&f.after('<div id="item_pack_ajax_throbber" class="ajax_throbber style="display:inline;"/>');
f.hide();var m;m=$('[name = "item_id"]').length!=0?S3.Ap.concat("/supply/item_pack.json?item_pack.item_id=",c.val()):S3.Ap.concat("/inv/inv_item_packs/",c.val());e=$.ajax({url:m,dataType:"json",context:c,success:function(c){var b="",m="";if(c.length==0)b+='<option value="">'+S3.i18n.no_packs+"</options>";else{for(var g=0;g<c.length;g++)if(c[g].quantity==1){m=c[g].name;break}for(g=0;g<c.length;g++)b+='<option value="'+c[g].id+'">',b+=c[g].quantity==1?c[g].name:c[g].name+" ("+c[g].quantity+" x "+m+
")",b+="</option>"}f.html(b).val(1).show();href=$("#item_pack_add").attr("href")+"&item_id="+$('[name = "item_id"]').val();$("#item_pack_add").attr("href",href).show();$("#item_pack_ajax_throbber").remove();this.attr("name")=="inv_item_id"&&a()}})}var e;$("#inv_send_item_item_pack_id").change(a);var g=$('[name $= "item_id"]').val();g==""|g==void 0?($('[id$="item_pack_id__row1"]').hide(),$('[id$="item_pack_id__row"]').hide()):b();$('[name $= "item_id"]').change(b);$(".quantity.ajax_more").live("click",
function(a){a.preventDefault();a=$(this);var c,f;if(a.hasClass("collapsed")){a.hasClass("fulfil")?(f="inv",c="recv"):a.hasClass("transit")?(c="send",f="inv"):a.hasClass("commit")&&(c="commit",f="req");a.after('<div class="ajax_throbber quantity_req_ajax_throbber"/>').removeClass("collapsed").addClass("expanded");var b=/req_item\/(.*)\//i.exec($(".action-btn",a.parent().parent().parent()).attr("href"))[1];b=S3.Ap.concat("/",f,"/",c,"_item_json/",b);$.ajax({url:b,dataType:"json",context:a,success:function(a){RecvTable=
'<table class="recv_table">';for(i=0;i<a.length;i++)RecvTable+="<tr><td>",i==0?RecvTable+=a[0].id:(RecvURL=S3.Ap.concat("/",f,"/",c,"/",a[i].id),RecvTable+="<a href = '"+RecvURL+"'>",RecvTable+=a[i].datetime!=null?a[i].datetime.substring(0,10)+"</a>":" - </a>"),RecvTable+="</td><td>"+a[i].quantity+"</td></tr>";RecvTable+="</table>";$(".quantity_req_ajax_throbber",this.parent()).remove();this.parent().after(RecvTable)}})}else a.removeClass("expanded").addClass("collapsed"),$(".recv_table",a.parent().parent()).remove()})});
(function(a,b){function e(c,f){c=c?' id="'+n+c+'"':"";return a("<div"+c+(f?' style="'+f+'"':"")+"/>")}function g(a,c){c=c==="x"?I.width():I.height();return typeof a==="string"?Math.round(/%/.test(a)?c/100*parseInt(a,10):parseInt(a,10)):a}function h(a){return o.photo||/\.(gif|png|jpg|jpeg|bmp)(?:\?([^#]*))?(?:#(\.*))?$/i.test(a)}function c(c){for(var f in c)a.isFunction(c[f])&&f.substring(0,2)!=="on"&&(c[f]=c[f].call(P));c.rel=c.rel||P.rel||"nofollow";c.href=c.href||a(P).attr("href");c.title=c.title||
P.title;return c}function f(c,f){f&&f.call(P);a.event.trigger(c)}function m(){var a,c=n+"Slideshow_",f="click."+n,b,g;o.slideshow&&F[1]&&(b=function(){O.text(o.slideshowStop).unbind(f).bind(y,function(){if(C<F.length-1||o.loop)a=setTimeout(E.next,o.slideshowSpeed)}).bind(t,function(){clearTimeout(a)}).one(f+" "+v,g);z.removeClass(c+"off").addClass(c+"on");a=setTimeout(E.next,o.slideshowSpeed)},g=function(){clearTimeout(a);O.text(o.slideshowStart).unbind([y,t,v,f].join(" ")).one(f,b);z.removeClass(c+
"on").addClass(c+"off")},o.slideshowAuto?b():g())}function j(b){if(!ea){P=b;o=c(a.extend({},a.data(P,p)));F=a(P);C=0;o.rel!=="nofollow"&&(F=a("."+da).filter(function(){return(a.data(this,p).rel||this.rel)===o.rel}),C=F.index(P),C===-1&&(F=F.add(P),C=F.length-1));if(!V){V=ca=!0;z.show();if(o.returnFocus)try{P.blur(),a(P).one(u,function(){try{this.focus()}catch(a){}})}catch(m){}M.css({opacity:+o.opacity,cursor:o.overlayClose?"pointer":"auto"}).show();o.w=g(o.initialWidth,"x");o.h=g(o.initialHeight,
"y");E.position(0);w&&I.bind("resize."+H+" scroll."+H,function(){M.css({width:I.width(),height:I.height(),top:I.scrollTop(),left:I.scrollLeft()})}).trigger("scroll."+H);f(s,o.onOpen);D.add(S).add(Y).add(O).add(T).hide();J.html(o.close).show()}E.load(!0)}}var k={transition:"elastic",speed:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,inline:!1,html:!1,iframe:!1,photo:!1,href:!1,title:!1,rel:!1,opacity:0.9,
preloading:!0,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",open:!1,returnFocus:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,overlayClose:!0,escKey:!0,arrowKey:!0},p="colorbox",n="cbox",s=n+"_open",t=n+"_load",y=n+"_complete",v=n+"_cleanup",u=n+"_closed",r=n+"_purge",A=n+"_loaded",x=a.browser.msie&&!a.support.opacity,w=x&&a.browser.version<
7,H=n+"_IE6",M,z,N,Q,W,Z,U,ba,F,I,G,B,K,T,D,O,Y,S,J,L,aa,X,R,P,C,o,V,ca,ea=!1,E,da=n+"Element";E=a.fn[p]=a[p]=function(c,f){var b=this,g;if(!b[0]&&b.selector)return b;c=c||{};if(f)c.onComplete=f;if(!b[0]||b.selector===void 0)b=a("<a/>"),c.open=!0;b.each(function(){a.data(this,p,a.extend({},a.data(this,p)||k,c));a(this).addClass(da)});g=c.open;a.isFunction(g)&&(g=g.call(b));g&&j(b[0]);return b};E.init=function(){I=a(b);z=e().attr({id:p,"class":x?n+"IE":""});M=e("Overlay",w?"position:absolute":"").hide();
N=e("Wrapper");Q=e("Content").append(G=e("LoadedContent","width:0; height:0; overflow:hidden"),K=e("LoadingOverlay").add(e("LoadingGraphic")),T=e("Title"),D=e("Current"),Y=e("Next"),S=e("Previous"),O=e("Slideshow").bind(s,m),J=e("Close"));N.append(e().append(e("TopLeft"),W=e("TopCenter"),e("TopRight")),e(!1,"clear:left").append(Z=e("MiddleLeft"),Q,U=e("MiddleRight")),e(!1,"clear:left").append(e("BottomLeft"),ba=e("BottomCenter"),e("BottomRight"))).children().children().css({"float":"left"});B=e(!1,
"position:absolute; width:9999px; visibility:hidden; display:none");a("body").prepend(M,z.append(N,B));Q.children().hover(function(){a(this).addClass("hover")},function(){a(this).removeClass("hover")}).addClass("hover");L=W.height()+ba.height()+Q.outerHeight(!0)-Q.height();aa=Z.width()+U.width()+Q.outerWidth(!0)-Q.width();X=G.outerHeight(!0);R=G.outerWidth(!0);z.css({"padding-bottom":L,"padding-right":aa}).hide();Y.click(E.next);S.click(E.prev);J.click(E.close);Q.children().removeClass("hover");a("."+
da).live("click",function(a){a.button!==0&&typeof a.button!=="undefined"||a.ctrlKey||a.shiftKey||a.altKey||(a.preventDefault(),j(this))});M.click(function(){o.overlayClose&&E.close()});a(document).bind("keydown",function(a){V&&o.escKey&&a.keyCode===27&&(a.preventDefault(),E.close());if(V&&o.arrowKey&&!ca&&F[1])if(a.keyCode===37&&(C||o.loop))a.preventDefault(),S.click();else if(a.keyCode===39&&(C<F.length-1||o.loop))a.preventDefault(),Y.click()})};E.remove=function(){z.add(M).remove();a("."+da).die("click").removeData(p).removeClass(da)};
E.position=function(a,c){function f(a){W[0].style.width=ba[0].style.width=Q[0].style.width=a.style.width;K[0].style.height=K[1].style.height=Q[0].style.height=Z[0].style.height=U[0].style.height=a.style.height}var b,g=Math.max(document.documentElement.clientHeight-o.h-X-L,0)/2+I.scrollTop(),m=Math.max(I.width()-o.w-R-aa,0)/2+I.scrollLeft();b=z.width()===o.w+R&&z.height()===o.h+X?0:a;N[0].style.width=N[0].style.height="9999px";z.dequeue().animate({width:o.w+R,height:o.h+X,top:g,left:m},{duration:b,
complete:function(){f(this);ca=!1;N[0].style.width=o.w+R+aa+"px";N[0].style.height=o.h+X+L+"px";c&&c()},step:function(){f(this)}})};E.resize=function(a){if(V){a=a||{};if(a.width)o.w=g(a.width,"x")-R-aa;if(a.innerWidth)o.w=g(a.innerWidth,"x");G.css({width:o.w});if(a.height)o.h=g(a.height,"y")-X-L;if(a.innerHeight)o.h=g(a.innerHeight,"y");if(!a.innerHeight&&!a.height)a=G.wrapInner("<div style='overflow:auto'></div>").children(),o.h=a.height(),a.replaceWith(a.children());G.css({height:o.h});E.position(o.transition===
"none"?0:o.speed)}};E.prep=function(c){function b(c){var e,j,k,s,r=F.length,t=o.loop;E.position(c,function(){function c(){x&&z[0].style.removeAttribute("filter")}if(V){x&&g&&G.fadeIn(100);G.show();f(A);T.show().html(o.title);if(r>1&&(typeof o.current==="string"&&D.html(o.current.replace(/\{current\}/,C+1).replace(/\{total\}/,r)).show(),Y[t||C<r-1?"show":"hide"]().html(o.next),S[t||C?"show":"hide"]().html(o.previous),e=C?F[C-1]:F[r-1],k=C<r-1?F[C+1]:F[0],o.slideshow&&O.show(),o.preloading)){s=a.data(k,
p).href||k.href;j=a.data(e,p).href||e.href;s=a.isFunction(s)?s.call(k):s;j=a.isFunction(j)?j.call(e):j;if(h(s))a("<img/>")[0].src=s;if(h(j))a("<img/>")[0].src=j}K.hide();o.transition==="fade"?z.fadeTo(m,1,function(){c()}):c();I.bind("resize."+n,function(){E.position(0)});f(y,o.onComplete)}})}if(V){var g,m=o.transition==="none"?0:o.speed;I.unbind("resize."+n);G.remove();G=e("LoadedContent").html(c);G.hide().appendTo(B.show()).css({width:function(){o.w=o.w||G.width();o.w=o.mw&&o.mw<o.w?o.mw:o.w;return o.w}(),
overflow:o.scrolling?"auto":"hidden"}).css({height:function(){o.h=o.h||G.height();o.h=o.mh&&o.mh<o.h?o.mh:o.h;return o.h}()}).prependTo(Q);B.hide();a("#"+n+"Photo").css({cssFloat:"none",marginLeft:"auto",marginRight:"auto"});if(w)a("select").not(z.find("select")).filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one(v,function(){this.style.visibility="inherit"});o.transition==="fade"?z.fadeTo(m,0,function(){b(0)}):b(m)}};E.load=function(b){var m,j,k,s=E.prep;ca=
!0;P=F[C];b||(o=c(a.extend({},a.data(P,p))));f(r);f(t,o.onLoad);o.h=o.height?g(o.height,"y")-X-L:o.innerHeight&&g(o.innerHeight,"y");o.w=o.width?g(o.width,"x")-R-aa:o.innerWidth&&g(o.innerWidth,"x");o.mw=o.w;o.mh=o.h;if(o.maxWidth)o.mw=g(o.maxWidth,"x")-R-aa,o.mw=o.w&&o.w<o.mw?o.w:o.mw;if(o.maxHeight)o.mh=g(o.maxHeight,"y")-X-L,o.mh=o.h&&o.h<o.mh?o.h:o.mh;m=o.href;K.show();o.inline?(e().hide().insertBefore(a(m)[0]).one(r,function(){a(this).replaceWith(G.children())}),s(a(m))):o.iframe?(z.one(A,function(){var c=
a("<iframe frameborder='0' style='width:100%; height:100%; border:0; display:block'/>")[0];c.name=n+ +new Date;c.src=o.href;if(!o.scrolling)c.scrolling="no";if(x)c.allowtransparency="true";a(c).appendTo(G).one(r,function(){c.src="//about:blank"})}),s(" ")):o.html?s(o.html):h(m)?(j=new Image,j.onload=function(){var c;j.onload=null;j.id=n+"Photo";a(j).css({border:"none",display:"block",cssFloat:"left"});o.scalePhotos&&(k=function(){j.height-=j.height*c;j.width-=j.width*c},o.mw&&j.width>o.mw&&(c=(j.width-
o.mw)/j.width,k()),o.mh&&j.height>o.mh&&(c=(j.height-o.mh)/j.height,k()));if(o.h)j.style.marginTop=Math.max(o.h-j.height,0)/2+"px";F[1]&&(C<F.length-1||o.loop)&&a(j).css({cursor:"pointer"}).click(E.next);if(x)j.style.msInterpolationMode="bicubic";setTimeout(function(){s(j)},1)},setTimeout(function(){j.src=m},1)):m&&B.load(m,function(c,f,b){s(f==="error"?"Request unsuccessful: "+b.statusText:a(this).children())})};E.next=function(){ca||(C=C<F.length-1?C+1:0,E.load())};E.prev=function(){ca||(C=C?C-
1:F.length-1,E.load())};E.close=function(){V&&!ea&&(ea=!0,V=!1,f(v,o.onCleanup),I.unbind("."+n+" ."+H),M.fadeTo("fast",0),z.stop().fadeTo("fast",0,function(){f(r);G.remove();z.add(M).css({opacity:1,cursor:"auto"}).hide();setTimeout(function(){ea=!1;f(u,o.onClosed)},1)}))};E.element=function(){return a(P)};E.settings=k;a(E.init)})(jQuery,this);
(function(a,b){function e(){this.debug=!0;this._curInst=null;this._isInline=!1;this._disabledInputs=[];this._inDialog=this._timepickerShowing=!1;this._dialogClass="ui-timepicker-dialog";this._mainDivId="ui-timepicker-div";this._inlineClass="ui-timepicker-inline";this._currentClass="ui-timepicker-current";this._dayOverClass="ui-timepicker-days-cell-over";this.regional=[];this.regional[""]={hourText:"Hour",minuteText:"Minute",amPmText:["AM","PM"]};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},
appendText:"",onSelect:null,onClose:null,timeSeparator:":",showPeriod:!1,showLeadingZero:!0,showMinutesLeadingZero:!0,altField:"",defaultTime:""};a.extend(this._defaults,this.regional[""]);this.tpDiv=a('<div id="'+this._mainDivId+'" class="ui-timepicker ui-widget ui-helper-clearfix ui-corner-all " style="display: none"></div>')}function g(c,f){a.extend(c,f);for(var g in f)if(f[g]==null||f[g]==b)c[g]=f[g];return c}a.extend(a.ui,{timepicker:{version:"0.0.1"}});var h=(new Date).getTime();a.extend(e.prototype,
{markerClassName:"hasTimepicker",log:function(){this.debug&&console.log.apply("",arguments)},_widgetTimepicker:function(){return this.tpDiv},setDefaults:function(a){g(this._defaults,a||{});return this},_attachTimepicker:function(c,f){var b=null,g;for(g in this._defaults){var e=c.getAttribute("time:"+g);if(e){b=b||{};try{b[g]=eval(e)}catch(h){b[g]=e}}}g=c.nodeName.toLowerCase();e=g=="div"||g=="span";if(!c.id)this.uuid+=1,c.id="tp"+this.uuid;var n=this._newInst(a(c),e);n.settings=a.extend({},f||{},
b||{});g=="input"?this._connectTimepicker(c,n):e&&this._inlineTimepicker(c,n)},_newInst:function(c,f){return{id:c[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:c,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:f,tpDiv:!f?this.tpDiv:a('<div class="'+this._inlineClass+' ui-timepicker ui-widget  ui-helper-clearfix"></div>')}},_connectTimepicker:function(c,f){var b=a(c);f.append=a([]);f.trigger=a([]);b.hasClass(this.markerClassName)||(this._attachments(b,f),b.addClass(this.markerClassName).keydown(this._doKeyDown).keyup(this._doKeyUp).bind("setData.timepicker",
function(a,c,b){f.settings[c]=b}).bind("getData.timepicker",function(a,c){return this._get(f,c)}),a.data(c,"timepicker",f))},_doKeyDown:function(c){var f=!0;a.timepicker._getInst(c.target)._keyEvent=!0;if(a.timepicker._timepickerShowing)switch(c.keyCode){case 9:a.timepicker._hideTimepicker();f=!1;break;case 27:a.timepicker._hideTimepicker();break;default:f=!1}else c.keyCode==36&&c.ctrlKey?a.timepicker._showTimepicker(this):f=!1;f&&(c.preventDefault(),c.stopPropagation())},_doKeyUp:function(c){c=a.timepicker._getInst(c.target);
a.timepicker._setTimeFromField(c);a.timepicker._updateTimepicker(c)},_attachments:function(c,f){var b=this._get(f,"appendText"),g=this._get(f,"isRTL");f.append&&f.append.remove();if(b)f.append=a('<span class="'+this._appendClass+'">'+b+"</span>"),c[g?"before":"after"](f.append);c.unbind("focus",this._showTimepicker);f.trigger&&f.trigger.remove();b=this._get(f,"showOn");(b=="focus"||b=="both")&&c.focus(this._showTimepicker);if(b=="button"||b=="both"){b=this._get(f,"buttonText");var e=this._get(f,"buttonImage");
f.trigger=a(this._get(f,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:e,alt:b,title:b}):a('<button type="button"></button>').addClass(this._triggerClass).html(e==""?b:a("<img/>").attr({src:e,alt:b,title:b})));c[g?"before":"after"](f.trigger);f.trigger.click(function(){a.timepicker._timepickerShowing&&a.timepicker._lastInput==c[0]?a.timepicker._hideTimepicker():a.timepicker._showTimepicker(c[0]);return!1})}},_inlineTimepicker:function(c,f){var b=a(c);b.hasClass(this.markerClassName)||
(b.addClass(this.markerClassName).append(f.tpDiv).bind("setData.timepicker",function(a,c,b){f.settings[c]=b}).bind("getData.timepicker",function(a,c){return this._get(f,c)}),a.data(c,"timepicker",f),this._setTimeFromField(f),this._updateTimepicker(f),f.tpDiv.show())},_showTimepicker:function(c){c=c.target||c;c.nodeName.toLowerCase()!="input"&&(c=a("input",c.parentNode)[0]);if(!(a.timepicker._isDisabledTimepicker(c)||a.timepicker._lastInput==c)){var f=a.timepicker._getInst(c);a.timepicker._curInst&&
a.timepicker._curInst!=f&&a.timepicker._curInst.tpDiv.stop(!0,!0);var b=a.timepicker._get(f,"beforeShow");g(f.settings,b?b.apply(c,[c,f]):{});f.lastVal=null;a.timepicker._lastInput=c;a.timepicker._setTimeFromField(f);if(a.timepicker._inDialog)c.value="";if(!a.timepicker._pos)a.timepicker._pos=a.timepicker._findPos(c),a.timepicker._pos[1]+=c.offsetHeight;var e=!1;a(c).parents().each(function(){e|=a(this).css("position")=="fixed";return!e});e&&a.browser.opera&&(a.timepicker._pos[0]-=document.documentElement.scrollLeft,
a.timepicker._pos[1]-=document.documentElement.scrollTop);b={left:a.timepicker._pos[0],top:a.timepicker._pos[1]};a.timepicker._pos=null;f.tpDiv.css({position:"absolute",display:"block",top:"-1000px"});a.timepicker._updateTimepicker(f);f._hoursClicked=!1;f._minutesClicked=!1;b=a.timepicker._checkOffset(f,b,e);f.tpDiv.css({position:a.timepicker._inDialog&&a.blockUI?"static":e?"fixed":"absolute",display:"none",left:b.left+"px",top:b.top+"px"});if(!f.inline){b=a.timepicker._get(f,"showAnim");var h=a.timepicker._get(f,
"duration"),p=function(){a.timepicker._timepickerShowing=!0;var c=a.timepicker._getBorders(f.tpDiv);f.tpDiv.find("iframe.ui-timepicker-cover").css({left:-c[0],top:-c[1],width:f.tpDiv.outerWidth(),height:f.tpDiv.outerHeight()})};f.tpDiv.zIndex(a(c).zIndex()+1);if(a.effects&&a.effects[b])f.tpDiv.show(b,a.timepicker._get(f,"showOptions"),h,p);else f.tpDiv[b||"show"](b?h:null,p);(!b||!h)&&p();f.input.is(":visible")&&!f.input.is(":disabled")&&f.input.focus();a.timepicker._curInst=f}}},_updateTimepicker:function(c){var f=
this,b=a.timepicker._getBorders(c.tpDiv);c.tpDiv.empty().append(this._generateHTML(c)).find("iframe.ui-timepicker-cover").css({left:-b[0],top:-b[1],width:c.tpDiv.outerWidth(),height:c.tpDiv.outerHeight()}).end().find(".ui-timepicker td a").bind("mouseout",function(){a(this).removeClass("ui-state-hover");this.className.indexOf("ui-timepicker-prev")!=-1&&a(this).removeClass("ui-timepicker-prev-hover");this.className.indexOf("ui-timepicker-next")!=-1&&a(this).removeClass("ui-timepicker-next-hover")}).bind("mouseover",
function(){if(!f._isDisabledTimepicker(c.inline?c.tpDiv.parent()[0]:c.input[0]))a(this).parents(".ui-timepicker-calendar").find("a").removeClass("ui-state-hover"),a(this).addClass("ui-state-hover"),this.className.indexOf("ui-timepicker-prev")!=-1&&a(this).addClass("ui-timepicker-prev-hover"),this.className.indexOf("ui-timepicker-next")!=-1&&a(this).addClass("ui-timepicker-next-hover")}).end().find("."+this._dayOverClass+" a").trigger("mouseover").end()},_generateHTML:function(a){var f,b="",g=this._get(a,
"showPeriod")==!0,e=this._get(a,"showLeadingZero")==!0,h=this._get(a,"showMinutesLeadingZero")==!0,n=this._get(a,"amPmText");b='<table class="ui-timepicker-table ui-widget-content ui-corner-all"><tr><td class="ui-timepicker-hours"><div class="ui-timepicker-title ui-widget-header ui-helper-clearfix ui-corner-all">'+this._get(a,"hourText")+'</div><table class="ui-timepicker">';b+='<tr><th rowspan="2" class="periods">'+n[0]+"</th>";for(f=0;f<=5;f++)b+=this._generateHTMLHourCell(a,f,g,e);b+="</tr><tr>";
for(f=6;f<=11;f++)b+=this._generateHTMLHourCell(a,f,g,e);b+='</tr><tr><th rowspan="2" class="periods">'+n[1]+"</th>";for(f=12;f<=17;f++)b+=this._generateHTMLHourCell(a,f,g,e);b+="</tr><tr>";for(f=18;f<=23;f++)b+=this._generateHTMLHourCell(a,f,g,e);b+='</tr></table></td><td class="ui-timepicker-minutes"><div class="ui-timepicker-title ui-widget-header ui-helper-clearfix ui-corner-all">'+this._get(a,"minuteText")+'</div><table class="ui-timepicker"><tr>';for(f=0;f<15;f+=5)b+=this._generateHTMLMinuteCell(a,
f,f<10&&h?"0"+f.toString():f.toString());b+="</tr><tr>";for(f=15;f<30;f+=5)b+=this._generateHTMLMinuteCell(a,f,f.toString());b+="</tr><tr>";for(f=30;f<45;f+=5)b+=this._generateHTMLMinuteCell(a,f,f.toString());b+="</tr><tr>";for(f=45;f<60;f+=5)b+=this._generateHTMLMinuteCell(a,f,f.toString());b+="</tr></table></td></tr></table>";return b},_generateHTMLHourCell:function(a,f,b,g){var e=f;f>12&&b&&(e=f-12);e==0&&b&&(e=12);e<10&&g&&(e="0"+e);return'<td onclick="TP_jQuery_'+h+".timepicker.selectHours('#"+
a.id+"', "+f.toString()+', this ); return false;" ondblclick="TP_jQuery_'+h+".timepicker.selectHours('#"+a.id+"', "+f.toString()+', this, true ); return false;" ><a href="#" class="ui-state-default '+(f==a.hours?"ui-state-active":"")+'">'+e.toString()+"</a></td>"},_generateHTMLMinuteCell:function(a,f,b){return'<td onclick="TP_jQuery_'+h+".timepicker.selectMinutes('#"+a.id+"', "+f.toString()+', this ); return false;" ondblclick="TP_jQuery_'+h+".timepicker.selectMinutes('#"+a.id+"', "+f.toString()+
', this, true ); return false;" ><a href="#" class="ui-state-default '+(f==a.minutes?"ui-state-active":"")+'" >'+b+"</a></td>"},_isDisabledTimepicker:function(a){if(!a)return!1;for(var f=0;f<this._disabledInputs.length;f++)if(this._disabledInputs[f]==a)return!0;return!1},_checkOffset:function(c,f,b){var g=c.tpDiv.outerWidth(),e=c.tpDiv.outerHeight(),h=c.input?c.input.outerWidth():0,n=c.input?c.input.outerHeight():0,s=document.documentElement.clientWidth+a(document).scrollLeft(),t=document.documentElement.clientHeight+
a(document).scrollTop();f.left-=this._get(c,"isRTL")?g-h:0;f.left-=b&&f.left==c.input.offset().left?a(document).scrollLeft():0;f.top-=b&&f.top==c.input.offset().top+n?a(document).scrollTop():0;f.left-=Math.min(f.left,f.left+g>s&&s>g?Math.abs(f.left+g-s):0);f.top-=Math.min(f.top,f.top+e>t&&t>e?Math.abs(e+n):0);return f},_findPos:function(c){for(var f=this._get(this._getInst(c),"isRTL");c&&(c.type=="hidden"||c.nodeType!=1);)c=c[f?"previousSibling":"nextSibling"];c=a(c).offset();return[c.left,c.top]},
_getBorders:function(a){var f=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(f(a.css("border-left-width"))),parseFloat(f(a.css("border-top-width")))]},_checkExternalClick:function(c){a.timepicker._curInst&&(c=a(c.target),c[0].id!=a.timepicker._mainDivId&&c.parents("#"+a.timepicker._mainDivId).length==0&&!c.hasClass(a.timepicker.markerClassName)&&!c.hasClass(a.timepicker._triggerClass)&&a.timepicker._timepickerShowing&&(!a.timepicker._inDialog||!a.blockUI)&&a.timepicker._hideTimepicker())},
_hideTimepicker:function(c){var f=this._curInst;if(f&&!(c&&f!=a.data(c,"timepicker"))&&this._timepickerShowing){c=this._get(f,"showAnim");var b=this._get(f,"duration"),g=function(){a.timepicker._tidyDialog(f);this._curInst=null};if(a.effects&&a.effects[c])f.tpDiv.hide(c,a.timepicker._get(f,"showOptions"),b,g);else f.tpDiv[c=="slideDown"?"slideUp":c=="fadeIn"?"fadeOut":"hide"](c?b:null,g);c||g();(c=this._get(f,"onClose"))&&c.apply(f.input?f.input[0]:null,[f.input?f.input.val():"",f]);this._timepickerShowing=
!1;this._lastInput=null;this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),a.blockUI&&(a.unblockUI(),a("body").append(this.tpDiv)));this._inDialog=!1}},_tidyDialog:function(a){a.tpDiv.removeClass(this._dialogClass).unbind(".ui-timepicker")},_getInst:function(c){try{return a.data(c,"timepicker")}catch(f){throw"Missing instance data for this timepicker";}},_get:function(a,f){return a.settings[f]!==b?a.settings[f]:this._defaults[f]},_setTimeFromField:function(a){if(a.input.val()!=
a.lastVal){var f=this._get(a,"defaultTime"),b=this._getCurrentTimeRounded(a);f!=""&&(b=f);a.inline==!1&&a.input.val()!=""&&(b=a.input.val());f=a.lastVal=b;f=this.parseTime(a,f);a.hours=f.hours;a.minutes=f.minutes}},_getCurrentTimeRounded:function(a){var f=new Date;a=this._get(a,"timeSeparator");var b=f.getMinutes();b=Math.round(b/5)*5;return f.getHours().toString()+a+b.toString()},parseTime:function(a,f){var b={};b.hours=-1;b.minutes=-1;var g=this._get(a,"timeSeparator"),e=this._get(a,"amPmText");
g=f.indexOf(g);if(g==-1)return b;b.hours=parseInt(f.substr(0,g),10);b.minutes=parseInt(f.substr(g+1),10);g=this._get(a,"showPeriod")==!0;var h=f.toUpperCase();b.hours<12&&g&&h.indexOf(e[1].toUpperCase())!=-1&&(b.hours+=12);if(b.hours==12&&g&&h.indexOf(e[0].toUpperCase())!=-1)b.hours=0;return b},selectHours:function(c,f,b,g){c=this._getInst(a(c)[0]);a(b).parents(".ui-timepicker-hours:first").find("a").removeClass("ui-state-active");a(b).children("a").addClass("ui-state-active");c.hours=f;this._updateSelectedValue(c);
c._hoursClicked=!0;(c._minutesClicked||g)&&a.timepicker._hideTimepicker()},selectMinutes:function(c,f,b,g){c=this._getInst(a(c)[0]);a(b).parents(".ui-timepicker-minutes:first").find("a").removeClass("ui-state-active");a(b).children("a").addClass("ui-state-active");c.minutes=f;this._updateSelectedValue(c);c._minutesClicked=!0;(c._hoursClicked||g)&&a.timepicker._hideTimepicker()},_updateSelectedValue:function(a){if(a.hours<0||a.hours>23)a.hours=12;if(a.minutes<0||a.minutes>59)a.minutes=0;var f="",b=
this._get(a,"showPeriod")==!0,g=this._get(a,"showLeadingZero")==!0,e=this._get(a,"amPmText"),h=a.minutes?a.minutes:0,n=a.hours?a.hours:0;n||(displayHoyrs=0);b&&(a.hours==0&&(n=12),a.hours<12?f=e[0]:(f=e[1],n>12&&(n-=12)));b=n.toString();g&&n<10&&(b="0"+b);g=h.toString();h<10&&(g="0"+g);h=b+this._get(a,"timeSeparator")+g;f.length>0&&(h+=" "+f);a.input&&(a.input.val(h),a.input.trigger("change"));(f=this._get(a,"onSelect"))&&f.apply(a.input?a.input[0]:null,[h,a]);this._updateAlternate(a,h);return h},
_updateAlternate:function(c,f){var b=this._get(c,"altField");b&&a(b).each(function(){a(this).val(f)})}});a.fn.timepicker=function(c){if(!a.timepicker.initialized)a(document).mousedown(a.timepicker._checkExternalClick).find("body").append(a.timepicker.tpDiv),a.timepicker.initialized=!0;var f=Array.prototype.slice.call(arguments,1);if(typeof c=="string"&&(c=="isDisabled"||c=="getDate"||c=="widget"))return a.timepicker["_"+c+"Datepicker"].apply(a.timepicker,[this[0]].concat(f));if(c=="option"&&arguments.length==
2&&typeof arguments[1]=="string")return a.timepicker["_"+c+"Datepicker"].apply(a.timepicker,[this[0]].concat(f));return this.each(function(){typeof c=="string"?a.timepicker["_"+c+"Datepicker"].apply(a.timepicker,[this].concat(f)):a.timepicker._attachTimepicker(this,c)})};a.timepicker=new e;a.timepicker.initialized=!1;a.timepicker.uuid=(new Date).getTime();a.timepicker.version="1.8.6";window["TP_jQuery_"+h]=a})(jQuery);
(function(a){a.cluetip={version:"1.0.7"};var b,e,g,h,c,f,m,j;a.fn.cluetip=function(n,s){typeof n=="object"&&(s=n,n=null);if(n=="destroy")return this.removeData("thisInfo").unbind(".cluetip");return this.each(function(t){function y(){return!1}var v=this,u=a(this),r=a.extend(!0,{},a.fn.cluetip.defaults,s||{},a.metadata?u.metadata():a.meta?u.data():{}),A=!1,x=+r.cluezIndex;u.data("thisInfo",{title:v.title,zIndex:x});var w=!1,H=0;a("#cluetip").length||(a('<div id="cluetip"><div id="cluetip-outer"><h3 id="cluetip-title"></h3><div id="cluetip-inner"></div></div><div id="cluetip-extra"></div><div id="cluetip-arrows" class="cluetip-arrows"></div></div>')[k](p).hide(),
b=a("#cluetip").css({position:"absolute"}),g=a("#cluetip-outer").css({position:"relative",zIndex:x}),e=a("#cluetip-inner"),h=a("#cluetip-title"),c=a("#cluetip-arrows"),f=a('<div id="cluetip-waitimage"></div>').css({position:"absolute"}).insertBefore(b).hide());var M=r.dropShadow?+r.dropShadowSteps:0;if(!m){m=a([]);for(var z=0;z<M;z++)m=m.add(a("<div></div>").css({zIndex:x-1,opacity:0.1,top:1+z,left:1+z}));m.css({position:"absolute",backgroundColor:"#000"}).prependTo(b)}var N=u.attr(r.attribute),Q=
r.cluetipClass;if(!N&&!r.splitTitle&&!n)return!0;r.local&&r.localPrefix&&(N=r.localPrefix+N);r.local&&r.hideLocal&&a(N+":first").hide();var W=parseInt(r.topOffset,10),Z=parseInt(r.leftOffset,10),U,ba,F=isNaN(parseInt(r.height,10))?"auto":/\D/g.test(r.height)?r.height:r.height+"px",I,G,B,K,T,D=parseInt(r.width,10)||275,O=D+(parseInt(b.css("paddingLeft"),10)||0)+(parseInt(b.css("paddingRight"),10)||0)+M,Y=this.offsetWidth,S,J,L,aa,X,R=r.attribute!="title"?u.attr(r.titleAttribute):"";r.splitTitle&&(R==
void 0&&(R=""),X=R.split(r.splitTitle),R=X.shift());r.escapeTitle&&(R=R.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;"));var P=function(m){if(!r.onActivate(u))return!1;w=!0;b.removeClass().css({width:D});N==u.attr("href")&&u.css("cursor",r.cursor);r.hoverClass&&u.addClass(r.hoverClass);G=u.offset().top;S=u.offset().left;L=m.pageX;K=m.pageY;v.tagName.toLowerCase()!="area"&&(I=a(document).scrollTop(),aa=a(window).width());if(r.positionBy=="fixed")J=Y+S+Z,b.css({left:J});else{J=Y>S&&
S>O||S+Y+O+Z>aa?S-O-Z:Y+S+Z;if(v.tagName.toLowerCase()=="area"||r.positionBy=="mouse"||Y+O>aa)L+20+O>aa?(b.addClass(" cluetip-"+Q),J=L-O-Z>=0?L-O-Z-parseInt(b.css("marginLeft"),10)+parseInt(e.css("marginRight"),10):L-O/2):J=L+Z;var h=J<0?m.pageY+W:m.pageY;b.css({left:J>0&&r.positionBy!="bottomTop"?J:L+O/2>aa?aa/2-O/2:Math.max(L-O/2,0),zIndex:u.data("thisInfo").zIndex});c.css({zIndex:u.data("thisInfo").zIndex+1})}ba=a(window).height();if(n)typeof n=="function"&&(n=n.call(v)),e.html(n),C(h);else if(X){m=
X.length;e.html(m?X[0]:"");if(m>1)for(var k=1;k<m;k++)e.append('<div class="split-body">'+X[k]+"</div>");C(h)}else if(!r.local&&N.indexOf("#")!==0)if(/\.(jpe?g|tiff?|gif|png)$/i.test(N))e.html('<img src="'+N+'" alt="'+R+'" />'),C(h);else if(A&&r.ajaxCache)e.html(A),C(h);else{var p=r.ajaxSettings.beforeSend,s=r.ajaxSettings.error,o=r.ajaxSettings.success,y=r.ajaxSettings.complete;m=a.extend(!0,{},r.ajaxSettings,{cache:!1,url:N,beforeSend:function(a){p&&p.call(v,a,b,e);g.children().empty();r.waitImage&&
f.css({top:K+20,left:L+20,zIndex:u.data("thisInfo").zIndex-1}).show()},error:function(a,c){w&&(s?s.call(v,a,c,b,e):e.html("<i>sorry, the contents could not be loaded</i>"))},success:function(a,c){A=r.ajaxProcess.call(v,a);w&&(o&&o.call(v,a,c,b,e),e.html(A))},complete:function(c,g){y&&y.call(v,c,g,b,e);var m=e[0].getElementsByTagName("img");j=m.length;for(var k=0,n=m.length;k<n;k++)m[k].complete&&j--;j&&!a.browser.opera?a(m).bind("load error",function(){j--;j<1&&(f.hide(),w&&C(h))}):(f.hide(),w&&C(h))}});
a.ajax(m)}else r.local&&(m=a(N+(/#\S+$/.test(N)?"":":eq("+t+")")).clone(!0).show(),e.html(m),C(h))},C=function(f){b.addClass("cluetip-"+Q);if(r.truncate){var j=e.text().slice(0,r.truncate)+"...";e.html(j)}R?h.show().html(R):r.showTitle?h.show().html("&nbsp;"):h.hide();r.sticky&&(j=a('<div id="cluetip-close"><a href="#">'+r.closeText+"</a></div>"),r.closePosition=="bottom"?j.appendTo(e):r.closePosition=="title"?j.prependTo(h):j.prependTo(e),j.bind("click.cluetip",function(){V();return!1}),r.mouseOutClose?
b.bind("mouseleave.cluetip",function(){V()}):b.unbind("mouseleave.cluetip"));j="";g.css({zIndex:u.data("thisInfo").zIndex,overflow:F=="auto"?"visible":"auto",height:F});U=F=="auto"?Math.max(b.outerHeight(),b.height()):parseInt(F,10);B=G;T=I+ba;r.positionBy=="fixed"?B=G-r.dropShadowSteps+W:J<L&&Math.max(J,0)+O>L||r.positionBy=="bottomTop"?G+U+W>T&&K-I>U+W?(B=K-U-W,j="top"):(B=K+W,j="bottom"):B=G+U+W>T?U>=ba?I:T-U-W:u.css("display")=="block"||v.tagName.toLowerCase()=="area"||r.positionBy=="mouse"?f-
W:G-r.dropShadowSteps;j==""&&(J<S?j="left":j="right");b.css({top:B+"px"}).removeClass().addClass("clue-"+j+"-"+Q).addClass(" cluetip-"+Q);r.arrows?(f=G-B-r.dropShadowSteps,c.css({top:/(left|right)/.test(j)&&J>=0&&f>0?f+"px":/(left|right)/.test(j)?0:""}).show()):c.hide();m.hide();b.hide()[r.fx.open](r.fx.openSpeed||0);r.dropShadow&&m.css({height:U,width:D,zIndex:u.data("thisInfo").zIndex-1}).show();a.fn.bgiframe&&b.bgiframe();r.delayedClose>0&&(H=setTimeout(V,r.delayedClose));r.onShow.call(v,b,e)},
o=function(){w=!1;f.hide();if(!r.sticky||/click|toggle/.test(r.activation))V(),clearTimeout(H);r.hoverClass&&u.removeClass(r.hoverClass)},V=function(){g.parent().hide().removeClass();r.onHide.call(v,b,e);u.removeClass("cluetip-clicked");R&&u.attr(r.titleAttribute,R);u.css("cursor","");r.arrows&&c.css({top:""})};a(document).bind("hideCluetip",function(){V()});if(/click|toggle/.test(r.activation))u.bind("click.cluetip",function(c){b.is(":hidden")||!u.is(".cluetip-clicked")?(P(c),a(".cluetip-clicked").removeClass("cluetip-clicked"),
u.addClass("cluetip-clicked")):o(c);this.blur();return!1});else if(r.activation=="focus")u.bind("focus.cluetip",function(a){P(a)}),u.bind("blur.cluetip",function(a){o(a)});else{u[r.clickThrough?"unbind":"bind"]("click",y);var ca=function(a){if(r.tracking==!0){var c=J-a.pageX,f=B?B-a.pageY:G-a.pageY;u.bind("mousemove.cluetip",function(a){b.css({left:a.pageX+c,top:a.pageY+f})})}};a.fn.hoverIntent&&r.hoverIntent?u.hoverIntent({sensitivity:r.hoverIntent.sensitivity,interval:r.hoverIntent.interval,over:function(a){P(a);
ca(a)},timeout:r.hoverIntent.timeout,out:function(a){o(a);u.unbind("mousemove.cluetip")}}):u.bind("mouseenter.cluetip",function(a){P(a);ca(a)}).bind("mouseleave.cluetip",function(a){o(a);u.unbind("mousemove.cluetip")});u.bind("mouseover.cluetip",function(){u.attr("title","")}).bind("mouseleave.cluetip",function(){u.attr("title",u.data("thisInfo").title)})}})};a.fn.cluetip.defaults={width:275,height:"auto",cluezIndex:97,positionBy:"auto",topOffset:15,leftOffset:15,local:!1,localPrefix:null,hideLocal:!0,
attribute:"rel",titleAttribute:"title",splitTitle:"",escapeTitle:!1,showTitle:!0,cluetipClass:"default",hoverClass:"",waitImage:!0,cursor:"help",arrows:!1,dropShadow:!0,dropShadowSteps:6,sticky:!1,mouseOutClose:!1,activation:"hover",clickThrough:!1,tracking:!1,delayedClose:0,closePosition:"top",closeText:"Close",truncate:0,fx:{open:"show",openSpeed:""},hoverIntent:{sensitivity:3,interval:50,timeout:0},onActivate:function(){return!0},onShow:function(){},onHide:function(){},ajaxCache:!0,ajaxProcess:function(a){return a=
a.replace(/<(script|style|title)[^<]+<\/(script|style|title)>/gm,"").replace(/<(link|meta)[^>]+>/g,"")},ajaxSettings:{dataType:"html"},debug:!1};var k="appendTo",p="body";a.cluetip.setup=function(a){if(a&&a.insertionType&&a.insertionType.match(/appendTo|prependTo|insertBefore|insertAfter/))k=a.insertionType;if(a&&a.insertionElement)p=a.insertionElement}})(jQuery);
jQuery&&function(a){function b(a,c,g){for(var e="",h=0;h<c.length;h++)if(c[h].optgroup)e+='<label class="optGroup">',e+=g.optGroupSelectable?'<input type="checkbox" class="optGroup" />'+c[h].optgroup:c[h].optgroup,e+='</label><div class="optGroupContainer">',e+=b(a,c[h].options,g),e+="</div>";else{var n=c[h],s='<label><input type="checkbox" name="'+a+'[]" value="'+n.value+'"';n.selected&&(s+=' checked="checked"');s+=" />"+n.text+"</label>";e+=s}return e}function e(f){var e=a(this),j=e.next(".multiSelectOptions"),
k=e.data("config"),p=e.data("callback");j.html("");var n="";k.selectAll&&(n+='<label class="selectAll"><input type="checkbox" class="selectAll" />'+k.selectAllText+"</label>");n+=b(e.attr("id"),f,k);j.html(n);f=j.width();n=!1;j.height()>k.listHeight?(j.css("height",k.listHeight+"px"),n=!0):j.css("height","");f=n&&f==j.width()?17:0;j.width()+f<e.outerWidth()?j.css("width",e.outerWidth()-2+"px"):j.css("width",j.width()+f+"px");a.fn.bgiframe&&e.next(".multiSelectOptions").bgiframe({width:j.width(),height:j.height()});
k.selectAll&&j.find("INPUT.selectAll").click(function(){j.find("INPUT:checkbox").attr("checked",a(this).attr("checked")).parent("LABEL").toggleClass("checked",a(this).attr("checked"))});k.optGroupSelectable&&(j.addClass("optGroupHasCheckboxes"),j.find("INPUT.optGroup").click(function(){a(this).parent().next().find("INPUT:checkbox").attr("checked",a(this).attr("checked")).parent("LABEL").toggleClass("checked",a(this).attr("checked"))}));j.find("INPUT:checkbox").click(function(){a(this).parent("LABEL").toggleClass("checked",
a(this).attr("checked"));c.call(e);e.focus();a(this).parent().parent().hasClass("optGroupContainer")&&h.call(e,a(this).parent().parent().prev());p&&p(a(this))});j.each(function(){a(this).find("INPUT:checked").parent().addClass("checked")});c.call(e);k.optGroupSelectable&&j.find("LABEL.optGroup").each(function(){h.call(e,a(this))});j.find("LABEL:has(INPUT)").hover(function(){a(this).parent().find("LABEL").removeClass("hover");a(this).addClass("hover")},function(){a(this).parent().find("LABEL").removeClass("hover")});
e.keydown(function(f){var b=a(this).next(".multiSelectOptions");if(b.css("visibility")!="hidden"){if(f.keyCode==9)return a(this).addClass("focus").trigger("click"),a(this).focus().next(":input").focus(),!0;(f.keyCode==27||f.keyCode==37||f.keyCode==39)&&a(this).addClass("focus").trigger("click");if(f.keyCode==40||f.keyCode==38){var h=b.find("LABEL"),j=h.index(h.filter(".hover")),k=-1;j<0?b.find("LABEL:first").addClass("hover"):f.keyCode==40&&j<h.length-1?k=j+1:f.keyCode==38&&j>0&&(k=j-1);k>=0&&(a(h.get(j)).removeClass("hover"),
a(h.get(k)).addClass("hover"),g(b));return!1}if(f.keyCode==13||f.keyCode==32)return f=b.find("LABEL.hover INPUT:checkbox"),f.attr("checked",!f.attr("checked")).parent("LABEL").toggleClass("checked",f.attr("checked")),f.hasClass("selectAll")&&b.find("INPUT:checkbox").attr("checked",f.attr("checked")).parent("LABEL").addClass("checked").toggleClass("checked",f.attr("checked")),c.call(e),p&&p(a(this)),!1;if(f.keyCode>=33&&f.keyCode<=126){h=b.find("LABEL:startsWith("+String.fromCharCode(f.keyCode)+")");
var n=h.index(h.filter("LABEL.hover"));j=h.filter(function(a){return a>n});h=(j.length>=1?j:h).filter("LABEL:first");h.length==1&&(b.find("LABEL.hover").removeClass("hover"),h.addClass("hover"),g(b))}}else{if(f.keyCode==38||f.keyCode==40||f.keyCode==13||f.keyCode==32)return a(this).removeClass("focus").trigger("click"),b.find("LABEL:first").addClass("hover"),!1;if(f.keyCode==9)return b.next(":input").focus(),!0}if(f.keyCode==13)return!1})}function g(a){var c=a.find("LABEL.hover").position().top+a.find("LABEL.hover").outerHeight();
c>a.innerHeight()&&a.scrollTop(a.scrollTop()+c-a.innerHeight());a.find("LABEL.hover").position().top<0&&a.scrollTop(a.scrollTop()+a.find("LABEL.hover").position().top)}function h(c){if(a(this).data("config").optGroupSelectable){var b=!0;a(c).next().find("INPUT:checkbox").each(function(){if(!a(this).attr("checked"))return b=!1});a(c).find("INPUT.optGroup").attr("checked",b).parent("LABEL").toggleClass("checked",b)}}function c(){var c=a(this),b=c.next(".multiSelectOptions"),g=c.data("config"),e=0,h=
!0,n="";b.find("INPUT:checkbox").not(".selectAll, .optGroup").each(function(){a(this).attr("checked")?(e++,n=n+a(this).parent().text()+", "):h=!1});n=n.replace(/\s*\,\s*$/,"");e==0?c.find("span").html(g.noneSelected):g.oneOrMoreSelected=="*"?(c.find("span").html(n),c.attr("title",n)):c.find("span").html(g.oneOrMoreSelected.replace("%",e));g.selectAll&&b.find("INPUT.selectAll").attr("checked",h).parent("LABEL").toggleClass("checked",h)}a.extend(a.fn,{multiSelect:function(c,b){c||(c={});if(c.selectAll==
void 0)c.selectAll=!0;if(c.selectAllText==void 0)c.selectAllText="Select All";if(c.noneSelected==void 0)c.noneSelected="Select options";if(c.oneOrMoreSelected==void 0)c.oneOrMoreSelected="% selected";if(c.optGroupSelectable==void 0)c.optGroupSelectable=!1;if(c.listHeight==void 0)c.listHeight=150;a(this).each(function(){var g=a(this),h='<a href="javascript:;" class="multiSelect"><span></span></a>';h+='<div class="multiSelectOptions" style="position: absolute; z-index: 99999; visibility: hidden;"></div>';
a(g).after(h);var p=a(g).next(".multiSelect");p.next(".multiSelectOptions");p.find("span").css("width",a(g).width()+"px");p.data("config",c);p.data("callback",b);var n=[];a(g).children().each(function(){if(this.tagName.toUpperCase()=="OPTGROUP"){var c=[];n.push({optgroup:a(this).attr("label"),options:c});a(this).children("OPTION").each(function(){a(this).val()!=""&&c.push({text:a(this).html(),value:a(this).val(),selected:a(this).attr("selected")})})}else this.tagName.toUpperCase()=="OPTION"&&a(this).val()!=
""&&n.push({text:a(this).html(),value:a(this).val(),selected:a(this).attr("selected")})});a(g).remove();p.attr("id",a(g).attr("id"));e.call(p,n);p.hover(function(){a(this).addClass("hover")},function(){a(this).removeClass("hover")}).click(function(){a(this).hasClass("active")?a(this).multiSelectOptionsHide():a(this).multiSelectOptionsShow();return!1}).focus(function(){a(this).addClass("focus")}).blur(function(){a(this).removeClass("focus")});a(document).click(function(c){a(c.target).parents().andSelf().is(".multiSelectOptions")||
p.multiSelectOptionsHide()})})},multiSelectOptionsUpdate:function(c){e.call(a(this),c)},multiSelectOptionsHide:function(){a(this).removeClass("active").removeClass("hover").next(".multiSelectOptions").css("visibility","hidden")},multiSelectOptionsShow:function(){var c=a(this),b=c.next(".multiSelectOptions");c.data("config");a(".multiSelect").multiSelectOptionsHide();b.find("LABEL").removeClass("hover");c.addClass("active").next(".multiSelectOptions").css("visibility","visible");c.focus();c.next(".multiSelectOptions").scrollTop(0);
b=c.position();c.next(".multiSelectOptions").css({top:b.top+a(this).outerHeight()+"px"});c.next(".multiSelectOptions").css({left:b.left+"px"})},selectedValuesString:function(){var c="";a(this).next(".multiSelectOptions").find("INPUT:checkbox:checked").not(".optGroup, .selectAll").each(function(){c+=a(this).attr("value")+","});return c.replace(/\s*\,\s*$/,"")}});a.expr[":"].startsWith=function(c,b,g){b=g[3];if(!b)return!1;return eval("/^[/s]*"+b+"/i").test(a(c).text())}}(jQuery);
var S3MultiselectWidgetFileCounter=0;
function S3MultiselectWidgetAddClick(a){var b=a.WidgetID,e=[/DummyDisplay0/g,/DummyDisplay1/g,/DummyDisplay2/g,/DummyDisplay3/g,/DummyDisplay4/g],g=[/DummyJSON0/g,/DummyJSON1/g,/DummyJSON2/g,/DummyJSON3/g,/DummyJSON4/g],h=$("#"+b+"_json").val(),c="{",f,m=!0,j=a.NewRow,k="",p="";for(i=0;i<a.ColumnFields.length;i++){var n="#"+b+"_"+a.ColumnFields[i],s=$(n),t=$(n+"_auto_text").val();DisplayValue="";if(s.is("select"))f="'"+s.val()+"'",DisplayValue=$(n+" option:selected").text(),s.val("");else if(t!=void 0){DisplayValue=
t;f=$(n+"_auto_json").val();if(a.ColumnFields[i].slice(-3)=="_id"&&f==""){DisplayValue="";break}$(n+"_auto_text").val("");$(n+"_auto_json").val("");$(n+"_auto_edit").hide()}else s.attr("type")=="file"?(DisplayValue=s.val(),DisplayValue!=""&&(k=n,p=a.ColumnFields[i]+S3MultiselectWidgetFileCounter,f="'"+p+"'",S3MultiselectWidgetFileCounter++)):(DisplayValue=s.val(),s.val(""),s.attr("class")=="currency"&&(DisplayValue=f.replace("$","")),DisplayValue=DisplayValue.replace(/'/g,'"'),f="'"+DisplayValue+
"'");DisplayValue!=""&&(m=!1);j=j.replace(e[i],DisplayValue);j=j.replace(g[i],f);c=c+"'"+a.ColumnFields[i]+"':"+f+","}c=c.slice(0,-1)+"}";!m&&!h.match(c)&&(h!=""&&(h+=","),h+=c,$("#"+b+"_json").val(h),$(j).insertBefore("#"+a.WidgetID+"_input_row"),k!=""&&($(k).attr("id",p),$("#"+p).attr("name",p),$("#"+p).hide(),$('<input class="upload" id="drrpp_framework_file_dummy_file" type="file" />').insertAfter("#"+p)))}
function S3MultiselectWidgetDeleteClick(a,b){var e=b.WidgetID,g=$(a).attr("row_id");$("#"+b.DummyName).val();var h=$("#"+e+"_json").val();$(a).parent().parent().remove();if(g!="New")h!=""&&(h+=","),h=h+"{'id':'"+g+"','deleted':True},";else{g="{";for(i=0;i<b.ColumnFields.length;i++)g=g+"'"+b.ColumnFields[i]+"':'"+$(a).attr(b.ColumnFields[i])+"',";g=g.slice(0,-1)+"}";h=h.replace(g,"")}h=h.replace(",,",",");h.slice(-1)==","&&(h=h.slice(0,-1));$("#"+e+"_json").val(h)}
(function(a,b){function e(b){return!a(b).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};a.ui.version||(a.extend(a.ui,{version:"1.8.11",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,
PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({_focus:a.fn.focus,focus:function(b,e){return typeof b==="number"?this.each(function(){var c=this;setTimeout(function(){a(c).focus();e&&e.call(c)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;b=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,
"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(g){if(g!==b)return this.css("zIndex",g);if(this.length){g=a(this[0]);for(var e;g.length&&g[0]!==document;){e=g.css("position");
if(e==="absolute"||e==="relative"||e==="fixed")if(e=parseInt(g.css("zIndex"),10),!isNaN(e)&&e!==0)return e;g=g.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.each(["Width","Height"],function(g,e){function c(c,b,g,e){a.each(f,function(){b-=parseFloat(a.curCSS(c,"padding"+this,!0))||0;g&&(b-=parseFloat(a.curCSS(c,
"border"+this+"Width",!0))||0);e&&(b-=parseFloat(a.curCSS(c,"margin"+this,!0))||0)});return b}var f=e==="Width"?["Left","Right"]:["Top","Bottom"],m=e.toLowerCase(),j={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+e]=function(f){if(f===b)return j["inner"+e].call(this);return this.each(function(){a(this).css(m,c(this,f)+"px")})};a.fn["outer"+e]=function(f,b){if(typeof f!=="number")return j["outer"+e].call(this,f);return this.each(function(){a(this).css(m,
c(this,f,!0,b)+"px")})}}),a.extend(a.expr[":"],{data:function(b,e,c){return!!a.data(b,c[3])},focusable:function(b){var h=b.nodeName.toLowerCase(),c=a.attr(b,"tabindex");if("area"===h){h=b.parentNode;c=h.name;if(!b.href||!c||h.nodeName.toLowerCase()!=="map")return!1;b=a("img[usemap=#"+c+"]")[0];return!!b&&e(b)}return(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"==h?b.href||!isNaN(c):!isNaN(c))&&e(b)},tabbable:function(b){var e=a.attr(b,"tabindex");return(isNaN(e)||e>=0)&&a(b).is(":focusable")}}),
a(function(){var b=document.body,e=b.appendChild(e=document.createElement("div"));a.extend(e.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});a.support.minHeight=e.offsetHeight===100;a.support.selectstart="onselectstart"in e;b.removeChild(e).style.display="none"}),a.extend(a.ui,{plugin:{add:function(b,e,c){b=a.ui[b].prototype;for(var f in c)b.plugins[f]=b.plugins[f]||[],b.plugins[f].push([e,c[f]])},call:function(a,b,c){if((b=a.plugins[b])&&a.element[0].parentNode)for(var f=0;f<b.length;f++)a.options[b[f][0]]&&
b[f][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(b,e){if(a(b).css("overflow")==="hidden")return!1;var c=e&&e==="left"?"scrollLeft":"scrollTop",f=!1;if(b[c]>0)return!0;b[c]=1;f=b[c]>0;b[c]=0;return f},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(b,e,c,f,m,j){return a.ui.isOverAxis(b,c,m)&&a.ui.isOverAxis(e,f,j)}}))})(jQuery);var s3_gis_pullNext;
function s3_gis_dropdown_select(a,b){s3_gis_pullNext=!1;var e=$("#gis_location_name").val(),g=$("#gis_location_lat").val(),h=$("#gis_location_lon").val(),c=$("#gis_location_addr_street").val(),f=$("#gis_location_postcode").val();e=e||g||h||c||f?!0:!1;if((g=$("#gis_location_L"+a).val())||b){var m;$.getJSONS3(a==s3_gis_maxlevel?s3_gis_url+"/search.json?filter=%3D&field=level&value=nullnone&parent="+g:s3_gis_url+"/search.json?filter=%3D&field=level&value=L"+(a+1)+"&parent="+g,function(c){if(c.length==
0)m=s3_gis_empty_set;else if(!b&&a!=s3_gis_maxlevel&&c.length==1)m=s3_gis_select_location,m+='<option selected="" value="'+c[0].id+'">'+c[0].name+"</option>",s3_gis_pullNext=!0;else{m=s3_gis_select_location;for(var f=0;f<c.length;f++)m+='<option value="'+c[f].id+'">'+c[f].name+"</option>"}a==s3_gis_maxlevel?$("#gis_location_").html(m):$("#gis_location_L"+(a+1)).html(m)},!1,!0);a==s3_gis_maxlevel?m!=s3_gis_empty_set&&($("#gis_location__label__row").removeClass("hidden").show(),$("#gis_location___row").removeClass("hidden").show(),
$("#gis_location_").removeClass("hidden").show()):($("#gis_location_L"+(a+1)+"_label__row").removeClass("hidden").show(),$("#gis_location_L"+(a+1)+"__row").removeClass("hidden").show(),s3_gis_hide_dropdown(a+2));s3_gis_pullNext?(g=$("#gis_location_L"+(a+1)).val(),e||$("#"+s3_gis_location_id).val(g),s3_gis_dropdown_select(a+1)):e||$("#"+s3_gis_location_id).val(g)}else a!=s3_gis_maxlevel&&(s3_gis_hide_dropdown(a+1),0==a&&!e&&$("#"+s3_gis_location_id).val(""))}
function s3_gis_hide_dropdown(a){for(l=a;l<=s3_gis_maxlevel;l+=1)$("#gis_location_L"+l+"_label__row").hide(),$("#gis_location_L"+l+"__row").hide(),$("#gis_location_L"+l).html(s3_gis_loading_locations);a<parseInt(s3_gis_maxlevel)+2&&($("#gis_location___row").hide(),$("#gis_location__label__row").hide(),$("#gis_location_details-btn").hide(),$("#gis_location_").html(s3_gis_loading_locations))}
function s3_gis_hide_details(){$("#gis_location_name_label").hide();$("#gis_location_name").hide();$("#gis_location_details_hide-btn").hide();$("#gis_location_addr_street_label").hide();$("#gis_location_addr_street_row").hide();$("#gis_location_postcode_label").hide();$("#gis_location_postcode_row").hide();$("#gis_location_map-btn").hide();$("#gis_location_advanced_div").hide()}
function s3_gis_show_details(){$("#gis_location_name_label").removeClass("hidden").show();$("#gis_location_name").removeClass("hidden").show();$("#gis_location_details_hide-btn").removeClass("hidden").show();$("#gis_location_addr_street_label").removeClass("hidden").show();$("#gis_location_addr_street_row").removeClass("hidden").show();$("#gis_location_postcode_label").removeClass("hidden").show();$("#gis_location_postcode_row").removeClass("hidden").show();$("#gis_location_map-btn").removeClass("hidden").show();
$("#gis_location_advanced_div").removeClass("hidden").show()}function s3_gis_update_details(a){$.getJSONS3(s3_gis_url+"/search.json?filter=%3D&field=id&value="+a,function(a){a.length!=0&&($("#gis_location_name").val(a[0].name),$("#gis_location_addr_street").val(a[0].addr_street),$("#gis_location_postcode").val(a[0].addr_postcode),$("#gis_location_lat").val(a[0].lat),$("#gis_location_lon").val(a[0].lon))},!1,!0)}
function s3_gis_save_location(a,b,e,g,h){var c=$("#gis_location_L5").val();if(void 0==c||""==c)if(c=$("#gis_location_L4").val(),void 0==c||""==c)if(c=$("#gis_location_L3").val(),void 0==c||""==c)if(c=$("#gis_location_L2").val(),void 0==c||""==c)if(c=$("#gis_location_L1").val(),void 0==c||""==c)c=$("#gis_location_L0").val();a=""==S3.gis.uuid?s3_gis_url+"/create.url?name="+a:s3_gis_url+"/update.url?uuid="+S3.gis.uuid+"&name="+a;""==b||""==e||(a=a+"&lat="+b+"&lon="+e);""!=g&&(a=a+"&addr_street="+g.replace(/\n/g,
"%0d"));""!=h&&(a=a+"&addr_postcode="+h);void 0==c||""==c||(a=a+"&parent="+c);$.ajax({async:!1,url:a,dataType:"json",success:function(a){""==S3.gis.uuid&&a.status=="success"&&(a=a.message.split("=")[1],$("#"+s3_gis_location_id).val(a))}})}function s3_gis_geolocate(a){var b=a.coords.latitude;a=a.coords.longitude;$("#gis_location_lat").val(b);$("#gis_location_lon").val(a)}var s3_gis_calcDone=!1,s3_gis_calcAnswer;
function s3_gis_convertDD(){var a=$("#DDMMSS_deg").val(),b=$("#DDMMSS_min").val(),e=$("#DDMMSS_sec").val(),g=!1;if(a=="")a=0;else if(isNaN(a)||a>180||a<-180)alert(s3_gis_degrees_validation_error),g=!0;if(b=="")b=0;else if(isNaN(b)||b>60||b<0)alert(s3_gis_minutes_validation_error),g=!0;if(e=="")e=0;else if(isNaN(e)||e>60||e<0)alert(s3_gis_seconds_validation_error),g=!0;g==!1&&(b=b*1+e/60,s3_gis_calcAnswer=a>0?a*1+b/60:a*1-b/60,$("#DDMMSS_dec").val(s3_gis_calcAnswer),s3_gis_calcDone=!0)}
function s3_gis_convertGps(){var a=0,b=0;a=$("#gps_deg").val();b=$("#gps_min").val();var e=!1;if(a=="")a=0;else if(isNaN(a)||a>180||a<-180)alert(s3_gis_degrees_validation_error),e=!0;if(b=="")b=0;else if(isNaN(b)||b>60||b<0)alert(s3_gis_minutes_validation_error),e=!0;e==!1&&(s3_gis_calcAnswer=a>0?a*1+b/60:a*1-b/60,$("#gps_dec").val(s3_gis_calcAnswer),s3_gis_calcDone=!0)}
function s3_gis_convertFillBack(a){if(s3_gis_calcDone==!0)return a==1?$("#gis_location_lat").attr("value",s3_gis_calcAnswer):$("#gis_location_lon").attr("value",s3_gis_calcAnswer),!0;else alert(s3_gis_no_calculations_error);return!1}
$(function(){if(typeof s3_gis_location_id!="undefined"){$("#gis_location_L0").change(function(){s3_gis_dropdown_select(0)});$("#gis_location_L1").change(function(){s3_gis_dropdown_select(1)});$("#gis_location_L2").change(function(){s3_gis_dropdown_select(2)});$("#gis_location_L3").change(function(){s3_gis_dropdown_select(3)});$("#gis_location_L4").change(function(){s3_gis_dropdown_select(4)});$("#gis_location_").change(function(){var a=$(this).val();$("#"+s3_gis_location_id).val(a);s3_gis_update_details(a);
$("#gis_location__label__row").hide();$("#gis_location___row").hide();$("#gis_location_add-btn").hide();s3_gis_show_details()});$("#gis_location_add-btn").click(function(a){if(""!=S3.gis.uuid)$("body").data("uuid",S3.gis.uuid),S3.gis.uuid="";var e=$("#gis_location_name").val(),g=$("#gis_location_addr_street").val(),h=$("#gis_location_postcode").val(),c=$("#gis_location_lat").val(),f=$("#gis_location_lat").val();$("body").data("name",e);$("body").data("addr_street",g);$("body").data("postcode",h);
$("body").data("lat",c);$("body").data("lon",f);$("#gis_location_name").val("");$("#gis_location_addr_street").val("");$("#gis_location_postcode").val("");$("#gis_location_lat").val("");$("#gis_location_lon").val("");$("#gis_location_add-btn").hide();$("#gis_location_cancel-btn").removeClass("hidden").show();$("#gis_location__label__row").hide();$("#gis_location___row").hide();navigator.geolocation&&$("#gis_location_geolocate-btn").removeClass("hidden").show();s3_gis_show_details();$("#gis_location_details_hide-btn").hide();
a.preventDefault()});$("#gis_location_cancel-btn").click(function(a){S3.gis.uuid=$("body").data("uuid");$("#gis_location_name").val($("body").data("name"));$("#gis_location_addr_street").val($("body").data("addr_street"));$("#gis_location_postcode").val($("body").data("postcode"));$("#gis_location_lat").val($("body").data("lat"));$("#gis_location_lon").val($("body").data("lon"));$("#gis_location_cancel-btn").hide();$("#gis_location__label__row").show();$("#gis_location___row").show();$("#gis_location_add-btn").show();
$("#gis_location_details_hide-btn").show();s3_gis_hide_details();a.preventDefault()});$("#gis_location_advanced_checkbox").change(function(a){$("#gis_location_advanced_checkbox").is(":checked")?($("#gis_location_lat_label").removeClass("hidden").show(),$("#gis_location_lat_row").removeClass("hidden").show(),$("#gis_location_lon_label").removeClass("hidden").show(),$("#gis_location_lon_row").removeClass("hidden").show()):($("#gis_location_lat_label").hide(),$("#gis_location_lat_row").hide(),$("#gis_location_lon_label").hide(),
$("#gis_location_lon_row").hide());a.preventDefault()});$("#gis_location_search-btn").click(function(a){$(this).hide();$("#gis_location_autocomplete_div").removeClass("hidden").show();$("#gis_location_add-btn").removeClass("hidden").show();$("#gis_location_L0_label__row").hide();$("#gis_location_L0__row").hide();$("#gis_location_L1_label__row").hide();$("#gis_location_L1__row").hide();$("#gis_location_L2_label__row").hide();$("#gis_location_L2__row").hide();$("#gis_location_L3_label__row").hide();
$("#gis_location_L3__row").hide();$("#gis_location_L4_label__row").hide();$("#gis_location_L4__row").hide();$("#gis_location_L5_label__row").hide();$("#gis_location_L5__row").hide();$("#gis_location___row").hide();$("#gis_location__label__row").hide();$("#gis_location_details-btn").hide();s3_gis_hide_details();a.preventDefault()});$("#gis_location_details-btn").click(function(a){$("#gis_location_add-btn").hide();$("#gis_location___row").hide();$("#gis_location__label__row").hide();$("#gis_location_details-btn").hide();
$("#gis_location_details_hide-btn").removeClass("hidden").show();s3_gis_show_details();a.preventDefault()});$("#gis_location_details_hide-btn").click(function(a){$("#gis_location_add-btn").removeClass("hidden").show();$("#gis_location___row").show();$("#gis_location__label__row").show();$("#gis_location_details-btn").removeClass("hidden").show();$("#gis_location_details_hide-btn").hide();s3_gis_hide_details();a.preventDefault()});$("#gis_location_geolocate-btn").click(function(a){navigator.geolocation.getCurrentPosition(s3_gis_geolocate);
a.preventDefault()});var a={val:$("#gis_location_autocomplete").val(),accept:!1};$("#gis_location_autocomplete").autocomplete({source:s3_gis_url+"/search.json?filter=~&field=name&exclude_field=level&exclude_value=XX",minLength:2,focus:function(a,e){$("#gis_location_autocomplete").val(e.item.name);return!1},select:function(b,e){$("#gis_location_autocomplete").val(e.item.name);$("#"+s3_gis_location_id).val(e.item.id);a.accept=!0;$("ul.ui-autocomplete").hide();$("#gis_location_autocomplete_div").hide();
$("#gis_location_search-btn").show();$("#gis_location_L0_label__row").show();$("#gis_location_L0__row").show();var g=e.item.path,h=e.item.id,c,f,m,j,k=[];switch(e.item.level){case "L0":$("#gis_location_L0").val(h);$("#"+s3_gis_location_id).val(h);s3_gis_dropdown_select(0);break;case "L1":if(g)if(g=g.split("/"),g.length==2&&g[1]==h)$("#gis_location_L0").val(g[0]);else{s3_gis_dropdown_select(0,!0);$("#gis_location_L1").val(h);$("#"+s3_gis_location_id).val(h);break}s3_gis_dropdown_select(0,!0);$("#gis_location_L1").val(h);
$("#"+s3_gis_location_id).val(h);s3_gis_dropdown_select(1);break;case "L2":if(g)if(g=g.split("/"),g.length==3&&g[2]==h)$("#gis_location_L0").val(g[0]),c=g[1];else if(g.length==2&&g[1]==h)void 0!=$("#gis_location_L0 option[value="+g[0]+"]")[0]?$("#gis_location_L0").val(g[0]):c=g[0];else{s3_gis_dropdown_select(1,!0);$("#gis_location_L2").val(h);$("#"+s3_gis_location_id).val(h);break}s3_gis_dropdown_select(0,!0);$("#gis_location_L1").val(c);s3_gis_dropdown_select(1,!0);$("#gis_location_L2").val(h);$("#"+
s3_gis_location_id).val(h);s3_gis_dropdown_select(2);break;case "L3":if(g)if(g=g.split("/"),g.length==4&&g[3]==h)$("#gis_location_L0").val(g[0]),c=g[1],f=g[2];else if(g.length==3&&g[2]==h)void 0!=$("#gis_location_L0 option[value="+g[0]+"]")[0]?($("#gis_location_L0").val(g[0]),k=[g[1]]):(c=g[0],f=g[1]);else if(g.length==2&&g[1]==h)void 0!=$("#gis_location_L0 option[value="+g[0]+"]")[0]?$("#gis_location_L0").val(g[0]):k=[g[0]];else{s3_gis_dropdown_select(2,!0);$("#gis_location_L3").val(h);$("#"+s3_gis_location_id).val(h);
break}s3_gis_dropdown_select(0,!0);k[0]&&void 0!=$("#gis_location_L1 option[value="+k[0]+"]")[0]&&(c=k[0]);$("#gis_location_L1").val(c);s3_gis_dropdown_select(1,!0);k[0]&&void 0!=$("#gis_location_L2 option[value="+k[0]+"]")[0]&&(f=k[0]);$("#gis_location_L2").val(f);s3_gis_dropdown_select(2,!0);$("#gis_location_L3").val(h);$("#"+s3_gis_location_id).val(h);s3_gis_dropdown_select(3);break;case "L4":if(g)if(g=g.split("/"),g.length==5&&g[4]==h)$("#gis_location_L0").val(g[0]),c=g[1],f=g[2],m=g[3];else if(g.length==
4&&g[3]==h)void 0!=$("#gis_location_L0 option[value="+g[0]+"]")[0]?($("#gis_location_L0").val(g[0]),k=[g[1],g[2]]):k=[g[0],g[1],g[2]];else if(g.length==3&&g[2]==h)void 0!=$("#gis_location_L0 option[value="+g[0]+"]")[0]?($("#gis_location_L0").val(g[0]),k=[g[1]]):k=[g[0],g[1]];else if(g.length==2&&g[1]==h)void 0!=$("#gis_location_L0 option[value="+g[0]+"]")[0]?$("#gis_location_L0").val(g[0]):k=[g[0]];else{s3_gis_dropdown_select(3,!0);$("#gis_location_L4").val(h);$("#"+s3_gis_location_id).val(h);break}s3_gis_dropdown_select(0,
!0);k[0]&&void 0!=$("#gis_location_L1 option[value="+k[0]+"]")[0]&&(c=k[0]);$("#gis_location_L1").val(c);s3_gis_dropdown_select(1,!0);k[0]&&(void 0!=$("#gis_location_L2 option[value="+k[0]+"]")[0]?f=k[0]:k[1]&&void 0!=$("#gis_location_L2 option[value="+k[1]+"]")[0]&&(f=k[1]));$("#gis_location_L2").val(f);s3_gis_dropdown_select(2,!0);k[0]&&(void 0!=$("#gis_location_L3 option[value="+k[0]+"]")[0]?m=k[0]:k[1]&&(void 0!=$("#gis_location_L3 option[value="+k[1]+"]")[0]?m=k[1]:k[2]&&void 0!=$("#gis_location_L3 option[value="+
k[2]+"]")[0]&&(m=k[2])));$("#gis_location_L3").val(m);s3_gis_dropdown_select(3,!0);$("#gis_location_L4").val(h);$("#"+s3_gis_location_id).val(h);s3_gis_dropdown_select(4);break;case "L5":break;default:if(g){g=g.split("/");if(g.length==6&&g[5]==h)$("#gis_location_L0").val(g[0]),c=g[1],f=g[2],m=g[4];else if(g.length==5&&g[4]==h)void 0!=$("#gis_location_L0 option[value="+g[0]+"]")[0]?($("#gis_location_L0").val(g[0]),k=[g[1],g[2],g[3]]):k=[g[0],g[1],g[2],g[3]];else if(g.length==4&&g[3]==h)void 0!=$("#gis_location_L0 option[value="+
g[0]+"]")[0]?($("#gis_location_L0").val(g[0]),k=[g[1],g[2]]):k=[g[0],g[1],g[2]];else if(g.length==3&&g[2]==h)void 0!=$("#gis_location_L0 option[value="+g[0]+"]")[0]?($("#gis_location_L0").val(g[0]),k=[g[1]]):k=[g[0],g[1]];else if(g.length==2&&g[1]==h)void 0!=$("#gis_location_L0 option[value="+g[0]+"]")[0]?$("#gis_location_L0").val(g[0]):k=[g[0]];else{s3_gis_dropdown_select(4,!0);$("#gis_location_").val(h);$("#"+s3_gis_location_id).val(h);break}s3_gis_dropdown_select(0,!0);k[0]&&void 0!=$("#gis_location_L1 option[value="+
k[0]+"]")[0]&&(c=k[0]);$("#gis_location_L1").val(c);s3_gis_dropdown_select(1,!0);k[0]&&(void 0!=$("#gis_location_L2 option[value="+k[0]+"]")[0]?f=k[0]:k[1]&&void 0!=$("#gis_location_L2 option[value="+k[1]+"]")[0]&&(f=k[1]));$("#gis_location_L2").val(f);s3_gis_dropdown_select(2,!0);k[0]&&(void 0!=$("#gis_location_L3 option[value="+k[0]+"]")[0]?m=k[0]:k[1]&&(void 0!=$("#gis_location_L3 option[value="+k[1]+"]")[0]?m=k[1]:k[2]&&void 0!=$("#gis_location_L3 option[value="+k[2]+"]")[0]&&(m=k[2])));$("#gis_location_L3").val(m);
s3_gis_dropdown_select(3,!0);k[0]&&(void 0!=$("#gis_location_L4 option[value="+k[0]+"]")[0]?j=k[0]:k[1]&&(void 0!=$("#gis_location_L4 option[value="+k[1]+"]")[0]?j=k[1]:k[2]&&(void 0!=$("#gis_location_L4 option[value="+k[2]+"]")[0]?j=k[2]:k[3]&&void 0!=$("#gis_location_L4 option[value="+k[4]+"]")[0]&&(j=k[3]))));$("#gis_location_L4").val(j);s3_gis_dropdown_select(4,!0);$("#gis_location_").val(h)}$("#"+s3_gis_location_id).val(h);s3_gis_update_details(h);$("#gis_location_details-btn").removeClass("hidden").show()}return!1}}).data("autocomplete")._renderItem=
function(a,e){return $("<li></li>").data("item.autocomplete",e).append("<a>"+e.name+"</a>").appendTo(a)};$("#gis_location_autocomplete").blur(function(){if(!$("#gis_location_autocomplete").val())$("#"+s3_gis_location_id).val(""),a.accept=!0;a.accept?a.val=$("#gis_location_autocomplete").val():$("#gis_location_autocomplete").val(a.val);a.accept=!1});$("form").submit(function(){S3ClearNavigateAwayConfirm();var a=$("#gis_location_name").val(),e=$("#gis_location_lat").val(),g=$("#gis_location_lon").val(),
h=$("#gis_location_addr_street").val(),c=$("#gis_location_postcode").val();s3_gis_save_location(a,e,g,h,c);return!0})}});
Ext.onReady(function(){var a,b=Ext.get("gis_location_converter-btn"),e=Ext.get("gis_location_map-btn");if(e)e.on("click",function(){mapWin.show(this)});if(b)b.on("click",function(){a||(a=new Ext.Window({applyTo:"gis-convert-win",layout:"fit",width:400,height:250,closeAction:"hide",plain:!0,items:new Ext.TabPanel({applyTo:"gis-convert-tabs",autoTabs:!0,activeTab:0,deferredRender:!1,border:!1}),buttons:[{text:s3_gis_fill_lat,disabled:!1,handler:function(){s3_gis_convertFillBack(1)&&(s3_gis_calcDone=
!1,$("#DDMMSS_dec").val(""),$("#gps_dec").val(""))}},{text:s3_gis_fill_lon,handler:function(){s3_gis_convertFillBack(2)&&(s3_gis_calcDone=!1,$("#DDMMSS_dec").val(""),$("#gps_dec").val(""))}}]}));a.show(this)})});
(function(a,b){function e(){this.debug=!1;this._curInst=null;this._keyEvent=!1;this._disabledInputs=[];this._inDialog=this._datepickerShowing=!1;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass=
"ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su",
"Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,
maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1};a.extend(this._defaults,this.regional[""]);this.dpDiv=a('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')}function g(c,f){a.extend(c,f);for(var e in f)if(f[e]==null||f[e]==b)c[e]=
f[e];return c}a.extend(a.ui,{datepicker:{version:"1.8.11"}});var h=(new Date).getTime();a.extend(e.prototype,{markerClassName:"hasDatepicker",log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){g(this._defaults,a||{});return this},_attachDatepicker:function(c,f){var b=null,e;for(e in this._defaults){var g=c.getAttribute("date:"+e);if(g){b=b||{};try{b[e]=eval(g)}catch(h){b[e]=g}}}e=c.nodeName.toLowerCase();g=e=="div"||
e=="span";if(!c.id)this.uuid+=1,c.id="dp"+this.uuid;var n=this._newInst(a(c),g);n.settings=a.extend({},f||{},b||{});e=="input"?this._connectDatepicker(c,n):g&&this._inlineDatepicker(c,n)},_newInst:function(c,f){return{id:c[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:c,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:f,dpDiv:!f?this.dpDiv:a('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')}},_connectDatepicker:function(c,
f){var b=a(c);f.append=a([]);f.trigger=a([]);b.hasClass(this.markerClassName)||(this._attachments(b,f),b.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(a,c,b){f.settings[c]=b}).bind("getData.datepicker",function(a,c){return this._get(f,c)}),this._autoSize(f),a.data(c,"datepicker",f))},_attachments:function(c,f){var b=this._get(f,"appendText"),e=this._get(f,"isRTL");f.append&&f.append.remove();if(b)f.append=
a('<span class="'+this._appendClass+'">'+b+"</span>"),c[e?"before":"after"](f.append);c.unbind("focus",this._showDatepicker);f.trigger&&f.trigger.remove();b=this._get(f,"showOn");(b=="focus"||b=="both")&&c.focus(this._showDatepicker);if(b=="button"||b=="both"){b=this._get(f,"buttonText");var g=this._get(f,"buttonImage");f.trigger=a(this._get(f,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:g,alt:b,title:b}):a('<button type="button"></button>').addClass(this._triggerClass).html(g==
""?b:a("<img/>").attr({src:g,alt:b,title:b})));c[e?"before":"after"](f.trigger);f.trigger.click(function(){a.datepicker._datepickerShowing&&a.datepicker._lastInput==c[0]?a.datepicker._hideDatepicker():a.datepicker._showDatepicker(c[0]);return!1})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var f=new Date(2009,11,20),b=this._get(a,"dateFormat");if(b.match(/[DM]/)){var e=function(a){for(var c=0,f=0,b=0;b<a.length;b++)if(a[b].length>c)c=a[b].length,f=b;return f};f.setMonth(e(this._get(a,
b.match(/MM/)?"monthNames":"monthNamesShort")));f.setDate(e(this._get(a,b.match(/DD/)?"dayNames":"dayNamesShort"))+20-f.getDay())}a.input.attr("size",this._formatDate(a,f).length)}},_inlineDatepicker:function(c,f){var b=a(c);b.hasClass(this.markerClassName)||(b.addClass(this.markerClassName).append(f.dpDiv).bind("setData.datepicker",function(a,c,b){f.settings[c]=b}).bind("getData.datepicker",function(a,c){return this._get(f,c)}),a.data(c,"datepicker",f),this._setDate(f,this._getDefaultDate(f),!0),
this._updateDatepicker(f),this._updateAlternate(f),f.dpDiv.show())},_dialogDatepicker:function(c,f,b,e,h){c=this._dialogInst;if(!c)this.uuid+=1,this._dialogInput=a('<input type="text" id="dp'+this.uuid+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>'),this._dialogInput.keydown(this._doKeyDown),a("body").append(this._dialogInput),c=this._dialogInst=this._newInst(this._dialogInput,!1),c.settings={},a.data(this._dialogInput[0],"datepicker",c);g(c.settings,e||{});f=f&&f.constructor==
Date?this._formatDate(c,f):f;this._dialogInput.val(f);this._pos=h?h.length?h:[h.pageX,h.pageY]:null;if(!this._pos)this._pos=[document.documentElement.clientWidth/2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/2-150+(document.documentElement.scrollTop||document.body.scrollTop)];this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");c.settings.onSelect=b;this._inDialog=!0;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);
a.blockUI&&a.blockUI(this.dpDiv);a.data(this._dialogInput[0],"datepicker",c);return this},_destroyDatepicker:function(c){var f=a(c),b=a.data(c,"datepicker");if(f.hasClass(this.markerClassName)){var e=c.nodeName.toLowerCase();a.removeData(c,"datepicker");e=="input"?(b.append.remove(),b.trigger.remove(),f.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(e=="div"||e=="span")&&f.removeClass(this.markerClassName).empty()}},
_enableDatepicker:function(c){var f=a(c),b=a.data(c,"datepicker");if(f.hasClass(this.markerClassName)){var e=c.nodeName.toLowerCase();e=="input"?(c.disabled=!1,b.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):(e=="div"||e=="span")&&f.children("."+this._inlineClass).children().removeClass("ui-state-disabled");this._disabledInputs=a.map(this._disabledInputs,function(a){return a==c?null:a})}},_disableDatepicker:function(c){var f=a(c),b=
a.data(c,"datepicker");if(f.hasClass(this.markerClassName)){var e=c.nodeName.toLowerCase();e=="input"?(c.disabled=!0,b.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):(e=="div"||e=="span")&&f.children("."+this._inlineClass).children().addClass("ui-state-disabled");this._disabledInputs=a.map(this._disabledInputs,function(a){return a==c?null:a});this._disabledInputs[this._disabledInputs.length]=c}},_isDisabledDatepicker:function(a){if(!a)return!1;
for(var f=0;f<this._disabledInputs.length;f++)if(this._disabledInputs[f]==a)return!0;return!1},_getInst:function(c){try{return a.data(c,"datepicker")}catch(f){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(c,f,e){var h=this._getInst(c);if(arguments.length==2&&typeof f=="string")return f=="defaults"?a.extend({},a.datepicker._defaults):h?f=="all"?a.extend({},h.settings):this._get(h,f):null;var k=f||{};typeof f=="string"&&(k={},k[f]=e);if(h){this._curInst==h&&this._hideDatepicker();
var p=this._getDateDatepicker(c,!0),n=this._getMinMaxDate(h,"min"),s=this._getMinMaxDate(h,"max");g(h.settings,k);if(n!==null&&k.dateFormat!==b&&k.minDate===b)h.settings.minDate=this._formatDate(h,n);if(s!==null&&k.dateFormat!==b&&k.maxDate===b)h.settings.maxDate=this._formatDate(h,s);this._attachments(a(c),h);this._autoSize(h);this._setDateDatepicker(c,p);this._updateDatepicker(h)}},_changeDatepicker:function(a,f,b){this._optionDatepicker(a,f,b)},_refreshDatepicker:function(a){(a=this._getInst(a))&&
this._updateDatepicker(a)},_setDateDatepicker:function(a,f){var b=this._getInst(a);b&&(this._setDate(b,f),this._updateDatepicker(b),this._updateAlternate(b))},_getDateDatepicker:function(a,f){var b=this._getInst(a);b&&!b.inline&&this._setDateFromField(b,f);return b?this._getDate(b):null},_doKeyDown:function(c){var f=a.datepicker._getInst(c.target),b=!0,e=f.dpDiv.is(".ui-datepicker-rtl");f._keyEvent=!0;if(a.datepicker._datepickerShowing)switch(c.keyCode){case 9:a.datepicker._hideDatepicker();b=!1;
break;case 13:return b=a("td."+a.datepicker._dayOverClass+":not(."+a.datepicker._currentClass+")",f.dpDiv),b[0]?a.datepicker._selectDay(c.target,f.selectedMonth,f.selectedYear,b[0]):a.datepicker._hideDatepicker(),!1;case 27:a.datepicker._hideDatepicker();break;case 33:a.datepicker._adjustDate(c.target,c.ctrlKey?-a.datepicker._get(f,"stepBigMonths"):-a.datepicker._get(f,"stepMonths"),"M");break;case 34:a.datepicker._adjustDate(c.target,c.ctrlKey?+a.datepicker._get(f,"stepBigMonths"):+a.datepicker._get(f,
"stepMonths"),"M");break;case 35:(c.ctrlKey||c.metaKey)&&a.datepicker._clearDate(c.target);b=c.ctrlKey||c.metaKey;break;case 36:(c.ctrlKey||c.metaKey)&&a.datepicker._gotoToday(c.target);b=c.ctrlKey||c.metaKey;break;case 37:if(c.ctrlKey||c.metaKey)a.datepicker._adjustDate(c.target,e?1:-1,"D");b=c.ctrlKey||c.metaKey;c.originalEvent.altKey&&a.datepicker._adjustDate(c.target,c.ctrlKey?-a.datepicker._get(f,"stepBigMonths"):-a.datepicker._get(f,"stepMonths"),"M");break;case 38:(c.ctrlKey||c.metaKey)&&a.datepicker._adjustDate(c.target,
-7,"D");b=c.ctrlKey||c.metaKey;break;case 39:if(c.ctrlKey||c.metaKey)a.datepicker._adjustDate(c.target,e?-1:1,"D");b=c.ctrlKey||c.metaKey;c.originalEvent.altKey&&a.datepicker._adjustDate(c.target,c.ctrlKey?+a.datepicker._get(f,"stepBigMonths"):+a.datepicker._get(f,"stepMonths"),"M");break;case 40:(c.ctrlKey||c.metaKey)&&a.datepicker._adjustDate(c.target,7,"D");b=c.ctrlKey||c.metaKey;break;default:b=!1}else c.keyCode==36&&c.ctrlKey?a.datepicker._showDatepicker(this):b=!1;b&&(c.preventDefault(),c.stopPropagation())},
_doKeyPress:function(c){var f=a.datepicker._getInst(c.target);if(a.datepicker._get(f,"constrainInput")){f=a.datepicker._possibleChars(a.datepicker._get(f,"dateFormat"));var e=String.fromCharCode(c.charCode==b?c.keyCode:c.charCode);return c.ctrlKey||c.metaKey||e<" "||!f||f.indexOf(e)>-1}},_doKeyUp:function(c){c=a.datepicker._getInst(c.target);if(c.input.val()!=c.lastVal)try{if(a.datepicker.parseDate(a.datepicker._get(c,"dateFormat"),c.input?c.input.val():null,a.datepicker._getFormatConfig(c)))a.datepicker._setDateFromField(c),
a.datepicker._updateAlternate(c),a.datepicker._updateDatepicker(c)}catch(f){a.datepicker.log(f)}return!0},_showDatepicker:function(c){c=c.target||c;c.nodeName.toLowerCase()!="input"&&(c=a("input",c.parentNode)[0]);if(!(a.datepicker._isDisabledDatepicker(c)||a.datepicker._lastInput==c)){var f=a.datepicker._getInst(c);a.datepicker._curInst&&a.datepicker._curInst!=f&&a.datepicker._curInst.dpDiv.stop(!0,!0);var b=a.datepicker._get(f,"beforeShow");g(f.settings,b?b.apply(c,[c,f]):{});f.lastVal=null;a.datepicker._lastInput=
c;a.datepicker._setDateFromField(f);if(a.datepicker._inDialog)c.value="";if(!a.datepicker._pos)a.datepicker._pos=a.datepicker._findPos(c),a.datepicker._pos[1]+=c.offsetHeight;var e=!1;a(c).parents().each(function(){e|=a(this).css("position")=="fixed";return!e});e&&a.browser.opera&&(a.datepicker._pos[0]-=document.documentElement.scrollLeft,a.datepicker._pos[1]-=document.documentElement.scrollTop);b={left:a.datepicker._pos[0],top:a.datepicker._pos[1]};a.datepicker._pos=null;f.dpDiv.empty();f.dpDiv.css({position:"absolute",
display:"block",top:"-1000px"});a.datepicker._updateDatepicker(f);b=a.datepicker._checkOffset(f,b,e);f.dpDiv.css({position:a.datepicker._inDialog&&a.blockUI?"static":e?"fixed":"absolute",display:"none",left:b.left+"px",top:b.top+"px"});if(!f.inline){b=a.datepicker._get(f,"showAnim");var h=a.datepicker._get(f,"duration"),p=function(){a.datepicker._datepickerShowing=!0;var c=f.dpDiv.find("iframe.ui-datepicker-cover");if(c.length){var b=a.datepicker._getBorders(f.dpDiv);c.css({left:-b[0],top:-b[1],width:f.dpDiv.outerWidth(),
height:f.dpDiv.outerHeight()})}};f.dpDiv.zIndex(a(c).zIndex()+1);if(a.effects&&a.effects[b])f.dpDiv.show(b,a.datepicker._get(f,"showOptions"),h,p);else f.dpDiv[b||"show"](b?h:null,p);(!b||!h)&&p();f.input.is(":visible")&&!f.input.is(":disabled")&&f.input.focus();a.datepicker._curInst=f}}},_updateDatepicker:function(c){var f=this,b=a.datepicker._getBorders(c.dpDiv);c.dpDiv.empty().append(this._generateHTML(c));var e=c.dpDiv.find("iframe.ui-datepicker-cover");e.length&&e.css({left:-b[0],top:-b[1],width:c.dpDiv.outerWidth(),
height:c.dpDiv.outerHeight()});c.dpDiv.find("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a").bind("mouseout",function(){a(this).removeClass("ui-state-hover");this.className.indexOf("ui-datepicker-prev")!=-1&&a(this).removeClass("ui-datepicker-prev-hover");this.className.indexOf("ui-datepicker-next")!=-1&&a(this).removeClass("ui-datepicker-next-hover")}).bind("mouseover",function(){if(!f._isDisabledDatepicker(c.inline?c.dpDiv.parent()[0]:c.input[0]))a(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),
a(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&a(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&a(this).addClass("ui-datepicker-next-hover")}).end().find("."+this._dayOverClass+" a").trigger("mouseover").end();b=this._getNumberOfMonths(c);e=b[1];e>1?c.dpDiv.addClass("ui-datepicker-multi-"+e).css("width",17*e+"em"):c.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");c.dpDiv[(b[0]!=
1||b[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi");c.dpDiv[(this._get(c,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");c==a.datepicker._curInst&&a.datepicker._datepickerShowing&&c.input&&c.input.is(":visible")&&!c.input.is(":disabled")&&c.input[0]!=document.activeElement&&c.input.focus();if(c.yearshtml){var g=c.yearshtml;setTimeout(function(){g===c.yearshtml&&c.dpDiv.find("select.ui-datepicker-year:first").replaceWith(c.yearshtml);g=c.yearshtml=null},0)}},_getBorders:function(a){var f=
function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(f(a.css("border-left-width"))),parseFloat(f(a.css("border-top-width")))]},_checkOffset:function(c,f,b){var e=c.dpDiv.outerWidth(),g=c.dpDiv.outerHeight(),h=c.input?c.input.outerWidth():0,n=c.input?c.input.outerHeight():0,s=document.documentElement.clientWidth+a(document).scrollLeft(),t=document.documentElement.clientHeight+a(document).scrollTop();f.left-=this._get(c,"isRTL")?e-h:0;f.left-=b&&f.left==c.input.offset().left?a(document).scrollLeft():
0;f.top-=b&&f.top==c.input.offset().top+n?a(document).scrollTop():0;f.left-=Math.min(f.left,f.left+e>s&&s>e?Math.abs(f.left+e-s):0);f.top-=Math.min(f.top,f.top+g>t&&t>g?Math.abs(g+n):0);return f},_findPos:function(c){for(var f=this._get(this._getInst(c),"isRTL");c&&(c.type=="hidden"||c.nodeType!=1||a.expr.filters.hidden(c));)c=c[f?"previousSibling":"nextSibling"];c=a(c).offset();return[c.left,c.top]},_hideDatepicker:function(c){var f=this._curInst;if(f&&!(c&&f!=a.data(c,"datepicker"))&&this._datepickerShowing){c=
this._get(f,"showAnim");var b=this._get(f,"duration"),e=function(){a.datepicker._tidyDialog(f);this._curInst=null};if(a.effects&&a.effects[c])f.dpDiv.hide(c,a.datepicker._get(f,"showOptions"),b,e);else f.dpDiv[c=="slideDown"?"slideUp":c=="fadeIn"?"fadeOut":"hide"](c?b:null,e);c||e();(c=this._get(f,"onClose"))&&c.apply(f.input?f.input[0]:null,[f.input?f.input.val():"",f]);this._datepickerShowing=!1;this._lastInput=null;this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),
a.blockUI&&(a.unblockUI(),a("body").append(this.dpDiv)));this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(c){a.datepicker._curInst&&(c=a(c.target),c[0].id!=a.datepicker._mainDivId&&c.parents("#"+a.datepicker._mainDivId).length==0&&!c.hasClass(a.datepicker.markerClassName)&&!c.hasClass(a.datepicker._triggerClass)&&a.datepicker._datepickerShowing&&(!a.datepicker._inDialog||!a.blockUI)&&a.datepicker._hideDatepicker())},
_adjustDate:function(c,f,b){c=a(c);var e=this._getInst(c[0]);this._isDisabledDatepicker(c[0])||(this._adjustInstDate(e,f+(b=="M"?this._get(e,"showCurrentAtPos"):0),b),this._updateDatepicker(e))},_gotoToday:function(c){c=a(c);var f=this._getInst(c[0]);if(this._get(f,"gotoCurrent")&&f.currentDay)f.selectedDay=f.currentDay,f.drawMonth=f.selectedMonth=f.currentMonth,f.drawYear=f.selectedYear=f.currentYear;else{var b=new Date;f.selectedDay=b.getDate();f.drawMonth=f.selectedMonth=b.getMonth();f.drawYear=
f.selectedYear=b.getFullYear()}this._notifyChange(f);this._adjustDate(c)},_selectMonthYear:function(c,f,b){c=a(c);var e=this._getInst(c[0]);e._selectingMonthYear=!1;e["selected"+(b=="M"?"Month":"Year")]=e["draw"+(b=="M"?"Month":"Year")]=parseInt(f.options[f.selectedIndex].value,10);this._notifyChange(e);this._adjustDate(c)},_clickMonthYear:function(c){var f=this._getInst(a(c)[0]);f.input&&f._selectingMonthYear&&setTimeout(function(){f.input.focus()},0);f._selectingMonthYear=!f._selectingMonthYear},
_selectDay:function(c,f,b,e){var g=a(c);if(!a(e).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(g[0]))g=this._getInst(g[0]),g.selectedDay=g.currentDay=a("a",e).html(),g.selectedMonth=g.currentMonth=f,g.selectedYear=g.currentYear=b,this._selectDate(c,this._formatDate(g,g.currentDay,g.currentMonth,g.currentYear))},_clearDate:function(c){c=a(c);this._getInst(c[0]);this._selectDate(c,"")},_selectDate:function(c,f){var b=this._getInst(a(c)[0]);f=f!=null?f:this._formatDate(b);b.input&&b.input.val(f);
this._updateAlternate(b);var e=this._get(b,"onSelect");e?e.apply(b.input?b.input[0]:null,[f,b]):b.input&&b.input.trigger("change");b.inline?this._updateDatepicker(b):(this._hideDatepicker(),this._lastInput=b.input[0],typeof b.input[0]!="object"&&b.input.focus(),this._lastInput=null)},_updateAlternate:function(c){var f=this._get(c,"altField");if(f){var b=this._get(c,"altFormat")||this._get(c,"dateFormat"),e=this._getDate(c),g=this.formatDate(b,e,this._getFormatConfig(c));a(f).each(function(){a(this).val(g)})}},
noWeekends:function(a){a=a.getDay();return[a>0&&a<6,""]},iso8601Week:function(a){a=new Date(a.getTime());a.setDate(a.getDate()+4-(a.getDay()||7));var f=a.getTime();a.setMonth(0);a.setDate(1);return Math.floor(Math.round((f-a)/864E5)/7)+1},parseDate:function(a,f,b){if(a==null||f==null)throw"Invalid arguments";f=typeof f=="object"?f.toString():f+"";if(f=="")return null;var e=(b?b.shortYearCutoff:null)||this._defaults.shortYearCutoff;e=typeof e!="string"?e:(new Date).getFullYear()%100+parseInt(e,10);
for(var g=(b?b.dayNamesShort:null)||this._defaults.dayNamesShort,h=(b?b.dayNames:null)||this._defaults.dayNames,n=(b?b.monthNamesShort:null)||this._defaults.monthNamesShort,s=(b?b.monthNames:null)||this._defaults.monthNames,t=b=-1,y=-1,v=-1,u=!1,r=function(b){(b=M+1<a.length&&a.charAt(M+1)==b)&&M++;return b},A=function(a){var c=r(a);a=f.substring(H).match(RegExp("^\\d{1,"+(a=="@"?14:a=="!"?20:a=="y"&&c?4:a=="o"?3:2)+"}"));if(!a)throw"Missing number at position "+H;H+=a[0].length;return parseInt(a[0],
10)},x=function(a,c,b){a=r(a)?b:c;for(c=0;c<a.length;c++)if(f.substr(H,a[c].length).toLowerCase()==a[c].toLowerCase())return H+=a[c].length,c+1;throw"Unknown name at position "+H;},w=function(){if(f.charAt(H)!=a.charAt(M))throw"Unexpected literal at position "+H;H++},H=0,M=0;M<a.length;M++)if(u)a.charAt(M)=="'"&&!r("'")?u=!1:w();else switch(a.charAt(M)){case "d":y=A("d");break;case "D":x("D",g,h);break;case "o":v=A("o");break;case "m":t=A("m");break;case "M":t=x("M",n,s);break;case "y":b=A("y");break;
case "@":var z=new Date(A("@"));b=z.getFullYear();t=z.getMonth()+1;y=z.getDate();break;case "!":z=new Date((A("!")-this._ticksTo1970)/1E4);b=z.getFullYear();t=z.getMonth()+1;y=z.getDate();break;case "'":r("'")?w():u=!0;break;default:w()}b==-1?b=(new Date).getFullYear():b<100&&(b+=(new Date).getFullYear()-(new Date).getFullYear()%100+(b<=e?0:-100));if(v>-1){t=1;y=v;do{e=this._getDaysInMonth(b,t-1);if(y<=e)break;t++;y-=e}while(1)}z=this._daylightSavingAdjust(new Date(b,t-1,y));if(z.getFullYear()!=b||
z.getMonth()+1!=t||z.getDate()!=y)throw"Invalid date";return z},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*864E9,formatDate:function(a,b,e){if(!b)return"";var g=(e?e.dayNamesShort:null)||this._defaults.dayNamesShort,h=(e?e.dayNames:null)||this._defaults.dayNames,
p=(e?e.monthNamesShort:null)||this._defaults.monthNamesShort;e=(e?e.monthNames:null)||this._defaults.monthNames;var n=function(b){(b=u+1<a.length&&a.charAt(u+1)==b)&&u++;return b},s=function(a,c,b){c=""+c;if(n(a))for(;c.length<b;)c="0"+c;return c},t=function(a,c,b,f){return n(a)?f[c]:b[c]},y="",v=!1;if(b)for(var u=0;u<a.length;u++)if(v)a.charAt(u)=="'"&&!n("'")?v=!1:y+=a.charAt(u);else switch(a.charAt(u)){case "d":y+=s("d",b.getDate(),2);break;case "D":y+=t("D",b.getDay(),g,h);break;case "o":y+=s("o",
(b.getTime()-(new Date(b.getFullYear(),0,0)).getTime())/864E5,3);break;case "m":y+=s("m",b.getMonth()+1,2);break;case "M":y+=t("M",b.getMonth(),p,e);break;case "y":y+=n("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case "@":y+=b.getTime();break;case "!":y+=b.getTime()*1E4+this._ticksTo1970;break;case "'":n("'")?y+="'":v=!0;break;default:y+=a.charAt(u)}return y},_possibleChars:function(a){for(var b="",e=!1,g=function(b){(b=h+1<a.length&&a.charAt(h+1)==b)&&h++;return b},h=0;h<
a.length;h++)if(e)a.charAt(h)=="'"&&!g("'")?e=!1:b+=a.charAt(h);else switch(a.charAt(h)){case "d":case "m":case "y":case "@":b+="0123456789";break;case "D":case "M":return null;case "'":g("'")?b+="'":e=!0;break;default:b+=a.charAt(h)}return b},_get:function(a,f){return a.settings[f]!==b?a.settings[f]:this._defaults[f]},_setDateFromField:function(a,b){if(a.input.val()!=a.lastVal){var e=this._get(a,"dateFormat"),g=a.lastVal=a.input?a.input.val():null,h,p;h=p=this._getDefaultDate(a);var n=this._getFormatConfig(a);
try{h=this.parseDate(e,g,n)||p}catch(s){this.log(s),g=b?"":g}a.selectedDay=h.getDate();a.drawMonth=a.selectedMonth=h.getMonth();a.drawYear=a.selectedYear=h.getFullYear();a.currentDay=g?h.getDate():0;a.currentMonth=g?h.getMonth():0;a.currentYear=g?h.getFullYear():0;this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(c,b,e){var g=function(a){var c=new Date;c.setDate(c.getDate()+a);return c};
if(b=(b=b==null||b===""?e:typeof b=="string"?function(b){try{return a.datepicker.parseDate(a.datepicker._get(c,"dateFormat"),b,a.datepicker._getFormatConfig(c))}catch(f){}var e=(b.toLowerCase().match(/^c/)?a.datepicker._getDate(c):null)||new Date,g=e.getFullYear(),h=e.getMonth();e=e.getDate();for(var m=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,j=m.exec(b);j;){switch(j[2]||"d"){case "d":case "D":e+=parseInt(j[1],10);break;case "w":case "W":e+=parseInt(j[1],10)*7;break;case "m":case "M":h+=parseInt(j[1],
10);e=Math.min(e,a.datepicker._getDaysInMonth(g,h));break;case "y":case "Y":g+=parseInt(j[1],10),e=Math.min(e,a.datepicker._getDaysInMonth(g,h))}j=m.exec(b)}return new Date(g,h,e)}(b):typeof b=="number"?isNaN(b)?e:g(b):new Date(b.getTime()))&&b.toString()=="Invalid Date"?e:b)b.setHours(0),b.setMinutes(0),b.setSeconds(0),b.setMilliseconds(0);return this._daylightSavingAdjust(b)},_daylightSavingAdjust:function(a){if(!a)return null;a.setHours(a.getHours()>12?a.getHours()+2:0);return a},_setDate:function(a,
b,e){var g=!b,h=a.selectedMonth,p=a.selectedYear;b=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=b.getDate();a.drawMonth=a.selectedMonth=a.currentMonth=b.getMonth();a.drawYear=a.selectedYear=a.currentYear=b.getFullYear();(h!=a.selectedMonth||p!=a.selectedYear)&&!e&&this._notifyChange(a);this._adjustInstDate(a);a.input&&a.input.val(g?"":this._formatDate(a))},_getDate:function(a){return!a.currentYear||a.input&&a.input.val()==""?null:this._daylightSavingAdjust(new Date(a.currentYear,
a.currentMonth,a.currentDay))},_generateHTML:function(c){var b=new Date;b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate()));var e=this._get(c,"isRTL"),g=this._get(c,"showButtonPanel"),k=this._get(c,"hideIfNoPrevNext"),p=this._get(c,"navigationAsDateFormat"),n=this._getNumberOfMonths(c),s=this._get(c,"showCurrentAtPos"),t=this._get(c,"stepMonths"),y=n[0]!=1||n[1]!=1,v=this._daylightSavingAdjust(!c.currentDay?new Date(9999,9,9):new Date(c.currentYear,c.currentMonth,c.currentDay)),
u=this._getMinMaxDate(c,"min"),r=this._getMinMaxDate(c,"max");s=c.drawMonth-s;var A=c.drawYear;s<0&&(s+=12,A--);if(r){var x=this._daylightSavingAdjust(new Date(r.getFullYear(),r.getMonth()-n[0]*n[1]+1,r.getDate()));for(x=u&&x<u?u:x;this._daylightSavingAdjust(new Date(A,s,1))>x;)s--,s<0&&(s=11,A--)}c.drawMonth=s;c.drawYear=A;x=this._get(c,"prevText");x=!p?x:this.formatDate(x,this._daylightSavingAdjust(new Date(A,s-t,1)),this._getFormatConfig(c));x=this._canAdjustMonth(c,-1,A,s)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+
h+".datepicker._adjustDate('#"+c.id+"', -"+t+", 'M');\" title=\""+x+'"><span class="ui-icon ui-icon-circle-triangle-'+(e?"e":"w")+'">'+x+"</span></a>":k?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+x+'"><span class="ui-icon ui-icon-circle-triangle-'+(e?"e":"w")+'">'+x+"</span></a>";var w=this._get(c,"nextText");w=!p?w:this.formatDate(w,this._daylightSavingAdjust(new Date(A,s+t,1)),this._getFormatConfig(c));k=this._canAdjustMonth(c,1,A,s)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+
h+".datepicker._adjustDate('#"+c.id+"', +"+t+", 'M');\" title=\""+w+'"><span class="ui-icon ui-icon-circle-triangle-'+(e?"w":"e")+'">'+w+"</span></a>":k?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+w+'"><span class="ui-icon ui-icon-circle-triangle-'+(e?"w":"e")+'">'+w+"</span></a>";t=this._get(c,"currentText");w=this._get(c,"gotoCurrent")&&c.currentDay?v:b;t=!p?t:this.formatDate(t,w,this._getFormatConfig(c));p=!c.inline?'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+
h+'.datepicker._hideDatepicker();">'+this._get(c,"closeText")+"</button>":"";g=g?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(e?p:"")+(this._isInRange(c,w)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+h+".datepicker._gotoToday('#"+c.id+"');\">"+t+"</button>":"")+(e?"":p)+"</div>":"";p=parseInt(this._get(c,"firstDay"),10);p=isNaN(p)?0:p;t=this._get(c,"showWeek");w=this._get(c,"dayNames");this._get(c,"dayNamesShort");
var H=this._get(c,"dayNamesMin"),M=this._get(c,"monthNames"),z=this._get(c,"monthNamesShort"),N=this._get(c,"beforeShowDay"),Q=this._get(c,"showOtherMonths"),W=this._get(c,"selectOtherMonths");this._get(c,"calculateWeek");for(var Z=this._getDefaultDate(c),U="",ba=0;ba<n[0];ba++){for(var F="",I=0;I<n[1];I++){var G=this._daylightSavingAdjust(new Date(A,s,c.selectedDay)),B=" ui-corner-all",K="";if(y){K+='<div class="ui-datepicker-group';if(n[1]>1)switch(I){case 0:K+=" ui-datepicker-group-first";B=" ui-corner-"+
(e?"right":"left");break;case n[1]-1:K+=" ui-datepicker-group-last";B=" ui-corner-"+(e?"left":"right");break;default:K+=" ui-datepicker-group-middle",B=""}K+='">'}K+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+B+'">'+(/all|left/.test(B)&&ba==0?e?k:x:"")+(/all|right/.test(B)&&ba==0?e?x:k:"")+this._generateMonthYearHeader(c,s,A,u,r,ba>0||I>0,M,z)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var T=t?'<th class="ui-datepicker-week-col">'+this._get(c,"weekHeader")+
"</th>":"";for(B=0;B<7;B++){var D=(B+p)%7;T+="<th"+((B+p+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+w[D]+'">'+H[D]+"</span></th>"}K+=T+"</tr></thead><tbody>";T=this._getDaysInMonth(A,s);if(A==c.selectedYear&&s==c.selectedMonth)c.selectedDay=Math.min(c.selectedDay,T);B=(this._getFirstDayOfMonth(A,s)-p+7)%7;T=y?6:Math.ceil((B+T)/7);D=this._daylightSavingAdjust(new Date(A,s,1-B));for(var O=0;O<T;O++){K+="<tr>";var Y=!t?"":'<td class="ui-datepicker-week-col">'+this._get(c,"calculateWeek")(D)+
"</td>";for(B=0;B<7;B++){var S=N?N.apply(c.input?c.input[0]:null,[D]):[!0,""],J=D.getMonth()!=s,L=J&&!W||!S[0]||u&&D<u||r&&D>r;Y+='<td class="'+((B+p+6)%7>=5?" ui-datepicker-week-end":"")+(J?" ui-datepicker-other-month":"")+(D.getTime()==G.getTime()&&s==c.selectedMonth&&c._keyEvent||Z.getTime()==D.getTime()&&Z.getTime()==G.getTime()?" "+this._dayOverClass:"")+(L?" "+this._unselectableClass+" ui-state-disabled":"")+(J&&!Q?"":" "+S[1]+(D.getTime()==v.getTime()?" "+this._currentClass:"")+(D.getTime()==
b.getTime()?" ui-datepicker-today":""))+'"'+((!J||Q)&&S[2]?' title="'+S[2]+'"':"")+(L?"":' onclick="DP_jQuery_'+h+".datepicker._selectDay('#"+c.id+"',"+D.getMonth()+","+D.getFullYear()+', this);return false;"')+">"+(J&&!Q?"&#xa0;":L?'<span class="ui-state-default">'+D.getDate()+"</span>":'<a class="ui-state-default'+(D.getTime()==b.getTime()?" ui-state-highlight":"")+(D.getTime()==v.getTime()?" ui-state-active":"")+(J?" ui-priority-secondary":"")+'" href="#">'+D.getDate()+"</a>")+"</td>";D.setDate(D.getDate()+
1);D=this._daylightSavingAdjust(D)}K+=Y+"</tr>"}s++;s>11&&(s=0,A++);K+="</tbody></table>"+(y?"</div>"+(n[0]>0&&I==n[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"");F+=K}U+=F}U+=g+(a.browser.msie&&parseInt(a.browser.version,10)<7&&!c.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':"");c._keyEvent=!1;return U},_generateMonthYearHeader:function(c,b,e,g,k,p,n,s){var t=this._get(c,"changeMonth"),y=this._get(c,"changeYear"),v=this._get(c,"showMonthAfterYear"),
u='<div class="ui-datepicker-title">',r="";if(p||!t)r+='<span class="ui-datepicker-month">'+n[b]+"</span>";else{n=g&&g.getFullYear()==e;var A=k&&k.getFullYear()==e;r+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+h+".datepicker._selectMonthYear('#"+c.id+"', this, 'M');\" onclick=\"DP_jQuery_"+h+".datepicker._clickMonthYear('#"+c.id+"');\">";for(var x=0;x<12;x++)if((!n||x>=g.getMonth())&&(!A||x<=k.getMonth()))r+='<option value="'+x+'"'+(x==b?' selected="selected"':"")+">"+s[x]+"</option>";
r+="</select>"}v||(u+=r+(p||!t||!y?"&#xa0;":""));c.yearshtml="";if(p||!y)u+='<span class="ui-datepicker-year">'+e+"</span>";else{s=this._get(c,"yearRange").split(":");var w=(new Date).getFullYear();n=function(a){a=a.match(/c[+-].*/)?e+parseInt(a.substring(1),10):a.match(/[+-].*/)?w+parseInt(a,10):parseInt(a,10);return isNaN(a)?w:a};b=n(s[0]);s=Math.max(b,n(s[1]||""));b=g?Math.max(b,g.getFullYear()):b;s=k?Math.min(s,k.getFullYear()):s;for(c.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+
h+".datepicker._selectMonthYear('#"+c.id+"', this, 'Y');\" onclick=\"DP_jQuery_"+h+".datepicker._clickMonthYear('#"+c.id+"');\">";b<=s;b++)c.yearshtml+='<option value="'+b+'"'+(b==e?' selected="selected"':"")+">"+b+"</option>";c.yearshtml+="</select>";a.browser.mozilla?u+='<select class="ui-datepicker-year"><option value="'+e+'" selected="selected">'+e+"</option></select>":(u+=c.yearshtml,c.yearshtml=null)}u+=this._get(c,"yearSuffix");v&&(u+=(p||!t||!y?"&#xa0;":"")+r);u+="</div>";return u},_adjustInstDate:function(a,
b,e){var g=a.drawYear+(e=="Y"?b:0),h=a.drawMonth+(e=="M"?b:0);b=Math.min(a.selectedDay,this._getDaysInMonth(g,h))+(e=="D"?b:0);g=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(g,h,b)));a.selectedDay=g.getDate();a.drawMonth=a.selectedMonth=g.getMonth();a.drawYear=a.selectedYear=g.getFullYear();(e=="M"||e=="Y")&&this._notifyChange(a)},_restrictMinMax:function(a,b){var e=this._getMinMaxDate(a,"min"),g=this._getMinMaxDate(a,"max");e=e&&b<e?e:b;return g&&e>g?g:e},_notifyChange:function(a){var b=
this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){a=this._get(a,"numberOfMonths");return a==null?[1,1]:typeof a=="number"?[1,a]:a},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,e,
g){var h=this._getNumberOfMonths(a);e=this._daylightSavingAdjust(new Date(e,g+(b<0?b:h[0]*h[1]),1));b<0&&e.setDate(this._getDaysInMonth(e.getFullYear(),e.getMonth()));return this._isInRange(a,e)},_isInRange:function(a,b){var e=this._getMinMaxDate(a,"min"),g=this._getMinMaxDate(a,"max");return(!e||b.getTime()>=e.getTime())&&(!g||b.getTime()<=g.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");b=typeof b!="string"?b:(new Date).getFullYear()%100+parseInt(b,10);return{shortYearCutoff:b,
dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,e,g){if(!b)a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear;b=b?typeof b=="object"?b:this._daylightSavingAdjust(new Date(g,e,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),b,this._getFormatConfig(a))}});
a.fn.datepicker=function(c){if(!this.length)return this;if(!a.datepicker.initialized)a(document).mousedown(a.datepicker._checkExternalClick).find("body").append(a.datepicker.dpDiv),a.datepicker.initialized=!0;var b=Array.prototype.slice.call(arguments,1);if(typeof c=="string"&&(c=="isDisabled"||c=="getDate"||c=="widget"))return a.datepicker["_"+c+"Datepicker"].apply(a.datepicker,[this[0]].concat(b));if(c=="option"&&arguments.length==2&&typeof arguments[1]=="string")return a.datepicker["_"+c+"Datepicker"].apply(a.datepicker,
[this[0]].concat(b));return this.each(function(){typeof c=="string"?a.datepicker["_"+c+"Datepicker"].apply(a.datepicker,[this].concat(b)):a.datepicker._attachDatepicker(this,c)})};a.datepicker=new e;a.datepicker.initialized=!1;a.datepicker.uuid=(new Date).getTime();a.datepicker.version="1.8.11";window["DP_jQuery_"+h]=a})(jQuery);
(function(a,b){if(a.cleanData){var e=a.cleanData;a.cleanData=function(b){for(var c=0,f;(f=b[c])!=null;c++)a(f).triggerHandler("remove");e(b)}}else{var g=a.fn.remove;a.fn.remove=function(b,c){return this.each(function(){c||(!b||a.filter(b,[this]).length)&&a("*",this).add([this]).each(function(){a(this).triggerHandler("remove")});return g.call(a(this),b,c)})}}a.widget=function(b,c,e){var g=b.split(".")[0],j;b=b.split(".")[1];j=g+"-"+b;if(!e)e=c,c=a.Widget;a.expr[":"][j]=function(c){return!!a.data(c,
b)};a[g]=a[g]||{};a[g][b]=function(a,c){arguments.length&&this._createWidget(a,c)};c=new c;c.options=a.extend(!0,{},c.options);a[g][b].prototype=a.extend(!0,c,{namespace:g,widgetName:b,widgetEventPrefix:a[g][b].prototype.widgetEventPrefix||b,widgetBaseClass:j},e);a.widget.bridge(b,a[g][b])};a.widget.bridge=function(e,c){a.fn[e]=function(f){var g=typeof f==="string",j=Array.prototype.slice.call(arguments,1),k=this;f=!g&&j.length?a.extend.apply(null,[!0,f].concat(j)):f;if(g&&f.charAt(0)==="_")return k;
g?this.each(function(){var c=a.data(this,e),g=c&&a.isFunction(c[f])?c[f].apply(c,j):c;if(g!==c&&g!==b)return k=g,!1}):this.each(function(){var b=a.data(this,e);b?b.option(f||{})._init():a.data(this,e,new c(f,this))});return k}};a.Widget=function(a,c){arguments.length&&this._createWidget(a,c)};a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(b,c){a.data(c,this.widgetName,this);this.element=a(c);this.options=a.extend(!0,{},this.options,this._getCreateOptions(),
b);var e=this;this.element.bind("remove."+this.widgetName,function(){e.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},
option:function(e,c){var f=e;if(arguments.length===0)return a.extend({},this.options);if(typeof e==="string"){if(c===b)return this.options[e];f={};f[e]=c}this._setOptions(f);return this},_setOptions:function(b){var c=this;a.each(b,function(a,b){c._setOption(a,b)});return this},_setOption:function(a,c){this.options[a]=c;a==="disabled"&&this.widget()[c?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",c);return this},enable:function(){return this._setOption("disabled",
!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(b,c,e){var g=this.options[b];c=a.Event(c);c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase();e=e||{};if(c.originalEvent){b=a.event.props.length;for(var j;b;)j=a.event.props[--b],c[j]=c.originalEvent[j]}this.element.trigger(c,e);return!(a.isFunction(g)&&g.call(this.element[0],c,e)===!1||c.isDefaultPrevented())}}})(jQuery);
function popup(a){newwindow=window.open(a,"name","height=400,width=600");window.focus&&newwindow.focus();return!1}function collapse(a){jQuery("#"+a).slideToggle()}function fade(a,b){b>0?jQuery("#"+a).hide().fadeIn("slow"):jQuery("#"+a).show().fadeOut("slow")}
function ajax(a,b,e){query="";if(typeof b=="string")(d=jQuery(b).serialize())&&(query=d);else{pcs=[];for(i=0;i<b.length;i++)(q=jQuery("#"+b[i]).serialize())&&pcs.push(q);pcs.length>0&&(query=pcs.join("&"))}jQuery.ajax({type:"POST",url:a,data:query,success:function(a){e&&(e==":eval"?eval(a):jQuery("#"+e).html(a))}})}String.prototype.reverse=function(){return this.split("").reverse().join("")};
function web2py_ajax_init(){jQuery(".hidden").hide();jQuery(".error").hide().slideDown("slow");jQuery(".flash").click(function(){jQuery(this).fadeOut("slow");return!1});jQuery("input.string").attr("size",50);jQuery("textarea.text").attr("cols",50).attr("rows",10);jQuery("input.integer").keyup(function(){this.value=this.value.reverse().replace(/[^0-9\-]|\-(?=.)/g,"").reverse()});jQuery("input.double").keyup(function(){this.value=this.value.reverse().replace(/[^0-9\-\.]|[\-](?=.)|[\.](?=[0-9]*[\.])/g,
"").reverse()})}jQuery(document).ready(function(){jQuery(".flash").hide().slideDown("slow");jQuery(".flash").html()!=""&&jQuery(".flash").slideDown("slow");web2py_ajax_init()});function web2py_trap_form(a,b){jQuery("#"+b+" form").each(function(){var e=jQuery(this);e.hasClass("no_trap")||e.submit(function(){jQuery(".flash").hide().html("");web2py_ajax_page("post",a,e.serialize(),b);return!1})})}
function web2py_ajax_page(a,b,e,g){jQuery.ajax({type:a,url:b,data:e,beforeSend:function(a){a.setRequestHeader("web2py-component-location",document.location);a.setRequestHeader("web2py-component-element",g)},complete:function(a){(command=a.getResponseHeader("web2py-component-command"))&&eval(command);(flash=a.getResponseHeader("web2py-component-flash"))&&jQuery(".flash").html(flash).slideDown()},success:function(a){jQuery("#"+g).html(a);web2py_trap_form(b,g);web2py_ajax_init()}})}
function web2py_component(a,b){jQuery(document).ready(function(){web2py_ajax_page("get",a,null,b)})}(function(a){a.fn.elementExists=function(){return jQuery(this).length>0}})(jQuery);(function(a){a.fn.formElementType=function(){return jQuery(this).elementExists()?jQuery(this).attr("type"):""}})(jQuery);(function(a){a.fn.isTextBox=function(){return jQuery(this).formElementType()==="text"}})(jQuery);(function(a){a.fn.isTextArea=function(){return jQuery(this).formElementType()==="textarea"}})(jQuery);
(function(a){a.fn.isPassword=function(){return jQuery(this).formElementType()==="password"}})(jQuery);(function(a){a.fn.isHiddenInput=function(){return jQuery(this).formElementType()==="hidden"}})(jQuery);(function(a){a.fn.isCheckBox=function(){return jQuery(this).formElementType()==="checkbox"}})(jQuery);(function(a){a.fn.isRadioBox=function(){return jQuery(this).formElementType()==="radio"}})(jQuery);(function(a){a.fn.isButton=function(){return jQuery(this).formElementType()==="button"}})(jQuery);
(function(a){a.fn.isSubmitButton=function(){return jQuery(this).formElementType()==="submit"}})(jQuery);(function(a){a.fn.isResetButton=function(){return jQuery(this).formElementType()==="reset"}})(jQuery);(function(a){a.fn.isSelectBox=function(){var a=jQuery(this).formElementType(),e=this.attr("size");return a!=="select-one"?!1:typeof e==="undefined"?!1:parseInt(e)>1}})(jQuery);(function(a){a.fn.isMultiSelectBox=function(){return jQuery(this).formElementType()==="select-multiple"}})(jQuery);
(function(a){a.fn.isDropDownList=function(){var a=jQuery(this).formElementType(),e=this.attr("size");return a!=="select-one"?!1:typeof e==="undefined"?!0:parseInt(e)<=1}})(jQuery);(function(a){a.fn.isChecked=function(){return jQuery(this).is(":checked")}})(jQuery);
(function(a){a.fn.isSelected=function(){var a=jQuery(this);if(arguments.length===0)return!1;var e=!1,g=arguments[0],h=arguments;if(a.isRadioBox()){if(a=jQuery("input[type='radio'][name='"+a.attr("name")+"'][checked]"),a.length===1)return g===a.val()}else if(a.isSelectBox()||a.isDropDownList()){if(a=jQuery("#"+a.attr("id")+" option:selected"),a.length===1)return g===a.val()}else a.isMultiSelectBox()&&(a=jQuery("#"+a.attr("id")+" option:selected"),jQuery.each(a,function(){var a=jQuery(this);e=!1;for(var b=
0;b<h.length;b++)if(h[b]===a.val()){e=!0;break}}));return e}})(jQuery);
(function(a){a.fn.selectedItem=function(a){var e=jQuery(this);if(typeof a==="undefined"||isNaN(a))a=0;if(e.isRadioBox()){var g=jQuery("input[type='radio'][name='"+e.attr("name")+"'][checked]");a>g.length-1?a=g.length-1:a<0&&(a=0);if(g.length>0)return jQuery(g[a])}else if(e.isSelectBox()||e.isMultiSelectBox()||e.isDropDownList())if(g=jQuery("#"+e.attr("id")+" option:selected"),a>g.length-1?a=g.length-1:a<0&&(a=0),g.length>0)return jQuery(g[a]);return e}})(jQuery);
(function(a){a.fn.firstSelectedItem=function(){return jQuery(this).selectedItem()}})(jQuery);(function(a){a.fn.lastSelectedItem=function(){return jQuery(this).selectedItem(Number.MAX_VALUE)}})(jQuery);(function(a){a.fn.selectedValue=function(){return jQuery(this).selectedItem(0).val()}})(jQuery);
(function(a){a.fn.selectedValues=function(){var a=[],e=jQuery(this);e.isMultiSelectBox()?(e=jQuery("#"+e.attr("id")+" option:selected"),jQuery.each(e,function(){a.push(jQuery(this).val())})):a.push(e.selectedValue());return a}})(jQuery);
(function(a){a.fn.itemExists=function(a){var e=jQuery(this),g=!1;if(e.isRadioBox())g=jQuery("input[type='radio'][name='"+e.attr("name")+"'][value='"+a+"']").length===1;else if(e.isSelectBox()||e.isMultiSelectBox()||e.isDropDownList())e=jQuery("#"+e.attr("id")+" option"),jQuery.each(e,function(){if(jQuery(this).val()===a)return g=!0,!1});else return jQuery(this).val()===a;return g}})(jQuery);
jQuery(document).ready(function(){jQuery(".s3_checkbox_label").cluetip({activation:"hover",positionBy:"auto",local:!0,hideLocal:!1,showTitle:!1,topOffset:0,mouseOutClose:!0,arrows:!0,clickThrough:!0})});
jQuery.fn.fancyZoom=function(a){function b(b){if(m)return!1;m=!0;var f=$($(this).attr("href")),g=a.height,j=window.innerWidth||window.document.documentElement.clientWidth||window.document.body.clientWidth,v=window.innerHeight||window.document.documentElement.clientHeight||window.document.body.clientHeight,u=window.pageYOffset||window.document.documentElement.scrollTop||window.document.body.scrollTop,r={width:j,height:v,x:window.pageXOffset||window.document.documentElement.scrollLeft||window.document.body.scrollLeft,
y:u};j=(a.width||f.width())+60;v=(g||f.height())+60;g=Math.max(r.height/2-v/2+u,0);r=r.width/2-j/2;u=b.pageY;b=b.pageX;k.attr("curTop",u);k.attr("curLeft",b);k.attr("scaleImg",a.scaleImg?"true":"false");$("#zoom").hide().css({position:"absolute",top:u+"px",left:b+"px",width:"1px",height:"1px"});h();k.hide();a.closeOnClick&&$("#zoom").click(e);a.scaleImg?(p.html(f.html()),$("#zoom_content img").css("width","100%")):p.html("");$("#zoom").animate({top:g+"px",left:r+"px",opacity:"show",width:j,height:v},
500,null,function(){a.scaleImg!=!0&&p.html(f.html());c();k.show();m=!1});return!1}function e(){if(m)return!1;m=!0;$("#zoom").unbind("click");h();k.attr("scaleImg")!="true"&&p.html("");k.hide();$("#zoom").animate({top:k.attr("curTop")+"px",left:k.attr("curLeft")+"px",opacity:"hide",width:"1px",height:"1px"},500,null,function(){k.attr("scaleImg")=="true"&&p.html("");c();m=!1});return!1}function g(a){$("#zoom_table td").each(function(){var c=$(this).css("background-image").replace(/\.(png|gif|none)\"\)$/,
"."+a+'")');$(this).css("background-image",c)});var c=k.children("img"),b=c.attr("src").replace(/\.(png|gif|none)$/,"."+a);c.attr("src",b)}function h(){$.browser.msie&&parseFloat($.browser.version)>=7&&g("gif")}function c(){$.browser.msie&&$.browser.version>=7&&g("png")}var f=(a=a||{})&&a.directory?a.directory:"images",m=!1;if($("#zoom").length==0){var j=$.browser.msie?"gif":"png";$("body").append('<div id="zoom" style="display:none;">                   <table id="zoom_table" style="border-collapse:collapse; width:100%; height:100%;">                     <tbody>                       <tr>                         <td class="tl" style="background:url('+
f+"/tl."+j+') 0 0 no-repeat; width:20px height:20px; overflow:hidden;" />                         <td class="tm" style="background:url('+f+"/tm."+j+') 0 0 repeat-x; height:20px; overflow:hidden;" />                         <td class="tr" style="background:url('+f+"/tr."+j+') 100% 0 no-repeat; width:20px height:20px; overflow:hidden;" />                       </tr>                       <tr>                         <td class="ml" style="background:url('+f+"/ml."+j+') 0 0 repeat-y; width:20px; overflow:hidden;" />                         <td class="mm" style="background:#fff; vertical-align:top; padding:10px;">                           <div id="zoom_content">                           </div>                         </td>                         <td class="mr" style="background:url('+
f+"/mr."+j+') 100% 0 repeat-y;  width:20px; overflow:hidden;" />                       </tr>                       <tr>                         <td class="bl" style="background:url('+f+"/bl."+j+') 0 100% no-repeat; width:20px height:20px; overflow:hidden;" />                         <td class="bm" style="background:url('+f+"/bm."+j+') 0 100% repeat-x; height:20px; overflow:hidden;" />                         <td class="br" style="background:url('+f+"/br."+j+') 100% 100% no-repeat; width:20px height:20px; overflow:hidden;" />                       </tr>                     </tbody>                   </table>                   <a href="#" title="Close" id="zoom_close" style="position:absolute; top:0; left:0;">                     <img src="'+
f+"/closebox."+j+'" alt="Close" style="border:none; margin:0; padding:0;" />                   </a>                 </div>');$("html").click(function(a){$(a.target).parents("#zoom:visible").length==0&&e()});$(document).keyup(function(a){a.keyCode==27&&$("#zoom:visible").length>0&&e()});$("#zoom_close").click(e)}$("#zoom");$("#zoom_table");var k=$("#zoom_close"),p=$("#zoom_content");$("td.ml,td.mm,td.mr");this.each(function(){$($(this).attr("href")).hide();$(this).click(b)});return this};
(function(a){a.ui=a.ui||{};var b=/left|center|right/,e=/top|center|bottom/,g=a.fn.position,h=a.fn.offset;a.fn.position=function(c){if(!c||!c.of)return g.apply(this,arguments);c=a.extend({},c);var f=a(c.of),h=f[0],j=(c.collision||"flip").split(" "),k=c.offset?c.offset.split(" "):[0,0],p,n,s;h.nodeType===9?(p=f.width(),n=f.height(),s={top:0,left:0}):h.setTimeout?(p=f.width(),n=f.height(),s={top:f.scrollTop(),left:f.scrollLeft()}):h.preventDefault?(c.at="left top",p=n=0,s={top:c.of.pageY,left:c.of.pageX}):
(p=f.outerWidth(),n=f.outerHeight(),s=f.offset());a.each(["my","at"],function(){var a=(c[this]||"").split(" ");a.length===1&&(a=b.test(a[0])?a.concat(["center"]):e.test(a[0])?["center"].concat(a):["center","center"]);a[0]=b.test(a[0])?a[0]:"center";a[1]=e.test(a[1])?a[1]:"center";c[this]=a});j.length===1&&(j[1]=j[0]);k[0]=parseInt(k[0],10)||0;k.length===1&&(k[1]=k[0]);k[1]=parseInt(k[1],10)||0;c.at[0]==="right"?s.left+=p:c.at[0]==="center"&&(s.left+=p/2);c.at[1]==="bottom"?s.top+=n:c.at[1]==="center"&&
(s.top+=n/2);s.left+=k[0];s.top+=k[1];return this.each(function(){var b=a(this),e=b.outerWidth(),f=b.outerHeight(),g=parseInt(a.curCSS(this,"marginLeft",!0))||0,h=parseInt(a.curCSS(this,"marginTop",!0))||0,m=e+g+(parseInt(a.curCSS(this,"marginRight",!0))||0),x=f+h+(parseInt(a.curCSS(this,"marginBottom",!0))||0),w=a.extend({},s),H;c.my[0]==="right"?w.left-=e:c.my[0]==="center"&&(w.left-=e/2);c.my[1]==="bottom"?w.top-=f:c.my[1]==="center"&&(w.top-=f/2);w.left=Math.round(w.left);w.top=Math.round(w.top);
H={left:w.left-g,top:w.top-h};a.each(["left","top"],function(b,g){if(a.ui.position[j[b]])a.ui.position[j[b]][g](w,{targetWidth:p,targetHeight:n,elemWidth:e,elemHeight:f,collisionPosition:H,collisionWidth:m,collisionHeight:x,offset:k,my:c.my,at:c.at})});a.fn.bgiframe&&b.bgiframe();b.offset(a.extend(w,{using:c.using}))})};a.ui.position={fit:{left:function(c,b){var e=a(window);e=b.collisionPosition.left+b.collisionWidth-e.width()-e.scrollLeft();c.left=e>0?c.left-e:Math.max(c.left-b.collisionPosition.left,
c.left)},top:function(c,b){var e=a(window);e=b.collisionPosition.top+b.collisionHeight-e.height()-e.scrollTop();c.top=e>0?c.top-e:Math.max(c.top-b.collisionPosition.top,c.top)}},flip:{left:function(c,b){if(b.at[0]!=="center"){var e=a(window);e=b.collisionPosition.left+b.collisionWidth-e.width()-e.scrollLeft();var g=b.my[0]==="left"?-b.elemWidth:b.my[0]==="right"?b.elemWidth:0,h=b.at[0]==="left"?b.targetWidth:-b.targetWidth,p=-2*b.offset[0];c.left+=b.collisionPosition.left<0?g+h+p:e>0?g+h+p:0}},top:function(b,
e){if(e.at[1]!=="center"){var g=a(window);g=e.collisionPosition.top+e.collisionHeight-g.height()-g.scrollTop();var h=e.my[1]==="top"?-e.elemHeight:e.my[1]==="bottom"?e.elemHeight:0,k=e.at[1]==="top"?e.targetHeight:-e.targetHeight,p=-2*e.offset[1];b.top+=e.collisionPosition.top<0?h+k+p:g>0?h+k+p:0}}}};if(!a.offset.setOffset)a.offset.setOffset=function(b,e){if(/static/.test(a.curCSS(b,"position")))b.style.position="relative";var g=a(b),h=g.offset(),k=parseInt(a.curCSS(b,"top",!0),10)||0,p=parseInt(a.curCSS(b,
"left",!0),10)||0;h={top:e.top-h.top+k,left:e.left-h.left+p};"using"in e?e.using.call(b,h):g.css(h)},a.fn.offset=function(b){var e=this[0];if(!e||!e.ownerDocument)return null;if(b)return this.each(function(){a.offset.setOffset(this,b)});return h.call(this)}})(jQuery);
(function(a){var b=0;a.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var b=this,g=this.element[0].ownerDocument,h;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(c){if(!b.options.disabled&&!b.element.attr("readonly")){h=!1;var f=
a.ui.keyCode;switch(c.keyCode){case f.PAGE_UP:b._move("previousPage",c);break;case f.PAGE_DOWN:b._move("nextPage",c);break;case f.UP:b._move("previous",c);c.preventDefault();break;case f.DOWN:b._move("next",c);c.preventDefault();break;case f.ENTER:case f.NUMPAD_ENTER:b.menu.active&&(h=!0,c.preventDefault());case f.TAB:if(!b.menu.active)break;b.menu.select(c);break;case f.ESCAPE:b.element.val(b.term);b.close(c);break;default:clearTimeout(b.searching),b.searching=setTimeout(function(){if(b.term!=b.element.val())b.selectedItem=
null,b.search(null,c)},b.options.delay)}}}).bind("keypress.autocomplete",function(a){h&&(h=!1,a.preventDefault())}).bind("focus.autocomplete",function(){if(!b.options.disabled)b.selectedItem=null,b.previous=b.element.val()}).bind("blur.autocomplete",function(a){if(!b.options.disabled)clearTimeout(b.searching),b.closing=setTimeout(function(){b.close(a);b._change(a)},150)});this._initSource();this.response=function(){return b._response.apply(b,arguments)};this.menu=a("<ul></ul>").addClass("ui-autocomplete").appendTo(a(this.options.appendTo||
"body",g)[0]).mousedown(function(c){var f=b.menu.element[0];a(c.target).closest(".ui-menu-item").length||setTimeout(function(){a(document).one("mousedown",function(c){c.target!==b.element[0]&&c.target!==f&&!a.ui.contains(f,c.target)&&b.close()})},1);setTimeout(function(){clearTimeout(b.closing)},13)}).menu({focus:function(a,f){var g=f.item.data("item.autocomplete");!1!==b._trigger("focus",a,{item:g})&&/^key/.test(a.originalEvent.type)&&b.element.val(g.value)},selected:function(a,f){var h=f.item.data("item.autocomplete"),
j=b.previous;if(b.element[0]!==g.activeElement)b.element.focus(),b.previous=j,setTimeout(function(){b.previous=j;b.selectedItem=h},1);!1!==b._trigger("select",a,{item:h})&&b.element.val(h.value);b.term=b.element.val();b.close(a);b.selectedItem=h},blur:function(){b.menu.element.is(":visible")&&b.element.val()!==b.term&&b.element.val(b.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu");a.fn.bgiframe&&this.menu.element.bgiframe()},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");
this.menu.element.remove();a.Widget.prototype.destroy.call(this)},_setOption:function(b,g){a.Widget.prototype._setOption.apply(this,arguments);b==="source"&&this._initSource();b==="appendTo"&&this.menu.element.appendTo(a(g||"body",this.element[0].ownerDocument)[0]);b==="disabled"&&g&&this.xhr&&this.xhr.abort()},_initSource:function(){var e=this,g,h;a.isArray(this.options.source)?(g=this.options.source,this.source=function(b,e){e(a.ui.autocomplete.filter(g,b.term))}):typeof this.options.source==="string"?
(h=this.options.source,this.source=function(c,f){e.xhr&&e.xhr.abort();e.xhr=a.ajax({url:h,data:c,dataType:"json",autocompleteRequest:++b,success:function(a){this.autocompleteRequest===b&&f(a)},error:function(){this.autocompleteRequest===b&&f([])}})}):this.source=this.options.source},search:function(a,b){a=a!=null?a:this.element.val();this.term=this.element.val();if(a.length<this.options.minLength)return this.close(b);clearTimeout(this.closing);if(this._trigger("search",b)!==!1)return this._search(a)},
_search:function(a){this.pending++;this.element.addClass("ui-autocomplete-loading");this.source({term:a},this.response)},_response:function(a){!this.options.disabled&&a&&a.length?(a=this._normalize(a),this._suggest(a),this._trigger("open")):this.close();this.pending--;this.pending||this.element.removeClass("ui-autocomplete-loading")},close:function(a){clearTimeout(this.closing);this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",a))},_change:function(a){this.previous!==
this.element.val()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){if(b.length&&b[0].label&&b[0].value)return b;return a.map(b,function(b){if(typeof b==="string")return{label:b,value:b};return a.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(b){var g=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(g,b);this.menu.deactivate();this.menu.refresh();g.show();this._resizeMenu();g.position(a.extend({of:this.element},this.options.position));
this.options.autoFocus&&this.menu.next(new a.Event("mouseover"))},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth(),this.element.outerWidth()))},_renderMenu:function(b,g){var h=this;a.each(g,function(a,f){h._renderItem(b,f)})},_renderItem:function(b,g){return a("<li></li>").data("item.autocomplete",g).append(a("<a></a>").text(g.label)).appendTo(b)},_move:function(a,b){if(this.menu.element.is(":visible"))if(this.menu.first()&&/^previous/.test(a)||this.menu.last()&&
/^next/.test(a))this.element.val(this.term),this.menu.deactivate();else this.menu[a](b);else this.search(null,b)},widget:function(){return this.menu.element}});a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(b,g){var h=RegExp(a.ui.autocomplete.escapeRegex(g),"i");return a.grep(b,function(a){return h.test(a.label||a.value||a)})}})})(jQuery);
(function(a){a.widget("ui.menu",{_create:function(){var b=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(e){a(e.target).closest(".ui-menu-item a").length&&(e.preventDefault(),b.select(e))});this.refresh()},refresh:function(){var b=this;this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").attr("tabindex",
-1).mouseenter(function(e){b.activate(e,a(this).parent())}).mouseleave(function(){b.deactivate()})},activate:function(a,e){this.deactivate();if(this.hasScroll()){var g=e.offset().top-this.element.offset().top,h=this.element.attr("scrollTop"),c=this.element.height();g<0?this.element.attr("scrollTop",h+g):g>=c&&this.element.attr("scrollTop",h+g-c+e.height())}this.active=e.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",a,{item:e})},deactivate:function(){if(this.active)this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),
this._trigger("blur"),this.active=null},next:function(a){this.move("next",".ui-menu-item:first",a)},previous:function(a){this.move("prev",".ui-menu-item:last",a)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(a,e,g){this.active?(a=this.active[a+"All"](".ui-menu-item").eq(0),a.length?this.activate(g,a):this.activate(g,this.element.children(e))):this.activate(g,this.element.children(e))},
nextPage:function(b){if(this.hasScroll())if(!this.active||this.last())this.activate(b,this.element.children(".ui-menu-item:first"));else{var e=this.active.offset().top,g=this.element.height(),h=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-e-g+a(this).height();return b<10&&b>-10});h.length||(h=this.element.children(".ui-menu-item:last"));this.activate(b,h)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},
previousPage:function(b){if(this.hasScroll())if(!this.active||this.first())this.activate(b,this.element.children(".ui-menu-item:last"));else{var e=this.active.offset().top,g=this.element.height();result=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-e+g-a(this).height();return b<10&&b>-10});result.length||(result=this.element.children(".ui-menu-item:first"));this.activate(b,result)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||
this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element.attr("scrollHeight")},select:function(a){this._trigger("selected",a,{item:this.active})}})})(jQuery);$(document).ready(function(){S3.rtl?$('div.label label[id!="delete_record__label"]').prepend(":"):$('div.label label[id!="delete_record__label"]').append(":")});var S3={};S3.gis={};var popupWin=null;
function openPopup(a){!popupWin||popupWin.closed?popupWin=window.open(a,"popupWin","width=640, height=480"):popupWin.focus()}
$(document).ready(function(){try{$(".zoom").fancyZoom({scaleImg:!0,closeOnClick:!0,directory:S3.Ap.concat("/static/media")})}catch(a){}$("input.date").datepicker({changeMonth:!0,changeYear:!0,showOn:"both",buttonImage:S3.Ap.concat("/static/img/jquery-ui/calendar.gif"),buttonImageOnly:!0,dateFormat:"yy-mm-dd",isRTL:S3.rtl});$(".error").hide().slideDown("slow");$(".error").click(function(){$(this).fadeOut("slow");return!1});$(".warning").hide().slideDown("slow");$(".warning").click(function(){$(this).fadeOut("slow");
return!1});$(".information").hide().slideDown("slow");$(".information").click(function(){$(this).fadeOut("slow");return!1});$(".confirmation").hide().slideDown("slow");$(".confirmation").click(function(){$(this).fadeOut("slow");return!1});$(".hoverable").hover(function(){$(this).addClass("hovered")},function(){$(this).removeClass("hovered")});$("#modulenav li").hover(function(){var a=$(this).width(),b=$("ul",this).width();b!=null&&b<a&&$("ul",this).css({width:a.toString()+"px"});$("ul",this).css("display",
"block")},function(){$("ul",this).css("display","none")});$("#subnav li").hover(function(){var a=$(this).width()-2;$("ul",this).css({display:"block",width:a.toString()+"px"})},function(){$("ul",this).css("display","none")});$("a.colorbox").attr("href",function(a,b){var h="";try{h=$(this).parents("tr").attr("id").replace(/__row/,"")}catch(c){if(h=="")return b}var f=b;b.indexOf("&caller=")==-1&&(f=b+"&caller="+h);return f});$(".colorbox").click(function(){$.fn.colorbox({iframe:!0,width:"99%",height:"99%",
href:this.href,title:this.title});return!1});$(".tooltip").cluetip({activation:"hover",sticky:!1,splitTitle:"|"});var b='<img src="'+S3.Ap.concat("/static/img/cross2.png")+'" alt="close" />';$(".stickytip").cluetip({activation:"hover",sticky:!0,closePosition:"title",closeText:b,splitTitle:"|"});$(".ajaxtip").cluetip({activation:"click",sticky:!0,closePosition:"title",closeText:b,width:380});now=new Date;$("form").append("<input type='hidden' value="+now.getTimezoneOffset()+" name='_utc_offset'/>")});
function s3_tb_remove(){$.fn.colorbox.close()}
(function(a){a.ajaxS3=function(b){var e=a.extend({},a.ajaxS3Settings,b);e.tryCount=0;b.message&&s3_showStatus(S3.i18n.ajax_get+" "+(b.message?b.message:S3.i18n.ajax_fmd)+"...",this.ajaxS3Settings.msgTimeout);e.success=function(a,e){s3_hideStatus();b.success&&b.success(a,e)};e.error=function(e,h){h=="timeout"?(this.tryCount++,this.tryCount<=this.retryLimit?(s3_showStatus(S3.i18n.ajax_get+" "+(b.message?b.message:S3.i18n.ajax_fmd)+"... "+S3.i18n.ajax_rtr+" "+this.tryCount,a.ajaxS3Settings.msgTimeout),
a.ajax(this)):s3_showStatus(S3.i18n.ajax_wht+" "+(this.retryLimit+1)+" "+S3.i18n.ajax_gvn,a.ajaxS3Settings.msgTimeout,!1,!0)):e.status==500?s3_showStatus(S3.i18n.ajax_500,a.ajaxS3Settings.msgTimeout,!1,!0):s3_showStatus(S3.i18n.ajax_dwn,a.ajaxS3Settings.msgTimeout,!1,!0)};a.ajax(e)};a.postS3=function(b,e,g,h){return a.ajaxS3({type:"POST",url:b,data:e,success:g,dataType:h})};a.getS3=function(b,e,g,h,c,f){a.isFunction(e)&&(f=c,c=h,h=g,g=e,e=null);if(f)var m=!1;return a.ajaxS3({type:"GET",url:b,async:m,
data:e,success:g,dataType:h,message:c})};a.getJSONS3=function(b,e,g,h,c){a.isFunction(e)&&(c=h,h=g,g=e,e=null);c||(c=!1);return a.getS3(b,e,g,"json",h,c)};a.ajaxS3Settings={timeout:1E4,msgTimeout:2E3,retryLimit:10,dataType:"json",async:!0,type:"GET"};a.ajaxS3Setup=function(b){a.extend(a.ajaxS3Settings,b)}})($);
function S3StatusBar(a,b){var e=this,g=null;this.elementId="_showstatus";this.prependMultiline=!0;this.showCloseButton=!1;this.afterTimeoutText=null;this.cssClass="statusbar";this.highlightClass="statusbarhighlight";this.errorClass="statusbarerror";this.closeButtonClass="statusbarclose";this.additive=!1;$.extend(this,b);a&&(g=$(a));g||(g=$("<div id='_statusbar' class='"+e.cssClass+"'><div class='"+e.closeButtonClass+"'>"+(e.showCloseButton?" X </div></div>":"")).appendTo(document.body).show());$("."+
e.cssClass).click(function(){$(g).hide()});this.show=function(a,b,f,m){f||f==void 0&&e.additive?(a="<div style='margin-bottom: 2px;' >"+a+"</div>",e.prependMultiline?g.prepend(a):g.append(a)):e.showCloseButton?(f=g.find("div.statusbarclose"),g.text(a).prepend(f)):g.text(a);g.show();b&&(m?g.addClass(e.errorClass):g.addClass(e.highlightClass),setTimeout(function(){g.removeClass(e.highlightClass);e.afterTimeoutText&&e.show(e.afterTimeoutText)},b))};this.release=function(){_statusbar&&($("#_statusbar").remove(),
_statusbar=void 0)}}var _statusbar=null;function s3_showStatus(a,b,e,g){_statusbar||(_statusbar=new S3StatusBar);_statusbar.show(a,b,e,g)}function s3_hideStatus(){_statusbar&&_statusbar.release()}function S3SetNavigateAwayConfirm(){window.onbeforeunload=function(){return S3.i18n.unsaved_changes}}function S3ClearNavigateAwayConfirm(){window.onbeforeunload=function(){}}
function S3EnableNavigateAwayConfirm(){$(document).ready(function(){$("[class=error]").length>0&&S3SetNavigateAwayConfirm();$(":input:not(input[id=gis_location_advanced_checkbox])").keypress(S3SetNavigateAwayConfirm);$(":input:not(input[id=gis_location_advanced_checkbox])").change(S3SetNavigateAwayConfirm);$("form").submit(S3ClearNavigateAwayConfirm)})}function S3ConfirmClick(a,b){$(a).click(function(a){return confirm(b)?!0:(a.preventDefault(),!1)})}
function s3_viewMap(a){a=S3.Ap.concat("/gis/display_feature/")+a;var b=$("#map").html();a="<iframe width='640' height='480' src='"+a+"'></iframe>";var e=$('<a href="#">'+S3.i18n.close_map+"</a>");e.bind("click",function(a){$("#map").html(b);a.preventDefault()});$("#map").html(a);$("#map").append($("<div style='margin-bottom: 10px' />").append(e))}
function s3_viewMapMulti(a,b,e,g){a=S3.Ap.concat("/gis/display_feature//?module=")+a+"&resource="+b+"&instance="+e+"&jresource="+g;var h=$("#map").html();a='<iframe width="640" height="480" src="'+a+'"></iframe>';b=$('<a href="#">'+S3.i18n.close_map+"</a>");b.bind("click",function(a){$("#map").html(h);a.preventDefault()});$("#map").html(a);$("#map").append($("<div style='margin-bottom: 10px' />").append(b))};
