Calendar=function(a,g,c,e){this.timeout=this.getDateText=this.getDateToolTip=this.getDateStatus=this.currentDateEl=this.activeDiv=null;this.onSelected=c||null;this.onClose=e||null;this.hidden=this.dragging=!1;this.minYear=1970;this.maxYear=2050;this.dateFormat=Calendar._TT.DEF_DATE_FORMAT;this.ttDateFormat=Calendar._TT.TT_DATE_FORMAT;this.weekNumbers=this.isPopup=!0;this.firstDayOfWeek=typeof a=="number"?a:Calendar._FD;this.showsOtherMonths=!1;this.dateStr=g;this.ar_days=null;this.showsTime=!1;this.time24=
!0;this.yearStep=2;this.hiliteToday=!0;this.activeYear=this.hilitedYear=this.activeMonth=this.hilitedMonth=this.yearsCombo=this.monthsCombo=this.firstdayname=this.tbody=this.element=this.table=this.multiple=null;this.dateClicked=!1;if(typeof Calendar._SDN=="undefined"){if(typeof Calendar._SDN_len=="undefined")Calendar._SDN_len=3;a=[];for(g=8;g>0;)a[--g]=Calendar._DN[g].substr(0,Calendar._SDN_len);Calendar._SDN=a;if(typeof Calendar._SMN_len=="undefined")Calendar._SMN_len=3;a=[];for(g=12;g>0;)a[--g]=
Calendar._MN[g].substr(0,Calendar._SMN_len);Calendar._SMN=a}};Calendar._C=null;Calendar.is_ie=/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent);Calendar.is_ie5=Calendar.is_ie&&/msie 5\.0/i.test(navigator.userAgent);Calendar.is_opera=/opera/i.test(navigator.userAgent);Calendar.is_khtml=/Konqueror|Safari|KHTML/i.test(navigator.userAgent);
Calendar.getAbsolutePos=function(a){var g=0,c=0,e=/^div$/i.test(a.tagName);if(e&&a.scrollLeft)g=a.scrollLeft;if(e&&a.scrollTop)c=a.scrollTop;g={x:a.offsetLeft-g,y:a.offsetTop-c};a.offsetParent&&(a=this.getAbsolutePos(a.offsetParent),g.x+=a.x,g.y+=a.y);return g};Calendar.isRelated=function(a,g){var c=g.relatedTarget;if(!c){var e=g.type;if(e=="mouseover")c=g.fromElement;else if(e=="mouseout")c=g.toElement}for(;c;){if(c==a)return!0;c=c.parentNode}return!1};
Calendar.removeClass=function(a,g){if(a&&a.className){for(var c=a.className.split(" "),e=[],h=c.length;h>0;)c[--h]!=g&&(e[e.length]=c[h]);a.className=e.join(" ")}};Calendar.addClass=function(a,g){Calendar.removeClass(a,g);a.className+=" "+g};Calendar.getElement=function(a){for(a=Calendar.is_ie?window.event.srcElement:a.currentTarget;a.nodeType!=1||/^div$/i.test(a.tagName);)a=a.parentNode;return a};
Calendar.getTargetElement=function(a){for(a=Calendar.is_ie?window.event.srcElement:a.target;a.nodeType!=1;)a=a.parentNode;return a};Calendar.stopEvent=function(a){a||(a=window.event);Calendar.is_ie?(a.cancelBubble=!0,a.returnValue=!1):(a.preventDefault(),a.stopPropagation());return!1};Calendar.addEvent=function(a,g,c){a.attachEvent?a.attachEvent("on"+g,c):a.addEventListener?a.addEventListener(g,c,!0):a["on"+g]=c};
Calendar.removeEvent=function(a,g,c){a.detachEvent?a.detachEvent("on"+g,c):a.removeEventListener?a.removeEventListener(g,c,!0):a["on"+g]=null};Calendar.createElement=function(a,g){var c=null;c=document.createElementNS?document.createElementNS("http://www.w3.org/1999/xhtml",a):document.createElement(a);typeof g!="undefined"&&g.appendChild(c);return c};
Calendar._add_evs=function(a){with(Calendar)addEvent(a,"mouseover",dayMouseOver),addEvent(a,"mousedown",dayMouseDown),addEvent(a,"mouseout",dayMouseOut),is_ie&&(addEvent(a,"dblclick",dayMouseDblClick),a.setAttribute("unselectable",!0))};Calendar.findMonth=function(a){if(typeof a.month!="undefined")return a;else if(typeof a.parentNode.month!="undefined")return a.parentNode;return null};
Calendar.findYear=function(a){if(typeof a.year!="undefined")return a;else if(typeof a.parentNode.year!="undefined")return a.parentNode;return null};
Calendar.showMonthsCombo=function(){var a=Calendar._C;if(!a)return!1;var g=a.activeDiv,c=a.monthsCombo;a.hilitedMonth&&Calendar.removeClass(a.hilitedMonth,"hilite");a.activeMonth&&Calendar.removeClass(a.activeMonth,"active");var e=a.monthsCombo.getElementsByTagName("div")[a.date.getMonth()];Calendar.addClass(e,"active");a.activeMonth=e;a=c.style;a.display="block";g.navtype<0?a.left=g.offsetLeft+"px":(c=c.offsetWidth,typeof c=="undefined"&&(c=50),a.left=g.offsetLeft+g.offsetWidth-c+"px");a.top=g.offsetTop+
g.offsetHeight+"px"};
Calendar.showYearsCombo=function(a){var g=Calendar._C;if(!g)return!1;var c=g.activeDiv,e=g.yearsCombo;g.hilitedYear&&Calendar.removeClass(g.hilitedYear,"hilite");g.activeYear&&Calendar.removeClass(g.activeYear,"active");g.activeYear=null;for(var h=g.date.getFullYear()+(a?1:-1),b=e.firstChild,f=!1,n=12;n>0;--n)h>=g.minYear&&h<=g.maxYear?(b.innerHTML=h,b.year=h,b.style.display="block",f=!0):b.style.display="none",b=b.nextSibling,h+=a?g.yearStep:-g.yearStep;if(f)a=e.style,a.display="block",c.navtype<
0?a.left=c.offsetLeft+"px":(e=e.offsetWidth,typeof e=="undefined"&&(e=50),a.left=c.offsetLeft+c.offsetWidth-e+"px"),a.top=c.offsetTop+c.offsetHeight+"px"};
Calendar.tableMouseUp=function(a){var g=Calendar._C;if(!g)return!1;g.timeout&&clearTimeout(g.timeout);var c=g.activeDiv;if(!c)return!1;var e=Calendar.getTargetElement(a);a||(a=window.event);Calendar.removeClass(c,"active");(e==c||e.parentNode==c)&&Calendar.cellClick(c,a);var h=Calendar.findMonth(e);c=null;if(h){if(c=new Date(g.date),h.month!=c.getMonth())c.setMonth(h.month),g.setDate(c),g.dateClicked=!1,g.callHandler()}else if(e=Calendar.findYear(e))if(c=new Date(g.date),e.year!=c.getFullYear())c.setFullYear(e.year),
g.setDate(c),g.dateClicked=!1,g.callHandler();with(Calendar)return removeEvent(document,"mouseup",tableMouseUp),removeEvent(document,"mouseover",tableMouseOver),removeEvent(document,"mousemove",tableMouseOver),g._hideCombos(),_C=null,stopEvent(a)};
Calendar.tableMouseOver=function(a){var g=Calendar._C;if(g){var c=g.activeDiv,e=Calendar.getTargetElement(a);e==c||e.parentNode==c?(Calendar.addClass(c,"hilite active"),Calendar.addClass(c.parentNode,"rowhilite")):((typeof c.navtype=="undefined"||c.navtype!=50&&(c.navtype==0||Math.abs(c.navtype)>2))&&Calendar.removeClass(c,"active"),Calendar.removeClass(c,"hilite"),Calendar.removeClass(c.parentNode,"rowhilite"));a||(a=window.event);if(c.navtype==50&&e!=c){var h=Calendar.getAbsolutePos(c),b=c.offsetWidth,
f=a.clientX,n=!0;f>h.x+b?(f=f-h.x-b,n=!1):f=h.x-f;f<0&&(f=0);h=c._range;b=c._current;f=Math.floor(f/10)%h.length;for(var j=h.length;--j>=0;)if(h[j]==b)break;for(;f-- >0;)n?--j<0&&(j=h.length-1):++j>=h.length&&(j=0);c.innerHTML=h[j];g.onUpdateTime()}(c=Calendar.findMonth(e))?c.month!=g.date.getMonth()?(g.hilitedMonth&&Calendar.removeClass(g.hilitedMonth,"hilite"),Calendar.addClass(c,"hilite"),g.hilitedMonth=c):g.hilitedMonth&&Calendar.removeClass(g.hilitedMonth,"hilite"):(g.hilitedMonth&&Calendar.removeClass(g.hilitedMonth,
"hilite"),(e=Calendar.findYear(e))?e.year!=g.date.getFullYear()?(g.hilitedYear&&Calendar.removeClass(g.hilitedYear,"hilite"),Calendar.addClass(e,"hilite"),g.hilitedYear=e):g.hilitedYear&&Calendar.removeClass(g.hilitedYear,"hilite"):g.hilitedYear&&Calendar.removeClass(g.hilitedYear,"hilite"));return Calendar.stopEvent(a)}};Calendar.tableMouseDown=function(a){if(Calendar.getTargetElement(a)==Calendar.getElement(a))return Calendar.stopEvent(a)};
Calendar.calDragIt=function(a){var g=Calendar._C;if(!g||!g.dragging)return!1;var c,e;Calendar.is_ie?(e=window.event.clientY+document.body.scrollTop,c=window.event.clientX+document.body.scrollLeft):(c=a.pageX,e=a.pageY);g.hideShowCovered();var h=g.element.style;h.left=c-g.xOffs+"px";h.top=e-g.yOffs+"px";return Calendar.stopEvent(a)};
Calendar.calDragEnd=function(a){var g=Calendar._C;if(!g)return!1;g.dragging=!1;with(Calendar)removeEvent(document,"mousemove",calDragIt),removeEvent(document,"mouseup",calDragEnd),tableMouseUp(a);g.hideShowCovered()};
Calendar.dayMouseDown=function(a){var g=Calendar.getElement(a);if(g.disabled)return!1;var c=g.calendar;c.activeDiv=g;Calendar._C=c;if(g.navtype!=300)with(Calendar)g.navtype==50?(g._current=g.innerHTML,addEvent(document,"mousemove",tableMouseOver)):addEvent(document,Calendar.is_ie5?"mousemove":"mouseover",tableMouseOver),addClass(g,"hilite active"),addEvent(document,"mouseup",tableMouseUp);else c.isPopup&&c._dragStart(a);g.navtype==-1||g.navtype==1?(c.timeout&&clearTimeout(c.timeout),c.timeout=setTimeout("Calendar.showMonthsCombo()",
250)):g.navtype==-2||g.navtype==2?(c.timeout&&clearTimeout(c.timeout),c.timeout=setTimeout(g.navtype>0?"Calendar.showYearsCombo(true)":"Calendar.showYearsCombo(false)",250)):c.timeout=null;return Calendar.stopEvent(a)};Calendar.dayMouseDblClick=function(a){Calendar.cellClick(Calendar.getElement(a),a||window.event);Calendar.is_ie&&document.selection.empty()};
Calendar.dayMouseOver=function(a){var g=Calendar.getElement(a);if(Calendar.isRelated(g,a)||Calendar._C||g.disabled)return!1;if(g.ttip){if(g.ttip.substr(0,1)=="_")g.ttip=g.caldate.print(g.calendar.ttDateFormat)+g.ttip.substr(1);g.calendar.tooltips.innerHTML=g.ttip}g.navtype!=300&&(Calendar.addClass(g,"hilite"),g.caldate&&Calendar.addClass(g.parentNode,"rowhilite"));return Calendar.stopEvent(a)};
Calendar.dayMouseOut=function(a){with(Calendar){var g=getElement(a);if(isRelated(g,a)||_C||g.disabled)return!1;removeClass(g,"hilite");g.caldate&&removeClass(g.parentNode,"rowhilite");if(g.calendar)g.calendar.tooltips.innerHTML=_TT.SEL_DATE;return stopEvent(a)}};
Calendar.cellClick=function(a,g){var c=a.calendar,e=!1,h=!1,b=null;if(typeof a.navtype=="undefined"){if(c.currentDateEl&&(Calendar.removeClass(c.currentDateEl,"selected"),Calendar.addClass(a,"selected"),e=c.currentDateEl==a,!e))c.currentDateEl=a;c.date.setDateOnly(a.caldate);b=c.date;var f=!(c.dateClicked=!a.otherMonth);!f&&!c.currentDateEl?c._toggleMultipleDate(new Date(b)):h=!a.disabled;f&&c._init(c.firstDayOfWeek,b)}else{if(a.navtype==200){Calendar.removeClass(a,"hilite");c.callCloseHandler();
return}b=new Date(c.date);a.navtype==0&&b.setDateOnly(new Date);c.dateClicked=!1;f=b.getFullYear();var n=b.getMonth(),j=function(a){var f=b.getDate(),n=b.getMonthDays(a);f>n&&b.setDate(n);b.setMonth(a)};switch(a.navtype){case 400:Calendar.removeClass(a,"hilite");e=Calendar._TT.ABOUT;typeof e!="undefined"?e+=c.showsTime?Calendar._TT.ABOUT_TIME:"":e='Help and about box text is not translated into this language.\nIf you know this language and you feel generous please update\nthe corresponding file in "lang" subdir to match calendar-en.js\nand send it back to <mihai_bazon@yahoo.com> to get it into the distribution  ;-)\n\nThank you!\nhttp://dynarch.com/mishoo/calendar.epl\n';
alert(e);return;case -2:f>c.minYear&&b.setFullYear(f-1);break;case -1:n>0?j(n-1):f-- >c.minYear&&(b.setFullYear(f),j(11));break;case 1:n<11?j(n+1):f<c.maxYear&&(b.setFullYear(f+1),j(0));break;case 2:f<c.maxYear&&b.setFullYear(f+1);break;case 100:c.setFirstDayOfWeek(a.fdow);return;case 50:e=a._range;h=a.innerHTML;for(f=e.length;--f>=0;)if(e[f]==h)break;g&&g.shiftKey?--f<0&&(f=e.length-1):++f>=e.length&&(f=0);a.innerHTML=e[f];c.onUpdateTime();return;case 0:if(typeof c.getDateStatus=="function"&&c.getDateStatus(b,
b.getFullYear(),b.getMonth(),b.getDate()))return!1}b.equalsTo(c.date)?a.navtype==0&&(h=e=!0):(c.setDate(b),h=!0)}h&&g&&c.callHandler();e&&(Calendar.removeClass(a,"hilite"),g&&c.callCloseHandler())};
Calendar.prototype.create=function(a){var g=null;a?(g=a,this.isPopup=!1):(g=document.getElementsByTagName("body")[0],this.isPopup=!0);this.date=this.dateStr?new Date(this.dateStr):new Date;this.table=a=Calendar.createElement("table");a.cellSpacing=0;a.cellPadding=0;a.calendar=this;Calendar.addEvent(a,"mousedown",Calendar.tableMouseDown);var c=Calendar.createElement("div");this.element=c;c.className="calendar";if(this.isPopup)c.style.position="absolute",c.style.display="none";c.appendChild(a);var e=
Calendar.createElement("thead",a),h=null,b=null,f=this;c=function(a,n,c){h=Calendar.createElement("td",b);h.colSpan=n;h.className="button";c!=0&&Math.abs(c)<=2&&(h.className+=" nav");Calendar._add_evs(h);h.calendar=f;h.navtype=c;h.innerHTML="<div unselectable='on'>"+a+"</div>";return h};b=Calendar.createElement("tr",e);var n=6;this.isPopup&&--n;this.weekNumbers&&++n;c("?",1,400).ttip=Calendar._TT.INFO;this.title=c("",n,300);this.title.className="title";if(this.isPopup)this.title.ttip=Calendar._TT.DRAG_TO_MOVE,
this.title.style.cursor="move",c("&#x00d7;",1,200).ttip=Calendar._TT.CLOSE;b=Calendar.createElement("tr",e);b.className="headrow";this._nav_py=c("&#x00ab;",1,-2);this._nav_py.ttip=Calendar._TT.PREV_YEAR;this._nav_pm=c("&#x2039;",1,-1);this._nav_pm.ttip=Calendar._TT.PREV_MONTH;this._nav_now=c(Calendar._TT.TODAY,this.weekNumbers?4:3,0);this._nav_now.ttip=Calendar._TT.GO_TODAY;this._nav_nm=c("&#x203a;",1,1);this._nav_nm.ttip=Calendar._TT.NEXT_MONTH;this._nav_ny=c("&#x00bb;",1,2);this._nav_ny.ttip=Calendar._TT.NEXT_YEAR;
b=Calendar.createElement("tr",e);b.className="daynames";if(this.weekNumbers)h=Calendar.createElement("td",b),h.className="name wn",h.innerHTML=Calendar._TT.WK;for(e=7;e>0;--e)if(h=Calendar.createElement("td",b),!e)h.navtype=100,h.calendar=this,Calendar._add_evs(h);this.firstdayname=this.weekNumbers?b.firstChild.nextSibling:b.firstChild;this._displayWeekdays();this.tbody=n=Calendar.createElement("tbody",a);for(e=6;e>0;--e){b=Calendar.createElement("tr",n);this.weekNumbers&&(h=Calendar.createElement("td",
b));for(var j=7;j>0;--j)h=Calendar.createElement("td",b),h.calendar=this,Calendar._add_evs(h)}this.showsTime?(b=Calendar.createElement("tr",n),b.className="time",h=Calendar.createElement("td",b),h.className="time",h.colSpan=2,h.innerHTML=Calendar._TT.TIME||"&nbsp;",h=Calendar.createElement("td",b),h.className="time",h.colSpan=this.weekNumbers?4:3,function(){function a(b,n,c,g){var e=Calendar.createElement("span",h);e.className=b;e.innerHTML=n;e.calendar=f;e.ttip=Calendar._TT.TIME_PART;e.navtype=50;
e._range=[];if(typeof c!="number")e._range=c;else for(b=c;b<=g;++b)e._range[e._range.length]=b<10&&g>=10?"0"+b:""+b;Calendar._add_evs(e);return e}var n=f.date.getHours(),c=f.date.getMinutes(),g=!f.time24,e=n>12;g&&e&&(n-=12);var j=a("hour",n,g?1:0,g?12:23);n=Calendar.createElement("span",h);n.innerHTML=":";n.className="colon";var v=a("minute",c,0,59),u=null;h=Calendar.createElement("td",b);h.className="time";h.colSpan=2;g?u=a("ampm",e?"pm":"am",["am","pm"]):h.innerHTML="&nbsp;";f.onSetTime=function(){var a,
b=this.date.getHours(),f=this.date.getMinutes();if(g)(a=b>=12)&&(b-=12),b==0&&(b=12),u.innerHTML=a?"pm":"am";j.innerHTML=b<10?"0"+b:b;v.innerHTML=f<10?"0"+f:f};f.onUpdateTime=function(){var a=this.date,b=parseInt(j.innerHTML,10);g&&(/pm/i.test(u.innerHTML)&&b<12?b+=12:/am/i.test(u.innerHTML)&&b==12&&(b=0));var f=a.getDate(),n=a.getMonth(),c=a.getFullYear();a.setHours(b);a.setMinutes(parseInt(v.innerHTML,10));a.setFullYear(c);a.setMonth(n);a.setDate(f);this.dateClicked=!1;this.callHandler()}}()):this.onSetTime=
this.onUpdateTime=function(){};a=Calendar.createElement("tfoot",a);b=Calendar.createElement("tr",a);b.className="footrow";h=c(Calendar._TT.SEL_DATE,this.weekNumbers?8:7,300);h.className="ttip";if(this.isPopup)h.ttip=Calendar._TT.DRAG_TO_MOVE,h.style.cursor="move";this.tooltips=h;this.monthsCombo=c=Calendar.createElement("div",this.element);c.className="combo";for(e=0;e<Calendar._MN.length;++e)a=Calendar.createElement("div"),a.className=Calendar.is_ie?"label-IEfix":"label",a.month=e,a.innerHTML=Calendar._SMN[e],
c.appendChild(a);this.yearsCombo=c=Calendar.createElement("div",this.element);c.className="combo";for(e=12;e>0;--e)a=Calendar.createElement("div"),a.className=Calendar.is_ie?"label-IEfix":"label",c.appendChild(a);this._init(this.firstDayOfWeek,this.date);g.appendChild(this.element)};
Calendar._keyEvent=function(a){var g=window._dynarch_popupCalendar;if(!g||g.multiple)return!1;Calendar.is_ie&&(a=window.event);var c=Calendar.is_ie||a.type=="keypress",e=a.keyCode;if(a.ctrlKey)switch(e){case 37:c&&Calendar.cellClick(g._nav_pm);break;case 38:c&&Calendar.cellClick(g._nav_py);break;case 39:c&&Calendar.cellClick(g._nav_nm);break;case 40:c&&Calendar.cellClick(g._nav_ny);break;default:return!1}else switch(e){case 32:Calendar.cellClick(g._nav_now);break;case 27:c&&g.callCloseHandler();break;
case 37:case 38:case 39:case 40:if(c){var h,b,f,n,j;c=e==37||e==38;j=e==37||e==39?1:7;var k=function(){n=g.currentDateEl;var a=n.pos;h=a&15;b=a>>4;f=g.ar_days[b][h]};k();for(var r=function(){var a=new Date(g.date);a.setDate(a.getDate()-j);g.setDate(a)},m=function(){var a=new Date(g.date);a.setDate(a.getDate()+j);g.setDate(a)};;){switch(e){case 37:if(--h>=0)f=g.ar_days[b][h];else{h=6;e=38;continue}break;case 38:--b>=0?f=g.ar_days[b][h]:(r(),k());break;case 39:if(++h<7)f=g.ar_days[b][h];else{h=0;e=
40;continue}break;case 40:++b<g.ar_days.length?f=g.ar_days[b][h]:(m(),k())}break}f&&(f.disabled?c?r():m():Calendar.cellClick(f))}break;case 13:c&&Calendar.cellClick(g.currentDateEl,a);break;default:return!1}return Calendar.stopEvent(a)};
Calendar.prototype._init=function(a,g){var c=new Date,e=c.getFullYear(),h=c.getMonth();c=c.getDate();this.table.style.visibility="hidden";var b=g.getFullYear();if(b<this.minYear)b=this.minYear,g.setFullYear(b);else if(b>this.maxYear)b=this.maxYear,g.setFullYear(b);this.firstDayOfWeek=a;this.date=new Date(g);var f=g.getMonth(),n=g.getDate();g.getMonthDays();g.setDate(1);var j=(g.getDay()-this.firstDayOfWeek)%7;j<0&&(j+=7);g.setDate(0-j);g.setDate(g.getDate()+1);j=this.tbody.firstChild;for(var k=this.ar_days=
[],r=Calendar._TT.WEEKEND,m=this.multiple?this.datesCells={}:null,s=0;s<6;++s,j=j.nextSibling){var t=j.firstChild;if(this.weekNumbers)t.className="day wn",t.innerHTML=g.getWeekNumber(),t=t.nextSibling;j.className="daysrow";for(var y=!1,v,u=k[s]=[],p=0;p<7;++p,t=t.nextSibling,g.setDate(v+1)){v=g.getDate();var A=g.getDay();t.className="day";t.pos=s<<4|p;u[p]=t;var x=g.getMonth()==f;if(x)t.otherMonth=!1,y=!0;else if(this.showsOtherMonths)t.className+=" othermonth",t.otherMonth=!0;else{t.className="emptycell";
t.innerHTML="&nbsp;";t.disabled=!0;continue}t.disabled=!1;t.innerHTML=this.getDateText?this.getDateText(g,v):v;m&&(m[g.print("%Y%m%d")]=t);if(this.getDateStatus){var w=this.getDateStatus(g,b,f,v);if(this.getDateToolTip){var H=this.getDateToolTip(g,b,f,v);if(H)t.title=H}if(w===!0)t.className+=" disabled",t.disabled=!0;else{if(/disabled/i.test(w))t.disabled=!0;t.className+=" "+w}}if(!t.disabled){t.caldate=new Date(g);t.ttip="_";if(!this.multiple&&x&&v==n&&this.hiliteToday)t.className+=" selected",this.currentDateEl=
t;g.getFullYear()==e&&g.getMonth()==h&&v==c&&(t.className+=" today",t.ttip+=Calendar._TT.PART_TODAY);r.indexOf(A.toString())!=-1&&(t.className+=t.otherMonth?" oweekend":" weekend")}}if(!y&&!this.showsOtherMonths)j.className="emptyrow"}this.title.innerHTML=Calendar._MN[f]+", "+b;this.onSetTime();this.table.style.visibility="visible";this._initMultipleDates()};
Calendar.prototype._initMultipleDates=function(){if(this.multiple)for(var a in this.multiple){var g=this.datesCells[a];this.multiple[a]&&g&&(g.className+=" selected")}};Calendar.prototype._toggleMultipleDate=function(a){if(this.multiple){var g=a.print("%Y%m%d"),c=this.datesCells[g];c&&(this.multiple[g]?(Calendar.removeClass(c,"selected"),delete this.multiple[g]):(Calendar.addClass(c,"selected"),this.multiple[g]=a))}};Calendar.prototype.setDateToolTipHandler=function(a){this.getDateToolTip=a};
Calendar.prototype.setDate=function(a){a.equalsTo(this.date)||this._init(this.firstDayOfWeek,a)};Calendar.prototype.refresh=function(){this._init(this.firstDayOfWeek,this.date)};Calendar.prototype.setFirstDayOfWeek=function(a){this._init(a,this.date);this._displayWeekdays()};Calendar.prototype.setDateStatusHandler=Calendar.prototype.setDisabledHandler=function(a){this.getDateStatus=a};Calendar.prototype.setRange=function(a,g){this.minYear=a;this.maxYear=g};
Calendar.prototype.callHandler=function(){if(this.onSelected)this.onSelected(this,this.date.print(this.dateFormat))};Calendar.prototype.callCloseHandler=function(){if(this.onClose)this.onClose(this);this.hideShowCovered()};Calendar.prototype.destroy=function(){this.element.parentNode.removeChild(this.element);Calendar._C=null;window._dynarch_popupCalendar=null};Calendar.prototype.reparent=function(a){var g=this.element;g.parentNode.removeChild(g);a.appendChild(g)};
Calendar._checkCalendar=function(a){var g=window._dynarch_popupCalendar;if(!g)return!1;for(var c=Calendar.is_ie?Calendar.getElement(a):Calendar.getTargetElement(a);c!=null&&c!=g.element;c=c.parentNode);if(c==null)return window._dynarch_popupCalendar.callCloseHandler(),Calendar.stopEvent(a)};
Calendar.prototype.show=function(){for(var a=this.table.getElementsByTagName("tr"),g=a.length;g>0;){var c=a[--g];Calendar.removeClass(c,"rowhilite");c=c.getElementsByTagName("td");for(var e=c.length;e>0;){var h=c[--e];Calendar.removeClass(h,"hilite");Calendar.removeClass(h,"active")}}this.element.style.display="block";this.hidden=!1;if(this.isPopup)window._dynarch_popupCalendar=this,Calendar.addEvent(document,"keydown",Calendar._keyEvent),Calendar.addEvent(document,"keypress",Calendar._keyEvent),
Calendar.addEvent(document,"mousedown",Calendar._checkCalendar);this.hideShowCovered()};Calendar.prototype.hide=function(){this.isPopup&&(Calendar.removeEvent(document,"keydown",Calendar._keyEvent),Calendar.removeEvent(document,"keypress",Calendar._keyEvent),Calendar.removeEvent(document,"mousedown",Calendar._checkCalendar));this.element.style.display="none";this.hidden=!0;this.hideShowCovered()};Calendar.prototype.showAt=function(a,g){var c=this.element.style;c.left=a+"px";c.top=g+"px";this.show()};
Calendar.prototype.showAtElement=function(a,g){var c=this,e=Calendar.getAbsolutePos(a);if(!g||typeof g!="string")return this.showAt(e.x,e.y+a.offsetHeight),!0;this.element.style.display="block";Calendar.continuation_for_the_fucking_khtml_browser=function(){var h=c.element.offsetWidth,b=c.element.offsetHeight;c.element.style.display="none";var f=g.substr(0,1),n="l";g.length>1&&(n=g.substr(1,1));switch(f){case "T":e.y-=b;break;case "B":e.y+=a.offsetHeight;break;case "C":e.y+=(a.offsetHeight-b)/2;break;
case "t":e.y+=a.offsetHeight-b}switch(n){case "L":e.x-=h;break;case "R":e.x+=a.offsetWidth;break;case "C":e.x+=(a.offsetWidth-h)/2;break;case "l":e.x+=a.offsetWidth-h}e.width=h;e.height=b+40;c.monthsCombo.style.display="none";if(e.x<0)e.x=0;if(e.y<0)e.y=0;h=document.createElement("div");b=h.style;b.position="absolute";b.right=b.bottom=b.width=b.height="0px";document.body.appendChild(h);b=Calendar.getAbsolutePos(h);document.body.removeChild(h);Calendar.is_ie?(b.y+=document.body.scrollTop,b.x+=document.body.scrollLeft):
(b.y+=window.scrollY,b.x+=window.scrollX);h=e.x+e.width-b.x;h>0&&(e.x-=h);h=e.y+e.height-b.y;h>0&&(e.y-=h);c.showAt(e.x,e.y)};Calendar.is_khtml?setTimeout("Calendar.continuation_for_the_fucking_khtml_browser()",10):Calendar.continuation_for_the_fucking_khtml_browser()};Calendar.prototype.setDateFormat=function(a){this.dateFormat=a};Calendar.prototype.setTtDateFormat=function(a){this.ttDateFormat=a};Calendar.prototype.parseDate=function(a,g){if(!g)g=this.dateFormat;this.setDate(Date.parseDate(a,g))};
Calendar.prototype.hideShowCovered=function(){function a(a){var b=a.style.visibility;b||(b=document.defaultView&&typeof document.defaultView.getComputedStyle=="function"?Calendar.is_khtml?"":document.defaultView.getComputedStyle(a,"").getPropertyValue("visibility"):a.currentStyle?a.currentStyle.visibility:"");return b}if(Calendar.is_ie||Calendar.is_opera){var g=["applet","iframe","select"],c=this.element,e=Calendar.getAbsolutePos(c),h=e.x,b=c.offsetWidth+h,f=e.y;c=c.offsetHeight+f;for(var n=g.length;n>
0;)for(var j=document.getElementsByTagName(g[--n]),k=null,r=j.length;r>0;){k=j[--r];e=Calendar.getAbsolutePos(k);var m=e.x,s=k.offsetWidth+m;e=e.y;var t=k.offsetHeight+e;if(this.hidden||m>b||s<h||e>c||t<f){if(!k.__msh_save_visibility)k.__msh_save_visibility=a(k);k.style.visibility=k.__msh_save_visibility}else{if(!k.__msh_save_visibility)k.__msh_save_visibility=a(k);k.style.visibility="hidden"}}}};
Calendar.prototype._displayWeekdays=function(){for(var a=this.firstDayOfWeek,g=this.firstdayname,c=Calendar._TT.WEEKEND,e=0;e<7;++e){g.className="day name";var h=(e+a)%7;if(e)g.ttip=Calendar._TT.DAY_FIRST.replace("%s",Calendar._DN[h]),g.navtype=100,g.calendar=this,g.fdow=h,Calendar._add_evs(g);c.indexOf(h.toString())!=-1&&Calendar.addClass(g,"weekend");g.innerHTML=Calendar._SDN[(e+a)%7];g=g.nextSibling}};
Calendar.prototype._hideCombos=function(){this.monthsCombo.style.display="none";this.yearsCombo.style.display="none"};
Calendar.prototype._dragStart=function(a){if(!this.dragging){this.dragging=!0;var g;Calendar.is_ie?(g=window.event.clientY+document.body.scrollTop,a=window.event.clientX+document.body.scrollLeft):(g=a.clientY+window.scrollY,a=a.clientX+window.scrollX);var c=this.element.style;this.xOffs=a-parseInt(c.left);this.yOffs=g-parseInt(c.top);with(Calendar)addEvent(document,"mousemove",calDragIt),addEvent(document,"mouseup",calDragEnd)}};Date._MD=[31,28,31,30,31,30,31,31,30,31,30,31];Date.SECOND=1E3;
Date.MINUTE=60*Date.SECOND;Date.HOUR=60*Date.MINUTE;Date.DAY=24*Date.HOUR;Date.WEEK=7*Date.DAY;
Date.parseDate=function(a,g){var c=new Date,e=0,h=-1,b=0,f=a.split(/\W+/),n=g.match(/%./g),j=0,k=0,r=0,m=0;for(j=0;j<f.length;++j)if(f[j])switch(n[j]){case "%d":case "%e":b=parseInt(f[j],10);break;case "%m":h=parseInt(f[j],10)-1;break;case "%Y":case "%y":e=parseInt(f[j],10);e<100&&(e+=e>29?1900:2E3);break;case "%b":case "%B":for(k=0;k<12;++k)if(Calendar._MN[k].substr(0,f[j].length).toLowerCase()==f[j].toLowerCase()){h=k;break}break;case "%H":case "%I":case "%k":case "%l":r=parseInt(f[j],10);break;
case "%P":case "%p":/pm/i.test(f[j])&&r<12?r+=12:/am/i.test(f[j])&&r>=12&&(r-=12);break;case "%M":m=parseInt(f[j],10)}isNaN(e)&&(e=c.getFullYear());isNaN(h)&&(h=c.getMonth());isNaN(b)&&(b=c.getDate());isNaN(r)&&(r=c.getHours());isNaN(m)&&(m=c.getMinutes());if(e!=0&&h!=-1&&b!=0)return new Date(e,h,b,r,m,0);e=0;h=-1;for(j=b=0;j<f.length;++j)if(f[j].search(/[a-zA-Z]+/)!=-1){n=-1;for(k=0;k<12;++k)if(Calendar._MN[k].substr(0,f[j].length).toLowerCase()==f[j].toLowerCase()){n=k;break}n!=-1&&(h!=-1&&(b=h+
1),h=n)}else parseInt(f[j],10)<=12&&h==-1?h=f[j]-1:parseInt(f[j],10)>31&&e==0?(e=parseInt(f[j],10),e<100&&(e+=e>29?1900:2E3)):b==0&&(b=f[j]);e==0&&(e=c.getFullYear());if(h!=-1&&b!=0)return new Date(e,h,b,r,m,0);return c};Date.prototype.getMonthDays=function(a){var g=this.getFullYear();typeof a=="undefined"&&(a=this.getMonth());return 0==g%4&&(0!=g%100||0==g%400)&&a==1?29:Date._MD[a]};
Date.prototype.getDayOfYear=function(){var a=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0),g=new Date(this.getFullYear(),0,0,0,0,0);return Math.floor((a-g)/Date.DAY)};Date.prototype.getWeekNumber=function(){var a=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0),g=a.getDay();a.setDate(a.getDate()-(g+6)%7+3);g=a.valueOf();a.setMonth(0);a.setDate(4);return Math.round((g-a.valueOf())/6048E5)+1};
Date.prototype.equalsTo=function(a){return this.getFullYear()==a.getFullYear()&&this.getMonth()==a.getMonth()&&this.getDate()==a.getDate()&&this.getHours()==a.getHours()&&this.getMinutes()==a.getMinutes()};Date.prototype.setDateOnly=function(a){a=new Date(a);this.setDate(1);this.setFullYear(a.getFullYear());this.setMonth(a.getMonth());this.setDate(a.getDate())};
Date.prototype.print=function(a){var g=this.getMonth(),c=this.getDate(),e=this.getFullYear(),h=this.getWeekNumber(),b=this.getDay(),f={},n=this.getHours(),j=n>=12,k=j?n-12:n,r=this.getDayOfYear();k==0&&(k=12);var m=this.getMinutes(),s=this.getSeconds();f["%a"]=Calendar._SDN[b];f["%A"]=Calendar._DN[b];f["%b"]=Calendar._SMN[g];f["%B"]=Calendar._MN[g];f["%C"]=1+Math.floor(e/100);f["%d"]=c<10?"0"+c:c;f["%e"]=c;f["%H"]=n<10?"0"+n:n;f["%I"]=k<10?"0"+k:k;f["%j"]=r<100?r<10?"00"+r:"0"+r:r;f["%k"]=n;f["%l"]=
k;f["%m"]=g<9?"0"+(1+g):1+g;f["%M"]=m<10?"0"+m:m;f["%n"]="\n";f["%p"]=j?"PM":"AM";f["%P"]=j?"pm":"am";f["%s"]=Math.floor(this.getTime()/1E3);f["%S"]=s<10?"0"+s:s;f["%t"]="\t";f["%U"]=f["%W"]=f["%V"]=h<10?"0"+h:h;f["%u"]=b+1;f["%w"]=b;f["%y"]=(""+e).substr(2,2);f["%Y"]=e;f["%%"]="%";g=/%./g;if(!Calendar.is_ie5&&!Calendar.is_khtml)return a.replace(g,function(a){return f[a]||a});c=a.match(g);for(e=0;e<c.length;e++)if(h=f[c[e]])g=RegExp(c[e],"g"),a=a.replace(g,h);return a};
Date.prototype.__msh_oldSetFullYear=Date.prototype.setFullYear;Date.prototype.setFullYear=function(a){var g=new Date(this);g.__msh_oldSetFullYear(a);g.getMonth()!=this.getMonth()&&this.setDate(28);this.__msh_oldSetFullYear(a)};window._dynarch_popupCalendar=null;Calendar._DN=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];Calendar._SDN=["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"];Calendar._FD=0;
Calendar._MN=["January","February","March","April","May","June","July","August","September","October","November","December"];Calendar._SMN=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];Calendar._TT={};Calendar._TT.INFO="About the calendar";
Calendar._TT.ABOUT="DHTML Date/Time Selector\n(c) dynarch.com 2002-2005 / Author: Mihai Bazon\nFor latest version visit: http://www.dynarch.com/projects/calendar/\nDistributed under GNU LGPL.  See http://gnu.org/licenses/lgpl.html for details.\n\nDate selection:\n- Use the \u00ab, \u00bb buttons to select year\n- Use the "+String.fromCharCode(8249)+", "+String.fromCharCode(8250)+" buttons to select month\n- Hold mouse button on any of the above buttons for faster selection.";
Calendar._TT.ABOUT_TIME="\n\nTime selection:\n- Click on any of the time parts to increase it\n- or Shift-click to decrease it\n- or click and drag for faster selection.";Calendar._TT.PREV_YEAR="Prev. year (hold for menu)";Calendar._TT.PREV_MONTH="Prev. month (hold for menu)";Calendar._TT.GO_TODAY="Go Today";Calendar._TT.NEXT_MONTH="Next month (hold for menu)";Calendar._TT.NEXT_YEAR="Next year (hold for menu)";Calendar._TT.SEL_DATE="Select date";Calendar._TT.DRAG_TO_MOVE="Drag to move";
Calendar._TT.PART_TODAY=" (today)";Calendar._TT.DAY_FIRST="Display %s first";Calendar._TT.WEEKEND="0,6";Calendar._TT.CLOSE="Close";Calendar._TT.TODAY="Today";Calendar._TT.TIME_PART="(Shift-)Click or drag to change value";Calendar._TT.DEF_DATE_FORMAT="%Y-%m-%d";Calendar._TT.TT_DATE_FORMAT="%a, %b %e";Calendar._TT.WK="wk";Calendar._TT.TIME="Time:";
Calendar.setup=function(a){function g(b,n){typeof a[b]=="undefined"&&(a[b]=n)}function c(a){var b=a.params,c=a.dateClicked||b.electric;if(c&&b.inputField&&(b.inputField.value=a.date.print(b.ifFormat),typeof b.inputField.onchange=="function"))b.inputField.onchange();if(c&&b.displayArea)b.displayArea.innerHTML=a.date.print(b.daFormat);if(c&&typeof b.onUpdate=="function")b.onUpdate(a);c&&b.flat&&typeof b.flatCallback=="function"&&b.flatCallback(a);c&&b.singleClick&&a.dateClicked&&a.callCloseHandler()}
g("inputField",null);g("displayArea",null);g("button",null);g("eventName","click");g("ifFormat","%Y/%m/%d");g("daFormat","%Y/%m/%d");g("singleClick",!0);g("disableFunc",null);g("dateStatusFunc",a.disableFunc);g("dateText",null);g("firstDay",null);g("align","Br");g("range",[1900,2999]);g("weekNumbers",!0);g("flat",null);g("flatCallback",null);g("onSelect",null);g("onClose",null);g("onUpdate",null);g("date",null);g("showsTime",!1);g("timeFormat","24");g("electric",!0);g("step",2);g("position",null);
g("cache",!1);g("showOthers",!1);g("multiple",null);var e=["inputField","displayArea","button"],h;for(h in e)typeof a[e[h]]=="string"&&(a[e[h]]=document.getElementById(a[e[h]]));if(!a.flat&&!a.multiple&&!a.inputField&&!a.displayArea&&!a.button)return alert("Calendar.setup:\n  Nothing to setup (no fields found).  Please check your code"),!1;if(a.flat!=null){if(typeof a.flat=="string")a.flat=document.getElementById(a.flat);if(!a.flat)return alert("Calendar.setup:\n  Flat specified but can't find parent."),
!1;var b=new Calendar(a.firstDay,a.date,a.onSelect||c);b.showsOtherMonths=a.showOthers;b.showsTime=a.showsTime;b.time24=a.timeFormat=="24";b.params=a;b.weekNumbers=a.weekNumbers;b.setRange(a.range[0],a.range[1]);b.setDateStatusHandler(a.dateStatusFunc);b.getDateText=a.dateText;a.ifFormat&&b.setDateFormat(a.ifFormat);a.inputField&&typeof a.inputField.value=="string"&&b.parseDate(a.inputField.value);b.create(a.flat);b.show();return!1}(a.button||a.displayArea||a.inputField)["on"+a.eventName]=function(){var b=
a.inputField||a.displayArea,n=a.inputField?a.ifFormat:a.daFormat,g=!1,e=window.calendar;if(b)a.date=Date.parseDate(b.value||b.innerHTML,n);!e||!a.cache?(window.calendar=e=new Calendar(a.firstDay,a.date,a.onSelect||c,a.onClose||function(a){a.hide()}),e.showsTime=a.showsTime,e.time24=a.timeFormat=="24",e.weekNumbers=a.weekNumbers,g=!0):(a.date&&e.setDate(a.date),e.hide());if(a.multiple){e.multiple={};for(b=a.multiple.length;--b>=0;){var h=a.multiple[b],m=h.print("%Y%m%d");e.multiple[m]=h}}e.showsOtherMonths=
a.showOthers;e.yearStep=a.step;e.setRange(a.range[0],a.range[1]);e.params=a;e.setDateStatusHandler(a.dateStatusFunc);e.getDateText=a.dateText;e.setDateFormat(n);g&&e.create();e.refresh();a.position?e.showAt(a.position[0],a.position[1]):e.showAtElement(a.button||a.displayArea||a.inputField,a.align);return!1};return b};
$(document).ready(function(){function a(){try{c.abort()}catch(a){}$("#TotalQuantity").remove();$("#inv_quantity_ajax_throbber").length==0&&$('[name = "quantity"]').after('<div id="inv_quantity_ajax_throbber" class="ajax_throbber" style="float:right"/>');url="/eden/inv/inv_item_quantity/";url+=$('[name = "inv_item_id"]').val();c=$.getJSON(url,function(a){var f=a.inv_inv_item.quantity;a=a.supply_item_pack.quantity;var n=$('[name = "item_pack_id"] option:selected').text(),c=/\(([0-9]*)\sx/.exec(n);TotalQuantity=
'<span id = "TotalQuantity"> / '+(f*a/(c==null?1:c[1])).toFixed(2)+" "+n+" ("+S3.i18n.in_inv+")</span>";$("#inv_quantity_ajax_throbber").remove();$('[name = "quantity"]').after(TotalQuantity)})}function g(){try{c.abort()}catch(e){}var b=$('[name $= "item_id"]'),f=$('[name = "item_pack_id"]');$('[id$="item_pack_id__row1"]').show();$('[id$="item_pack_id__row"]').show();$("#item_pack_ajax_throbber").length==0&&f.after('<div id="item_pack_ajax_throbber" class="ajax_throbber style="display:inline;"/>');
f.hide();var n;n=$('[name = "item_id"]').length!=0?S3.Ap.concat("/supply/item_pack.json?item_pack.item_id=",b.val()):S3.Ap.concat("/inv/inv_item_packs/",b.val());c=$.ajax({url:n,dataType:"json",context:b,success:function(b){var c="",n="";if(b.length==0)c+='<option value="">'+S3.i18n.no_packs+"</options>";else{for(var e=0;e<b.length;e++)if(b[e].quantity==1){n=b[e].name;break}for(e=0;e<b.length;e++)c+='<option value="'+b[e].id+'">',c+=b[e].quantity==1?b[e].name:b[e].name+" ("+b[e].quantity+" x "+n+
")",c+="</option>"}f.html(c).val(1).show();href=$("#item_pack_add").attr("href")+"&item_id="+$('[name = "item_id"]').val();$("#item_pack_add").attr("href",href).show();$("#item_pack_ajax_throbber").remove();this.attr("name")=="inv_item_id"&&a()}})}var c;$("#inv_send_item_item_pack_id").change(a);var e=$('[name $= "item_id"]').val();e==""|e==void 0?($('[id$="item_pack_id__row1"]').hide(),$('[id$="item_pack_id__row"]').hide()):g();$('[name $= "item_id"]').change(g);$(".quantity.ajax_more").live("click",
function(a){a.preventDefault();a=$(this);var b,f;if(a.hasClass("collapsed")){a.hasClass("fulfil")?(f="inv",b="recv"):a.hasClass("transit")?(b="send",f="inv"):a.hasClass("commit")&&(b="commit",f="req");a.after('<div class="ajax_throbber quantity_req_ajax_throbber"/>').removeClass("collapsed").addClass("expanded");var e=/req_item\/(.*)\//i.exec($(".action-btn",a.parent().parent().parent()).attr("href"))[1];e=S3.Ap.concat("/",f,"/",b,"_item_json/",e);$.ajax({url:e,dataType:"json",context:a,success:function(a){RecvTable=
'<table class="recv_table">';for(i=0;i<a.length;i++)RecvTable+="<tr><td>",i==0?RecvTable+=a[0].id:(RecvURL=S3.Ap.concat("/",f,"/",b,"/",a[i].id),RecvTable+="<a href = '"+RecvURL+"'>",RecvTable+=a[i].datetime!=null?a[i].datetime.substring(0,10)+"</a>":" - </a>"),RecvTable+="</td><td>"+a[i].quantity+"</td></tr>";RecvTable+="</table>";$(".quantity_req_ajax_throbber",this.parent()).remove();this.parent().after(RecvTable)}})}else a.removeClass("expanded").addClass("collapsed"),$(".recv_table",a.parent().parent()).remove()})});
(function(a,g){function c(b,f){b=b?' id="'+m+b+'"':"";return a("<div"+b+(f?' style="'+f+'"':"")+"/>")}function e(a,b){b=b==="x"?I.width():I.height();return typeof a==="string"?Math.round(/%/.test(a)?b/100*parseInt(a,10):parseInt(a,10)):a}function h(a){return o.photo||/\.(gif|png|jpg|jpeg|bmp)(?:\?([^#]*))?(?:#(\.*))?$/i.test(a)}function b(b){for(var f in b)a.isFunction(b[f])&&f.substring(0,2)!=="on"&&(b[f]=b[f].call(P));b.rel=b.rel||P.rel||"nofollow";b.href=b.href||a(P).attr("href");b.title=b.title||
P.title;return b}function f(b,f){f&&f.call(P);a.event.trigger(b)}function n(){var a,b=m+"Slideshow_",f="click."+m,e,c;o.slideshow&&F[1]&&(e=function(){O.text(o.slideshowStop).unbind(f).bind(y,function(){if(C<F.length-1||o.loop)a=setTimeout(E.next,o.slideshowSpeed)}).bind(t,function(){clearTimeout(a)}).one(f+" "+v,c);z.removeClass(b+"off").addClass(b+"on");a=setTimeout(E.next,o.slideshowSpeed)},c=function(){clearTimeout(a);O.text(o.slideshowStart).unbind([y,t,v,f].join(" ")).one(f,e);z.removeClass(b+
"on").addClass(b+"off")},o.slideshowAuto?e():c())}function j(c){if(!ea){P=c;o=b(a.extend({},a.data(P,r)));F=a(P);C=0;o.rel!=="nofollow"&&(F=a("."+da).filter(function(){return(a.data(this,r).rel||this.rel)===o.rel}),C=F.index(P),C===-1&&(F=F.add(P),C=F.length-1));if(!V){V=ca=!0;z.show();if(o.returnFocus)try{P.blur(),a(P).one(u,function(){try{this.focus()}catch(a){}})}catch(n){}M.css({opacity:+o.opacity,cursor:o.overlayClose?"pointer":"auto"}).show();o.w=e(o.initialWidth,"x");o.h=e(o.initialHeight,
"y");E.position(0);w&&I.bind("resize."+H+" scroll."+H,function(){M.css({width:I.width(),height:I.height(),top:I.scrollTop(),left:I.scrollLeft()})}).trigger("scroll."+H);f(s,o.onOpen);D.add(S).add(Y).add(O).add(T).hide();J.html(o.close).show()}E.load(!0)}}var k={transition:"elastic",speed:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,inline:!1,html:!1,iframe:!1,photo:!1,href:!1,title:!1,rel:!1,opacity:0.9,
preloading:!0,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",open:!1,returnFocus:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,overlayClose:!0,escKey:!0,arrowKey:!0},r="colorbox",m="cbox",s=m+"_open",t=m+"_load",y=m+"_complete",v=m+"_cleanup",u=m+"_closed",p=m+"_purge",A=m+"_loaded",x=a.browser.msie&&!a.support.opacity,w=x&&a.browser.version<
7,H=m+"_IE6",M,z,N,Q,W,Z,U,ba,F,I,G,B,K,T,D,O,Y,S,J,L,aa,X,R,P,C,o,V,ca,ea=!1,E,da=m+"Element";E=a.fn[r]=a[r]=function(b,f){var e=this,c;if(!e[0]&&e.selector)return e;b=b||{};if(f)b.onComplete=f;if(!e[0]||e.selector===void 0)e=a("<a/>"),b.open=!0;e.each(function(){a.data(this,r,a.extend({},a.data(this,r)||k,b));a(this).addClass(da)});c=b.open;a.isFunction(c)&&(c=c.call(e));c&&j(e[0]);return e};E.init=function(){I=a(g);z=c().attr({id:r,"class":x?m+"IE":""});M=c("Overlay",w?"position:absolute":"").hide();
N=c("Wrapper");Q=c("Content").append(G=c("LoadedContent","width:0; height:0; overflow:hidden"),K=c("LoadingOverlay").add(c("LoadingGraphic")),T=c("Title"),D=c("Current"),Y=c("Next"),S=c("Previous"),O=c("Slideshow").bind(s,n),J=c("Close"));N.append(c().append(c("TopLeft"),W=c("TopCenter"),c("TopRight")),c(!1,"clear:left").append(Z=c("MiddleLeft"),Q,U=c("MiddleRight")),c(!1,"clear:left").append(c("BottomLeft"),ba=c("BottomCenter"),c("BottomRight"))).children().children().css({"float":"left"});B=c(!1,
"position:absolute; width:9999px; visibility:hidden; display:none");a("body").prepend(M,z.append(N,B));Q.children().hover(function(){a(this).addClass("hover")},function(){a(this).removeClass("hover")}).addClass("hover");L=W.height()+ba.height()+Q.outerHeight(!0)-Q.height();aa=Z.width()+U.width()+Q.outerWidth(!0)-Q.width();X=G.outerHeight(!0);R=G.outerWidth(!0);z.css({"padding-bottom":L,"padding-right":aa}).hide();Y.click(E.next);S.click(E.prev);J.click(E.close);Q.children().removeClass("hover");a("."+
da).live("click",function(a){a.button!==0&&typeof a.button!=="undefined"||a.ctrlKey||a.shiftKey||a.altKey||(a.preventDefault(),j(this))});M.click(function(){o.overlayClose&&E.close()});a(document).bind("keydown",function(a){V&&o.escKey&&a.keyCode===27&&(a.preventDefault(),E.close());if(V&&o.arrowKey&&!ca&&F[1])if(a.keyCode===37&&(C||o.loop))a.preventDefault(),S.click();else if(a.keyCode===39&&(C<F.length-1||o.loop))a.preventDefault(),Y.click()})};E.remove=function(){z.add(M).remove();a("."+da).die("click").removeData(r).removeClass(da)};
E.position=function(a,b){function f(a){W[0].style.width=ba[0].style.width=Q[0].style.width=a.style.width;K[0].style.height=K[1].style.height=Q[0].style.height=Z[0].style.height=U[0].style.height=a.style.height}var e,c=Math.max(document.documentElement.clientHeight-o.h-X-L,0)/2+I.scrollTop(),n=Math.max(I.width()-o.w-R-aa,0)/2+I.scrollLeft();e=z.width()===o.w+R&&z.height()===o.h+X?0:a;N[0].style.width=N[0].style.height="9999px";z.dequeue().animate({width:o.w+R,height:o.h+X,top:c,left:n},{duration:e,
complete:function(){f(this);ca=!1;N[0].style.width=o.w+R+aa+"px";N[0].style.height=o.h+X+L+"px";b&&b()},step:function(){f(this)}})};E.resize=function(a){if(V){a=a||{};if(a.width)o.w=e(a.width,"x")-R-aa;if(a.innerWidth)o.w=e(a.innerWidth,"x");G.css({width:o.w});if(a.height)o.h=e(a.height,"y")-X-L;if(a.innerHeight)o.h=e(a.innerHeight,"y");if(!a.innerHeight&&!a.height)a=G.wrapInner("<div style='overflow:auto'></div>").children(),o.h=a.height(),a.replaceWith(a.children());G.css({height:o.h});E.position(o.transition===
"none"?0:o.speed)}};E.prep=function(b){function e(b){var c,j,k,s,p=F.length,t=o.loop;E.position(b,function(){function b(){x&&z[0].style.removeAttribute("filter")}if(V){x&&n&&G.fadeIn(100);G.show();f(A);T.show().html(o.title);if(p>1&&(typeof o.current==="string"&&D.html(o.current.replace(/\{current\}/,C+1).replace(/\{total\}/,p)).show(),Y[t||C<p-1?"show":"hide"]().html(o.next),S[t||C?"show":"hide"]().html(o.previous),c=C?F[C-1]:F[p-1],k=C<p-1?F[C+1]:F[0],o.slideshow&&O.show(),o.preloading)){s=a.data(k,
r).href||k.href;j=a.data(c,r).href||c.href;s=a.isFunction(s)?s.call(k):s;j=a.isFunction(j)?j.call(c):j;if(h(s))a("<img/>")[0].src=s;if(h(j))a("<img/>")[0].src=j}K.hide();o.transition==="fade"?z.fadeTo(g,1,function(){b()}):b();I.bind("resize."+m,function(){E.position(0)});f(y,o.onComplete)}})}if(V){var n,g=o.transition==="none"?0:o.speed;I.unbind("resize."+m);G.remove();G=c("LoadedContent").html(b);G.hide().appendTo(B.show()).css({width:function(){o.w=o.w||G.width();o.w=o.mw&&o.mw<o.w?o.mw:o.w;return o.w}(),
overflow:o.scrolling?"auto":"hidden"}).css({height:function(){o.h=o.h||G.height();o.h=o.mh&&o.mh<o.h?o.mh:o.h;return o.h}()}).prependTo(Q);B.hide();a("#"+m+"Photo").css({cssFloat:"none",marginLeft:"auto",marginRight:"auto"});if(w)a("select").not(z.find("select")).filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one(v,function(){this.style.visibility="inherit"});o.transition==="fade"?z.fadeTo(g,0,function(){e(0)}):e(g)}};E.load=function(n){var g,j,k,s=E.prep;ca=
!0;P=F[C];n||(o=b(a.extend({},a.data(P,r))));f(p);f(t,o.onLoad);o.h=o.height?e(o.height,"y")-X-L:o.innerHeight&&e(o.innerHeight,"y");o.w=o.width?e(o.width,"x")-R-aa:o.innerWidth&&e(o.innerWidth,"x");o.mw=o.w;o.mh=o.h;if(o.maxWidth)o.mw=e(o.maxWidth,"x")-R-aa,o.mw=o.w&&o.w<o.mw?o.w:o.mw;if(o.maxHeight)o.mh=e(o.maxHeight,"y")-X-L,o.mh=o.h&&o.h<o.mh?o.h:o.mh;g=o.href;K.show();o.inline?(c().hide().insertBefore(a(g)[0]).one(p,function(){a(this).replaceWith(G.children())}),s(a(g))):o.iframe?(z.one(A,function(){var b=
a("<iframe frameborder='0' style='width:100%; height:100%; border:0; display:block'/>")[0];b.name=m+ +new Date;b.src=o.href;if(!o.scrolling)b.scrolling="no";if(x)b.allowtransparency="true";a(b).appendTo(G).one(p,function(){b.src="//about:blank"})}),s(" ")):o.html?s(o.html):h(g)?(j=new Image,j.onload=function(){var b;j.onload=null;j.id=m+"Photo";a(j).css({border:"none",display:"block",cssFloat:"left"});o.scalePhotos&&(k=function(){j.height-=j.height*b;j.width-=j.width*b},o.mw&&j.width>o.mw&&(b=(j.width-
o.mw)/j.width,k()),o.mh&&j.height>o.mh&&(b=(j.height-o.mh)/j.height,k()));if(o.h)j.style.marginTop=Math.max(o.h-j.height,0)/2+"px";F[1]&&(C<F.length-1||o.loop)&&a(j).css({cursor:"pointer"}).click(E.next);if(x)j.style.msInterpolationMode="bicubic";setTimeout(function(){s(j)},1)},setTimeout(function(){j.src=g},1)):g&&B.load(g,function(b,f,e){s(f==="error"?"Request unsuccessful: "+e.statusText:a(this).children())})};E.next=function(){ca||(C=C<F.length-1?C+1:0,E.load())};E.prev=function(){ca||(C=C?C-
1:F.length-1,E.load())};E.close=function(){V&&!ea&&(ea=!0,V=!1,f(v,o.onCleanup),I.unbind("."+m+" ."+H),M.fadeTo("fast",0),z.stop().fadeTo("fast",0,function(){f(p);G.remove();z.add(M).css({opacity:1,cursor:"auto"}).hide();setTimeout(function(){ea=!1;f(u,o.onClosed)},1)}))};E.element=function(){return a(P)};E.settings=k;a(E.init)})(jQuery,this);
(function(a,g){function c(){this.debug=!0;this._curInst=null;this._isInline=!1;this._disabledInputs=[];this._inDialog=this._timepickerShowing=!1;this._dialogClass="ui-timepicker-dialog";this._mainDivId="ui-timepicker-div";this._inlineClass="ui-timepicker-inline";this._currentClass="ui-timepicker-current";this._dayOverClass="ui-timepicker-days-cell-over";this.regional=[];this.regional[""]={hourText:"Hour",minuteText:"Minute",amPmText:["AM","PM"]};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},
appendText:"",onSelect:null,onClose:null,timeSeparator:":",showPeriod:!1,showLeadingZero:!0,showMinutesLeadingZero:!0,altField:"",defaultTime:""};a.extend(this._defaults,this.regional[""]);this.tpDiv=a('<div id="'+this._mainDivId+'" class="ui-timepicker ui-widget ui-helper-clearfix ui-corner-all " style="display: none"></div>')}function e(b,f){a.extend(b,f);for(var e in f)if(f[e]==null||f[e]==g)b[e]=f[e];return b}a.extend(a.ui,{timepicker:{version:"0.0.1"}});var h=(new Date).getTime();a.extend(c.prototype,
{markerClassName:"hasTimepicker",log:function(){this.debug&&console.log.apply("",arguments)},_widgetTimepicker:function(){return this.tpDiv},setDefaults:function(a){e(this._defaults,a||{});return this},_attachTimepicker:function(b,f){var e=null,c;for(c in this._defaults){var g=b.getAttribute("time:"+c);if(g){e=e||{};try{e[c]=eval(g)}catch(h){e[c]=g}}}c=b.nodeName.toLowerCase();g=c=="div"||c=="span";if(!b.id)this.uuid+=1,b.id="tp"+this.uuid;var m=this._newInst(a(b),g);m.settings=a.extend({},f||{},
e||{});c=="input"?this._connectTimepicker(b,m):g&&this._inlineTimepicker(b,m)},_newInst:function(b,f){return{id:b[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:b,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:f,tpDiv:!f?this.tpDiv:a('<div class="'+this._inlineClass+' ui-timepicker ui-widget  ui-helper-clearfix"></div>')}},_connectTimepicker:function(b,f){var e=a(b);f.append=a([]);f.trigger=a([]);e.hasClass(this.markerClassName)||(this._attachments(e,f),e.addClass(this.markerClassName).keydown(this._doKeyDown).keyup(this._doKeyUp).bind("setData.timepicker",
function(a,b,e){f.settings[b]=e}).bind("getData.timepicker",function(a,b){return this._get(f,b)}),a.data(b,"timepicker",f))},_doKeyDown:function(b){var f=!0;a.timepicker._getInst(b.target)._keyEvent=!0;if(a.timepicker._timepickerShowing)switch(b.keyCode){case 9:a.timepicker._hideTimepicker();f=!1;break;case 27:a.timepicker._hideTimepicker();break;default:f=!1}else b.keyCode==36&&b.ctrlKey?a.timepicker._showTimepicker(this):f=!1;f&&(b.preventDefault(),b.stopPropagation())},_doKeyUp:function(b){b=a.timepicker._getInst(b.target);
a.timepicker._setTimeFromField(b);a.timepicker._updateTimepicker(b)},_attachments:function(b,f){var e=this._get(f,"appendText"),c=this._get(f,"isRTL");f.append&&f.append.remove();if(e)f.append=a('<span class="'+this._appendClass+'">'+e+"</span>"),b[c?"before":"after"](f.append);b.unbind("focus",this._showTimepicker);f.trigger&&f.trigger.remove();e=this._get(f,"showOn");(e=="focus"||e=="both")&&b.focus(this._showTimepicker);if(e=="button"||e=="both"){e=this._get(f,"buttonText");var g=this._get(f,"buttonImage");
f.trigger=a(this._get(f,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:g,alt:e,title:e}):a('<button type="button"></button>').addClass(this._triggerClass).html(g==""?e:a("<img/>").attr({src:g,alt:e,title:e})));b[c?"before":"after"](f.trigger);f.trigger.click(function(){a.timepicker._timepickerShowing&&a.timepicker._lastInput==b[0]?a.timepicker._hideTimepicker():a.timepicker._showTimepicker(b[0]);return!1})}},_inlineTimepicker:function(b,f){var e=a(b);e.hasClass(this.markerClassName)||
(e.addClass(this.markerClassName).append(f.tpDiv).bind("setData.timepicker",function(a,b,e){f.settings[b]=e}).bind("getData.timepicker",function(a,b){return this._get(f,b)}),a.data(b,"timepicker",f),this._setTimeFromField(f),this._updateTimepicker(f),f.tpDiv.show())},_showTimepicker:function(b){b=b.target||b;b.nodeName.toLowerCase()!="input"&&(b=a("input",b.parentNode)[0]);if(!(a.timepicker._isDisabledTimepicker(b)||a.timepicker._lastInput==b)){var f=a.timepicker._getInst(b);a.timepicker._curInst&&
a.timepicker._curInst!=f&&a.timepicker._curInst.tpDiv.stop(!0,!0);var c=a.timepicker._get(f,"beforeShow");e(f.settings,c?c.apply(b,[b,f]):{});f.lastVal=null;a.timepicker._lastInput=b;a.timepicker._setTimeFromField(f);if(a.timepicker._inDialog)b.value="";if(!a.timepicker._pos)a.timepicker._pos=a.timepicker._findPos(b),a.timepicker._pos[1]+=b.offsetHeight;var g=!1;a(b).parents().each(function(){g|=a(this).css("position")=="fixed";return!g});g&&a.browser.opera&&(a.timepicker._pos[0]-=document.documentElement.scrollLeft,
a.timepicker._pos[1]-=document.documentElement.scrollTop);c={left:a.timepicker._pos[0],top:a.timepicker._pos[1]};a.timepicker._pos=null;f.tpDiv.css({position:"absolute",display:"block",top:"-1000px"});a.timepicker._updateTimepicker(f);f._hoursClicked=!1;f._minutesClicked=!1;c=a.timepicker._checkOffset(f,c,g);f.tpDiv.css({position:a.timepicker._inDialog&&a.blockUI?"static":g?"fixed":"absolute",display:"none",left:c.left+"px",top:c.top+"px"});if(!f.inline){c=a.timepicker._get(f,"showAnim");var h=a.timepicker._get(f,
"duration"),r=function(){a.timepicker._timepickerShowing=!0;var b=a.timepicker._getBorders(f.tpDiv);f.tpDiv.find("iframe.ui-timepicker-cover").css({left:-b[0],top:-b[1],width:f.tpDiv.outerWidth(),height:f.tpDiv.outerHeight()})};f.tpDiv.zIndex(a(b).zIndex()+1);if(a.effects&&a.effects[c])f.tpDiv.show(c,a.timepicker._get(f,"showOptions"),h,r);else f.tpDiv[c||"show"](c?h:null,r);(!c||!h)&&r();f.input.is(":visible")&&!f.input.is(":disabled")&&f.input.focus();a.timepicker._curInst=f}}},_updateTimepicker:function(b){var f=
this,e=a.timepicker._getBorders(b.tpDiv);b.tpDiv.empty().append(this._generateHTML(b)).find("iframe.ui-timepicker-cover").css({left:-e[0],top:-e[1],width:b.tpDiv.outerWidth(),height:b.tpDiv.outerHeight()}).end().find(".ui-timepicker td a").bind("mouseout",function(){a(this).removeClass("ui-state-hover");this.className.indexOf("ui-timepicker-prev")!=-1&&a(this).removeClass("ui-timepicker-prev-hover");this.className.indexOf("ui-timepicker-next")!=-1&&a(this).removeClass("ui-timepicker-next-hover")}).bind("mouseover",
function(){if(!f._isDisabledTimepicker(b.inline?b.tpDiv.parent()[0]:b.input[0]))a(this).parents(".ui-timepicker-calendar").find("a").removeClass("ui-state-hover"),a(this).addClass("ui-state-hover"),this.className.indexOf("ui-timepicker-prev")!=-1&&a(this).addClass("ui-timepicker-prev-hover"),this.className.indexOf("ui-timepicker-next")!=-1&&a(this).addClass("ui-timepicker-next-hover")}).end().find("."+this._dayOverClass+" a").trigger("mouseover").end()},_generateHTML:function(a){var f,e="",c=this._get(a,
"showPeriod")==!0,g=this._get(a,"showLeadingZero")==!0,h=this._get(a,"showMinutesLeadingZero")==!0,m=this._get(a,"amPmText");e='<table class="ui-timepicker-table ui-widget-content ui-corner-all"><tr><td class="ui-timepicker-hours"><div class="ui-timepicker-title ui-widget-header ui-helper-clearfix ui-corner-all">'+this._get(a,"hourText")+'</div><table class="ui-timepicker">';e+='<tr><th rowspan="2" class="periods">'+m[0]+"</th>";for(f=0;f<=5;f++)e+=this._generateHTMLHourCell(a,f,c,g);e+="</tr><tr>";
for(f=6;f<=11;f++)e+=this._generateHTMLHourCell(a,f,c,g);e+='</tr><tr><th rowspan="2" class="periods">'+m[1]+"</th>";for(f=12;f<=17;f++)e+=this._generateHTMLHourCell(a,f,c,g);e+="</tr><tr>";for(f=18;f<=23;f++)e+=this._generateHTMLHourCell(a,f,c,g);e+='</tr></table></td><td class="ui-timepicker-minutes"><div class="ui-timepicker-title ui-widget-header ui-helper-clearfix ui-corner-all">'+this._get(a,"minuteText")+'</div><table class="ui-timepicker"><tr>';for(f=0;f<15;f+=5)e+=this._generateHTMLMinuteCell(a,
f,f<10&&h?"0"+f.toString():f.toString());e+="</tr><tr>";for(f=15;f<30;f+=5)e+=this._generateHTMLMinuteCell(a,f,f.toString());e+="</tr><tr>";for(f=30;f<45;f+=5)e+=this._generateHTMLMinuteCell(a,f,f.toString());e+="</tr><tr>";for(f=45;f<60;f+=5)e+=this._generateHTMLMinuteCell(a,f,f.toString());e+="</tr></table></td></tr></table>";return e},_generateHTMLHourCell:function(a,f,e,c){var g=f;f>12&&e&&(g=f-12);g==0&&e&&(g=12);g<10&&c&&(g="0"+g);return'<td onclick="TP_jQuery_'+h+".timepicker.selectHours('#"+
a.id+"', "+f.toString()+', this ); return false;" ondblclick="TP_jQuery_'+h+".timepicker.selectHours('#"+a.id+"', "+f.toString()+', this, true ); return false;" ><a href="#" class="ui-state-default '+(f==a.hours?"ui-state-active":"")+'">'+g.toString()+"</a></td>"},_generateHTMLMinuteCell:function(a,f,e){return'<td onclick="TP_jQuery_'+h+".timepicker.selectMinutes('#"+a.id+"', "+f.toString()+', this ); return false;" ondblclick="TP_jQuery_'+h+".timepicker.selectMinutes('#"+a.id+"', "+f.toString()+
', this, true ); return false;" ><a href="#" class="ui-state-default '+(f==a.minutes?"ui-state-active":"")+'" >'+e+"</a></td>"},_isDisabledTimepicker:function(a){if(!a)return!1;for(var f=0;f<this._disabledInputs.length;f++)if(this._disabledInputs[f]==a)return!0;return!1},_checkOffset:function(b,f,e){var c=b.tpDiv.outerWidth(),g=b.tpDiv.outerHeight(),h=b.input?b.input.outerWidth():0,m=b.input?b.input.outerHeight():0,s=document.documentElement.clientWidth+a(document).scrollLeft(),t=document.documentElement.clientHeight+
a(document).scrollTop();f.left-=this._get(b,"isRTL")?c-h:0;f.left-=e&&f.left==b.input.offset().left?a(document).scrollLeft():0;f.top-=e&&f.top==b.input.offset().top+m?a(document).scrollTop():0;f.left-=Math.min(f.left,f.left+c>s&&s>c?Math.abs(f.left+c-s):0);f.top-=Math.min(f.top,f.top+g>t&&t>g?Math.abs(g+m):0);return f},_findPos:function(b){for(var f=this._get(this._getInst(b),"isRTL");b&&(b.type=="hidden"||b.nodeType!=1);)b=b[f?"previousSibling":"nextSibling"];b=a(b).offset();return[b.left,b.top]},
_getBorders:function(a){var f=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(f(a.css("border-left-width"))),parseFloat(f(a.css("border-top-width")))]},_checkExternalClick:function(b){a.timepicker._curInst&&(b=a(b.target),b[0].id!=a.timepicker._mainDivId&&b.parents("#"+a.timepicker._mainDivId).length==0&&!b.hasClass(a.timepicker.markerClassName)&&!b.hasClass(a.timepicker._triggerClass)&&a.timepicker._timepickerShowing&&(!a.timepicker._inDialog||!a.blockUI)&&a.timepicker._hideTimepicker())},
_hideTimepicker:function(b){var f=this._curInst;if(f&&!(b&&f!=a.data(b,"timepicker"))&&this._timepickerShowing){b=this._get(f,"showAnim");var e=this._get(f,"duration"),c=function(){a.timepicker._tidyDialog(f);this._curInst=null};if(a.effects&&a.effects[b])f.tpDiv.hide(b,a.timepicker._get(f,"showOptions"),e,c);else f.tpDiv[b=="slideDown"?"slideUp":b=="fadeIn"?"fadeOut":"hide"](b?e:null,c);b||c();(b=this._get(f,"onClose"))&&b.apply(f.input?f.input[0]:null,[f.input?f.input.val():"",f]);this._timepickerShowing=
!1;this._lastInput=null;this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),a.blockUI&&(a.unblockUI(),a("body").append(this.tpDiv)));this._inDialog=!1}},_tidyDialog:function(a){a.tpDiv.removeClass(this._dialogClass).unbind(".ui-timepicker")},_getInst:function(b){try{return a.data(b,"timepicker")}catch(f){throw"Missing instance data for this timepicker";}},_get:function(a,f){return a.settings[f]!==g?a.settings[f]:this._defaults[f]},_setTimeFromField:function(a){if(a.input.val()!=
a.lastVal){var f=this._get(a,"defaultTime"),e=this._getCurrentTimeRounded(a);f!=""&&(e=f);a.inline==!1&&a.input.val()!=""&&(e=a.input.val());f=a.lastVal=e;f=this.parseTime(a,f);a.hours=f.hours;a.minutes=f.minutes}},_getCurrentTimeRounded:function(a){var f=new Date;a=this._get(a,"timeSeparator");var e=f.getMinutes();e=Math.round(e/5)*5;return f.getHours().toString()+a+e.toString()},parseTime:function(a,f){var e={};e.hours=-1;e.minutes=-1;var c=this._get(a,"timeSeparator"),g=this._get(a,"amPmText");
c=f.indexOf(c);if(c==-1)return e;e.hours=parseInt(f.substr(0,c),10);e.minutes=parseInt(f.substr(c+1),10);c=this._get(a,"showPeriod")==!0;var h=f.toUpperCase();e.hours<12&&c&&h.indexOf(g[1].toUpperCase())!=-1&&(e.hours+=12);if(e.hours==12&&c&&h.indexOf(g[0].toUpperCase())!=-1)e.hours=0;return e},selectHours:function(b,f,e,c){b=this._getInst(a(b)[0]);a(e).parents(".ui-timepicker-hours:first").find("a").removeClass("ui-state-active");a(e).children("a").addClass("ui-state-active");b.hours=f;this._updateSelectedValue(b);
b._hoursClicked=!0;(b._minutesClicked||c)&&a.timepicker._hideTimepicker()},selectMinutes:function(b,f,e,c){b=this._getInst(a(b)[0]);a(e).parents(".ui-timepicker-minutes:first").find("a").removeClass("ui-state-active");a(e).children("a").addClass("ui-state-active");b.minutes=f;this._updateSelectedValue(b);b._minutesClicked=!0;(b._hoursClicked||c)&&a.timepicker._hideTimepicker()},_updateSelectedValue:function(a){if(a.hours<0||a.hours>23)a.hours=12;if(a.minutes<0||a.minutes>59)a.minutes=0;var f="",e=
this._get(a,"showPeriod")==!0,c=this._get(a,"showLeadingZero")==!0,g=this._get(a,"amPmText"),h=a.minutes?a.minutes:0,m=a.hours?a.hours:0;m||(displayHoyrs=0);e&&(a.hours==0&&(m=12),a.hours<12?f=g[0]:(f=g[1],m>12&&(m-=12)));e=m.toString();c&&m<10&&(e="0"+e);c=h.toString();h<10&&(c="0"+c);h=e+this._get(a,"timeSeparator")+c;f.length>0&&(h+=" "+f);a.input&&(a.input.val(h),a.input.trigger("change"));(f=this._get(a,"onSelect"))&&f.apply(a.input?a.input[0]:null,[h,a]);this._updateAlternate(a,h);return h},
_updateAlternate:function(b,f){var e=this._get(b,"altField");e&&a(e).each(function(){a(this).val(f)})}});a.fn.timepicker=function(b){if(!a.timepicker.initialized)a(document).mousedown(a.timepicker._checkExternalClick).find("body").append(a.timepicker.tpDiv),a.timepicker.initialized=!0;var f=Array.prototype.slice.call(arguments,1);if(typeof b=="string"&&(b=="isDisabled"||b=="getDate"||b=="widget"))return a.timepicker["_"+b+"Datepicker"].apply(a.timepicker,[this[0]].concat(f));if(b=="option"&&arguments.length==
2&&typeof arguments[1]=="string")return a.timepicker["_"+b+"Datepicker"].apply(a.timepicker,[this[0]].concat(f));return this.each(function(){typeof b=="string"?a.timepicker["_"+b+"Datepicker"].apply(a.timepicker,[this].concat(f)):a.timepicker._attachTimepicker(this,b)})};a.timepicker=new c;a.timepicker.initialized=!1;a.timepicker.uuid=(new Date).getTime();a.timepicker.version="1.8.6";window["TP_jQuery_"+h]=a})(jQuery);
(function(a){a.cluetip={version:"1.0.7"};var g,c,e,h,b,f,n,j;a.fn.cluetip=function(m,s){typeof m=="object"&&(s=m,m=null);if(m=="destroy")return this.removeData("thisInfo").unbind(".cluetip");return this.each(function(t){function y(){return!1}var v=this,u=a(this),p=a.extend(!0,{},a.fn.cluetip.defaults,s||{},a.metadata?u.metadata():a.meta?u.data():{}),A=!1,x=+p.cluezIndex;u.data("thisInfo",{title:v.title,zIndex:x});var w=!1,H=0;a("#cluetip").length||(a('<div id="cluetip"><div id="cluetip-outer"><h3 id="cluetip-title"></h3><div id="cluetip-inner"></div></div><div id="cluetip-extra"></div><div id="cluetip-arrows" class="cluetip-arrows"></div></div>')[k](r).hide(),
g=a("#cluetip").css({position:"absolute"}),e=a("#cluetip-outer").css({position:"relative",zIndex:x}),c=a("#cluetip-inner"),h=a("#cluetip-title"),b=a("#cluetip-arrows"),f=a('<div id="cluetip-waitimage"></div>').css({position:"absolute"}).insertBefore(g).hide());var M=p.dropShadow?+p.dropShadowSteps:0;if(!n){n=a([]);for(var z=0;z<M;z++)n=n.add(a("<div></div>").css({zIndex:x-1,opacity:0.1,top:1+z,left:1+z}));n.css({position:"absolute",backgroundColor:"#000"}).prependTo(g)}var N=u.attr(p.attribute),Q=
p.cluetipClass;if(!N&&!p.splitTitle&&!m)return!0;p.local&&p.localPrefix&&(N=p.localPrefix+N);p.local&&p.hideLocal&&a(N+":first").hide();var W=parseInt(p.topOffset,10),Z=parseInt(p.leftOffset,10),U,ba,F=isNaN(parseInt(p.height,10))?"auto":/\D/g.test(p.height)?p.height:p.height+"px",I,G,B,K,T,D=parseInt(p.width,10)||275,O=D+(parseInt(g.css("paddingLeft"),10)||0)+(parseInt(g.css("paddingRight"),10)||0)+M,Y=this.offsetWidth,S,J,L,aa,X,R=p.attribute!="title"?u.attr(p.titleAttribute):"";p.splitTitle&&(R==
void 0&&(R=""),X=R.split(p.splitTitle),R=X.shift());p.escapeTitle&&(R=R.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;"));var P=function(n){if(!p.onActivate(u))return!1;w=!0;g.removeClass().css({width:D});N==u.attr("href")&&u.css("cursor",p.cursor);p.hoverClass&&u.addClass(p.hoverClass);G=u.offset().top;S=u.offset().left;L=n.pageX;K=n.pageY;v.tagName.toLowerCase()!="area"&&(I=a(document).scrollTop(),aa=a(window).width());if(p.positionBy=="fixed")J=Y+S+Z,g.css({left:J});else{J=Y>S&&
S>O||S+Y+O+Z>aa?S-O-Z:Y+S+Z;if(v.tagName.toLowerCase()=="area"||p.positionBy=="mouse"||Y+O>aa)L+20+O>aa?(g.addClass(" cluetip-"+Q),J=L-O-Z>=0?L-O-Z-parseInt(g.css("marginLeft"),10)+parseInt(c.css("marginRight"),10):L-O/2):J=L+Z;var h=J<0?n.pageY+W:n.pageY;g.css({left:J>0&&p.positionBy!="bottomTop"?J:L+O/2>aa?aa/2-O/2:Math.max(L-O/2,0),zIndex:u.data("thisInfo").zIndex});b.css({zIndex:u.data("thisInfo").zIndex+1})}ba=a(window).height();if(m)typeof m=="function"&&(m=m.call(v)),c.html(m),C(h);else if(X){n=
X.length;c.html(n?X[0]:"");if(n>1)for(var k=1;k<n;k++)c.append('<div class="split-body">'+X[k]+"</div>");C(h)}else if(!p.local&&N.indexOf("#")!==0)if(/\.(jpe?g|tiff?|gif|png)$/i.test(N))c.html('<img src="'+N+'" alt="'+R+'" />'),C(h);else if(A&&p.ajaxCache)c.html(A),C(h);else{var r=p.ajaxSettings.beforeSend,s=p.ajaxSettings.error,o=p.ajaxSettings.success,y=p.ajaxSettings.complete;n=a.extend(!0,{},p.ajaxSettings,{cache:!1,url:N,beforeSend:function(a){r&&r.call(v,a,g,c);e.children().empty();p.waitImage&&
f.css({top:K+20,left:L+20,zIndex:u.data("thisInfo").zIndex-1}).show()},error:function(a,b){w&&(s?s.call(v,a,b,g,c):c.html("<i>sorry, the contents could not be loaded</i>"))},success:function(a,b){A=p.ajaxProcess.call(v,a);w&&(o&&o.call(v,a,b,g,c),c.html(A))},complete:function(b,e){y&&y.call(v,b,e,g,c);var n=c[0].getElementsByTagName("img");j=n.length;for(var k=0,m=n.length;k<m;k++)n[k].complete&&j--;j&&!a.browser.opera?a(n).bind("load error",function(){j--;j<1&&(f.hide(),w&&C(h))}):(f.hide(),w&&C(h))}});
a.ajax(n)}else p.local&&(n=a(N+(/#\S+$/.test(N)?"":":eq("+t+")")).clone(!0).show(),c.html(n),C(h))},C=function(f){g.addClass("cluetip-"+Q);if(p.truncate){var j=c.text().slice(0,p.truncate)+"...";c.html(j)}R?h.show().html(R):p.showTitle?h.show().html("&nbsp;"):h.hide();p.sticky&&(j=a('<div id="cluetip-close"><a href="#">'+p.closeText+"</a></div>"),p.closePosition=="bottom"?j.appendTo(c):p.closePosition=="title"?j.prependTo(h):j.prependTo(c),j.bind("click.cluetip",function(){V();return!1}),p.mouseOutClose?
g.bind("mouseleave.cluetip",function(){V()}):g.unbind("mouseleave.cluetip"));j="";e.css({zIndex:u.data("thisInfo").zIndex,overflow:F=="auto"?"visible":"auto",height:F});U=F=="auto"?Math.max(g.outerHeight(),g.height()):parseInt(F,10);B=G;T=I+ba;p.positionBy=="fixed"?B=G-p.dropShadowSteps+W:J<L&&Math.max(J,0)+O>L||p.positionBy=="bottomTop"?G+U+W>T&&K-I>U+W?(B=K-U-W,j="top"):(B=K+W,j="bottom"):B=G+U+W>T?U>=ba?I:T-U-W:u.css("display")=="block"||v.tagName.toLowerCase()=="area"||p.positionBy=="mouse"?f-
W:G-p.dropShadowSteps;j==""&&(J<S?j="left":j="right");g.css({top:B+"px"}).removeClass().addClass("clue-"+j+"-"+Q).addClass(" cluetip-"+Q);p.arrows?(f=G-B-p.dropShadowSteps,b.css({top:/(left|right)/.test(j)&&J>=0&&f>0?f+"px":/(left|right)/.test(j)?0:""}).show()):b.hide();n.hide();g.hide()[p.fx.open](p.fx.openSpeed||0);p.dropShadow&&n.css({height:U,width:D,zIndex:u.data("thisInfo").zIndex-1}).show();a.fn.bgiframe&&g.bgiframe();p.delayedClose>0&&(H=setTimeout(V,p.delayedClose));p.onShow.call(v,g,c)},
o=function(){w=!1;f.hide();if(!p.sticky||/click|toggle/.test(p.activation))V(),clearTimeout(H);p.hoverClass&&u.removeClass(p.hoverClass)},V=function(){e.parent().hide().removeClass();p.onHide.call(v,g,c);u.removeClass("cluetip-clicked");R&&u.attr(p.titleAttribute,R);u.css("cursor","");p.arrows&&b.css({top:""})};a(document).bind("hideCluetip",function(){V()});if(/click|toggle/.test(p.activation))u.bind("click.cluetip",function(b){g.is(":hidden")||!u.is(".cluetip-clicked")?(P(b),a(".cluetip-clicked").removeClass("cluetip-clicked"),
u.addClass("cluetip-clicked")):o(b);this.blur();return!1});else if(p.activation=="focus")u.bind("focus.cluetip",function(a){P(a)}),u.bind("blur.cluetip",function(a){o(a)});else{u[p.clickThrough?"unbind":"bind"]("click",y);var ca=function(a){if(p.tracking==!0){var b=J-a.pageX,f=B?B-a.pageY:G-a.pageY;u.bind("mousemove.cluetip",function(a){g.css({left:a.pageX+b,top:a.pageY+f})})}};a.fn.hoverIntent&&p.hoverIntent?u.hoverIntent({sensitivity:p.hoverIntent.sensitivity,interval:p.hoverIntent.interval,over:function(a){P(a);
ca(a)},timeout:p.hoverIntent.timeout,out:function(a){o(a);u.unbind("mousemove.cluetip")}}):u.bind("mouseenter.cluetip",function(a){P(a);ca(a)}).bind("mouseleave.cluetip",function(a){o(a);u.unbind("mousemove.cluetip")});u.bind("mouseover.cluetip",function(){u.attr("title","")}).bind("mouseleave.cluetip",function(){u.attr("title",u.data("thisInfo").title)})}})};a.fn.cluetip.defaults={width:275,height:"auto",cluezIndex:97,positionBy:"auto",topOffset:15,leftOffset:15,local:!1,localPrefix:null,hideLocal:!0,
attribute:"rel",titleAttribute:"title",splitTitle:"",escapeTitle:!1,showTitle:!0,cluetipClass:"default",hoverClass:"",waitImage:!0,cursor:"help",arrows:!1,dropShadow:!0,dropShadowSteps:6,sticky:!1,mouseOutClose:!1,activation:"hover",clickThrough:!1,tracking:!1,delayedClose:0,closePosition:"top",closeText:"Close",truncate:0,fx:{open:"show",openSpeed:""},hoverIntent:{sensitivity:3,interval:50,timeout:0},onActivate:function(){return!0},onShow:function(){},onHide:function(){},ajaxCache:!0,ajaxProcess:function(a){return a=
a.replace(/<(script|style|title)[^<]+<\/(script|style|title)>/gm,"").replace(/<(link|meta)[^>]+>/g,"")},ajaxSettings:{dataType:"html"},debug:!1};var k="appendTo",r="body";a.cluetip.setup=function(a){if(a&&a.insertionType&&a.insertionType.match(/appendTo|prependTo|insertBefore|insertAfter/))k=a.insertionType;if(a&&a.insertionElement)r=a.insertionElement}})(jQuery);
jQuery&&function(a){function g(a,b,e){for(var c="",h=0;h<b.length;h++)if(b[h].optgroup)c+='<label class="optGroup">',c+=e.optGroupSelectable?'<input type="checkbox" class="optGroup" />'+b[h].optgroup:b[h].optgroup,c+='</label><div class="optGroupContainer">',c+=g(a,b[h].options,e),c+="</div>";else{var m=b[h],s='<label><input type="checkbox" name="'+a+'[]" value="'+m.value+'"';m.selected&&(s+=' checked="checked"');s+=" />"+m.text+"</label>";c+=s}return c}function c(f){var c=a(this),j=c.next(".multiSelectOptions"),
k=c.data("config"),r=c.data("callback");j.html("");var m="";k.selectAll&&(m+='<label class="selectAll"><input type="checkbox" class="selectAll" />'+k.selectAllText+"</label>");m+=g(c.attr("id"),f,k);j.html(m);f=j.width();m=!1;j.height()>k.listHeight?(j.css("height",k.listHeight+"px"),m=!0):j.css("height","");f=m&&f==j.width()?17:0;j.width()+f<c.outerWidth()?j.css("width",c.outerWidth()-2+"px"):j.css("width",j.width()+f+"px");a.fn.bgiframe&&c.next(".multiSelectOptions").bgiframe({width:j.width(),height:j.height()});
k.selectAll&&j.find("INPUT.selectAll").click(function(){j.find("INPUT:checkbox").attr("checked",a(this).attr("checked")).parent("LABEL").toggleClass("checked",a(this).attr("checked"))});k.optGroupSelectable&&(j.addClass("optGroupHasCheckboxes"),j.find("INPUT.optGroup").click(function(){a(this).parent().next().find("INPUT:checkbox").attr("checked",a(this).attr("checked")).parent("LABEL").toggleClass("checked",a(this).attr("checked"))}));j.find("INPUT:checkbox").click(function(){a(this).parent("LABEL").toggleClass("checked",
a(this).attr("checked"));b.call(c);c.focus();a(this).parent().parent().hasClass("optGroupContainer")&&h.call(c,a(this).parent().parent().prev());r&&r(a(this))});j.each(function(){a(this).find("INPUT:checked").parent().addClass("checked")});b.call(c);k.optGroupSelectable&&j.find("LABEL.optGroup").each(function(){h.call(c,a(this))});j.find("LABEL:has(INPUT)").hover(function(){a(this).parent().find("LABEL").removeClass("hover");a(this).addClass("hover")},function(){a(this).parent().find("LABEL").removeClass("hover")});
c.keydown(function(f){var g=a(this).next(".multiSelectOptions");if(g.css("visibility")!="hidden"){if(f.keyCode==9)return a(this).addClass("focus").trigger("click"),a(this).focus().next(":input").focus(),!0;(f.keyCode==27||f.keyCode==37||f.keyCode==39)&&a(this).addClass("focus").trigger("click");if(f.keyCode==40||f.keyCode==38){var h=g.find("LABEL"),j=h.index(h.filter(".hover")),k=-1;j<0?g.find("LABEL:first").addClass("hover"):f.keyCode==40&&j<h.length-1?k=j+1:f.keyCode==38&&j>0&&(k=j-1);k>=0&&(a(h.get(j)).removeClass("hover"),
a(h.get(k)).addClass("hover"),e(g));return!1}if(f.keyCode==13||f.keyCode==32)return f=g.find("LABEL.hover INPUT:checkbox"),f.attr("checked",!f.attr("checked")).parent("LABEL").toggleClass("checked",f.attr("checked")),f.hasClass("selectAll")&&g.find("INPUT:checkbox").attr("checked",f.attr("checked")).parent("LABEL").addClass("checked").toggleClass("checked",f.attr("checked")),b.call(c),r&&r(a(this)),!1;if(f.keyCode>=33&&f.keyCode<=126){h=g.find("LABEL:startsWith("+String.fromCharCode(f.keyCode)+")");
var m=h.index(h.filter("LABEL.hover"));j=h.filter(function(a){return a>m});h=(j.length>=1?j:h).filter("LABEL:first");h.length==1&&(g.find("LABEL.hover").removeClass("hover"),h.addClass("hover"),e(g))}}else{if(f.keyCode==38||f.keyCode==40||f.keyCode==13||f.keyCode==32)return a(this).removeClass("focus").trigger("click"),g.find("LABEL:first").addClass("hover"),!1;if(f.keyCode==9)return g.next(":input").focus(),!0}if(f.keyCode==13)return!1})}function e(a){var b=a.find("LABEL.hover").position().top+a.find("LABEL.hover").outerHeight();
b>a.innerHeight()&&a.scrollTop(a.scrollTop()+b-a.innerHeight());a.find("LABEL.hover").position().top<0&&a.scrollTop(a.scrollTop()+a.find("LABEL.hover").position().top)}function h(b){if(a(this).data("config").optGroupSelectable){var e=!0;a(b).next().find("INPUT:checkbox").each(function(){if(!a(this).attr("checked"))return e=!1});a(b).find("INPUT.optGroup").attr("checked",e).parent("LABEL").toggleClass("checked",e)}}function b(){var b=a(this),e=b.next(".multiSelectOptions"),c=b.data("config"),g=0,h=
!0,m="";e.find("INPUT:checkbox").not(".selectAll, .optGroup").each(function(){a(this).attr("checked")?(g++,m=m+a(this).parent().text()+", "):h=!1});m=m.replace(/\s*\,\s*$/,"");g==0?b.find("span").html(c.noneSelected):c.oneOrMoreSelected=="*"?(b.find("span").html(m),b.attr("title",m)):b.find("span").html(c.oneOrMoreSelected.replace("%",g));c.selectAll&&e.find("INPUT.selectAll").attr("checked",h).parent("LABEL").toggleClass("checked",h)}a.extend(a.fn,{multiSelect:function(b,e){b||(b={});if(b.selectAll==
void 0)b.selectAll=!0;if(b.selectAllText==void 0)b.selectAllText="Select All";if(b.noneSelected==void 0)b.noneSelected="Select options";if(b.oneOrMoreSelected==void 0)b.oneOrMoreSelected="% selected";if(b.optGroupSelectable==void 0)b.optGroupSelectable=!1;if(b.listHeight==void 0)b.listHeight=150;a(this).each(function(){var g=a(this),h='<a href="javascript:;" class="multiSelect"><span></span></a>';h+='<div class="multiSelectOptions" style="position: absolute; z-index: 99999; visibility: hidden;"></div>';
a(g).after(h);var r=a(g).next(".multiSelect");r.next(".multiSelectOptions");r.find("span").css("width",a(g).width()+"px");r.data("config",b);r.data("callback",e);var m=[];a(g).children().each(function(){if(this.tagName.toUpperCase()=="OPTGROUP"){var b=[];m.push({optgroup:a(this).attr("label"),options:b});a(this).children("OPTION").each(function(){a(this).val()!=""&&b.push({text:a(this).html(),value:a(this).val(),selected:a(this).attr("selected")})})}else this.tagName.toUpperCase()=="OPTION"&&a(this).val()!=
""&&m.push({text:a(this).html(),value:a(this).val(),selected:a(this).attr("selected")})});a(g).remove();r.attr("id",a(g).attr("id"));c.call(r,m);r.hover(function(){a(this).addClass("hover")},function(){a(this).removeClass("hover")}).click(function(){a(this).hasClass("active")?a(this).multiSelectOptionsHide():a(this).multiSelectOptionsShow();return!1}).focus(function(){a(this).addClass("focus")}).blur(function(){a(this).removeClass("focus")});a(document).click(function(b){a(b.target).parents().andSelf().is(".multiSelectOptions")||
r.multiSelectOptionsHide()})})},multiSelectOptionsUpdate:function(b){c.call(a(this),b)},multiSelectOptionsHide:function(){a(this).removeClass("active").removeClass("hover").next(".multiSelectOptions").css("visibility","hidden")},multiSelectOptionsShow:function(){var b=a(this),e=b.next(".multiSelectOptions");b.data("config");a(".multiSelect").multiSelectOptionsHide();e.find("LABEL").removeClass("hover");b.addClass("active").next(".multiSelectOptions").css("visibility","visible");b.focus();b.next(".multiSelectOptions").scrollTop(0);
e=b.position();b.next(".multiSelectOptions").css({top:e.top+a(this).outerHeight()+"px"});b.next(".multiSelectOptions").css({left:e.left+"px"})},selectedValuesString:function(){var b="";a(this).next(".multiSelectOptions").find("INPUT:checkbox:checked").not(".optGroup, .selectAll").each(function(){b+=a(this).attr("value")+","});return b.replace(/\s*\,\s*$/,"")}});a.expr[":"].startsWith=function(b,e,c){e=c[3];if(!e)return!1;return eval("/^[/s]*"+e+"/i").test(a(b).text())}}(jQuery);
var S3MultiselectWidgetFileCounter=0;
function S3MultiselectWidgetAddClick(a){var g=a.WidgetID,c=[/DummyDisplay0/g,/DummyDisplay1/g,/DummyDisplay2/g,/DummyDisplay3/g,/DummyDisplay4/g],e=[/DummyJSON0/g,/DummyJSON1/g,/DummyJSON2/g,/DummyJSON3/g,/DummyJSON4/g],h=$("#"+g+"_json").val(),b="{",f,n=!0,j=a.NewRow,k="",r="";for(i=0;i<a.ColumnFields.length;i++){var m="#"+g+"_"+a.ColumnFields[i],s=$(m),t=$(m+"_auto_text").val();DisplayValue="";if(s.is("select"))f="'"+s.val()+"'",DisplayValue=$(m+" option:selected").text(),s.val("");else if(t!=void 0){DisplayValue=
t;f=$(m+"_auto_json").val();if(a.ColumnFields[i].slice(-3)=="_id"&&f==""){DisplayValue="";break}$(m+"_auto_text").val("");$(m+"_auto_json").val("");$(m+"_auto_edit").hide()}else s.attr("type")=="file"?(DisplayValue=s.val(),DisplayValue!=""&&(k=m,r=a.ColumnFields[i]+S3MultiselectWidgetFileCounter,f="'"+r+"'",S3MultiselectWidgetFileCounter++)):(DisplayValue=s.val(),s.val(""),s.attr("class")=="currency"&&(DisplayValue=f.replace("$","")),DisplayValue=DisplayValue.replace(/'/g,'"'),f="'"+DisplayValue+
"'");DisplayValue!=""&&(n=!1);j=j.replace(c[i],DisplayValue);j=j.replace(e[i],f);b=b+"'"+a.ColumnFields[i]+"':"+f+","}b=b.slice(0,-1)+"}";!n&&!h.match(b)&&(h!=""&&(h+=","),h+=b,$("#"+g+"_json").val(h),$(j).insertBefore("#"+a.WidgetID+"_input_row"),k!=""&&($(k).attr("id",r),$("#"+r).attr("name",r),$("#"+r).hide(),$('<input class="upload" id="drrpp_framework_file_dummy_file" type="file" />').insertAfter("#"+r)))}
function S3MultiselectWidgetDeleteClick(a,g){var c=g.WidgetID,e=$(a).attr("row_id");$("#"+g.DummyName).val();var h=$("#"+c+"_json").val();$(a).parent().parent().remove();if(e!="New")h!=""&&(h+=","),h=h+"{'id':'"+e+"','deleted':True},";else{e="{";for(i=0;i<g.ColumnFields.length;i++)e=e+"'"+g.ColumnFields[i]+"':'"+$(a).attr(g.ColumnFields[i])+"',";e=e.slice(0,-1)+"}";h=h.replace(e,"")}h=h.replace(",,",",");h.slice(-1)==","&&(h=h.slice(0,-1));$("#"+c+"_json").val(h)}
(function(a,g){function c(e){return!a(e).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};a.ui.version||(a.extend(a.ui,{version:"1.8.11",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,
PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({_focus:a.fn.focus,focus:function(e,c){return typeof e==="number"?this.each(function(){var b=this;setTimeout(function(){a(b).focus();c&&c.call(b)},e)}):this._focus.apply(this,arguments)},scrollParent:function(){var e;e=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,
"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!e.length?a(document):e},zIndex:function(e){if(e!==g)return this.css("zIndex",e);if(this.length){e=a(this[0]);for(var c;e.length&&e[0]!==document;){c=e.css("position");
if(c==="absolute"||c==="relative"||c==="fixed")if(c=parseInt(e.css("zIndex"),10),!isNaN(c)&&c!==0)return c;e=e.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.each(["Width","Height"],function(e,c){function b(b,e,c,g){a.each(f,function(){e-=parseFloat(a.curCSS(b,"padding"+this,!0))||0;c&&(e-=parseFloat(a.curCSS(b,
"border"+this+"Width",!0))||0);g&&(e-=parseFloat(a.curCSS(b,"margin"+this,!0))||0)});return e}var f=c==="Width"?["Left","Right"]:["Top","Bottom"],n=c.toLowerCase(),j={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+c]=function(f){if(f===g)return j["inner"+c].call(this);return this.each(function(){a(this).css(n,b(this,f)+"px")})};a.fn["outer"+c]=function(f,e){if(typeof f!=="number")return j["outer"+c].call(this,f);return this.each(function(){a(this).css(n,
b(this,f,!0,e)+"px")})}}),a.extend(a.expr[":"],{data:function(e,c,b){return!!a.data(e,b[3])},focusable:function(e){var g=e.nodeName.toLowerCase(),b=a.attr(e,"tabindex");if("area"===g){g=e.parentNode;b=g.name;if(!e.href||!b||g.nodeName.toLowerCase()!=="map")return!1;e=a("img[usemap=#"+b+"]")[0];return!!e&&c(e)}return(/input|select|textarea|button|object/.test(g)?!e.disabled:"a"==g?e.href||!isNaN(b):!isNaN(b))&&c(e)},tabbable:function(e){var c=a.attr(e,"tabindex");return(isNaN(c)||c>=0)&&a(e).is(":focusable")}}),
a(function(){var e=document.body,c=e.appendChild(c=document.createElement("div"));a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});a.support.minHeight=c.offsetHeight===100;a.support.selectstart="onselectstart"in c;e.removeChild(c).style.display="none"}),a.extend(a.ui,{plugin:{add:function(e,c,b){e=a.ui[e].prototype;for(var f in b)e.plugins[f]=e.plugins[f]||[],e.plugins[f].push([c,b[f]])},call:function(a,c,b){if((c=a.plugins[c])&&a.element[0].parentNode)for(var f=0;f<c.length;f++)a.options[c[f][0]]&&
c[f][1].apply(a.element,b)}},contains:function(a,c){return document.compareDocumentPosition?a.compareDocumentPosition(c)&16:a!==c&&a.contains(c)},hasScroll:function(c,g){if(a(c).css("overflow")==="hidden")return!1;var b=g&&g==="left"?"scrollLeft":"scrollTop",f=!1;if(c[b]>0)return!0;c[b]=1;f=c[b]>0;c[b]=0;return f},isOverAxis:function(a,c,b){return a>c&&a<c+b},isOver:function(c,g,b,f,n,j){return a.ui.isOverAxis(c,b,n)&&a.ui.isOverAxis(g,f,j)}}))})(jQuery);var s3_gis_pullNext;
function s3_gis_dropdown_select(a,g){s3_gis_pullNext=!1;var c=$("#gis_location_name").val(),e=$("#gis_location_lat").val(),h=$("#gis_location_lon").val(),b=$("#gis_location_addr_street").val(),f=$("#gis_location_postcode").val();c=c&&e&&h&&b&&f;if((e=$("#gis_location_L"+a).val())||g){var n;$.getJSONS3(a==s3_gis_maxlevel?s3_gis_url+"/search.json?filter=%3D&field=level&value=nullnone&parent="+e:s3_gis_url+"/search.json?filter=%3D&field=level&value=L"+(a+1)+"&parent="+e,function(b){if(b.length==0)n=
s3_gis_empty_set;else if(b.length==1)n='<option value="'+b[0].id+'">'+b[0].name+"</option>",s3_gis_pullNext=!0;else{n=s3_gis_select_location;for(var f=0;f<b.length;f++)n+='<option value="'+b[f].id+'">'+b[f].name+"</option>"}a==s3_gis_maxlevel?$("#gis_location_").html(n):$("#gis_location_L"+(a+1)).html(n)},!1,!0);a==s3_gis_maxlevel?n!=s3_gis_empty_set&&($("#gis_location_").removeClass("hidden").show(),$("#gis_location_label_").removeClass("hidden").show(),$("#gis_location_details-btn").removeClass("hidden").show()):
($("#gis_location_L"+(a+1)).removeClass("hidden").show(),$("#gis_location_label_L"+(a+1)).removeClass("hidden").show(),$("#gis_location_details-btn").removeClass("hidden").show());s3_gis_dropdown_hide(a+2);s3_gis_pullNext?(e=$("#gis_location_L"+(a+1)).val(),c||$("#"+s3_gis_location_id).val(e),s3_gis_dropdown_select(a+1)):c||$("#"+s3_gis_location_id).val(e)}else s3_gis_dropdown_hide(a+1),0==a&&!c&&$("#"+s3_gis_location_id).val("")}
function s3_gis_dropdown_hide(a){for(l=a;l<=parseInt(s3_gis_maxlevel);l+=1)$("#gis_location_L"+l).hide().html(s3_gis_loading_locations),$("#gis_location_label_L"+l).hide();a<parseInt(s3_gis_maxlevel)+2&&($("#gis_location_").hide().html(s3_gis_loading_locations),$("#gis_location_label_").hide(),$("#gis_location_details-btn").hide())}
function s3_gis_save_location(a,g,c,e,h){var b=$("#gis_location_L5").val();if(void 0==b||""==b)if(b=$("#gis_location_L4").val(),void 0==b||""==b)if(b=$("#gis_location_L3").val(),void 0==b||""==b)if(b=$("#gis_location_L2").val(),void 0==b||""==b)if(b=$("#gis_location_L1").val(),void 0==b||""==b)b=$("#gis_location_L0").val();a=""==S3.gis.uuid?s3_gis_url+"/create.url?name="+a:s3_gis_url+"/update.url?uuid="+S3.gis.uuid+"&name="+a;""==g||""==c||(a=a+"&lat="+g+"&lon="+c);""!=e&&(a=a+"&addr_street="+e.replace(/\n/g,
"%0d"));""!=h&&(a=a+"&addr_postcode="+h);void 0==b||""==b||(a=a+"&parent="+b);$.ajax({async:!1,url:a,dataType:"json",success:function(a){""==S3.gis.uuid&&a.status=="success"&&(a=a.message.split("=")[1],$("#"+s3_gis_location_id).val(a))}})}function s3_gis_geolocate(a){var g=a.coords.latitude;a=a.coords.longitude;$("#gis_location_lat").val(g);$("#gis_location_lon").val(a)}var s3_gis_calcDone=!1,s3_gis_calcAnswer;
function s3_gis_convertDD(){var a=$("#DDMMSS_deg").val(),g=$("#DDMMSS_min").val(),c=$("#DDMMSS_sec").val(),e=!1;if(a=="")a=0;else if(isNaN(a)||a>180||a<-180)alert(s3_gis_degrees_validation_error),e=!0;if(g=="")g=0;else if(isNaN(g)||g>60||g<0)alert(s3_gis_minutes_validation_error),e=!0;if(c=="")c=0;else if(isNaN(c)||c>60||c<0)alert(s3_gis_seconds_validation_error),e=!0;e==!1&&(g=g*1+c/60,s3_gis_calcAnswer=a>0?a*1+g/60:a*1-g/60,$("#DDMMSS_dec").val(s3_gis_calcAnswer),s3_gis_calcDone=!0)}
function s3_gis_convertGps(){var a=0,g=0;a=$("#gps_deg").val();g=$("#gps_min").val();var c=!1;if(a=="")a=0;else if(isNaN(a)||a>180||a<-180)alert(s3_gis_degrees_validation_error),c=!0;if(g=="")g=0;else if(isNaN(g)||g>60||g<0)alert(s3_gis_minutes_validation_error),c=!0;c==!1&&(s3_gis_calcAnswer=a>0?a*1+g/60:a*1-g/60,$("#gps_dec").val(s3_gis_calcAnswer),s3_gis_calcDone=!0)}
function s3_gis_convertFillBack(a){if(s3_gis_calcDone==!0)return a==1?$("#gis_location_lat").attr("value",s3_gis_calcAnswer):$("#gis_location_lon").attr("value",s3_gis_calcAnswer),!0;else alert(s3_gis_no_calculations_error);return!1}
$(function(){if(typeof s3_gis_location_id!="undefined"){$("#gis_location_L0").change(function(){s3_gis_dropdown_select(0)});$("#gis_location_L1").change(function(){s3_gis_dropdown_select(1)});$("#gis_location_L2").change(function(){s3_gis_dropdown_select(2)});$("#gis_location_L3").change(function(){s3_gis_dropdown_select(3)});$("#gis_location_L4").change(function(){s3_gis_dropdown_select(4)});$("#gis_location_").change(function(){var a=$(this).val();""==$("#gis_location_name").val()&&$("#"+s3_gis_location_id).val(a)});
$("#gis_location_add-btn").click(function(a){if(""!=S3.gis.uuid)$("body").data("uuid",S3.gis.uuid),S3.gis.uuid="";var c=$("#gis_location_lat").val(),e=$("#gis_location_lat").val();if(""!=c||""!=e)$("body").data("lat",c),$("body").data("lon",e),$("#gis_location_lat").val(""),$("#gis_location_lon").val("");$("#gis_location_add-btn").hide();$("#gis_location_cancel-btn").removeClass("hidden").show();$("#gis_location_").hide();$("#gis_location_label_").hide();navigator.geolocation&&$("#gis_location_geolocate-btn").removeClass("hidden").show();
$("#gis_location_map-btn").removeClass("hidden").show();$("#gis_location_name_label").removeClass("hidden").show();$("#gis_location_name").removeClass("hidden").show();$("#gis_location_addr_street_label").removeClass("hidden").show();$("#gis_location_addr_street_row").removeClass("hidden").show();$("#gis_location_postcode_label").removeClass("hidden").show();$("#gis_location_postcode_row").removeClass("hidden").show();$("#gis_location_advanced_div").removeClass("hidden").show();a.preventDefault()});
$("#gis_location_advanced_checkbox").change(function(a){$("#gis_location_advanced_checkbox").is(":checked")?($("#gis_location_lat_label").removeClass("hidden").show(),$("#gis_location_lat_row").removeClass("hidden").show(),$("#gis_location_lon_label").removeClass("hidden").show(),$("#gis_location_lon_row").removeClass("hidden").show()):($("#gis_location_lat_label").hide(),$("#gis_location_lat_row").hide(),$("#gis_location_lon_label").hide(),$("#gis_location_lon_row").hide());a.preventDefault()});
$("#gis_location_search-btn").click(function(a){$(this).hide();$("#gis_location_autocomplete_div").removeClass("hidden").show();a.preventDefault()});$("#gis_location_details-btn").click(function(a){$("#gis_location_map-btn").removeClass("hidden").show();$("#gis_location_addr_street_label").removeClass("hidden").show();$("#gis_location_addr_street_row").removeClass("hidden").show();$("#gis_location_postcode_label").removeClass("hidden").show();$("#gis_location_postcode_row").removeClass("hidden").show();
$("#gis_location_advanced_div").removeClass("hidden").show();a.preventDefault()});$("#gis_location_cancel-btn").click(function(a){S3.gis.uuid=$("body").data("uuid");$("#gis_location_lat").val($("body").data("lat"));$("#gis_location_lon").val($("body").data("lon"));$("#gis_location_cancel-btn").hide();$("#gis_location_name").val("");$("#gis_location_add-btn").show();""!=$("#gis_location_").val()&&($("#gis_location_").show(),$("#gis_location_label_").show(),$("#gis_location_details-btn").show());$("#gis_location_map-btn").hide();
$("#gis_location_name_label").hide();$("#gis_location_name").hide();$("#gis_location_addr_street_label").hide();$("#gis_location_addr_street_row").hide();$("#gis_location_postcode_label").hide();$("#gis_location_postcode_row").hide();$("#gis_location_advanced_div").hide();a.preventDefault()});$("#gis_location_geolocate-btn").click(function(a){navigator.geolocation.getCurrentPosition(s3_gis_geolocate);a.preventDefault()});var a={val:$("#gis_location_autocomplete").val(),accept:!1};$("#gis_location_autocomplete").autocomplete({source:s3_gis_url+
"/search.json?filter=~&field=name&exclude_field=level&exclude_value=XX",minLength:2,focus:function(a,c){$("#gis_location_autocomplete").val(c.item.name);return!1},select:function(g,c){$("#gis_location_autocomplete").val(c.item.name);$("#"+s3_gis_location_id).val(c.item.id);a.accept=!0;var e=c.item.path,h=c.item.id,b,f,n,j,k=[];switch(c.item.level){case "L0":$("#gis_location_L0").val(h);$("#"+s3_gis_location_id).val(h);s3_gis_dropdown_select(0);break;case "L1":if(e)if(e=e.split("/"),e.length==2&&e[1]==
h)$("#gis_location_L0").val(e[0]);else{s3_gis_dropdown_select(0,!0);$("#gis_location_L1").val(h);$("#"+s3_gis_location_id).val(h);break}s3_gis_dropdown_select(0,!0);$("#gis_location_L1").val(h);$("#"+s3_gis_location_id).val(h);s3_gis_dropdown_select(1);break;case "L2":if(e)if(e=e.split("/"),e.length==3&&e[2]==h)$("#gis_location_L0").val(e[0]),b=e[1];else if(e.length==2&&e[1]==h)void 0!=$("#gis_location_L0 option[value="+e[0]+"]")[0]?$("#gis_location_L0").val(e[0]):b=e[0];else{s3_gis_dropdown_select(1,
!0);$("#gis_location_L2").val(h);$("#"+s3_gis_location_id).val(h);break}s3_gis_dropdown_select(0,!0);$("#gis_location_L1").val(b);s3_gis_dropdown_select(1,!0);$("#gis_location_L2").val(h);$("#"+s3_gis_location_id).val(h);s3_gis_dropdown_select(2);break;case "L3":if(e)if(e=e.split("/"),e.length==4&&e[3]==h)$("#gis_location_L0").val(e[0]),b=e[1],f=e[2];else if(e.length==3&&e[2]==h)void 0!=$("#gis_location_L0 option[value="+e[0]+"]")[0]?($("#gis_location_L0").val(e[0]),k=[e[1]]):(b=e[0],f=e[1]);else if(e.length==
2&&e[1]==h)void 0!=$("#gis_location_L0 option[value="+e[0]+"]")[0]?$("#gis_location_L0").val(e[0]):k=[e[0]];else{s3_gis_dropdown_select(2,!0);$("#gis_location_L3").val(h);$("#"+s3_gis_location_id).val(h);break}s3_gis_dropdown_select(0,!0);k[0]&&void 0!=$("#gis_location_L1 option[value="+k[0]+"]")[0]&&(b=k[0]);$("#gis_location_L1").val(b);s3_gis_dropdown_select(1,!0);k[0]&&void 0!=$("#gis_location_L2 option[value="+k[0]+"]")[0]&&(f=k[0]);$("#gis_location_L2").val(f);s3_gis_dropdown_select(2,!0);$("#gis_location_L3").val(h);
$("#"+s3_gis_location_id).val(h);s3_gis_dropdown_select(3);break;case "L4":if(e)if(e=e.split("/"),e.length==5&&e[4]==h)$("#gis_location_L0").val(e[0]),b=e[1],f=e[2],n=e[3];else if(e.length==4&&e[3]==h)void 0!=$("#gis_location_L0 option[value="+e[0]+"]")[0]?($("#gis_location_L0").val(e[0]),k=[e[1],e[2]]):k=[e[0],e[1],e[2]];else if(e.length==3&&e[2]==h)void 0!=$("#gis_location_L0 option[value="+e[0]+"]")[0]?($("#gis_location_L0").val(e[0]),k=[e[1]]):k=[e[0],e[1]];else if(e.length==2&&e[1]==h)void 0!=
$("#gis_location_L0 option[value="+e[0]+"]")[0]?$("#gis_location_L0").val(e[0]):k=[e[0]];else{s3_gis_dropdown_select(3,!0);$("#gis_location_L4").val(h);$("#"+s3_gis_location_id).val(h);break}s3_gis_dropdown_select(0,!0);k[0]&&void 0!=$("#gis_location_L1 option[value="+k[0]+"]")[0]&&(b=k[0]);$("#gis_location_L1").val(b);s3_gis_dropdown_select(1,!0);k[0]&&(void 0!=$("#gis_location_L2 option[value="+k[0]+"]")[0]?f=k[0]:k[1]&&void 0!=$("#gis_location_L2 option[value="+k[1]+"]")[0]&&(f=k[1]));$("#gis_location_L2").val(f);
s3_gis_dropdown_select(2,!0);k[0]&&(void 0!=$("#gis_location_L3 option[value="+k[0]+"]")[0]?n=k[0]:k[1]&&(void 0!=$("#gis_location_L3 option[value="+k[1]+"]")[0]?n=k[1]:k[2]&&void 0!=$("#gis_location_L3 option[value="+k[2]+"]")[0]&&(n=k[2])));$("#gis_location_L3").val(n);s3_gis_dropdown_select(3,!0);$("#gis_location_L4").val(h);$("#"+s3_gis_location_id).val(h);s3_gis_dropdown_select(4);break;case "L5":break;default:if(e){e=e.split("/");if(e.length==6&&e[5]==h)$("#gis_location_L0").val(e[0]),b=e[1],
f=e[2],n=e[4];else if(e.length==5&&e[4]==h)void 0!=$("#gis_location_L0 option[value="+e[0]+"]")[0]?($("#gis_location_L0").val(e[0]),k=[e[1],e[2],e[3]]):k=[e[0],e[1],e[2],e[3]];else if(e.length==4&&e[3]==h)void 0!=$("#gis_location_L0 option[value="+e[0]+"]")[0]?($("#gis_location_L0").val(e[0]),k=[e[1],e[2]]):k=[e[0],e[1],e[2]];else if(e.length==3&&e[2]==h)void 0!=$("#gis_location_L0 option[value="+e[0]+"]")[0]?($("#gis_location_L0").val(e[0]),k=[e[1]]):k=[e[0],e[1]];else if(e.length==2&&e[1]==h)void 0!=
$("#gis_location_L0 option[value="+e[0]+"]")[0]?$("#gis_location_L0").val(e[0]):k=[e[0]];else{s3_gis_dropdown_select(4,!0);$("#gis_location_").val(h);$("#"+s3_gis_location_id).val(h);break}s3_gis_dropdown_select(0,!0);k[0]&&void 0!=$("#gis_location_L1 option[value="+k[0]+"]")[0]&&(b=k[0]);$("#gis_location_L1").val(b);s3_gis_dropdown_select(1,!0);k[0]&&(void 0!=$("#gis_location_L2 option[value="+k[0]+"]")[0]?f=k[0]:k[1]&&void 0!=$("#gis_location_L2 option[value="+k[1]+"]")[0]&&(f=k[1]));$("#gis_location_L2").val(f);
s3_gis_dropdown_select(2,!0);k[0]&&(void 0!=$("#gis_location_L3 option[value="+k[0]+"]")[0]?n=k[0]:k[1]&&(void 0!=$("#gis_location_L3 option[value="+k[1]+"]")[0]?n=k[1]:k[2]&&void 0!=$("#gis_location_L3 option[value="+k[2]+"]")[0]&&(n=k[2])));$("#gis_location_L3").val(n);s3_gis_dropdown_select(3);k[0]&&(void 0!=$("#gis_location_L4 option[value="+k[0]+"]")[0]?j=k[0]:k[1]&&(void 0!=$("#gis_location_L4 option[value="+k[1]+"]")[0]?j=k[1]:k[2]&&(void 0!=$("#gis_location_L4 option[value="+k[2]+"]")[0]?
j=k[2]:k[3]&&void 0!=$("#gis_location_L4 option[value="+k[4]+"]")[0]&&(j=k[3]))));$("#gis_location_L4").val(j);s3_gis_dropdown_select(4,!0);$("#gis_location_").val(h)}$("#"+s3_gis_location_id).val(h)}$("#gis_location_autocomplete_div").hide();$("#gis_location_search-btn").show();return!1}}).data("autocomplete")._renderItem=function(a,c){return $("<li></li>").data("item.autocomplete",c).append("<a>"+c.name+"</a>").appendTo(a)};$("#gis_location_autocomplete").blur(function(){if(!$("#gis_location_autocomplete").val())$("#"+
s3_gis_location_id).val(""),a.accept=!0;a.accept?a.val=$("#gis_location_autocomplete").val():$("#gis_location_autocomplete").val(a.val);a.accept=!1});$("form").submit(function(){S3ClearNavigateAwayConfirm();var a=$("#gis_location_name").val(),c=$("#gis_location_lat").val(),e=$("#gis_location_lon").val(),h=$("#gis_location_addr_street").val(),b=$("#gis_location_postcode").val(),f=$("#gis_location_L0").val();""==a&&(""==c||""==e)&&""==h&&""==b&&""==f||s3_gis_save_location(a,c,e,h,b);return!0})}});
Ext.onReady(function(){var a,g=Ext.get("gis_location_converter-btn"),c=Ext.get("gis_location_map-btn");if(c)c.on("click",function(){mapWin.show(this)});if(g)g.on("click",function(){a||(a=new Ext.Window({applyTo:"gis-convert-win",layout:"fit",width:400,height:250,closeAction:"hide",plain:!0,items:new Ext.TabPanel({applyTo:"gis-convert-tabs",autoTabs:!0,activeTab:0,deferredRender:!1,border:!1}),buttons:[{text:s3_gis_fill_lat,disabled:!1,handler:function(){s3_gis_convertFillBack(1)&&(s3_gis_calcDone=
!1,$("#DDMMSS_dec").val(""),$("#gps_dec").val(""))}},{text:s3_gis_fill_lon,handler:function(){s3_gis_convertFillBack(2)&&(s3_gis_calcDone=!1,$("#DDMMSS_dec").val(""),$("#gps_dec").val(""))}}]}));a.show(this)})});
(function(a,g){function c(){this.debug=!1;this._curInst=null;this._keyEvent=!1;this._disabledInputs=[];this._inDialog=this._datepickerShowing=!1;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass=
"ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su",
"Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,
maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1};a.extend(this._defaults,this.regional[""]);this.dpDiv=a('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')}function e(b,f){a.extend(b,f);for(var c in f)if(f[c]==null||f[c]==g)b[c]=
f[c];return b}a.extend(a.ui,{datepicker:{version:"1.8.11"}});var h=(new Date).getTime();a.extend(c.prototype,{markerClassName:"hasDatepicker",log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){e(this._defaults,a||{});return this},_attachDatepicker:function(b,f){var c=null,e;for(e in this._defaults){var g=b.getAttribute("date:"+e);if(g){c=c||{};try{c[e]=eval(g)}catch(h){c[e]=g}}}e=b.nodeName.toLowerCase();g=e=="div"||
e=="span";if(!b.id)this.uuid+=1,b.id="dp"+this.uuid;var m=this._newInst(a(b),g);m.settings=a.extend({},f||{},c||{});e=="input"?this._connectDatepicker(b,m):g&&this._inlineDatepicker(b,m)},_newInst:function(b,f){return{id:b[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:b,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:f,dpDiv:!f?this.dpDiv:a('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')}},_connectDatepicker:function(b,
f){var c=a(b);f.append=a([]);f.trigger=a([]);c.hasClass(this.markerClassName)||(this._attachments(c,f),c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(a,b,c){f.settings[b]=c}).bind("getData.datepicker",function(a,b){return this._get(f,b)}),this._autoSize(f),a.data(b,"datepicker",f))},_attachments:function(b,f){var c=this._get(f,"appendText"),e=this._get(f,"isRTL");f.append&&f.append.remove();if(c)f.append=
a('<span class="'+this._appendClass+'">'+c+"</span>"),b[e?"before":"after"](f.append);b.unbind("focus",this._showDatepicker);f.trigger&&f.trigger.remove();c=this._get(f,"showOn");(c=="focus"||c=="both")&&b.focus(this._showDatepicker);if(c=="button"||c=="both"){c=this._get(f,"buttonText");var g=this._get(f,"buttonImage");f.trigger=a(this._get(f,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:g,alt:c,title:c}):a('<button type="button"></button>').addClass(this._triggerClass).html(g==
""?c:a("<img/>").attr({src:g,alt:c,title:c})));b[e?"before":"after"](f.trigger);f.trigger.click(function(){a.datepicker._datepickerShowing&&a.datepicker._lastInput==b[0]?a.datepicker._hideDatepicker():a.datepicker._showDatepicker(b[0]);return!1})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var f=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var e=function(a){for(var b=0,f=0,c=0;c<a.length;c++)if(a[c].length>b)b=a[c].length,f=c;return f};f.setMonth(e(this._get(a,
c.match(/MM/)?"monthNames":"monthNamesShort")));f.setDate(e(this._get(a,c.match(/DD/)?"dayNames":"dayNamesShort"))+20-f.getDay())}a.input.attr("size",this._formatDate(a,f).length)}},_inlineDatepicker:function(b,f){var c=a(b);c.hasClass(this.markerClassName)||(c.addClass(this.markerClassName).append(f.dpDiv).bind("setData.datepicker",function(a,b,c){f.settings[b]=c}).bind("getData.datepicker",function(a,b){return this._get(f,b)}),a.data(b,"datepicker",f),this._setDate(f,this._getDefaultDate(f),!0),
this._updateDatepicker(f),this._updateAlternate(f),f.dpDiv.show())},_dialogDatepicker:function(b,f,c,g,h){b=this._dialogInst;if(!b)this.uuid+=1,this._dialogInput=a('<input type="text" id="dp'+this.uuid+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>'),this._dialogInput.keydown(this._doKeyDown),a("body").append(this._dialogInput),b=this._dialogInst=this._newInst(this._dialogInput,!1),b.settings={},a.data(this._dialogInput[0],"datepicker",b);e(b.settings,g||{});f=f&&f.constructor==
Date?this._formatDate(b,f):f;this._dialogInput.val(f);this._pos=h?h.length?h:[h.pageX,h.pageY]:null;if(!this._pos)this._pos=[document.documentElement.clientWidth/2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/2-150+(document.documentElement.scrollTop||document.body.scrollTop)];this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");b.settings.onSelect=c;this._inDialog=!0;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);
a.blockUI&&a.blockUI(this.dpDiv);a.data(this._dialogInput[0],"datepicker",b);return this},_destroyDatepicker:function(b){var f=a(b),c=a.data(b,"datepicker");if(f.hasClass(this.markerClassName)){var e=b.nodeName.toLowerCase();a.removeData(b,"datepicker");e=="input"?(c.append.remove(),c.trigger.remove(),f.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(e=="div"||e=="span")&&f.removeClass(this.markerClassName).empty()}},
_enableDatepicker:function(b){var f=a(b),c=a.data(b,"datepicker");if(f.hasClass(this.markerClassName)){var e=b.nodeName.toLowerCase();e=="input"?(b.disabled=!1,c.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):(e=="div"||e=="span")&&f.children("."+this._inlineClass).children().removeClass("ui-state-disabled");this._disabledInputs=a.map(this._disabledInputs,function(a){return a==b?null:a})}},_disableDatepicker:function(b){var f=a(b),c=
a.data(b,"datepicker");if(f.hasClass(this.markerClassName)){var e=b.nodeName.toLowerCase();e=="input"?(b.disabled=!0,c.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):(e=="div"||e=="span")&&f.children("."+this._inlineClass).children().addClass("ui-state-disabled");this._disabledInputs=a.map(this._disabledInputs,function(a){return a==b?null:a});this._disabledInputs[this._disabledInputs.length]=b}},_isDisabledDatepicker:function(a){if(!a)return!1;
for(var f=0;f<this._disabledInputs.length;f++)if(this._disabledInputs[f]==a)return!0;return!1},_getInst:function(b){try{return a.data(b,"datepicker")}catch(f){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(b,f,c){var h=this._getInst(b);if(arguments.length==2&&typeof f=="string")return f=="defaults"?a.extend({},a.datepicker._defaults):h?f=="all"?a.extend({},h.settings):this._get(h,f):null;var k=f||{};typeof f=="string"&&(k={},k[f]=c);if(h){this._curInst==h&&this._hideDatepicker();
var r=this._getDateDatepicker(b,!0),m=this._getMinMaxDate(h,"min"),s=this._getMinMaxDate(h,"max");e(h.settings,k);if(m!==null&&k.dateFormat!==g&&k.minDate===g)h.settings.minDate=this._formatDate(h,m);if(s!==null&&k.dateFormat!==g&&k.maxDate===g)h.settings.maxDate=this._formatDate(h,s);this._attachments(a(b),h);this._autoSize(h);this._setDateDatepicker(b,r);this._updateDatepicker(h)}},_changeDatepicker:function(a,f,c){this._optionDatepicker(a,f,c)},_refreshDatepicker:function(a){(a=this._getInst(a))&&
this._updateDatepicker(a)},_setDateDatepicker:function(a,f){var c=this._getInst(a);c&&(this._setDate(c,f),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,f){var c=this._getInst(a);c&&!c.inline&&this._setDateFromField(c,f);return c?this._getDate(c):null},_doKeyDown:function(b){var f=a.datepicker._getInst(b.target),c=!0,e=f.dpDiv.is(".ui-datepicker-rtl");f._keyEvent=!0;if(a.datepicker._datepickerShowing)switch(b.keyCode){case 9:a.datepicker._hideDatepicker();c=!1;
break;case 13:return c=a("td."+a.datepicker._dayOverClass+":not(."+a.datepicker._currentClass+")",f.dpDiv),c[0]?a.datepicker._selectDay(b.target,f.selectedMonth,f.selectedYear,c[0]):a.datepicker._hideDatepicker(),!1;case 27:a.datepicker._hideDatepicker();break;case 33:a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(f,"stepBigMonths"):-a.datepicker._get(f,"stepMonths"),"M");break;case 34:a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(f,"stepBigMonths"):+a.datepicker._get(f,
"stepMonths"),"M");break;case 35:(b.ctrlKey||b.metaKey)&&a.datepicker._clearDate(b.target);c=b.ctrlKey||b.metaKey;break;case 36:(b.ctrlKey||b.metaKey)&&a.datepicker._gotoToday(b.target);c=b.ctrlKey||b.metaKey;break;case 37:if(b.ctrlKey||b.metaKey)a.datepicker._adjustDate(b.target,e?1:-1,"D");c=b.ctrlKey||b.metaKey;b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(f,"stepBigMonths"):-a.datepicker._get(f,"stepMonths"),"M");break;case 38:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,
-7,"D");c=b.ctrlKey||b.metaKey;break;case 39:if(b.ctrlKey||b.metaKey)a.datepicker._adjustDate(b.target,e?-1:1,"D");c=b.ctrlKey||b.metaKey;b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(f,"stepBigMonths"):+a.datepicker._get(f,"stepMonths"),"M");break;case 40:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,7,"D");c=b.ctrlKey||b.metaKey;break;default:c=!1}else b.keyCode==36&&b.ctrlKey?a.datepicker._showDatepicker(this):c=!1;c&&(b.preventDefault(),b.stopPropagation())},
_doKeyPress:function(b){var f=a.datepicker._getInst(b.target);if(a.datepicker._get(f,"constrainInput")){f=a.datepicker._possibleChars(a.datepicker._get(f,"dateFormat"));var c=String.fromCharCode(b.charCode==g?b.keyCode:b.charCode);return b.ctrlKey||b.metaKey||c<" "||!f||f.indexOf(c)>-1}},_doKeyUp:function(b){b=a.datepicker._getInst(b.target);if(b.input.val()!=b.lastVal)try{if(a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),b.input?b.input.val():null,a.datepicker._getFormatConfig(b)))a.datepicker._setDateFromField(b),
a.datepicker._updateAlternate(b),a.datepicker._updateDatepicker(b)}catch(f){a.datepicker.log(f)}return!0},_showDatepicker:function(b){b=b.target||b;b.nodeName.toLowerCase()!="input"&&(b=a("input",b.parentNode)[0]);if(!(a.datepicker._isDisabledDatepicker(b)||a.datepicker._lastInput==b)){var f=a.datepicker._getInst(b);a.datepicker._curInst&&a.datepicker._curInst!=f&&a.datepicker._curInst.dpDiv.stop(!0,!0);var c=a.datepicker._get(f,"beforeShow");e(f.settings,c?c.apply(b,[b,f]):{});f.lastVal=null;a.datepicker._lastInput=
b;a.datepicker._setDateFromField(f);if(a.datepicker._inDialog)b.value="";if(!a.datepicker._pos)a.datepicker._pos=a.datepicker._findPos(b),a.datepicker._pos[1]+=b.offsetHeight;var g=!1;a(b).parents().each(function(){g|=a(this).css("position")=="fixed";return!g});g&&a.browser.opera&&(a.datepicker._pos[0]-=document.documentElement.scrollLeft,a.datepicker._pos[1]-=document.documentElement.scrollTop);c={left:a.datepicker._pos[0],top:a.datepicker._pos[1]};a.datepicker._pos=null;f.dpDiv.empty();f.dpDiv.css({position:"absolute",
display:"block",top:"-1000px"});a.datepicker._updateDatepicker(f);c=a.datepicker._checkOffset(f,c,g);f.dpDiv.css({position:a.datepicker._inDialog&&a.blockUI?"static":g?"fixed":"absolute",display:"none",left:c.left+"px",top:c.top+"px"});if(!f.inline){c=a.datepicker._get(f,"showAnim");var h=a.datepicker._get(f,"duration"),r=function(){a.datepicker._datepickerShowing=!0;var b=f.dpDiv.find("iframe.ui-datepicker-cover");if(b.length){var c=a.datepicker._getBorders(f.dpDiv);b.css({left:-c[0],top:-c[1],width:f.dpDiv.outerWidth(),
height:f.dpDiv.outerHeight()})}};f.dpDiv.zIndex(a(b).zIndex()+1);if(a.effects&&a.effects[c])f.dpDiv.show(c,a.datepicker._get(f,"showOptions"),h,r);else f.dpDiv[c||"show"](c?h:null,r);(!c||!h)&&r();f.input.is(":visible")&&!f.input.is(":disabled")&&f.input.focus();a.datepicker._curInst=f}}},_updateDatepicker:function(b){var f=this,c=a.datepicker._getBorders(b.dpDiv);b.dpDiv.empty().append(this._generateHTML(b));var e=b.dpDiv.find("iframe.ui-datepicker-cover");e.length&&e.css({left:-c[0],top:-c[1],width:b.dpDiv.outerWidth(),
height:b.dpDiv.outerHeight()});b.dpDiv.find("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a").bind("mouseout",function(){a(this).removeClass("ui-state-hover");this.className.indexOf("ui-datepicker-prev")!=-1&&a(this).removeClass("ui-datepicker-prev-hover");this.className.indexOf("ui-datepicker-next")!=-1&&a(this).removeClass("ui-datepicker-next-hover")}).bind("mouseover",function(){if(!f._isDisabledDatepicker(b.inline?b.dpDiv.parent()[0]:b.input[0]))a(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),
a(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&a(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&a(this).addClass("ui-datepicker-next-hover")}).end().find("."+this._dayOverClass+" a").trigger("mouseover").end();c=this._getNumberOfMonths(b);e=c[1];e>1?b.dpDiv.addClass("ui-datepicker-multi-"+e).css("width",17*e+"em"):b.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");b.dpDiv[(c[0]!=
1||c[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi");b.dpDiv[(this._get(b,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");b==a.datepicker._curInst&&a.datepicker._datepickerShowing&&b.input&&b.input.is(":visible")&&!b.input.is(":disabled")&&b.input[0]!=document.activeElement&&b.input.focus();if(b.yearshtml){var g=b.yearshtml;setTimeout(function(){g===b.yearshtml&&b.dpDiv.find("select.ui-datepicker-year:first").replaceWith(b.yearshtml);g=b.yearshtml=null},0)}},_getBorders:function(a){var f=
function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(f(a.css("border-left-width"))),parseFloat(f(a.css("border-top-width")))]},_checkOffset:function(b,f,c){var e=b.dpDiv.outerWidth(),g=b.dpDiv.outerHeight(),h=b.input?b.input.outerWidth():0,m=b.input?b.input.outerHeight():0,s=document.documentElement.clientWidth+a(document).scrollLeft(),t=document.documentElement.clientHeight+a(document).scrollTop();f.left-=this._get(b,"isRTL")?e-h:0;f.left-=c&&f.left==b.input.offset().left?a(document).scrollLeft():
0;f.top-=c&&f.top==b.input.offset().top+m?a(document).scrollTop():0;f.left-=Math.min(f.left,f.left+e>s&&s>e?Math.abs(f.left+e-s):0);f.top-=Math.min(f.top,f.top+g>t&&t>g?Math.abs(g+m):0);return f},_findPos:function(b){for(var f=this._get(this._getInst(b),"isRTL");b&&(b.type=="hidden"||b.nodeType!=1||a.expr.filters.hidden(b));)b=b[f?"previousSibling":"nextSibling"];b=a(b).offset();return[b.left,b.top]},_hideDatepicker:function(b){var f=this._curInst;if(f&&!(b&&f!=a.data(b,"datepicker"))&&this._datepickerShowing){b=
this._get(f,"showAnim");var c=this._get(f,"duration"),e=function(){a.datepicker._tidyDialog(f);this._curInst=null};if(a.effects&&a.effects[b])f.dpDiv.hide(b,a.datepicker._get(f,"showOptions"),c,e);else f.dpDiv[b=="slideDown"?"slideUp":b=="fadeIn"?"fadeOut":"hide"](b?c:null,e);b||e();(b=this._get(f,"onClose"))&&b.apply(f.input?f.input[0]:null,[f.input?f.input.val():"",f]);this._datepickerShowing=!1;this._lastInput=null;this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),
a.blockUI&&(a.unblockUI(),a("body").append(this.dpDiv)));this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(b){a.datepicker._curInst&&(b=a(b.target),b[0].id!=a.datepicker._mainDivId&&b.parents("#"+a.datepicker._mainDivId).length==0&&!b.hasClass(a.datepicker.markerClassName)&&!b.hasClass(a.datepicker._triggerClass)&&a.datepicker._datepickerShowing&&(!a.datepicker._inDialog||!a.blockUI)&&a.datepicker._hideDatepicker())},
_adjustDate:function(b,f,c){b=a(b);var e=this._getInst(b[0]);this._isDisabledDatepicker(b[0])||(this._adjustInstDate(e,f+(c=="M"?this._get(e,"showCurrentAtPos"):0),c),this._updateDatepicker(e))},_gotoToday:function(b){b=a(b);var f=this._getInst(b[0]);if(this._get(f,"gotoCurrent")&&f.currentDay)f.selectedDay=f.currentDay,f.drawMonth=f.selectedMonth=f.currentMonth,f.drawYear=f.selectedYear=f.currentYear;else{var c=new Date;f.selectedDay=c.getDate();f.drawMonth=f.selectedMonth=c.getMonth();f.drawYear=
f.selectedYear=c.getFullYear()}this._notifyChange(f);this._adjustDate(b)},_selectMonthYear:function(b,f,c){b=a(b);var e=this._getInst(b[0]);e._selectingMonthYear=!1;e["selected"+(c=="M"?"Month":"Year")]=e["draw"+(c=="M"?"Month":"Year")]=parseInt(f.options[f.selectedIndex].value,10);this._notifyChange(e);this._adjustDate(b)},_clickMonthYear:function(b){var f=this._getInst(a(b)[0]);f.input&&f._selectingMonthYear&&setTimeout(function(){f.input.focus()},0);f._selectingMonthYear=!f._selectingMonthYear},
_selectDay:function(b,f,c,e){var g=a(b);if(!a(e).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(g[0]))g=this._getInst(g[0]),g.selectedDay=g.currentDay=a("a",e).html(),g.selectedMonth=g.currentMonth=f,g.selectedYear=g.currentYear=c,this._selectDate(b,this._formatDate(g,g.currentDay,g.currentMonth,g.currentYear))},_clearDate:function(b){b=a(b);this._getInst(b[0]);this._selectDate(b,"")},_selectDate:function(b,f){var c=this._getInst(a(b)[0]);f=f!=null?f:this._formatDate(c);c.input&&c.input.val(f);
this._updateAlternate(c);var e=this._get(c,"onSelect");e?e.apply(c.input?c.input[0]:null,[f,c]):c.input&&c.input.trigger("change");c.inline?this._updateDatepicker(c):(this._hideDatepicker(),this._lastInput=c.input[0],typeof c.input[0]!="object"&&c.input.focus(),this._lastInput=null)},_updateAlternate:function(b){var f=this._get(b,"altField");if(f){var c=this._get(b,"altFormat")||this._get(b,"dateFormat"),e=this._getDate(b),g=this.formatDate(c,e,this._getFormatConfig(b));a(f).each(function(){a(this).val(g)})}},
noWeekends:function(a){a=a.getDay();return[a>0&&a<6,""]},iso8601Week:function(a){a=new Date(a.getTime());a.setDate(a.getDate()+4-(a.getDay()||7));var f=a.getTime();a.setMonth(0);a.setDate(1);return Math.floor(Math.round((f-a)/864E5)/7)+1},parseDate:function(a,f,c){if(a==null||f==null)throw"Invalid arguments";f=typeof f=="object"?f.toString():f+"";if(f=="")return null;var e=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff;e=typeof e!="string"?e:(new Date).getFullYear()%100+parseInt(e,10);
for(var g=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,h=(c?c.dayNames:null)||this._defaults.dayNames,m=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,s=(c?c.monthNames:null)||this._defaults.monthNames,t=c=-1,y=-1,v=-1,u=!1,p=function(f){(f=M+1<a.length&&a.charAt(M+1)==f)&&M++;return f},A=function(a){var b=p(a);a=f.substring(H).match(RegExp("^\\d{1,"+(a=="@"?14:a=="!"?20:a=="y"&&b?4:a=="o"?3:2)+"}"));if(!a)throw"Missing number at position "+H;H+=a[0].length;return parseInt(a[0],
10)},x=function(a,b,c){a=p(a)?c:b;for(b=0;b<a.length;b++)if(f.substr(H,a[b].length).toLowerCase()==a[b].toLowerCase())return H+=a[b].length,b+1;throw"Unknown name at position "+H;},w=function(){if(f.charAt(H)!=a.charAt(M))throw"Unexpected literal at position "+H;H++},H=0,M=0;M<a.length;M++)if(u)a.charAt(M)=="'"&&!p("'")?u=!1:w();else switch(a.charAt(M)){case "d":y=A("d");break;case "D":x("D",g,h);break;case "o":v=A("o");break;case "m":t=A("m");break;case "M":t=x("M",m,s);break;case "y":c=A("y");break;
case "@":var z=new Date(A("@"));c=z.getFullYear();t=z.getMonth()+1;y=z.getDate();break;case "!":z=new Date((A("!")-this._ticksTo1970)/1E4);c=z.getFullYear();t=z.getMonth()+1;y=z.getDate();break;case "'":p("'")?w():u=!0;break;default:w()}c==-1?c=(new Date).getFullYear():c<100&&(c+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c<=e?0:-100));if(v>-1){t=1;y=v;do{e=this._getDaysInMonth(c,t-1);if(y<=e)break;t++;y-=e}while(1)}z=this._daylightSavingAdjust(new Date(c,t-1,y));if(z.getFullYear()!=c||
z.getMonth()+1!=t||z.getDate()!=y)throw"Invalid date";return z},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*864E9,formatDate:function(a,f,c){if(!f)return"";var e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,g=(c?c.dayNames:null)||this._defaults.dayNames,
h=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort;c=(c?c.monthNames:null)||this._defaults.monthNames;var m=function(f){(f=u+1<a.length&&a.charAt(u+1)==f)&&u++;return f},s=function(a,b,f){b=""+b;if(m(a))for(;b.length<f;)b="0"+b;return b},t=function(a,b,f,c){return m(a)?c[b]:f[b]},y="",v=!1;if(f)for(var u=0;u<a.length;u++)if(v)a.charAt(u)=="'"&&!m("'")?v=!1:y+=a.charAt(u);else switch(a.charAt(u)){case "d":y+=s("d",f.getDate(),2);break;case "D":y+=t("D",f.getDay(),e,g);break;case "o":y+=s("o",
(f.getTime()-(new Date(f.getFullYear(),0,0)).getTime())/864E5,3);break;case "m":y+=s("m",f.getMonth()+1,2);break;case "M":y+=t("M",f.getMonth(),h,c);break;case "y":y+=m("y")?f.getFullYear():(f.getYear()%100<10?"0":"")+f.getYear()%100;break;case "@":y+=f.getTime();break;case "!":y+=f.getTime()*1E4+this._ticksTo1970;break;case "'":m("'")?y+="'":v=!0;break;default:y+=a.charAt(u)}return y},_possibleChars:function(a){for(var f="",c=!1,e=function(f){(f=g+1<a.length&&a.charAt(g+1)==f)&&g++;return f},g=0;g<
a.length;g++)if(c)a.charAt(g)=="'"&&!e("'")?c=!1:f+=a.charAt(g);else switch(a.charAt(g)){case "d":case "m":case "y":case "@":f+="0123456789";break;case "D":case "M":return null;case "'":e("'")?f+="'":c=!0;break;default:f+=a.charAt(g)}return f},_get:function(a,f){return a.settings[f]!==g?a.settings[f]:this._defaults[f]},_setDateFromField:function(a,f){if(a.input.val()!=a.lastVal){var c=this._get(a,"dateFormat"),e=a.lastVal=a.input?a.input.val():null,g,h;g=h=this._getDefaultDate(a);var m=this._getFormatConfig(a);
try{g=this.parseDate(c,e,m)||h}catch(s){this.log(s),e=f?"":e}a.selectedDay=g.getDate();a.drawMonth=a.selectedMonth=g.getMonth();a.drawYear=a.selectedYear=g.getFullYear();a.currentDay=e?g.getDate():0;a.currentMonth=e?g.getMonth():0;a.currentYear=e?g.getFullYear():0;this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(b,f,c){var e=function(a){var b=new Date;b.setDate(b.getDate()+a);return b};
if(f=(f=f==null||f===""?c:typeof f=="string"?function(f){try{return a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),f,a.datepicker._getFormatConfig(b))}catch(c){}var e=(f.toLowerCase().match(/^c/)?a.datepicker._getDate(b):null)||new Date,g=e.getFullYear(),h=e.getMonth();e=e.getDate();for(var n=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,j=n.exec(f);j;){switch(j[2]||"d"){case "d":case "D":e+=parseInt(j[1],10);break;case "w":case "W":e+=parseInt(j[1],10)*7;break;case "m":case "M":h+=parseInt(j[1],
10);e=Math.min(e,a.datepicker._getDaysInMonth(g,h));break;case "y":case "Y":g+=parseInt(j[1],10),e=Math.min(e,a.datepicker._getDaysInMonth(g,h))}j=n.exec(f)}return new Date(g,h,e)}(f):typeof f=="number"?isNaN(f)?c:e(f):new Date(f.getTime()))&&f.toString()=="Invalid Date"?c:f)f.setHours(0),f.setMinutes(0),f.setSeconds(0),f.setMilliseconds(0);return this._daylightSavingAdjust(f)},_daylightSavingAdjust:function(a){if(!a)return null;a.setHours(a.getHours()>12?a.getHours()+2:0);return a},_setDate:function(a,
f,c){var e=!f,g=a.selectedMonth,h=a.selectedYear;f=this._restrictMinMax(a,this._determineDate(a,f,new Date));a.selectedDay=a.currentDay=f.getDate();a.drawMonth=a.selectedMonth=a.currentMonth=f.getMonth();a.drawYear=a.selectedYear=a.currentYear=f.getFullYear();(g!=a.selectedMonth||h!=a.selectedYear)&&!c&&this._notifyChange(a);this._adjustInstDate(a);a.input&&a.input.val(e?"":this._formatDate(a))},_getDate:function(a){return!a.currentYear||a.input&&a.input.val()==""?null:this._daylightSavingAdjust(new Date(a.currentYear,
a.currentMonth,a.currentDay))},_generateHTML:function(b){var f=new Date;f=this._daylightSavingAdjust(new Date(f.getFullYear(),f.getMonth(),f.getDate()));var c=this._get(b,"isRTL"),e=this._get(b,"showButtonPanel"),g=this._get(b,"hideIfNoPrevNext"),r=this._get(b,"navigationAsDateFormat"),m=this._getNumberOfMonths(b),s=this._get(b,"showCurrentAtPos"),t=this._get(b,"stepMonths"),y=m[0]!=1||m[1]!=1,v=this._daylightSavingAdjust(!b.currentDay?new Date(9999,9,9):new Date(b.currentYear,b.currentMonth,b.currentDay)),
u=this._getMinMaxDate(b,"min"),p=this._getMinMaxDate(b,"max");s=b.drawMonth-s;var A=b.drawYear;s<0&&(s+=12,A--);if(p){var x=this._daylightSavingAdjust(new Date(p.getFullYear(),p.getMonth()-m[0]*m[1]+1,p.getDate()));for(x=u&&x<u?u:x;this._daylightSavingAdjust(new Date(A,s,1))>x;)s--,s<0&&(s=11,A--)}b.drawMonth=s;b.drawYear=A;x=this._get(b,"prevText");x=!r?x:this.formatDate(x,this._daylightSavingAdjust(new Date(A,s-t,1)),this._getFormatConfig(b));x=this._canAdjustMonth(b,-1,A,s)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+
h+".datepicker._adjustDate('#"+b.id+"', -"+t+", 'M');\" title=\""+x+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+x+"</span></a>":g?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+x+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+x+"</span></a>";var w=this._get(b,"nextText");w=!r?w:this.formatDate(w,this._daylightSavingAdjust(new Date(A,s+t,1)),this._getFormatConfig(b));g=this._canAdjustMonth(b,1,A,s)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+
h+".datepicker._adjustDate('#"+b.id+"', +"+t+", 'M');\" title=\""+w+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+w+"</span></a>":g?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+w+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+w+"</span></a>";t=this._get(b,"currentText");w=this._get(b,"gotoCurrent")&&b.currentDay?v:f;t=!r?t:this.formatDate(t,w,this._getFormatConfig(b));r=!b.inline?'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+
h+'.datepicker._hideDatepicker();">'+this._get(b,"closeText")+"</button>":"";e=e?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?r:"")+(this._isInRange(b,w)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+h+".datepicker._gotoToday('#"+b.id+"');\">"+t+"</button>":"")+(c?"":r)+"</div>":"";r=parseInt(this._get(b,"firstDay"),10);r=isNaN(r)?0:r;t=this._get(b,"showWeek");w=this._get(b,"dayNames");this._get(b,"dayNamesShort");
var H=this._get(b,"dayNamesMin"),M=this._get(b,"monthNames"),z=this._get(b,"monthNamesShort"),N=this._get(b,"beforeShowDay"),Q=this._get(b,"showOtherMonths"),W=this._get(b,"selectOtherMonths");this._get(b,"calculateWeek");for(var Z=this._getDefaultDate(b),U="",ba=0;ba<m[0];ba++){for(var F="",I=0;I<m[1];I++){var G=this._daylightSavingAdjust(new Date(A,s,b.selectedDay)),B=" ui-corner-all",K="";if(y){K+='<div class="ui-datepicker-group';if(m[1]>1)switch(I){case 0:K+=" ui-datepicker-group-first";B=" ui-corner-"+
(c?"right":"left");break;case m[1]-1:K+=" ui-datepicker-group-last";B=" ui-corner-"+(c?"left":"right");break;default:K+=" ui-datepicker-group-middle",B=""}K+='">'}K+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+B+'">'+(/all|left/.test(B)&&ba==0?c?g:x:"")+(/all|right/.test(B)&&ba==0?c?x:g:"")+this._generateMonthYearHeader(b,s,A,u,p,ba>0||I>0,M,z)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var T=t?'<th class="ui-datepicker-week-col">'+this._get(b,"weekHeader")+
"</th>":"";for(B=0;B<7;B++){var D=(B+r)%7;T+="<th"+((B+r+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+w[D]+'">'+H[D]+"</span></th>"}K+=T+"</tr></thead><tbody>";T=this._getDaysInMonth(A,s);if(A==b.selectedYear&&s==b.selectedMonth)b.selectedDay=Math.min(b.selectedDay,T);B=(this._getFirstDayOfMonth(A,s)-r+7)%7;T=y?6:Math.ceil((B+T)/7);D=this._daylightSavingAdjust(new Date(A,s,1-B));for(var O=0;O<T;O++){K+="<tr>";var Y=!t?"":'<td class="ui-datepicker-week-col">'+this._get(b,"calculateWeek")(D)+
"</td>";for(B=0;B<7;B++){var S=N?N.apply(b.input?b.input[0]:null,[D]):[!0,""],J=D.getMonth()!=s,L=J&&!W||!S[0]||u&&D<u||p&&D>p;Y+='<td class="'+((B+r+6)%7>=5?" ui-datepicker-week-end":"")+(J?" ui-datepicker-other-month":"")+(D.getTime()==G.getTime()&&s==b.selectedMonth&&b._keyEvent||Z.getTime()==D.getTime()&&Z.getTime()==G.getTime()?" "+this._dayOverClass:"")+(L?" "+this._unselectableClass+" ui-state-disabled":"")+(J&&!Q?"":" "+S[1]+(D.getTime()==v.getTime()?" "+this._currentClass:"")+(D.getTime()==
f.getTime()?" ui-datepicker-today":""))+'"'+((!J||Q)&&S[2]?' title="'+S[2]+'"':"")+(L?"":' onclick="DP_jQuery_'+h+".datepicker._selectDay('#"+b.id+"',"+D.getMonth()+","+D.getFullYear()+', this);return false;"')+">"+(J&&!Q?"&#xa0;":L?'<span class="ui-state-default">'+D.getDate()+"</span>":'<a class="ui-state-default'+(D.getTime()==f.getTime()?" ui-state-highlight":"")+(D.getTime()==v.getTime()?" ui-state-active":"")+(J?" ui-priority-secondary":"")+'" href="#">'+D.getDate()+"</a>")+"</td>";D.setDate(D.getDate()+
1);D=this._daylightSavingAdjust(D)}K+=Y+"</tr>"}s++;s>11&&(s=0,A++);K+="</tbody></table>"+(y?"</div>"+(m[0]>0&&I==m[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"");F+=K}U+=F}U+=e+(a.browser.msie&&parseInt(a.browser.version,10)<7&&!b.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':"");b._keyEvent=!1;return U},_generateMonthYearHeader:function(b,f,c,e,g,r,m,s){var t=this._get(b,"changeMonth"),y=this._get(b,"changeYear"),v=this._get(b,"showMonthAfterYear"),
u='<div class="ui-datepicker-title">',p="";if(r||!t)p+='<span class="ui-datepicker-month">'+m[f]+"</span>";else{m=e&&e.getFullYear()==c;var A=g&&g.getFullYear()==c;p+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+h+".datepicker._selectMonthYear('#"+b.id+"', this, 'M');\" onclick=\"DP_jQuery_"+h+".datepicker._clickMonthYear('#"+b.id+"');\">";for(var x=0;x<12;x++)if((!m||x>=e.getMonth())&&(!A||x<=g.getMonth()))p+='<option value="'+x+'"'+(x==f?' selected="selected"':"")+">"+s[x]+"</option>";
p+="</select>"}v||(u+=p+(r||!t||!y?"&#xa0;":""));b.yearshtml="";if(r||!y)u+='<span class="ui-datepicker-year">'+c+"</span>";else{s=this._get(b,"yearRange").split(":");var w=(new Date).getFullYear();m=function(a){a=a.match(/c[+-].*/)?c+parseInt(a.substring(1),10):a.match(/[+-].*/)?w+parseInt(a,10):parseInt(a,10);return isNaN(a)?w:a};f=m(s[0]);s=Math.max(f,m(s[1]||""));f=e?Math.max(f,e.getFullYear()):f;s=g?Math.min(s,g.getFullYear()):s;for(b.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+
h+".datepicker._selectMonthYear('#"+b.id+"', this, 'Y');\" onclick=\"DP_jQuery_"+h+".datepicker._clickMonthYear('#"+b.id+"');\">";f<=s;f++)b.yearshtml+='<option value="'+f+'"'+(f==c?' selected="selected"':"")+">"+f+"</option>";b.yearshtml+="</select>";a.browser.mozilla?u+='<select class="ui-datepicker-year"><option value="'+c+'" selected="selected">'+c+"</option></select>":(u+=b.yearshtml,b.yearshtml=null)}u+=this._get(b,"yearSuffix");v&&(u+=(r||!t||!y?"&#xa0;":"")+p);u+="</div>";return u},_adjustInstDate:function(a,
f,c){var e=a.drawYear+(c=="Y"?f:0),g=a.drawMonth+(c=="M"?f:0);f=Math.min(a.selectedDay,this._getDaysInMonth(e,g))+(c=="D"?f:0);e=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(e,g,f)));a.selectedDay=e.getDate();a.drawMonth=a.selectedMonth=e.getMonth();a.drawYear=a.selectedYear=e.getFullYear();(c=="M"||c=="Y")&&this._notifyChange(a)},_restrictMinMax:function(a,c){var e=this._getMinMaxDate(a,"min"),g=this._getMinMaxDate(a,"max");e=e&&c<e?e:c;return g&&e>g?g:e},_notifyChange:function(a){var c=
this._get(a,"onChangeMonthYear");c&&c.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){a=this._get(a,"numberOfMonths");return a==null?[1,1]:typeof a=="number"?[1,a]:a},_getMinMaxDate:function(a,c){return this._determineDate(a,this._get(a,c+"Date"),null)},_getDaysInMonth:function(a,c){return 32-this._daylightSavingAdjust(new Date(a,c,32)).getDate()},_getFirstDayOfMonth:function(a,c){return(new Date(a,c,1)).getDay()},_canAdjustMonth:function(a,c,e,
g){var h=this._getNumberOfMonths(a);e=this._daylightSavingAdjust(new Date(e,g+(c<0?c:h[0]*h[1]),1));c<0&&e.setDate(this._getDaysInMonth(e.getFullYear(),e.getMonth()));return this._isInRange(a,e)},_isInRange:function(a,c){var e=this._getMinMaxDate(a,"min"),g=this._getMinMaxDate(a,"max");return(!e||c.getTime()>=e.getTime())&&(!g||c.getTime()<=g.getTime())},_getFormatConfig:function(a){var c=this._get(a,"shortYearCutoff");c=typeof c!="string"?c:(new Date).getFullYear()%100+parseInt(c,10);return{shortYearCutoff:c,
dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,c,e,g){if(!c)a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear;c=c?typeof c=="object"?c:this._daylightSavingAdjust(new Date(g,e,c)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),c,this._getFormatConfig(a))}});
a.fn.datepicker=function(b){if(!this.length)return this;if(!a.datepicker.initialized)a(document).mousedown(a.datepicker._checkExternalClick).find("body").append(a.datepicker.dpDiv),a.datepicker.initialized=!0;var c=Array.prototype.slice.call(arguments,1);if(typeof b=="string"&&(b=="isDisabled"||b=="getDate"||b=="widget"))return a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c));if(b=="option"&&arguments.length==2&&typeof arguments[1]=="string")return a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,
[this[0]].concat(c));return this.each(function(){typeof b=="string"?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this].concat(c)):a.datepicker._attachDatepicker(this,b)})};a.datepicker=new c;a.datepicker.initialized=!1;a.datepicker.uuid=(new Date).getTime();a.datepicker.version="1.8.11";window["DP_jQuery_"+h]=a})(jQuery);
(function(a,g){if(a.cleanData){var c=a.cleanData;a.cleanData=function(e){for(var b=0,f;(f=e[b])!=null;b++)a(f).triggerHandler("remove");c(e)}}else{var e=a.fn.remove;a.fn.remove=function(c,b){return this.each(function(){b||(!c||a.filter(c,[this]).length)&&a("*",this).add([this]).each(function(){a(this).triggerHandler("remove")});return e.call(a(this),c,b)})}}a.widget=function(c,b,f){var e=c.split(".")[0],g;c=c.split(".")[1];g=e+"-"+c;if(!f)f=b,b=a.Widget;a.expr[":"][g]=function(b){return!!a.data(b,
c)};a[e]=a[e]||{};a[e][c]=function(a,b){arguments.length&&this._createWidget(a,b)};b=new b;b.options=a.extend(!0,{},b.options);a[e][c].prototype=a.extend(!0,b,{namespace:e,widgetName:c,widgetEventPrefix:a[e][c].prototype.widgetEventPrefix||c,widgetBaseClass:g},f);a.widget.bridge(c,a[e][c])};a.widget.bridge=function(c,b){a.fn[c]=function(f){var e=typeof f==="string",j=Array.prototype.slice.call(arguments,1),k=this;f=!e&&j.length?a.extend.apply(null,[!0,f].concat(j)):f;if(e&&f.charAt(0)==="_")return k;
e?this.each(function(){var b=a.data(this,c),e=b&&a.isFunction(b[f])?b[f].apply(b,j):b;if(e!==b&&e!==g)return k=e,!1}):this.each(function(){var e=a.data(this,c);e?e.option(f||{})._init():a.data(this,c,new b(f,this))});return k}};a.Widget=function(a,b){arguments.length&&this._createWidget(a,b)};a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(c,b){a.data(b,this.widgetName,this);this.element=a(b);this.options=a.extend(!0,{},this.options,this._getCreateOptions(),
c);var f=this;this.element.bind("remove."+this.widgetName,function(){f.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},
option:function(c,b){var f=c;if(arguments.length===0)return a.extend({},this.options);if(typeof c==="string"){if(b===g)return this.options[c];f={};f[c]=b}this._setOptions(f);return this},_setOptions:function(c){var b=this;a.each(c,function(a,c){b._setOption(a,c)});return this},_setOption:function(a,b){this.options[a]=b;a==="disabled"&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",b);return this},enable:function(){return this._setOption("disabled",
!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(c,b,f){var e=this.options[c];b=a.Event(b);b.type=(c===this.widgetEventPrefix?c:this.widgetEventPrefix+c).toLowerCase();f=f||{};if(b.originalEvent){c=a.event.props.length;for(var g;c;)g=a.event.props[--c],b[g]=b.originalEvent[g]}this.element.trigger(b,f);return!(a.isFunction(e)&&e.call(this.element[0],b,f)===!1||b.isDefaultPrevented())}}})(jQuery);
function popup(a){newwindow=window.open(a,"name","height=400,width=600");window.focus&&newwindow.focus();return!1}function collapse(a){jQuery("#"+a).slideToggle()}function fade(a,g){g>0?jQuery("#"+a).hide().fadeIn("slow"):jQuery("#"+a).show().fadeOut("slow")}
function ajax(a,g,c){query="";if(typeof g=="string")(d=jQuery(g).serialize())&&(query=d);else{pcs=[];for(i=0;i<g.length;i++)(q=jQuery("#"+g[i]).serialize())&&pcs.push(q);pcs.length>0&&(query=pcs.join("&"))}jQuery.ajax({type:"POST",url:a,data:query,success:function(a){c&&(c==":eval"?eval(a):jQuery("#"+c).html(a))}})}String.prototype.reverse=function(){return this.split("").reverse().join("")};
function web2py_ajax_init(){jQuery(".hidden").hide();jQuery(".error").hide().slideDown("slow");jQuery(".flash").click(function(){jQuery(this).fadeOut("slow");return!1});jQuery("input.string").attr("size",50);jQuery("textarea.text").attr("cols",50).attr("rows",10);jQuery("input.integer").keyup(function(){this.value=this.value.reverse().replace(/[^0-9\-]|\-(?=.)/g,"").reverse()});jQuery("input.double").keyup(function(){this.value=this.value.reverse().replace(/[^0-9\-\.]|[\-](?=.)|[\.](?=[0-9]*[\.])/g,
"").reverse()})}jQuery(document).ready(function(){jQuery(".flash").hide().slideDown("slow");jQuery(".flash").html()!=""&&jQuery(".flash").slideDown("slow");web2py_ajax_init()});function web2py_trap_form(a,g){jQuery("#"+g+" form").each(function(){var c=jQuery(this);c.hasClass("no_trap")||c.submit(function(){jQuery(".flash").hide().html("");web2py_ajax_page("post",a,c.serialize(),g);return!1})})}
function web2py_ajax_page(a,g,c,e){jQuery.ajax({type:a,url:g,data:c,beforeSend:function(a){a.setRequestHeader("web2py-component-location",document.location);a.setRequestHeader("web2py-component-element",e)},complete:function(a){(command=a.getResponseHeader("web2py-component-command"))&&eval(command);(flash=a.getResponseHeader("web2py-component-flash"))&&jQuery(".flash").html(flash).slideDown()},success:function(a){jQuery("#"+e).html(a);web2py_trap_form(g,e);web2py_ajax_init()}})}
function web2py_component(a,g){jQuery(document).ready(function(){web2py_ajax_page("get",a,null,g)})}(function(a){a.fn.elementExists=function(){return jQuery(this).length>0}})(jQuery);(function(a){a.fn.formElementType=function(){return jQuery(this).elementExists()?jQuery(this).attr("type"):""}})(jQuery);(function(a){a.fn.isTextBox=function(){return jQuery(this).formElementType()==="text"}})(jQuery);(function(a){a.fn.isTextArea=function(){return jQuery(this).formElementType()==="textarea"}})(jQuery);
(function(a){a.fn.isPassword=function(){return jQuery(this).formElementType()==="password"}})(jQuery);(function(a){a.fn.isHiddenInput=function(){return jQuery(this).formElementType()==="hidden"}})(jQuery);(function(a){a.fn.isCheckBox=function(){return jQuery(this).formElementType()==="checkbox"}})(jQuery);(function(a){a.fn.isRadioBox=function(){return jQuery(this).formElementType()==="radio"}})(jQuery);(function(a){a.fn.isButton=function(){return jQuery(this).formElementType()==="button"}})(jQuery);
(function(a){a.fn.isSubmitButton=function(){return jQuery(this).formElementType()==="submit"}})(jQuery);(function(a){a.fn.isResetButton=function(){return jQuery(this).formElementType()==="reset"}})(jQuery);(function(a){a.fn.isSelectBox=function(){var a=jQuery(this).formElementType(),c=this.attr("size");return a!=="select-one"?!1:typeof c==="undefined"?!1:parseInt(c)>1}})(jQuery);(function(a){a.fn.isMultiSelectBox=function(){return jQuery(this).formElementType()==="select-multiple"}})(jQuery);
(function(a){a.fn.isDropDownList=function(){var a=jQuery(this).formElementType(),c=this.attr("size");return a!=="select-one"?!1:typeof c==="undefined"?!0:parseInt(c)<=1}})(jQuery);(function(a){a.fn.isChecked=function(){return jQuery(this).is(":checked")}})(jQuery);
(function(a){a.fn.isSelected=function(){var a=jQuery(this);if(arguments.length===0)return!1;var c=!1,e=arguments[0],h=arguments;if(a.isRadioBox()){if(a=jQuery("input[type='radio'][name='"+a.attr("name")+"'][checked]"),a.length===1)return e===a.val()}else if(a.isSelectBox()||a.isDropDownList()){if(a=jQuery("#"+a.attr("id")+" option:selected"),a.length===1)return e===a.val()}else a.isMultiSelectBox()&&(a=jQuery("#"+a.attr("id")+" option:selected"),jQuery.each(a,function(){var a=jQuery(this);c=!1;for(var f=
0;f<h.length;f++)if(h[f]===a.val()){c=!0;break}}));return c}})(jQuery);
(function(a){a.fn.selectedItem=function(a){var c=jQuery(this);if(typeof a==="undefined"||isNaN(a))a=0;if(c.isRadioBox()){var e=jQuery("input[type='radio'][name='"+c.attr("name")+"'][checked]");a>e.length-1?a=e.length-1:a<0&&(a=0);if(e.length>0)return jQuery(e[a])}else if(c.isSelectBox()||c.isMultiSelectBox()||c.isDropDownList())if(e=jQuery("#"+c.attr("id")+" option:selected"),a>e.length-1?a=e.length-1:a<0&&(a=0),e.length>0)return jQuery(e[a]);return c}})(jQuery);
(function(a){a.fn.firstSelectedItem=function(){return jQuery(this).selectedItem()}})(jQuery);(function(a){a.fn.lastSelectedItem=function(){return jQuery(this).selectedItem(Number.MAX_VALUE)}})(jQuery);(function(a){a.fn.selectedValue=function(){return jQuery(this).selectedItem(0).val()}})(jQuery);
(function(a){a.fn.selectedValues=function(){var a=[],c=jQuery(this);c.isMultiSelectBox()?(c=jQuery("#"+c.attr("id")+" option:selected"),jQuery.each(c,function(){a.push(jQuery(this).val())})):a.push(c.selectedValue());return a}})(jQuery);
(function(a){a.fn.itemExists=function(a){var c=jQuery(this),e=!1;if(c.isRadioBox())e=jQuery("input[type='radio'][name='"+c.attr("name")+"'][value='"+a+"']").length===1;else if(c.isSelectBox()||c.isMultiSelectBox()||c.isDropDownList())c=jQuery("#"+c.attr("id")+" option"),jQuery.each(c,function(){if(jQuery(this).val()===a)return e=!0,!1});else return jQuery(this).val()===a;return e}})(jQuery);
jQuery(document).ready(function(){jQuery(".s3_checkbox_label").cluetip({activation:"hover",positionBy:"auto",local:!0,hideLocal:!1,showTitle:!1,topOffset:0,mouseOutClose:!0,arrows:!0,clickThrough:!0})});
jQuery.fn.fancyZoom=function(a){function g(f){if(n)return!1;n=!0;var e=$($(this).attr("href")),g=a.height,j=window.innerWidth||window.document.documentElement.clientWidth||window.document.body.clientWidth,v=window.innerHeight||window.document.documentElement.clientHeight||window.document.body.clientHeight,u=window.pageYOffset||window.document.documentElement.scrollTop||window.document.body.scrollTop,p={width:j,height:v,x:window.pageXOffset||window.document.documentElement.scrollLeft||window.document.body.scrollLeft,
y:u};j=(a.width||e.width())+60;v=(g||e.height())+60;g=Math.max(p.height/2-v/2+u,0);p=p.width/2-j/2;u=f.pageY;f=f.pageX;k.attr("curTop",u);k.attr("curLeft",f);k.attr("scaleImg",a.scaleImg?"true":"false");$("#zoom").hide().css({position:"absolute",top:u+"px",left:f+"px",width:"1px",height:"1px"});h();k.hide();a.closeOnClick&&$("#zoom").click(c);a.scaleImg?(r.html(e.html()),$("#zoom_content img").css("width","100%")):r.html("");$("#zoom").animate({top:g+"px",left:p+"px",opacity:"show",width:j,height:v},
500,null,function(){a.scaleImg!=!0&&r.html(e.html());b();k.show();n=!1});return!1}function c(){if(n)return!1;n=!0;$("#zoom").unbind("click");h();k.attr("scaleImg")!="true"&&r.html("");k.hide();$("#zoom").animate({top:k.attr("curTop")+"px",left:k.attr("curLeft")+"px",opacity:"hide",width:"1px",height:"1px"},500,null,function(){k.attr("scaleImg")=="true"&&r.html("");b();n=!1});return!1}function e(a){$("#zoom_table td").each(function(){var b=$(this).css("background-image").replace(/\.(png|gif|none)\"\)$/,
"."+a+'")');$(this).css("background-image",b)});var b=k.children("img"),c=b.attr("src").replace(/\.(png|gif|none)$/,"."+a);b.attr("src",c)}function h(){$.browser.msie&&parseFloat($.browser.version)>=7&&e("gif")}function b(){$.browser.msie&&$.browser.version>=7&&e("png")}var f=(a=a||{})&&a.directory?a.directory:"images",n=!1;if($("#zoom").length==0){var j=$.browser.msie?"gif":"png";$("body").append('<div id="zoom" style="display:none;">                   <table id="zoom_table" style="border-collapse:collapse; width:100%; height:100%;">                     <tbody>                       <tr>                         <td class="tl" style="background:url('+
f+"/tl."+j+') 0 0 no-repeat; width:20px height:20px; overflow:hidden;" />                         <td class="tm" style="background:url('+f+"/tm."+j+') 0 0 repeat-x; height:20px; overflow:hidden;" />                         <td class="tr" style="background:url('+f+"/tr."+j+') 100% 0 no-repeat; width:20px height:20px; overflow:hidden;" />                       </tr>                       <tr>                         <td class="ml" style="background:url('+f+"/ml."+j+') 0 0 repeat-y; width:20px; overflow:hidden;" />                         <td class="mm" style="background:#fff; vertical-align:top; padding:10px;">                           <div id="zoom_content">                           </div>                         </td>                         <td class="mr" style="background:url('+
f+"/mr."+j+') 100% 0 repeat-y;  width:20px; overflow:hidden;" />                       </tr>                       <tr>                         <td class="bl" style="background:url('+f+"/bl."+j+') 0 100% no-repeat; width:20px height:20px; overflow:hidden;" />                         <td class="bm" style="background:url('+f+"/bm."+j+') 0 100% repeat-x; height:20px; overflow:hidden;" />                         <td class="br" style="background:url('+f+"/br."+j+') 100% 100% no-repeat; width:20px height:20px; overflow:hidden;" />                       </tr>                     </tbody>                   </table>                   <a href="#" title="Close" id="zoom_close" style="position:absolute; top:0; left:0;">                     <img src="'+
f+"/closebox."+j+'" alt="Close" style="border:none; margin:0; padding:0;" />                   </a>                 </div>');$("html").click(function(a){$(a.target).parents("#zoom:visible").length==0&&c()});$(document).keyup(function(a){a.keyCode==27&&$("#zoom:visible").length>0&&c()});$("#zoom_close").click(c)}$("#zoom");$("#zoom_table");var k=$("#zoom_close"),r=$("#zoom_content");$("td.ml,td.mm,td.mr");this.each(function(){$($(this).attr("href")).hide();$(this).click(g)});return this};
(function(a){a.ui=a.ui||{};var g=/left|center|right/,c=/top|center|bottom/,e=a.fn.position,h=a.fn.offset;a.fn.position=function(b){if(!b||!b.of)return e.apply(this,arguments);b=a.extend({},b);var f=a(b.of),h=f[0],j=(b.collision||"flip").split(" "),k=b.offset?b.offset.split(" "):[0,0],r,m,s;h.nodeType===9?(r=f.width(),m=f.height(),s={top:0,left:0}):h.setTimeout?(r=f.width(),m=f.height(),s={top:f.scrollTop(),left:f.scrollLeft()}):h.preventDefault?(b.at="left top",r=m=0,s={top:b.of.pageY,left:b.of.pageX}):
(r=f.outerWidth(),m=f.outerHeight(),s=f.offset());a.each(["my","at"],function(){var a=(b[this]||"").split(" ");a.length===1&&(a=g.test(a[0])?a.concat(["center"]):c.test(a[0])?["center"].concat(a):["center","center"]);a[0]=g.test(a[0])?a[0]:"center";a[1]=c.test(a[1])?a[1]:"center";b[this]=a});j.length===1&&(j[1]=j[0]);k[0]=parseInt(k[0],10)||0;k.length===1&&(k[1]=k[0]);k[1]=parseInt(k[1],10)||0;b.at[0]==="right"?s.left+=r:b.at[0]==="center"&&(s.left+=r/2);b.at[1]==="bottom"?s.top+=m:b.at[1]==="center"&&
(s.top+=m/2);s.left+=k[0];s.top+=k[1];return this.each(function(){var c=a(this),f=c.outerWidth(),e=c.outerHeight(),g=parseInt(a.curCSS(this,"marginLeft",!0))||0,h=parseInt(a.curCSS(this,"marginTop",!0))||0,n=f+g+(parseInt(a.curCSS(this,"marginRight",!0))||0),x=e+h+(parseInt(a.curCSS(this,"marginBottom",!0))||0),w=a.extend({},s),H;b.my[0]==="right"?w.left-=f:b.my[0]==="center"&&(w.left-=f/2);b.my[1]==="bottom"?w.top-=e:b.my[1]==="center"&&(w.top-=e/2);w.left=Math.round(w.left);w.top=Math.round(w.top);
H={left:w.left-g,top:w.top-h};a.each(["left","top"],function(c,g){if(a.ui.position[j[c]])a.ui.position[j[c]][g](w,{targetWidth:r,targetHeight:m,elemWidth:f,elemHeight:e,collisionPosition:H,collisionWidth:n,collisionHeight:x,offset:k,my:b.my,at:b.at})});a.fn.bgiframe&&c.bgiframe();c.offset(a.extend(w,{using:b.using}))})};a.ui.position={fit:{left:function(b,c){var e=a(window);e=c.collisionPosition.left+c.collisionWidth-e.width()-e.scrollLeft();b.left=e>0?b.left-e:Math.max(b.left-c.collisionPosition.left,
b.left)},top:function(b,c){var e=a(window);e=c.collisionPosition.top+c.collisionHeight-e.height()-e.scrollTop();b.top=e>0?b.top-e:Math.max(b.top-c.collisionPosition.top,b.top)}},flip:{left:function(b,c){if(c.at[0]!=="center"){var e=a(window);e=c.collisionPosition.left+c.collisionWidth-e.width()-e.scrollLeft();var g=c.my[0]==="left"?-c.elemWidth:c.my[0]==="right"?c.elemWidth:0,h=c.at[0]==="left"?c.targetWidth:-c.targetWidth,r=-2*c.offset[0];b.left+=c.collisionPosition.left<0?g+h+r:e>0?g+h+r:0}},top:function(b,
c){if(c.at[1]!=="center"){var e=a(window);e=c.collisionPosition.top+c.collisionHeight-e.height()-e.scrollTop();var g=c.my[1]==="top"?-c.elemHeight:c.my[1]==="bottom"?c.elemHeight:0,h=c.at[1]==="top"?c.targetHeight:-c.targetHeight,r=-2*c.offset[1];b.top+=c.collisionPosition.top<0?g+h+r:e>0?g+h+r:0}}}};if(!a.offset.setOffset)a.offset.setOffset=function(b,c){if(/static/.test(a.curCSS(b,"position")))b.style.position="relative";var e=a(b),g=e.offset(),h=parseInt(a.curCSS(b,"top",!0),10)||0,r=parseInt(a.curCSS(b,
"left",!0),10)||0;g={top:c.top-g.top+h,left:c.left-g.left+r};"using"in c?c.using.call(b,g):e.css(g)},a.fn.offset=function(b){var c=this[0];if(!c||!c.ownerDocument)return null;if(b)return this.each(function(){a.offset.setOffset(this,b)});return h.call(this)}})(jQuery);
(function(a){var g=0;a.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var c=this,e=this.element[0].ownerDocument,g;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(b){if(!c.options.disabled&&!c.element.attr("readonly")){g=!1;var e=
a.ui.keyCode;switch(b.keyCode){case e.PAGE_UP:c._move("previousPage",b);break;case e.PAGE_DOWN:c._move("nextPage",b);break;case e.UP:c._move("previous",b);b.preventDefault();break;case e.DOWN:c._move("next",b);b.preventDefault();break;case e.ENTER:case e.NUMPAD_ENTER:c.menu.active&&(g=!0,b.preventDefault());case e.TAB:if(!c.menu.active)break;c.menu.select(b);break;case e.ESCAPE:c.element.val(c.term);c.close(b);break;default:clearTimeout(c.searching),c.searching=setTimeout(function(){if(c.term!=c.element.val())c.selectedItem=
null,c.search(null,b)},c.options.delay)}}}).bind("keypress.autocomplete",function(a){g&&(g=!1,a.preventDefault())}).bind("focus.autocomplete",function(){if(!c.options.disabled)c.selectedItem=null,c.previous=c.element.val()}).bind("blur.autocomplete",function(a){if(!c.options.disabled)clearTimeout(c.searching),c.closing=setTimeout(function(){c.close(a);c._change(a)},150)});this._initSource();this.response=function(){return c._response.apply(c,arguments)};this.menu=a("<ul></ul>").addClass("ui-autocomplete").appendTo(a(this.options.appendTo||
"body",e)[0]).mousedown(function(b){var e=c.menu.element[0];a(b.target).closest(".ui-menu-item").length||setTimeout(function(){a(document).one("mousedown",function(b){b.target!==c.element[0]&&b.target!==e&&!a.ui.contains(e,b.target)&&c.close()})},1);setTimeout(function(){clearTimeout(c.closing)},13)}).menu({focus:function(a,e){var g=e.item.data("item.autocomplete");!1!==c._trigger("focus",a,{item:g})&&/^key/.test(a.originalEvent.type)&&c.element.val(g.value)},selected:function(a,f){var g=f.item.data("item.autocomplete"),
h=c.previous;if(c.element[0]!==e.activeElement)c.element.focus(),c.previous=h,setTimeout(function(){c.previous=h;c.selectedItem=g},1);!1!==c._trigger("select",a,{item:g})&&c.element.val(g.value);c.term=c.element.val();c.close(a);c.selectedItem=g},blur:function(){c.menu.element.is(":visible")&&c.element.val()!==c.term&&c.element.val(c.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu");a.fn.bgiframe&&this.menu.element.bgiframe()},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");
this.menu.element.remove();a.Widget.prototype.destroy.call(this)},_setOption:function(c,e){a.Widget.prototype._setOption.apply(this,arguments);c==="source"&&this._initSource();c==="appendTo"&&this.menu.element.appendTo(a(e||"body",this.element[0].ownerDocument)[0]);c==="disabled"&&e&&this.xhr&&this.xhr.abort()},_initSource:function(){var c=this,e,h;a.isArray(this.options.source)?(e=this.options.source,this.source=function(b,c){c(a.ui.autocomplete.filter(e,b.term))}):typeof this.options.source==="string"?
(h=this.options.source,this.source=function(b,e){c.xhr&&c.xhr.abort();c.xhr=a.ajax({url:h,data:b,dataType:"json",autocompleteRequest:++g,success:function(a){this.autocompleteRequest===g&&e(a)},error:function(){this.autocompleteRequest===g&&e([])}})}):this.source=this.options.source},search:function(a,e){a=a!=null?a:this.element.val();this.term=this.element.val();if(a.length<this.options.minLength)return this.close(e);clearTimeout(this.closing);if(this._trigger("search",e)!==!1)return this._search(a)},
_search:function(a){this.pending++;this.element.addClass("ui-autocomplete-loading");this.source({term:a},this.response)},_response:function(a){!this.options.disabled&&a&&a.length?(a=this._normalize(a),this._suggest(a),this._trigger("open")):this.close();this.pending--;this.pending||this.element.removeClass("ui-autocomplete-loading")},close:function(a){clearTimeout(this.closing);this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",a))},_change:function(a){this.previous!==
this.element.val()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(c){if(c.length&&c[0].label&&c[0].value)return c;return a.map(c,function(c){if(typeof c==="string")return{label:c,value:c};return a.extend({label:c.label||c.value,value:c.value||c.label},c)})},_suggest:function(c){var e=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(e,c);this.menu.deactivate();this.menu.refresh();e.show();this._resizeMenu();e.position(a.extend({of:this.element},this.options.position));
this.options.autoFocus&&this.menu.next(new a.Event("mouseover"))},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth(),this.element.outerWidth()))},_renderMenu:function(c,e){var g=this;a.each(e,function(a,e){g._renderItem(c,e)})},_renderItem:function(c,e){return a("<li></li>").data("item.autocomplete",e).append(a("<a></a>").text(e.label)).appendTo(c)},_move:function(a,e){if(this.menu.element.is(":visible"))if(this.menu.first()&&/^previous/.test(a)||this.menu.last()&&
/^next/.test(a))this.element.val(this.term),this.menu.deactivate();else this.menu[a](e);else this.search(null,e)},widget:function(){return this.menu.element}});a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(c,e){var g=RegExp(a.ui.autocomplete.escapeRegex(e),"i");return a.grep(c,function(a){return g.test(a.label||a.value||a)})}})})(jQuery);
(function(a){a.widget("ui.menu",{_create:function(){var g=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(c){a(c.target).closest(".ui-menu-item a").length&&(c.preventDefault(),g.select(c))});this.refresh()},refresh:function(){var g=this;this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").attr("tabindex",
-1).mouseenter(function(c){g.activate(c,a(this).parent())}).mouseleave(function(){g.deactivate()})},activate:function(a,c){this.deactivate();if(this.hasScroll()){var e=c.offset().top-this.element.offset().top,h=this.element.attr("scrollTop"),b=this.element.height();e<0?this.element.attr("scrollTop",h+e):e>=b&&this.element.attr("scrollTop",h+e-b+c.height())}this.active=c.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",a,{item:c})},deactivate:function(){if(this.active)this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),
this._trigger("blur"),this.active=null},next:function(a){this.move("next",".ui-menu-item:first",a)},previous:function(a){this.move("prev",".ui-menu-item:last",a)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(a,c,e){this.active?(a=this.active[a+"All"](".ui-menu-item").eq(0),a.length?this.activate(e,a):this.activate(e,this.element.children(c))):this.activate(e,this.element.children(c))},
nextPage:function(g){if(this.hasScroll())if(!this.active||this.last())this.activate(g,this.element.children(".ui-menu-item:first"));else{var c=this.active.offset().top,e=this.element.height(),h=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c-e+a(this).height();return b<10&&b>-10});h.length||(h=this.element.children(".ui-menu-item:last"));this.activate(g,h)}else this.activate(g,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},
previousPage:function(g){if(this.hasScroll())if(!this.active||this.first())this.activate(g,this.element.children(".ui-menu-item:last"));else{var c=this.active.offset().top,e=this.element.height();result=this.element.children(".ui-menu-item").filter(function(){var g=a(this).offset().top-c+e-a(this).height();return g<10&&g>-10});result.length||(result=this.element.children(".ui-menu-item:first"));this.activate(g,result)}else this.activate(g,this.element.children(".ui-menu-item").filter(!this.active||
this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element.attr("scrollHeight")},select:function(a){this._trigger("selected",a,{item:this.active})}})})(jQuery);$(document).ready(function(){S3.rtl?$('div.label label[id!="delete_record__label"]').prepend(":"):$('div.label label[id!="delete_record__label"]').append(":")});var S3={};S3.gis={};var popupWin=null;
function openPopup(a){!popupWin||popupWin.closed?popupWin=window.open(a,"popupWin","width=640, height=480"):popupWin.focus()}
$(document).ready(function(){try{$(".zoom").fancyZoom({scaleImg:!0,closeOnClick:!0,directory:S3.Ap.concat("/static/media")})}catch(a){}$("input.date").datepicker({changeMonth:!0,changeYear:!0,showOn:"both",buttonImage:S3.Ap.concat("/static/img/jquery-ui/calendar.gif"),buttonImageOnly:!0,dateFormat:"yy-mm-dd",isRTL:S3.rtl});$(".error").hide().slideDown("slow");$(".error").click(function(){$(this).fadeOut("slow");return!1});$(".warning").hide().slideDown("slow");$(".warning").click(function(){$(this).fadeOut("slow");
return!1});$(".information").hide().slideDown("slow");$(".information").click(function(){$(this).fadeOut("slow");return!1});$(".confirmation").hide().slideDown("slow");$(".confirmation").click(function(){$(this).fadeOut("slow");return!1});$(".hoverable").hover(function(){$(this).addClass("hovered")},function(){$(this).removeClass("hovered")});$("#modulenav li").hover(function(){var a=$(this).width(),e=$("ul",this).width();e!=null&&e<a&&$("ul",this).css({width:a.toString()+"px"});$("ul",this).css("display",
"block")},function(){$("ul",this).css("display","none")});$("#subnav li").hover(function(){var a=$(this).width()-2;$("ul",this).css({display:"block",width:a.toString()+"px"})},function(){$("ul",this).css("display","none")});$("a.colorbox").attr("href",function(a,e){var g="";try{g=$(this).parents("tr").attr("id").replace(/__row/,"")}catch(b){if(g=="")return e}var f=e;e.indexOf("&caller=")==-1&&(f=e+"&caller="+g);return f});$(".colorbox").click(function(){$.fn.colorbox({iframe:!0,width:"99%",height:"99%",
href:this.href,title:this.title});return!1});$(".tooltip").cluetip({activation:"hover",sticky:!1,splitTitle:"|"});var g='<img src="'+S3.Ap.concat("/static/img/cross2.png")+'" alt="close" />';$(".stickytip").cluetip({activation:"hover",sticky:!0,closePosition:"title",closeText:g,splitTitle:"|"});$(".ajaxtip").cluetip({activation:"click",sticky:!0,closePosition:"title",closeText:g,width:380});now=new Date;$("form").append("<input type='hidden' value="+now.getTimezoneOffset()+" name='_utc_offset'/>")});
function s3_tb_remove(){$.fn.colorbox.close()}
(function(a){a.ajaxS3=function(g){var c=a.extend({},a.ajaxS3Settings,g);c.tryCount=0;g.message&&s3_showStatus(S3.i18n.ajax_get+" "+(g.message?g.message:S3.i18n.ajax_fmd)+"...",this.ajaxS3Settings.msgTimeout);c.success=function(a,c){s3_hideStatus();g.success&&g.success(a,c)};c.error=function(c,h){h=="timeout"?(this.tryCount++,this.tryCount<=this.retryLimit?(s3_showStatus(S3.i18n.ajax_get+" "+(g.message?g.message:S3.i18n.ajax_fmd)+"... "+S3.i18n.ajax_rtr+" "+this.tryCount,a.ajaxS3Settings.msgTimeout),
a.ajax(this)):s3_showStatus(S3.i18n.ajax_wht+" "+(this.retryLimit+1)+" "+S3.i18n.ajax_gvn,a.ajaxS3Settings.msgTimeout,!1,!0)):c.status==500?s3_showStatus(S3.i18n.ajax_500,a.ajaxS3Settings.msgTimeout,!1,!0):s3_showStatus(S3.i18n.ajax_dwn,a.ajaxS3Settings.msgTimeout,!1,!0)};a.ajax(c)};a.postS3=function(g,c,e,h){return a.ajaxS3({type:"POST",url:g,data:c,success:e,dataType:h})};a.getS3=function(g,c,e,h,b,f){a.isFunction(c)&&(f=b,b=h,h=e,e=c,c=null);if(f)var n=!1;return a.ajaxS3({type:"GET",url:g,async:n,
data:c,success:e,dataType:h,message:b})};a.getJSONS3=function(g,c,e,h,b){a.isFunction(c)&&(b=h,h=e,e=c,c=null);b||(b=!1);return a.getS3(g,c,e,"json",h,b)};a.ajaxS3Settings={timeout:1E4,msgTimeout:2E3,retryLimit:10,dataType:"json",async:!0,type:"GET"};a.ajaxS3Setup=function(g){a.extend(a.ajaxS3Settings,g)}})($);
function S3StatusBar(a,g){var c=this,e=null;this.elementId="_showstatus";this.prependMultiline=!0;this.showCloseButton=!1;this.afterTimeoutText=null;this.cssClass="statusbar";this.highlightClass="statusbarhighlight";this.errorClass="statusbarerror";this.closeButtonClass="statusbarclose";this.additive=!1;$.extend(this,g);a&&(e=$(a));e||(e=$("<div id='_statusbar' class='"+c.cssClass+"'><div class='"+c.closeButtonClass+"'>"+(c.showCloseButton?" X </div></div>":"")).appendTo(document.body).show());$("."+
c.cssClass).click(function(){$(e).hide()});this.show=function(a,b,f,g){f||f==void 0&&c.additive?(a="<div style='margin-bottom: 2px;' >"+a+"</div>",c.prependMultiline?e.prepend(a):e.append(a)):c.showCloseButton?(f=e.find("div.statusbarclose"),e.text(a).prepend(f)):e.text(a);e.show();b&&(g?e.addClass(c.errorClass):e.addClass(c.highlightClass),setTimeout(function(){e.removeClass(c.highlightClass);c.afterTimeoutText&&c.show(c.afterTimeoutText)},b))};this.release=function(){_statusbar&&($("#_statusbar").remove(),
_statusbar=void 0)}}var _statusbar=null;function s3_showStatus(a,g,c,e){_statusbar||(_statusbar=new S3StatusBar);_statusbar.show(a,g,c,e)}function s3_hideStatus(){_statusbar&&_statusbar.release()}function S3SetNavigateAwayConfirm(){window.onbeforeunload=function(){return S3.i18n.unsaved_changes}}function S3ClearNavigateAwayConfirm(){window.onbeforeunload=function(){}}
function S3EnableNavigateAwayConfirm(){$(document).ready(function(){$("[class=error]").length>0&&S3SetNavigateAwayConfirm();$(":input:not(input[id=gis_location_advanced_checkbox])").keypress(S3SetNavigateAwayConfirm);$(":input:not(input[id=gis_location_advanced_checkbox])").change(S3SetNavigateAwayConfirm);$("form").submit(S3ClearNavigateAwayConfirm)})}function S3ConfirmClick(a,g){$(a).click(function(a){return confirm(g)?!0:(a.preventDefault(),!1)})}
function s3_viewMap(a){a=S3.Ap.concat("/gis/display_feature/")+a;var g=$("#map").html();a="<iframe width='640' height='480' src='"+a+"'></iframe>";var c=$('<a href="#">'+S3.i18n.close_map+"</a>");c.bind("click",function(a){$("#map").html(g);a.preventDefault()});$("#map").html(a);$("#map").append($("<div style='margin-bottom: 10px' />").append(c))}
function s3_viewMapMulti(a,g,c,e){a=S3.Ap.concat("/gis/display_feature//?module=")+a+"&resource="+g+"&instance="+c+"&jresource="+e;var h=$("#map").html();a='<iframe width="640" height="480" src="'+a+'"></iframe>';g=$('<a href="#">'+S3.i18n.close_map+"</a>");g.bind("click",function(a){$("#map").html(h);a.preventDefault()});$("#map").html(a);$("#map").append($("<div style='margin-bottom: 10px' />").append(g))};
