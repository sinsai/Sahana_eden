Calendar=function(a,c,b,f){this.timeout=this.getDateText=this.getDateToolTip=this.getDateStatus=this.currentDateEl=this.activeDiv=null;this.onSelected=b||null;this.onClose=f||null;this.hidden=this.dragging=!1;this.minYear=1970;this.maxYear=2050;this.dateFormat=Calendar._TT.DEF_DATE_FORMAT;this.ttDateFormat=Calendar._TT.TT_DATE_FORMAT;this.weekNumbers=this.isPopup=!0;this.firstDayOfWeek=typeof a=="number"?a:Calendar._FD;this.showsOtherMonths=!1;this.dateStr=c;this.ar_days=null;this.showsTime=!1;this.time24=
!0;this.yearStep=2;this.hiliteToday=!0;this.activeYear=this.hilitedYear=this.activeMonth=this.hilitedMonth=this.yearsCombo=this.monthsCombo=this.firstdayname=this.tbody=this.element=this.table=this.multiple=null;this.dateClicked=!1;if(typeof Calendar._SDN=="undefined"){if(typeof Calendar._SDN_len=="undefined")Calendar._SDN_len=3;a=[];for(c=8;c>0;)a[--c]=Calendar._DN[c].substr(0,Calendar._SDN_len);Calendar._SDN=a;if(typeof Calendar._SMN_len=="undefined")Calendar._SMN_len=3;a=[];for(c=12;c>0;)a[--c]=
Calendar._MN[c].substr(0,Calendar._SMN_len);Calendar._SMN=a}};Calendar._C=null;Calendar.is_ie=/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent);Calendar.is_ie5=Calendar.is_ie&&/msie 5\.0/i.test(navigator.userAgent);Calendar.is_opera=/opera/i.test(navigator.userAgent);Calendar.is_khtml=/Konqueror|Safari|KHTML/i.test(navigator.userAgent);
Calendar.getAbsolutePos=function(a){var c=0,b=0,f=/^div$/i.test(a.tagName);if(f&&a.scrollLeft)c=a.scrollLeft;if(f&&a.scrollTop)b=a.scrollTop;c={x:a.offsetLeft-c,y:a.offsetTop-b};a.offsetParent&&(a=this.getAbsolutePos(a.offsetParent),c.x+=a.x,c.y+=a.y);return c};Calendar.isRelated=function(a,c){var b=c.relatedTarget;if(!b){var f=c.type;if(f=="mouseover")b=c.fromElement;else if(f=="mouseout")b=c.toElement}for(;b;){if(b==a)return!0;b=b.parentNode}return!1};
Calendar.removeClass=function(a,c){if(a&&a.className){for(var b=a.className.split(" "),f=[],h=b.length;h>0;)b[--h]!=c&&(f[f.length]=b[h]);a.className=f.join(" ")}};Calendar.addClass=function(a,c){Calendar.removeClass(a,c);a.className+=" "+c};Calendar.getElement=function(a){for(a=Calendar.is_ie?window.event.srcElement:a.currentTarget;a.nodeType!=1||/^div$/i.test(a.tagName);)a=a.parentNode;return a};
Calendar.getTargetElement=function(a){for(a=Calendar.is_ie?window.event.srcElement:a.target;a.nodeType!=1;)a=a.parentNode;return a};Calendar.stopEvent=function(a){a||(a=window.event);Calendar.is_ie?(a.cancelBubble=!0,a.returnValue=!1):(a.preventDefault(),a.stopPropagation());return!1};Calendar.addEvent=function(a,c,b){a.attachEvent?a.attachEvent("on"+c,b):a.addEventListener?a.addEventListener(c,b,!0):a["on"+c]=b};
Calendar.removeEvent=function(a,c,b){a.detachEvent?a.detachEvent("on"+c,b):a.removeEventListener?a.removeEventListener(c,b,!0):a["on"+c]=null};Calendar.createElement=function(a,c){var b=null,b=document.createElementNS?document.createElementNS("http://www.w3.org/1999/xhtml",a):document.createElement(a);typeof c!="undefined"&&c.appendChild(b);return b};
Calendar._add_evs=function(a){with(Calendar)addEvent(a,"mouseover",dayMouseOver),addEvent(a,"mousedown",dayMouseDown),addEvent(a,"mouseout",dayMouseOut),is_ie&&(addEvent(a,"dblclick",dayMouseDblClick),a.setAttribute("unselectable",!0))};Calendar.findMonth=function(a){if(typeof a.month!="undefined")return a;else if(typeof a.parentNode.month!="undefined")return a.parentNode;return null};
Calendar.findYear=function(a){if(typeof a.year!="undefined")return a;else if(typeof a.parentNode.year!="undefined")return a.parentNode;return null};
Calendar.showMonthsCombo=function(){var a=Calendar._C;if(!a)return!1;var c=a.activeDiv,b=a.monthsCombo;a.hilitedMonth&&Calendar.removeClass(a.hilitedMonth,"hilite");a.activeMonth&&Calendar.removeClass(a.activeMonth,"active");var f=a.monthsCombo.getElementsByTagName("div")[a.date.getMonth()];Calendar.addClass(f,"active");a.activeMonth=f;a=b.style;a.display="block";c.navtype<0?a.left=c.offsetLeft+"px":(b=b.offsetWidth,typeof b=="undefined"&&(b=50),a.left=c.offsetLeft+c.offsetWidth-b+"px");a.top=c.offsetTop+
c.offsetHeight+"px"};
Calendar.showYearsCombo=function(a){var c=Calendar._C;if(!c)return!1;var b=c.activeDiv,f=c.yearsCombo;c.hilitedYear&&Calendar.removeClass(c.hilitedYear,"hilite");c.activeYear&&Calendar.removeClass(c.activeYear,"active");c.activeYear=null;for(var h=c.date.getFullYear()+(a?1:-1),e=f.firstChild,g=!1,m=12;m>0;--m)h>=c.minYear&&h<=c.maxYear?(e.innerHTML=h,e.year=h,e.style.display="block",g=!0):e.style.display="none",e=e.nextSibling,h+=a?c.yearStep:-c.yearStep;if(g)a=f.style,a.display="block",b.navtype<
0?a.left=b.offsetLeft+"px":(f=f.offsetWidth,typeof f=="undefined"&&(f=50),a.left=b.offsetLeft+b.offsetWidth-f+"px"),a.top=b.offsetTop+b.offsetHeight+"px"};
Calendar.tableMouseUp=function(a){var c=Calendar._C;if(!c)return!1;c.timeout&&clearTimeout(c.timeout);var b=c.activeDiv;if(!b)return!1;var f=Calendar.getTargetElement(a);a||(a=window.event);Calendar.removeClass(b,"active");(f==b||f.parentNode==b)&&Calendar.cellClick(b,a);var h=Calendar.findMonth(f),b=null;if(h){if(b=new Date(c.date),h.month!=b.getMonth())b.setMonth(h.month),c.setDate(b),c.dateClicked=!1,c.callHandler()}else if(f=Calendar.findYear(f))if(b=new Date(c.date),f.year!=b.getFullYear())b.setFullYear(f.year),
c.setDate(b),c.dateClicked=!1,c.callHandler();with(Calendar)return removeEvent(document,"mouseup",tableMouseUp),removeEvent(document,"mouseover",tableMouseOver),removeEvent(document,"mousemove",tableMouseOver),c._hideCombos(),_C=null,stopEvent(a)};
Calendar.tableMouseOver=function(a){var c=Calendar._C;if(c){var b=c.activeDiv,f=Calendar.getTargetElement(a);f==b||f.parentNode==b?(Calendar.addClass(b,"hilite active"),Calendar.addClass(b.parentNode,"rowhilite")):((typeof b.navtype=="undefined"||b.navtype!=50&&(b.navtype==0||Math.abs(b.navtype)>2))&&Calendar.removeClass(b,"active"),Calendar.removeClass(b,"hilite"),Calendar.removeClass(b.parentNode,"rowhilite"));a||(a=window.event);if(b.navtype==50&&f!=b){var h=Calendar.getAbsolutePos(b),e=b.offsetWidth,
g=a.clientX,m=!0;g>h.x+e?(g=g-h.x-e,m=!1):g=h.x-g;g<0&&(g=0);for(var h=b._range,e=b._current,g=Math.floor(g/10)%h.length,j=h.length;--j>=0;)if(h[j]==e)break;for(;g-- >0;)m?--j<0&&(j=h.length-1):++j>=h.length&&(j=0);b.innerHTML=h[j];c.onUpdateTime()}(b=Calendar.findMonth(f))?b.month!=c.date.getMonth()?(c.hilitedMonth&&Calendar.removeClass(c.hilitedMonth,"hilite"),Calendar.addClass(b,"hilite"),c.hilitedMonth=b):c.hilitedMonth&&Calendar.removeClass(c.hilitedMonth,"hilite"):(c.hilitedMonth&&Calendar.removeClass(c.hilitedMonth,
"hilite"),(f=Calendar.findYear(f))?f.year!=c.date.getFullYear()?(c.hilitedYear&&Calendar.removeClass(c.hilitedYear,"hilite"),Calendar.addClass(f,"hilite"),c.hilitedYear=f):c.hilitedYear&&Calendar.removeClass(c.hilitedYear,"hilite"):c.hilitedYear&&Calendar.removeClass(c.hilitedYear,"hilite"));return Calendar.stopEvent(a)}};Calendar.tableMouseDown=function(a){if(Calendar.getTargetElement(a)==Calendar.getElement(a))return Calendar.stopEvent(a)};
Calendar.calDragIt=function(a){var c=Calendar._C;if(!c||!c.dragging)return!1;var b,f;Calendar.is_ie?(f=window.event.clientY+document.body.scrollTop,b=window.event.clientX+document.body.scrollLeft):(b=a.pageX,f=a.pageY);c.hideShowCovered();var h=c.element.style;h.left=b-c.xOffs+"px";h.top=f-c.yOffs+"px";return Calendar.stopEvent(a)};
Calendar.calDragEnd=function(a){var c=Calendar._C;if(!c)return!1;c.dragging=!1;with(Calendar)removeEvent(document,"mousemove",calDragIt),removeEvent(document,"mouseup",calDragEnd),tableMouseUp(a);c.hideShowCovered()};
Calendar.dayMouseDown=function(a){var c=Calendar.getElement(a);if(c.disabled)return!1;var b=c.calendar;b.activeDiv=c;Calendar._C=b;if(c.navtype!=300)with(Calendar)c.navtype==50?(c._current=c.innerHTML,addEvent(document,"mousemove",tableMouseOver)):addEvent(document,Calendar.is_ie5?"mousemove":"mouseover",tableMouseOver),addClass(c,"hilite active"),addEvent(document,"mouseup",tableMouseUp);else b.isPopup&&b._dragStart(a);c.navtype==-1||c.navtype==1?(b.timeout&&clearTimeout(b.timeout),b.timeout=setTimeout("Calendar.showMonthsCombo()",
250)):c.navtype==-2||c.navtype==2?(b.timeout&&clearTimeout(b.timeout),b.timeout=setTimeout(c.navtype>0?"Calendar.showYearsCombo(true)":"Calendar.showYearsCombo(false)",250)):b.timeout=null;return Calendar.stopEvent(a)};Calendar.dayMouseDblClick=function(a){Calendar.cellClick(Calendar.getElement(a),a||window.event);Calendar.is_ie&&document.selection.empty()};
Calendar.dayMouseOver=function(a){var c=Calendar.getElement(a);if(Calendar.isRelated(c,a)||Calendar._C||c.disabled)return!1;if(c.ttip){if(c.ttip.substr(0,1)=="_")c.ttip=c.caldate.print(c.calendar.ttDateFormat)+c.ttip.substr(1);c.calendar.tooltips.innerHTML=c.ttip}c.navtype!=300&&(Calendar.addClass(c,"hilite"),c.caldate&&Calendar.addClass(c.parentNode,"rowhilite"));return Calendar.stopEvent(a)};
Calendar.dayMouseOut=function(a){with(Calendar){var c=getElement(a);if(isRelated(c,a)||_C||c.disabled)return!1;removeClass(c,"hilite");c.caldate&&removeClass(c.parentNode,"rowhilite");if(c.calendar)c.calendar.tooltips.innerHTML=_TT.SEL_DATE;return stopEvent(a)}};
Calendar.cellClick=function(a,c){var b=a.calendar,f=!1,h=!1,e=null;if(typeof a.navtype=="undefined"){if(b.currentDateEl&&(Calendar.removeClass(b.currentDateEl,"selected"),Calendar.addClass(a,"selected"),f=b.currentDateEl==a,!f))b.currentDateEl=a;b.date.setDateOnly(a.caldate);var e=b.date,g=!(b.dateClicked=!a.otherMonth);!g&&!b.currentDateEl?b._toggleMultipleDate(new Date(e)):h=!a.disabled;g&&b._init(b.firstDayOfWeek,e)}else{if(a.navtype==200){Calendar.removeClass(a,"hilite");b.callCloseHandler();
return}e=new Date(b.date);a.navtype==0&&e.setDateOnly(new Date);b.dateClicked=!1;var g=e.getFullYear(),m=e.getMonth(),j=function(a){var g=e.getDate(),b=e.getMonthDays(a);g>b&&e.setDate(b);e.setMonth(a)};switch(a.navtype){case 400:Calendar.removeClass(a,"hilite");f=Calendar._TT.ABOUT;typeof f!="undefined"?f+=b.showsTime?Calendar._TT.ABOUT_TIME:"":f='Help and about box text is not translated into this language.\nIf you know this language and you feel generous please update\nthe corresponding file in "lang" subdir to match calendar-en.js\nand send it back to <mihai_bazon@yahoo.com> to get it into the distribution  ;-)\n\nThank you!\nhttp://dynarch.com/mishoo/calendar.epl\n';
alert(f);return;case -2:g>b.minYear&&e.setFullYear(g-1);break;case -1:m>0?j(m-1):g-- >b.minYear&&(e.setFullYear(g),j(11));break;case 1:m<11?j(m+1):g<b.maxYear&&(e.setFullYear(g+1),j(0));break;case 2:g<b.maxYear&&e.setFullYear(g+1);break;case 100:b.setFirstDayOfWeek(a.fdow);return;case 50:f=a._range;h=a.innerHTML;for(g=f.length;--g>=0;)if(f[g]==h)break;c&&c.shiftKey?--g<0&&(g=f.length-1):++g>=f.length&&(g=0);a.innerHTML=f[g];b.onUpdateTime();return;case 0:if(typeof b.getDateStatus=="function"&&b.getDateStatus(e,
e.getFullYear(),e.getMonth(),e.getDate()))return!1}e.equalsTo(b.date)?a.navtype==0&&(h=f=!0):(b.setDate(e),h=!0)}h&&c&&b.callHandler();f&&(Calendar.removeClass(a,"hilite"),c&&b.callCloseHandler())};
Calendar.prototype.create=function(a){var c=null;a?(c=a,this.isPopup=!1):(c=document.getElementsByTagName("body")[0],this.isPopup=!0);this.date=this.dateStr?new Date(this.dateStr):new Date;this.table=a=Calendar.createElement("table");a.cellSpacing=0;a.cellPadding=0;a.calendar=this;Calendar.addEvent(a,"mousedown",Calendar.tableMouseDown);var b=Calendar.createElement("div");this.element=b;b.className="calendar";if(this.isPopup)b.style.position="absolute",b.style.display="none";b.appendChild(a);var f=
Calendar.createElement("thead",a),h=null,e=null,g=this,b=function(a,b,f){h=Calendar.createElement("td",e);h.colSpan=b;h.className="button";f!=0&&Math.abs(f)<=2&&(h.className+=" nav");Calendar._add_evs(h);h.calendar=g;h.navtype=f;h.innerHTML="<div unselectable='on'>"+a+"</div>";return h},e=Calendar.createElement("tr",f),m=6;this.isPopup&&--m;this.weekNumbers&&++m;b("?",1,400).ttip=Calendar._TT.INFO;this.title=b("",m,300);this.title.className="title";if(this.isPopup)this.title.ttip=Calendar._TT.DRAG_TO_MOVE,
this.title.style.cursor="move",b("&#x00d7;",1,200).ttip=Calendar._TT.CLOSE;e=Calendar.createElement("tr",f);e.className="headrow";this._nav_py=b("&#x00ab;",1,-2);this._nav_py.ttip=Calendar._TT.PREV_YEAR;this._nav_pm=b("&#x2039;",1,-1);this._nav_pm.ttip=Calendar._TT.PREV_MONTH;this._nav_now=b(Calendar._TT.TODAY,this.weekNumbers?4:3,0);this._nav_now.ttip=Calendar._TT.GO_TODAY;this._nav_nm=b("&#x203a;",1,1);this._nav_nm.ttip=Calendar._TT.NEXT_MONTH;this._nav_ny=b("&#x00bb;",1,2);this._nav_ny.ttip=Calendar._TT.NEXT_YEAR;
e=Calendar.createElement("tr",f);e.className="daynames";if(this.weekNumbers)h=Calendar.createElement("td",e),h.className="name wn",h.innerHTML=Calendar._TT.WK;for(f=7;f>0;--f)if(h=Calendar.createElement("td",e),!f)h.navtype=100,h.calendar=this,Calendar._add_evs(h);this.firstdayname=this.weekNumbers?e.firstChild.nextSibling:e.firstChild;this._displayWeekdays();this.tbody=m=Calendar.createElement("tbody",a);for(f=6;f>0;--f){e=Calendar.createElement("tr",m);this.weekNumbers&&(h=Calendar.createElement("td",
e));for(var j=7;j>0;--j)h=Calendar.createElement("td",e),h.calendar=this,Calendar._add_evs(h)}this.showsTime?(e=Calendar.createElement("tr",m),e.className="time",h=Calendar.createElement("td",e),h.className="time",h.colSpan=2,h.innerHTML=Calendar._TT.TIME||"&nbsp;",h=Calendar.createElement("td",e),h.className="time",h.colSpan=this.weekNumbers?4:3,function(){function a(e,b,f,m){var c=Calendar.createElement("span",h);c.className=e;c.innerHTML=b;c.calendar=g;c.ttip=Calendar._TT.TIME_PART;c.navtype=50;
c._range=[];if(typeof f!="number")c._range=f;else for(e=f;e<=m;++e)c._range[c._range.length]=e<10&&m>=10?"0"+e:""+e;Calendar._add_evs(c);return c}var b=g.date.getHours(),f=g.date.getMinutes(),m=!g.time24,c=b>12;m&&c&&(b-=12);var j=a("hour",b,m?1:0,m?12:23),b=Calendar.createElement("span",h);b.innerHTML=":";b.className="colon";var v=a("minute",f,0,59),t=null;h=Calendar.createElement("td",e);h.className="time";h.colSpan=2;m?t=a("ampm",c?"pm":"am",["am","pm"]):h.innerHTML="&nbsp;";g.onSetTime=function(){var a,
e=this.date.getHours(),g=this.date.getMinutes();if(m)(a=e>=12)&&(e-=12),e==0&&(e=12),t.innerHTML=a?"pm":"am";j.innerHTML=e<10?"0"+e:e;v.innerHTML=g<10?"0"+g:g};g.onUpdateTime=function(){var a=this.date,e=parseInt(j.innerHTML,10);m&&(/pm/i.test(t.innerHTML)&&e<12?e+=12:/am/i.test(t.innerHTML)&&e==12&&(e=0));var g=a.getDate(),b=a.getMonth(),f=a.getFullYear();a.setHours(e);a.setMinutes(parseInt(v.innerHTML,10));a.setFullYear(f);a.setMonth(b);a.setDate(g);this.dateClicked=!1;this.callHandler()}}()):this.onSetTime=
this.onUpdateTime=function(){};a=Calendar.createElement("tfoot",a);e=Calendar.createElement("tr",a);e.className="footrow";h=b(Calendar._TT.SEL_DATE,this.weekNumbers?8:7,300);h.className="ttip";if(this.isPopup)h.ttip=Calendar._TT.DRAG_TO_MOVE,h.style.cursor="move";this.tooltips=h;this.monthsCombo=b=Calendar.createElement("div",this.element);b.className="combo";for(f=0;f<Calendar._MN.length;++f)a=Calendar.createElement("div"),a.className=Calendar.is_ie?"label-IEfix":"label",a.month=f,a.innerHTML=Calendar._SMN[f],
b.appendChild(a);this.yearsCombo=b=Calendar.createElement("div",this.element);b.className="combo";for(f=12;f>0;--f)a=Calendar.createElement("div"),a.className=Calendar.is_ie?"label-IEfix":"label",b.appendChild(a);this._init(this.firstDayOfWeek,this.date);c.appendChild(this.element)};
Calendar._keyEvent=function(a){var c=window._dynarch_popupCalendar;if(!c||c.multiple)return!1;Calendar.is_ie&&(a=window.event);var b=Calendar.is_ie||a.type=="keypress",f=a.keyCode;if(a.ctrlKey)switch(f){case 37:b&&Calendar.cellClick(c._nav_pm);break;case 38:b&&Calendar.cellClick(c._nav_py);break;case 39:b&&Calendar.cellClick(c._nav_nm);break;case 40:b&&Calendar.cellClick(c._nav_ny);break;default:return!1}else switch(f){case 32:Calendar.cellClick(c._nav_now);break;case 27:b&&c.callCloseHandler();break;
case 37:case 38:case 39:case 40:if(b){var h,e,g,m,j,b=f==37||f==38;j=f==37||f==39?1:7;var k=function(){m=c.currentDateEl;var a=m.pos;h=a&15;e=a>>4;g=c.ar_days[e][h]};k();for(var p=function(){var a=new Date(c.date);a.setDate(a.getDate()-j);c.setDate(a)},n=function(){var a=new Date(c.date);a.setDate(a.getDate()+j);c.setDate(a)};;){switch(f){case 37:if(--h>=0)g=c.ar_days[e][h];else{h=6;f=38;continue}break;case 38:--e>=0?g=c.ar_days[e][h]:(p(),k());break;case 39:if(++h<7)g=c.ar_days[e][h];else{h=0;f=
40;continue}break;case 40:++e<c.ar_days.length?g=c.ar_days[e][h]:(n(),k())}break}g&&(g.disabled?b?p():n():Calendar.cellClick(g))}break;case 13:b&&Calendar.cellClick(c.currentDateEl,a);break;default:return!1}return Calendar.stopEvent(a)};
Calendar.prototype._init=function(a,c){var b=new Date,f=b.getFullYear(),h=b.getMonth(),b=b.getDate();this.table.style.visibility="hidden";var e=c.getFullYear();if(e<this.minYear)e=this.minYear,c.setFullYear(e);else if(e>this.maxYear)e=this.maxYear,c.setFullYear(e);this.firstDayOfWeek=a;this.date=new Date(c);var g=c.getMonth(),m=c.getDate();c.getMonthDays();c.setDate(1);var j=(c.getDay()-this.firstDayOfWeek)%7;j<0&&(j+=7);c.setDate(0-j);c.setDate(c.getDate()+1);for(var j=this.tbody.firstChild,k=this.ar_days=
[],p=Calendar._TT.WEEKEND,n=this.multiple?this.datesCells={}:null,s=0;s<6;++s,j=j.nextSibling){var u=j.firstChild;if(this.weekNumbers)u.className="day wn",u.innerHTML=c.getWeekNumber(),u=u.nextSibling;j.className="daysrow";for(var w=!1,v,t=k[s]=[],r=0;r<7;++r,u=u.nextSibling,c.setDate(v+1)){v=c.getDate();var A=c.getDay();u.className="day";u.pos=s<<4|r;t[r]=u;var x=c.getMonth()==g;if(x)u.otherMonth=!1,w=!0;else if(this.showsOtherMonths)u.className+=" othermonth",u.otherMonth=!0;else{u.className="emptycell";
u.innerHTML="&nbsp;";u.disabled=!0;continue}u.disabled=!1;u.innerHTML=this.getDateText?this.getDateText(c,v):v;n&&(n[c.print("%Y%m%d")]=u);if(this.getDateStatus){var B=this.getDateStatus(c,e,g,v);if(this.getDateToolTip){var N=this.getDateToolTip(c,e,g,v);if(N)u.title=N}if(B===!0)u.className+=" disabled",u.disabled=!0;else{if(/disabled/i.test(B))u.disabled=!0;u.className+=" "+B}}if(!u.disabled){u.caldate=new Date(c);u.ttip="_";if(!this.multiple&&x&&v==m&&this.hiliteToday)u.className+=" selected",this.currentDateEl=
u;c.getFullYear()==f&&c.getMonth()==h&&v==b&&(u.className+=" today",u.ttip+=Calendar._TT.PART_TODAY);p.indexOf(A.toString())!=-1&&(u.className+=u.otherMonth?" oweekend":" weekend")}}if(!w&&!this.showsOtherMonths)j.className="emptyrow"}this.title.innerHTML=Calendar._MN[g]+", "+e;this.onSetTime();this.table.style.visibility="visible";this._initMultipleDates()};
Calendar.prototype._initMultipleDates=function(){if(this.multiple)for(var a in this.multiple){var c=this.datesCells[a];this.multiple[a]&&c&&(c.className+=" selected")}};Calendar.prototype._toggleMultipleDate=function(a){if(this.multiple){var c=a.print("%Y%m%d"),b=this.datesCells[c];b&&(this.multiple[c]?(Calendar.removeClass(b,"selected"),delete this.multiple[c]):(Calendar.addClass(b,"selected"),this.multiple[c]=a))}};Calendar.prototype.setDateToolTipHandler=function(a){this.getDateToolTip=a};
Calendar.prototype.setDate=function(a){a.equalsTo(this.date)||this._init(this.firstDayOfWeek,a)};Calendar.prototype.refresh=function(){this._init(this.firstDayOfWeek,this.date)};Calendar.prototype.setFirstDayOfWeek=function(a){this._init(a,this.date);this._displayWeekdays()};Calendar.prototype.setDateStatusHandler=Calendar.prototype.setDisabledHandler=function(a){this.getDateStatus=a};Calendar.prototype.setRange=function(a,c){this.minYear=a;this.maxYear=c};
Calendar.prototype.callHandler=function(){if(this.onSelected)this.onSelected(this,this.date.print(this.dateFormat))};Calendar.prototype.callCloseHandler=function(){if(this.onClose)this.onClose(this);this.hideShowCovered()};Calendar.prototype.destroy=function(){this.element.parentNode.removeChild(this.element);Calendar._C=null;window._dynarch_popupCalendar=null};Calendar.prototype.reparent=function(a){var c=this.element;c.parentNode.removeChild(c);a.appendChild(c)};
Calendar._checkCalendar=function(a){var c=window._dynarch_popupCalendar;if(!c)return!1;for(var b=Calendar.is_ie?Calendar.getElement(a):Calendar.getTargetElement(a);b!=null&&b!=c.element;b=b.parentNode);if(b==null)return window._dynarch_popupCalendar.callCloseHandler(),Calendar.stopEvent(a)};
Calendar.prototype.show=function(){for(var a=this.table.getElementsByTagName("tr"),c=a.length;c>0;){var b=a[--c];Calendar.removeClass(b,"rowhilite");for(var b=b.getElementsByTagName("td"),f=b.length;f>0;){var h=b[--f];Calendar.removeClass(h,"hilite");Calendar.removeClass(h,"active")}}this.element.style.display="block";this.hidden=!1;if(this.isPopup)window._dynarch_popupCalendar=this,Calendar.addEvent(document,"keydown",Calendar._keyEvent),Calendar.addEvent(document,"keypress",Calendar._keyEvent),
Calendar.addEvent(document,"mousedown",Calendar._checkCalendar);this.hideShowCovered()};Calendar.prototype.hide=function(){this.isPopup&&(Calendar.removeEvent(document,"keydown",Calendar._keyEvent),Calendar.removeEvent(document,"keypress",Calendar._keyEvent),Calendar.removeEvent(document,"mousedown",Calendar._checkCalendar));this.element.style.display="none";this.hidden=!0;this.hideShowCovered()};Calendar.prototype.showAt=function(a,c){var b=this.element.style;b.left=a+"px";b.top=c+"px";this.show()};
Calendar.prototype.showAtElement=function(a,c){var b=this,f=Calendar.getAbsolutePos(a);if(!c||typeof c!="string")return this.showAt(f.x,f.y+a.offsetHeight),!0;this.element.style.display="block";Calendar.continuation_for_the_fucking_khtml_browser=function(){var h=b.element.offsetWidth,e=b.element.offsetHeight;b.element.style.display="none";var g=c.substr(0,1),m="l";c.length>1&&(m=c.substr(1,1));switch(g){case "T":f.y-=e;break;case "B":f.y+=a.offsetHeight;break;case "C":f.y+=(a.offsetHeight-e)/2;break;
case "t":f.y+=a.offsetHeight-e}switch(m){case "L":f.x-=h;break;case "R":f.x+=a.offsetWidth;break;case "C":f.x+=(a.offsetWidth-h)/2;break;case "l":f.x+=a.offsetWidth-h}f.width=h;f.height=e+40;b.monthsCombo.style.display="none";if(f.x<0)f.x=0;if(f.y<0)f.y=0;h=document.createElement("div");e=h.style;e.position="absolute";e.right=e.bottom=e.width=e.height="0px";document.body.appendChild(h);e=Calendar.getAbsolutePos(h);document.body.removeChild(h);Calendar.is_ie?(e.y+=document.body.scrollTop,e.x+=document.body.scrollLeft):
(e.y+=window.scrollY,e.x+=window.scrollX);h=f.x+f.width-e.x;h>0&&(f.x-=h);h=f.y+f.height-e.y;h>0&&(f.y-=h);b.showAt(f.x,f.y)};Calendar.is_khtml?setTimeout("Calendar.continuation_for_the_fucking_khtml_browser()",10):Calendar.continuation_for_the_fucking_khtml_browser()};Calendar.prototype.setDateFormat=function(a){this.dateFormat=a};Calendar.prototype.setTtDateFormat=function(a){this.ttDateFormat=a};Calendar.prototype.parseDate=function(a,c){if(!c)c=this.dateFormat;this.setDate(Date.parseDate(a,c))};
Calendar.prototype.hideShowCovered=function(){function a(a){var e=a.style.visibility;e||(e=document.defaultView&&typeof document.defaultView.getComputedStyle=="function"?Calendar.is_khtml?"":document.defaultView.getComputedStyle(a,"").getPropertyValue("visibility"):a.currentStyle?a.currentStyle.visibility:"");return e}if(Calendar.is_ie||Calendar.is_opera)for(var c=["applet","iframe","select"],b=this.element,f=Calendar.getAbsolutePos(b),h=f.x,e=b.offsetWidth+h,g=f.y,b=b.offsetHeight+g,m=c.length;m>
0;)for(var j=document.getElementsByTagName(c[--m]),k=null,p=j.length;p>0;){var k=j[--p],f=Calendar.getAbsolutePos(k),n=f.x,s=k.offsetWidth+n,f=f.y,u=k.offsetHeight+f;if(this.hidden||n>e||s<h||f>b||u<g){if(!k.__msh_save_visibility)k.__msh_save_visibility=a(k);k.style.visibility=k.__msh_save_visibility}else{if(!k.__msh_save_visibility)k.__msh_save_visibility=a(k);k.style.visibility="hidden"}}};
Calendar.prototype._displayWeekdays=function(){for(var a=this.firstDayOfWeek,c=this.firstdayname,b=Calendar._TT.WEEKEND,f=0;f<7;++f){c.className="day name";var h=(f+a)%7;if(f)c.ttip=Calendar._TT.DAY_FIRST.replace("%s",Calendar._DN[h]),c.navtype=100,c.calendar=this,c.fdow=h,Calendar._add_evs(c);b.indexOf(h.toString())!=-1&&Calendar.addClass(c,"weekend");c.innerHTML=Calendar._SDN[(f+a)%7];c=c.nextSibling}};
Calendar.prototype._hideCombos=function(){this.monthsCombo.style.display="none";this.yearsCombo.style.display="none"};
Calendar.prototype._dragStart=function(a){if(!this.dragging){this.dragging=!0;var c;Calendar.is_ie?(c=window.event.clientY+document.body.scrollTop,a=window.event.clientX+document.body.scrollLeft):(c=a.clientY+window.scrollY,a=a.clientX+window.scrollX);var b=this.element.style;this.xOffs=a-parseInt(b.left);this.yOffs=c-parseInt(b.top);with(Calendar)addEvent(document,"mousemove",calDragIt),addEvent(document,"mouseup",calDragEnd)}};Date._MD=[31,28,31,30,31,30,31,31,30,31,30,31];Date.SECOND=1E3;
Date.MINUTE=60*Date.SECOND;Date.HOUR=60*Date.MINUTE;Date.DAY=24*Date.HOUR;Date.WEEK=7*Date.DAY;
Date.parseDate=function(a,c){for(var b=new Date,f=0,h=-1,e=0,g=a.split(/\W+/),m=c.match(/%./g),j=0,k=0,p=0,n=0,j=0;j<g.length;++j)if(g[j])switch(m[j]){case "%d":case "%e":e=parseInt(g[j],10);break;case "%m":h=parseInt(g[j],10)-1;break;case "%Y":case "%y":f=parseInt(g[j],10);f<100&&(f+=f>29?1900:2E3);break;case "%b":case "%B":for(k=0;k<12;++k)if(Calendar._MN[k].substr(0,g[j].length).toLowerCase()==g[j].toLowerCase()){h=k;break}break;case "%H":case "%I":case "%k":case "%l":p=parseInt(g[j],10);break;
case "%P":case "%p":/pm/i.test(g[j])&&p<12?p+=12:/am/i.test(g[j])&&p>=12&&(p-=12);break;case "%M":n=parseInt(g[j],10)}isNaN(f)&&(f=b.getFullYear());isNaN(h)&&(h=b.getMonth());isNaN(e)&&(e=b.getDate());isNaN(p)&&(p=b.getHours());isNaN(n)&&(n=b.getMinutes());if(f!=0&&h!=-1&&e!=0)return new Date(f,h,e,p,n,0);f=0;h=-1;for(j=e=0;j<g.length;++j)if(g[j].search(/[a-zA-Z]+/)!=-1){m=-1;for(k=0;k<12;++k)if(Calendar._MN[k].substr(0,g[j].length).toLowerCase()==g[j].toLowerCase()){m=k;break}m!=-1&&(h!=-1&&(e=h+
1),h=m)}else parseInt(g[j],10)<=12&&h==-1?h=g[j]-1:parseInt(g[j],10)>31&&f==0?(f=parseInt(g[j],10),f<100&&(f+=f>29?1900:2E3)):e==0&&(e=g[j]);f==0&&(f=b.getFullYear());if(h!=-1&&e!=0)return new Date(f,h,e,p,n,0);return b};Date.prototype.getMonthDays=function(a){var c=this.getFullYear();typeof a=="undefined"&&(a=this.getMonth());return 0==c%4&&(0!=c%100||0==c%400)&&a==1?29:Date._MD[a]};
Date.prototype.getDayOfYear=function(){var a=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0),c=new Date(this.getFullYear(),0,0,0,0,0);return Math.floor((a-c)/Date.DAY)};Date.prototype.getWeekNumber=function(){var a=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0),c=a.getDay();a.setDate(a.getDate()-(c+6)%7+3);c=a.valueOf();a.setMonth(0);a.setDate(4);return Math.round((c-a.valueOf())/6048E5)+1};
Date.prototype.equalsTo=function(a){return this.getFullYear()==a.getFullYear()&&this.getMonth()==a.getMonth()&&this.getDate()==a.getDate()&&this.getHours()==a.getHours()&&this.getMinutes()==a.getMinutes()};Date.prototype.setDateOnly=function(a){a=new Date(a);this.setDate(1);this.setFullYear(a.getFullYear());this.setMonth(a.getMonth());this.setDate(a.getDate())};
Date.prototype.print=function(a){var c=this.getMonth(),b=this.getDate(),f=this.getFullYear(),h=this.getWeekNumber(),e=this.getDay(),g={},m=this.getHours(),j=m>=12,k=j?m-12:m,p=this.getDayOfYear();k==0&&(k=12);var n=this.getMinutes(),s=this.getSeconds();g["%a"]=Calendar._SDN[e];g["%A"]=Calendar._DN[e];g["%b"]=Calendar._SMN[c];g["%B"]=Calendar._MN[c];g["%C"]=1+Math.floor(f/100);g["%d"]=b<10?"0"+b:b;g["%e"]=b;g["%H"]=m<10?"0"+m:m;g["%I"]=k<10?"0"+k:k;g["%j"]=p<100?p<10?"00"+p:"0"+p:p;g["%k"]=m;g["%l"]=
k;g["%m"]=c<9?"0"+(1+c):1+c;g["%M"]=n<10?"0"+n:n;g["%n"]="\n";g["%p"]=j?"PM":"AM";g["%P"]=j?"pm":"am";g["%s"]=Math.floor(this.getTime()/1E3);g["%S"]=s<10?"0"+s:s;g["%t"]="\t";g["%U"]=g["%W"]=g["%V"]=h<10?"0"+h:h;g["%u"]=e+1;g["%w"]=e;g["%y"]=(""+f).substr(2,2);g["%Y"]=f;g["%%"]="%";c=/%./g;if(!Calendar.is_ie5&&!Calendar.is_khtml)return a.replace(c,function(a){return g[a]||a});b=a.match(c);for(f=0;f<b.length;f++)if(h=g[b[f]])c=RegExp(b[f],"g"),a=a.replace(c,h);return a};
Date.prototype.__msh_oldSetFullYear=Date.prototype.setFullYear;Date.prototype.setFullYear=function(a){var c=new Date(this);c.__msh_oldSetFullYear(a);c.getMonth()!=this.getMonth()&&this.setDate(28);this.__msh_oldSetFullYear(a)};window._dynarch_popupCalendar=null;Calendar._DN=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];Calendar._SDN=["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"];Calendar._FD=0;
Calendar._MN=["January","February","March","April","May","June","July","August","September","October","November","December"];Calendar._SMN=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];Calendar._TT={};Calendar._TT.INFO="About the calendar";
Calendar._TT.ABOUT="DHTML Date/Time Selector\n(c) dynarch.com 2002-2005 / Author: Mihai Bazon\nFor latest version visit: http://www.dynarch.com/projects/calendar/\nDistributed under GNU LGPL.  See http://gnu.org/licenses/lgpl.html for details.\n\nDate selection:\n- Use the \u00ab, \u00bb buttons to select year\n- Use the "+String.fromCharCode(8249)+", "+String.fromCharCode(8250)+" buttons to select month\n- Hold mouse button on any of the above buttons for faster selection.";
Calendar._TT.ABOUT_TIME="\n\nTime selection:\n- Click on any of the time parts to increase it\n- or Shift-click to decrease it\n- or click and drag for faster selection.";Calendar._TT.PREV_YEAR="Prev. year (hold for menu)";Calendar._TT.PREV_MONTH="Prev. month (hold for menu)";Calendar._TT.GO_TODAY="Go Today";Calendar._TT.NEXT_MONTH="Next month (hold for menu)";Calendar._TT.NEXT_YEAR="Next year (hold for menu)";Calendar._TT.SEL_DATE="Select date";Calendar._TT.DRAG_TO_MOVE="Drag to move";
Calendar._TT.PART_TODAY=" (today)";Calendar._TT.DAY_FIRST="Display %s first";Calendar._TT.WEEKEND="0,6";Calendar._TT.CLOSE="Close";Calendar._TT.TODAY="Today";Calendar._TT.TIME_PART="(Shift-)Click or drag to change value";Calendar._TT.DEF_DATE_FORMAT="%Y-%m-%d";Calendar._TT.TT_DATE_FORMAT="%a, %b %e";Calendar._TT.WK="wk";Calendar._TT.TIME="Time:";
Calendar.setup=function(a){function c(e,b){typeof a[e]=="undefined"&&(a[e]=b)}function b(a){var e=a.params,b=a.dateClicked||e.electric;if(b&&e.inputField&&(e.inputField.value=a.date.print(e.ifFormat),typeof e.inputField.onchange=="function"))e.inputField.onchange();if(b&&e.displayArea)e.displayArea.innerHTML=a.date.print(e.daFormat);if(b&&typeof e.onUpdate=="function")e.onUpdate(a);b&&e.flat&&typeof e.flatCallback=="function"&&e.flatCallback(a);b&&e.singleClick&&a.dateClicked&&a.callCloseHandler()}
c("inputField",null);c("displayArea",null);c("button",null);c("eventName","click");c("ifFormat","%Y/%m/%d");c("daFormat","%Y/%m/%d");c("singleClick",!0);c("disableFunc",null);c("dateStatusFunc",a.disableFunc);c("dateText",null);c("firstDay",null);c("align","Br");c("range",[1900,2999]);c("weekNumbers",!0);c("flat",null);c("flatCallback",null);c("onSelect",null);c("onClose",null);c("onUpdate",null);c("date",null);c("showsTime",!1);c("timeFormat","24");c("electric",!0);c("step",2);c("position",null);
c("cache",!1);c("showOthers",!1);c("multiple",null);var f=["inputField","displayArea","button"],h;for(h in f)typeof a[f[h]]=="string"&&(a[f[h]]=document.getElementById(a[f[h]]));if(!a.flat&&!a.multiple&&!a.inputField&&!a.displayArea&&!a.button)return alert("Calendar.setup:\n  Nothing to setup (no fields found).  Please check your code"),!1;if(a.flat!=null){if(typeof a.flat=="string")a.flat=document.getElementById(a.flat);if(!a.flat)return alert("Calendar.setup:\n  Flat specified but can't find parent."),
!1;var e=new Calendar(a.firstDay,a.date,a.onSelect||b);e.showsOtherMonths=a.showOthers;e.showsTime=a.showsTime;e.time24=a.timeFormat=="24";e.params=a;e.weekNumbers=a.weekNumbers;e.setRange(a.range[0],a.range[1]);e.setDateStatusHandler(a.dateStatusFunc);e.getDateText=a.dateText;a.ifFormat&&e.setDateFormat(a.ifFormat);a.inputField&&typeof a.inputField.value=="string"&&e.parseDate(a.inputField.value);e.create(a.flat);e.show();return!1}(a.button||a.displayArea||a.inputField)["on"+a.eventName]=function(){var e=
a.inputField||a.displayArea,f=a.inputField?a.ifFormat:a.daFormat,c=!1,h=window.calendar;if(e)a.date=Date.parseDate(e.value||e.innerHTML,f);!h||!a.cache?(window.calendar=h=new Calendar(a.firstDay,a.date,a.onSelect||b,a.onClose||function(a){a.hide()}),h.showsTime=a.showsTime,h.time24=a.timeFormat=="24",h.weekNumbers=a.weekNumbers,c=!0):(a.date&&h.setDate(a.date),h.hide());if(a.multiple){h.multiple={};for(e=a.multiple.length;--e>=0;){var p=a.multiple[e],n=p.print("%Y%m%d");h.multiple[n]=p}}h.showsOtherMonths=
a.showOthers;h.yearStep=a.step;h.setRange(a.range[0],a.range[1]);h.params=a;h.setDateStatusHandler(a.dateStatusFunc);h.getDateText=a.dateText;h.setDateFormat(f);c&&h.create();h.refresh();a.position?h.showAt(a.position[0],a.position[1]):h.showAtElement(a.button||a.displayArea||a.inputField,a.align);return!1};return e};
$(document).ready(function(){function a(){try{b.abort()}catch(a){}$("#TotalQuantity").remove();$("#inv_quantity_ajax_throbber").length==0&&$('[name = "quantity"]').after('<div id="inv_quantity_ajax_throbber" class="ajax_throbber" style="float:right"/>');url="/eden/inv/inv_item_quantity/";url+=$('[name = "inv_item_id"]').val();b=$.getJSON(url,function(a){var g=a.inv_inv_item.quantity,a=a.supply_item_pack.quantity,b=$('[name = "item_pack_id"] option:selected').text(),f=/\(([0-9]*)\sx/.exec(b);TotalQuantity=
'<span id = "TotalQuantity"> / '+(g*a/(f==null?1:f[1])).toFixed(2)+" "+b+" ("+S3.i18n.in_inv+")</span>";$("#inv_quantity_ajax_throbber").remove();$('[name = "quantity"]').after(TotalQuantity)})}function c(){try{b.abort()}catch(f){}var e=$('[name $= "item_id"]'),g=$('[name = "item_pack_id"]');$('[id$="item_pack_id__row1"]').show();$('[id$="item_pack_id__row"]').show();$("#item_pack_ajax_throbber").length==0&&g.after('<div id="item_pack_ajax_throbber" class="ajax_throbber style="display:inline;"/>');
g.hide();var m;m=$('[name = "item_id"]').length!=0?S3.Ap.concat("/supply/item_pack.json?item_pack.item_id=",e.val()):S3.Ap.concat("/inv/inv_item_packs/",e.val());b=$.ajax({url:m,dataType:"json",context:e,success:function(e){var b="",f="";if(e.length==0)b+='<option value="">'+S3.i18n.no_packs+"</options>";else{for(var m=0;m<e.length;m++)if(e[m].quantity==1){f=e[m].name;break}for(m=0;m<e.length;m++)b+='<option value="'+e[m].id+'">',b+=e[m].quantity==1?e[m].name:e[m].name+" ("+e[m].quantity+" x "+f+
")",b+="</option>"}g.html(b).val(1).show();href=$("#item_pack_add").attr("href")+"&item_id="+$('[name = "item_id"]').val();$("#item_pack_add").attr("href",href).show();$("#item_pack_ajax_throbber").remove();this.attr("name")=="inv_item_id"&&a()}})}var b;$("#inv_send_item_item_pack_id").change(a);var f=$('[name $= "item_id"]').val();f==""|f==void 0?($('[id$="item_pack_id__row1"]').hide(),$('[id$="item_pack_id__row"]').hide()):c();$('[name $= "item_id"]').change(c);$(".quantity.ajax_more").live("click",
function(a){a.preventDefault();var a=$(this),e,g;if(a.hasClass("collapsed")){a.hasClass("fulfil")?(g="inv",e="recv"):a.hasClass("transit")?(e="send",g="inv"):a.hasClass("commit")&&(e="commit",g="req");a.after('<div class="ajax_throbber quantity_req_ajax_throbber"/>').removeClass("collapsed").addClass("expanded");var b=/req_item\/([0-9]+)/i.exec($(".action-btn",a.parent().parent().parent()).attr("href"))[1],b=S3.Ap.concat("/",g,"/",e,"_item_json/",b);$.ajax({url:b,dataType:"json",context:a,success:function(a){RecvTable=
'<table class="recv_table">';for(i=0;i<a.length;i++)RecvTable+="<tr><td>",i==0?RecvTable+=a[0].id:(RecvURL=S3.Ap.concat("/",g,"/",e,"/",a[i].id),RecvTable+="<a href = '"+RecvURL+"'>",RecvTable+=a[i].datetime!=null?a[i].datetime.substring(0,10)+"</a>":" - </a>"),RecvTable+="</td><td>"+a[i].quantity+"</td></tr>";RecvTable+="</table>";$(".quantity_req_ajax_throbber",this.parent()).remove();this.parent().after(RecvTable)}})}else a.removeClass("expanded").addClass("collapsed"),$(".recv_table",a.parent().parent()).remove()})});
(function(a,c){function b(e,g){e=e?' id="'+n+e+'"':"";return a("<div"+e+(g?' style="'+g+'"':"")+"/>")}function f(a,e){e=e==="x"?I.width():I.height();return typeof a==="string"?Math.round(/%/.test(a)?e/100*parseInt(a,10):parseInt(a,10)):a}function h(a){return o.photo||/\.(gif|png|jpg|jpeg|bmp)(?:\?([^#]*))?(?:#(\.*))?$/i.test(a)}function e(e){for(var g in e)a.isFunction(e[g])&&g.substring(0,2)!=="on"&&(e[g]=e[g].call(Q));e.rel=e.rel||Q.rel||"nofollow";e.href=e.href||a(Q).attr("href");e.title=e.title||
Q.title;return e}function g(e,g){g&&g.call(Q);a.event.trigger(e)}function m(){var a,e=n+"Slideshow_",g="click."+n,b,f;o.slideshow&&G[1]&&(b=function(){P.text(o.slideshowStop).unbind(g).bind(w,function(){if(D<G.length-1||o.loop)a=setTimeout(F.next,o.slideshowSpeed)}).bind(u,function(){clearTimeout(a)}).one(g+" "+v,f);y.removeClass(e+"off").addClass(e+"on");a=setTimeout(F.next,o.slideshowSpeed)},f=function(){clearTimeout(a);P.text(o.slideshowStart).unbind([w,u,v,g].join(" ")).one(g,b);y.removeClass(e+
"on").addClass(e+"off")},o.slideshowAuto?b():f())}function j(b){if(!ea){Q=b;o=e(a.extend({},a.data(Q,p)));G=a(Q);D=0;o.rel!=="nofollow"&&(G=a("."+da).filter(function(){return(a.data(this,p).rel||this.rel)===o.rel}),D=G.index(Q),D===-1&&(G=G.add(Q),D=G.length-1));if(!W){W=ca=!0;y.show();if(o.returnFocus)try{Q.blur(),a(Q).one(t,function(){try{this.focus()}catch(a){}})}catch(m){}O.css({opacity:+o.opacity,cursor:o.overlayClose?"pointer":"auto"}).show();o.w=f(o.initialWidth,"x");o.h=f(o.initialHeight,
"y");F.position(0);B&&I.bind("resize."+N+" scroll."+N,function(){O.css({width:I.width(),height:I.height(),top:I.scrollTop(),left:I.scrollLeft()})}).trigger("scroll."+N);g(s,o.onOpen);E.add(S).add(Y).add(P).add(U).hide();K.html(o.close).show()}F.load(!0)}}var k={transition:"elastic",speed:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,inline:!1,html:!1,iframe:!1,photo:!1,href:!1,title:!1,rel:!1,opacity:0.9,
preloading:!0,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",open:!1,returnFocus:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,overlayClose:!0,escKey:!0,arrowKey:!0},p="colorbox",n="cbox",s=n+"_open",u=n+"_load",w=n+"_complete",v=n+"_cleanup",t=n+"_closed",r=n+"_purge",A=n+"_loaded",x=a.browser.msie&&!a.support.opacity,B=x&&a.browser.version<
7,N=n+"_IE6",O,y,z,J,T,Z,V,ba,G,I,H,C,L,U,E,P,Y,S,K,M,aa,X,R,Q,D,o,W,ca,ea=!1,F,da=n+"Element";F=a.fn[p]=a[p]=function(e,g){var b=this,f;if(!b[0]&&b.selector)return b;e=e||{};if(g)e.onComplete=g;if(!b[0]||b.selector===void 0)b=a("<a/>"),e.open=!0;b.each(function(){a.data(this,p,a.extend({},a.data(this,p)||k,e));a(this).addClass(da)});f=e.open;a.isFunction(f)&&(f=f.call(b));f&&j(b[0]);return b};F.init=function(){I=a(c);y=b().attr({id:p,"class":x?n+"IE":""});O=b("Overlay",B?"position:absolute":"").hide();
z=b("Wrapper");J=b("Content").append(H=b("LoadedContent","width:0; height:0; overflow:hidden"),L=b("LoadingOverlay").add(b("LoadingGraphic")),U=b("Title"),E=b("Current"),Y=b("Next"),S=b("Previous"),P=b("Slideshow").bind(s,m),K=b("Close"));z.append(b().append(b("TopLeft"),T=b("TopCenter"),b("TopRight")),b(!1,"clear:left").append(Z=b("MiddleLeft"),J,V=b("MiddleRight")),b(!1,"clear:left").append(b("BottomLeft"),ba=b("BottomCenter"),b("BottomRight"))).children().children().css({"float":"left"});C=b(!1,
"position:absolute; width:9999px; visibility:hidden; display:none");a("body").prepend(O,y.append(z,C));J.children().hover(function(){a(this).addClass("hover")},function(){a(this).removeClass("hover")}).addClass("hover");M=T.height()+ba.height()+J.outerHeight(!0)-J.height();aa=Z.width()+V.width()+J.outerWidth(!0)-J.width();X=H.outerHeight(!0);R=H.outerWidth(!0);y.css({"padding-bottom":M,"padding-right":aa}).hide();Y.click(F.next);S.click(F.prev);K.click(F.close);J.children().removeClass("hover");a("."+
da).live("click",function(a){a.button!==0&&typeof a.button!=="undefined"||a.ctrlKey||a.shiftKey||a.altKey||(a.preventDefault(),j(this))});O.click(function(){o.overlayClose&&F.close()});a(document).bind("keydown",function(a){W&&o.escKey&&a.keyCode===27&&(a.preventDefault(),F.close());if(W&&o.arrowKey&&!ca&&G[1])if(a.keyCode===37&&(D||o.loop))a.preventDefault(),S.click();else if(a.keyCode===39&&(D<G.length-1||o.loop))a.preventDefault(),Y.click()})};F.remove=function(){y.add(O).remove();a("."+da).die("click").removeData(p).removeClass(da)};
F.position=function(a,e){function g(a){T[0].style.width=ba[0].style.width=J[0].style.width=a.style.width;L[0].style.height=L[1].style.height=J[0].style.height=Z[0].style.height=V[0].style.height=a.style.height}var b,f=Math.max(document.documentElement.clientHeight-o.h-X-M,0)/2+I.scrollTop(),m=Math.max(I.width()-o.w-R-aa,0)/2+I.scrollLeft();b=y.width()===o.w+R&&y.height()===o.h+X?0:a;z[0].style.width=z[0].style.height="9999px";y.dequeue().animate({width:o.w+R,height:o.h+X,top:f,left:m},{duration:b,
complete:function(){g(this);ca=!1;z[0].style.width=o.w+R+aa+"px";z[0].style.height=o.h+X+M+"px";e&&e()},step:function(){g(this)}})};F.resize=function(a){if(W){a=a||{};if(a.width)o.w=f(a.width,"x")-R-aa;if(a.innerWidth)o.w=f(a.innerWidth,"x");H.css({width:o.w});if(a.height)o.h=f(a.height,"y")-X-M;if(a.innerHeight)o.h=f(a.innerHeight,"y");if(!a.innerHeight&&!a.height)a=H.wrapInner("<div style='overflow:auto'></div>").children(),o.h=a.height(),a.replaceWith(a.children());H.css({height:o.h});F.position(o.transition===
"none"?0:o.speed)}};F.prep=function(e){function f(e){var b,j,k,s,r=G.length,u=o.loop;F.position(e,function(){function e(){x&&y[0].style.removeAttribute("filter")}if(W){x&&m&&H.fadeIn(100);H.show();g(A);U.show().html(o.title);if(r>1&&(typeof o.current==="string"&&E.html(o.current.replace(/\{current\}/,D+1).replace(/\{total\}/,r)).show(),Y[u||D<r-1?"show":"hide"]().html(o.next),S[u||D?"show":"hide"]().html(o.previous),b=D?G[D-1]:G[r-1],k=D<r-1?G[D+1]:G[0],o.slideshow&&P.show(),o.preloading)){s=a.data(k,
p).href||k.href;j=a.data(b,p).href||b.href;s=a.isFunction(s)?s.call(k):s;j=a.isFunction(j)?j.call(b):j;if(h(s))a("<img/>")[0].src=s;if(h(j))a("<img/>")[0].src=j}L.hide();o.transition==="fade"?y.fadeTo(c,1,function(){e()}):e();I.bind("resize."+n,function(){F.position(0)});g(w,o.onComplete)}})}if(W){var m,c=o.transition==="none"?0:o.speed;I.unbind("resize."+n);H.remove();H=b("LoadedContent").html(e);H.hide().appendTo(C.show()).css({width:function(){o.w=o.w||H.width();o.w=o.mw&&o.mw<o.w?o.mw:o.w;return o.w}(),
overflow:o.scrolling?"auto":"hidden"}).css({height:function(){o.h=o.h||H.height();o.h=o.mh&&o.mh<o.h?o.mh:o.h;return o.h}()}).prependTo(J);C.hide();a("#"+n+"Photo").css({cssFloat:"none",marginLeft:"auto",marginRight:"auto"});if(B)a("select").not(y.find("select")).filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one(v,function(){this.style.visibility="inherit"});o.transition==="fade"?y.fadeTo(c,0,function(){f(0)}):f(c)}};F.load=function(m){var c,j,k,s=F.prep;ca=
!0;Q=G[D];m||(o=e(a.extend({},a.data(Q,p))));g(r);g(u,o.onLoad);o.h=o.height?f(o.height,"y")-X-M:o.innerHeight&&f(o.innerHeight,"y");o.w=o.width?f(o.width,"x")-R-aa:o.innerWidth&&f(o.innerWidth,"x");o.mw=o.w;o.mh=o.h;if(o.maxWidth)o.mw=f(o.maxWidth,"x")-R-aa,o.mw=o.w&&o.w<o.mw?o.w:o.mw;if(o.maxHeight)o.mh=f(o.maxHeight,"y")-X-M,o.mh=o.h&&o.h<o.mh?o.h:o.mh;c=o.href;L.show();o.inline?(b().hide().insertBefore(a(c)[0]).one(r,function(){a(this).replaceWith(H.children())}),s(a(c))):o.iframe?(y.one(A,function(){var e=
a("<iframe frameborder='0' style='width:100%; height:100%; border:0; display:block'/>")[0];e.name=n+ +new Date;e.src=o.href;if(!o.scrolling)e.scrolling="no";if(x)e.allowtransparency="true";a(e).appendTo(H).one(r,function(){e.src="//about:blank"})}),s(" ")):o.html?s(o.html):h(c)?(j=new Image,j.onload=function(){var e;j.onload=null;j.id=n+"Photo";a(j).css({border:"none",display:"block",cssFloat:"left"});o.scalePhotos&&(k=function(){j.height-=j.height*e;j.width-=j.width*e},o.mw&&j.width>o.mw&&(e=(j.width-
o.mw)/j.width,k()),o.mh&&j.height>o.mh&&(e=(j.height-o.mh)/j.height,k()));if(o.h)j.style.marginTop=Math.max(o.h-j.height,0)/2+"px";G[1]&&(D<G.length-1||o.loop)&&a(j).css({cursor:"pointer"}).click(F.next);if(x)j.style.msInterpolationMode="bicubic";setTimeout(function(){s(j)},1)},setTimeout(function(){j.src=c},1)):c&&C.load(c,function(e,g,b){s(g==="error"?"Request unsuccessful: "+b.statusText:a(this).children())})};F.next=function(){ca||(D=D<G.length-1?D+1:0,F.load())};F.prev=function(){ca||(D=D?D-
1:G.length-1,F.load())};F.close=function(){W&&!ea&&(ea=!0,W=!1,g(v,o.onCleanup),I.unbind("."+n+" ."+N),O.fadeTo("fast",0),y.stop().fadeTo("fast",0,function(){g(r);H.remove();y.add(O).css({opacity:1,cursor:"auto"}).hide();setTimeout(function(){ea=!1;g(t,o.onClosed)},1)}))};F.element=function(){return a(Q)};F.settings=k;a(F.init)})(jQuery,this);
(function(a,c){function b(){this.debug=!0;this._curInst=null;this._isInline=!1;this._disabledInputs=[];this._inDialog=this._timepickerShowing=!1;this._dialogClass="ui-timepicker-dialog";this._mainDivId="ui-timepicker-div";this._inlineClass="ui-timepicker-inline";this._currentClass="ui-timepicker-current";this._dayOverClass="ui-timepicker-days-cell-over";this.regional=[];this.regional[""]={hourText:"Hour",minuteText:"Minute",amPmText:["AM","PM"]};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},
appendText:"",onSelect:null,onClose:null,timeSeparator:":",showPeriod:!1,showLeadingZero:!0,showMinutesLeadingZero:!0,altField:"",defaultTime:""};a.extend(this._defaults,this.regional[""]);this.tpDiv=a('<div id="'+this._mainDivId+'" class="ui-timepicker ui-widget ui-helper-clearfix ui-corner-all " style="display: none"></div>')}function f(e,g){a.extend(e,g);for(var b in g)if(g[b]==null||g[b]==c)e[b]=g[b];return e}a.extend(a.ui,{timepicker:{version:"0.0.1"}});var h=(new Date).getTime();a.extend(b.prototype,
{markerClassName:"hasTimepicker",log:function(){this.debug&&console.log.apply("",arguments)},_widgetTimepicker:function(){return this.tpDiv},setDefaults:function(a){f(this._defaults,a||{});return this},_attachTimepicker:function(e,g){var b=null,f;for(f in this._defaults){var c=e.getAttribute("time:"+f);if(c){b=b||{};try{b[f]=eval(c)}catch(h){b[f]=c}}}f=e.nodeName.toLowerCase();c=f=="div"||f=="span";if(!e.id)this.uuid+=1,e.id="tp"+this.uuid;var n=this._newInst(a(e),c);n.settings=a.extend({},g||{},
b||{});f=="input"?this._connectTimepicker(e,n):c&&this._inlineTimepicker(e,n)},_newInst:function(e,g){return{id:e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:g,tpDiv:!g?this.tpDiv:a('<div class="'+this._inlineClass+' ui-timepicker ui-widget  ui-helper-clearfix"></div>')}},_connectTimepicker:function(e,g){var b=a(e);g.append=a([]);g.trigger=a([]);b.hasClass(this.markerClassName)||(this._attachments(b,g),b.addClass(this.markerClassName).keydown(this._doKeyDown).keyup(this._doKeyUp).bind("setData.timepicker",
function(a,e,b){g.settings[e]=b}).bind("getData.timepicker",function(a,e){return this._get(g,e)}),a.data(e,"timepicker",g))},_doKeyDown:function(e){var g=!0;a.timepicker._getInst(e.target)._keyEvent=!0;if(a.timepicker._timepickerShowing)switch(e.keyCode){case 9:a.timepicker._hideTimepicker();g=!1;break;case 27:a.timepicker._hideTimepicker();break;default:g=!1}else e.keyCode==36&&e.ctrlKey?a.timepicker._showTimepicker(this):g=!1;g&&(e.preventDefault(),e.stopPropagation())},_doKeyUp:function(e){e=a.timepicker._getInst(e.target);
a.timepicker._setTimeFromField(e);a.timepicker._updateTimepicker(e)},_attachments:function(e,g){var b=this._get(g,"appendText"),f=this._get(g,"isRTL");g.append&&g.append.remove();if(b)g.append=a('<span class="'+this._appendClass+'">'+b+"</span>"),e[f?"before":"after"](g.append);e.unbind("focus",this._showTimepicker);g.trigger&&g.trigger.remove();b=this._get(g,"showOn");(b=="focus"||b=="both")&&e.focus(this._showTimepicker);if(b=="button"||b=="both"){var b=this._get(g,"buttonText"),c=this._get(g,"buttonImage");
g.trigger=a(this._get(g,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:c,alt:b,title:b}):a('<button type="button"></button>').addClass(this._triggerClass).html(c==""?b:a("<img/>").attr({src:c,alt:b,title:b})));e[f?"before":"after"](g.trigger);g.trigger.click(function(){a.timepicker._timepickerShowing&&a.timepicker._lastInput==e[0]?a.timepicker._hideTimepicker():a.timepicker._showTimepicker(e[0]);return!1})}},_inlineTimepicker:function(e,g){var b=a(e);b.hasClass(this.markerClassName)||
(b.addClass(this.markerClassName).append(g.tpDiv).bind("setData.timepicker",function(a,e,b){g.settings[e]=b}).bind("getData.timepicker",function(a,e){return this._get(g,e)}),a.data(e,"timepicker",g),this._setTimeFromField(g),this._updateTimepicker(g),g.tpDiv.show())},_showTimepicker:function(e){e=e.target||e;e.nodeName.toLowerCase()!="input"&&(e=a("input",e.parentNode)[0]);if(!(a.timepicker._isDisabledTimepicker(e)||a.timepicker._lastInput==e)){var g=a.timepicker._getInst(e);a.timepicker._curInst&&
a.timepicker._curInst!=g&&a.timepicker._curInst.tpDiv.stop(!0,!0);var b=a.timepicker._get(g,"beforeShow");f(g.settings,b?b.apply(e,[e,g]):{});g.lastVal=null;a.timepicker._lastInput=e;a.timepicker._setTimeFromField(g);if(a.timepicker._inDialog)e.value="";if(!a.timepicker._pos)a.timepicker._pos=a.timepicker._findPos(e),a.timepicker._pos[1]+=e.offsetHeight;var c=!1;a(e).parents().each(function(){c|=a(this).css("position")=="fixed";return!c});c&&a.browser.opera&&(a.timepicker._pos[0]-=document.documentElement.scrollLeft,
a.timepicker._pos[1]-=document.documentElement.scrollTop);b={left:a.timepicker._pos[0],top:a.timepicker._pos[1]};a.timepicker._pos=null;g.tpDiv.css({position:"absolute",display:"block",top:"-1000px"});a.timepicker._updateTimepicker(g);g._hoursClicked=!1;g._minutesClicked=!1;b=a.timepicker._checkOffset(g,b,c);g.tpDiv.css({position:a.timepicker._inDialog&&a.blockUI?"static":c?"fixed":"absolute",display:"none",left:b.left+"px",top:b.top+"px"});if(!g.inline){var b=a.timepicker._get(g,"showAnim"),h=a.timepicker._get(g,
"duration"),p=function(){a.timepicker._timepickerShowing=!0;var e=a.timepicker._getBorders(g.tpDiv);g.tpDiv.find("iframe.ui-timepicker-cover").css({left:-e[0],top:-e[1],width:g.tpDiv.outerWidth(),height:g.tpDiv.outerHeight()})};g.tpDiv.zIndex(a(e).zIndex()+1);if(a.effects&&a.effects[b])g.tpDiv.show(b,a.timepicker._get(g,"showOptions"),h,p);else g.tpDiv[b||"show"](b?h:null,p);(!b||!h)&&p();g.input.is(":visible")&&!g.input.is(":disabled")&&g.input.focus();a.timepicker._curInst=g}}},_updateTimepicker:function(e){var g=
this,b=a.timepicker._getBorders(e.tpDiv);e.tpDiv.empty().append(this._generateHTML(e)).find("iframe.ui-timepicker-cover").css({left:-b[0],top:-b[1],width:e.tpDiv.outerWidth(),height:e.tpDiv.outerHeight()}).end().find(".ui-timepicker td a").bind("mouseout",function(){a(this).removeClass("ui-state-hover");this.className.indexOf("ui-timepicker-prev")!=-1&&a(this).removeClass("ui-timepicker-prev-hover");this.className.indexOf("ui-timepicker-next")!=-1&&a(this).removeClass("ui-timepicker-next-hover")}).bind("mouseover",
function(){if(!g._isDisabledTimepicker(e.inline?e.tpDiv.parent()[0]:e.input[0]))a(this).parents(".ui-timepicker-calendar").find("a").removeClass("ui-state-hover"),a(this).addClass("ui-state-hover"),this.className.indexOf("ui-timepicker-prev")!=-1&&a(this).addClass("ui-timepicker-prev-hover"),this.className.indexOf("ui-timepicker-next")!=-1&&a(this).addClass("ui-timepicker-next-hover")}).end().find("."+this._dayOverClass+" a").trigger("mouseover").end()},_generateHTML:function(a){var g,b="",f=this._get(a,
"showPeriod")==!0,c=this._get(a,"showLeadingZero")==!0,h=this._get(a,"showMinutesLeadingZero")==!0,n=this._get(a,"amPmText"),b='<table class="ui-timepicker-table ui-widget-content ui-corner-all"><tr><td class="ui-timepicker-hours"><div class="ui-timepicker-title ui-widget-header ui-helper-clearfix ui-corner-all">'+this._get(a,"hourText")+'</div><table class="ui-timepicker">';b+='<tr><th rowspan="2" class="periods">'+n[0]+"</th>";for(g=0;g<=5;g++)b+=this._generateHTMLHourCell(a,g,f,c);b+="</tr><tr>";
for(g=6;g<=11;g++)b+=this._generateHTMLHourCell(a,g,f,c);b+='</tr><tr><th rowspan="2" class="periods">'+n[1]+"</th>";for(g=12;g<=17;g++)b+=this._generateHTMLHourCell(a,g,f,c);b+="</tr><tr>";for(g=18;g<=23;g++)b+=this._generateHTMLHourCell(a,g,f,c);b+='</tr></table></td><td class="ui-timepicker-minutes"><div class="ui-timepicker-title ui-widget-header ui-helper-clearfix ui-corner-all">'+this._get(a,"minuteText")+'</div><table class="ui-timepicker"><tr>';for(g=0;g<15;g+=5)b+=this._generateHTMLMinuteCell(a,
g,g<10&&h?"0"+g.toString():g.toString());b+="</tr><tr>";for(g=15;g<30;g+=5)b+=this._generateHTMLMinuteCell(a,g,g.toString());b+="</tr><tr>";for(g=30;g<45;g+=5)b+=this._generateHTMLMinuteCell(a,g,g.toString());b+="</tr><tr>";for(g=45;g<60;g+=5)b+=this._generateHTMLMinuteCell(a,g,g.toString());b+="</tr></table></td></tr></table>";return b},_generateHTMLHourCell:function(a,g,b,f){var c=g;g>12&&b&&(c=g-12);c==0&&b&&(c=12);c<10&&f&&(c="0"+c);return'<td onclick="TP_jQuery_'+h+".timepicker.selectHours('#"+
a.id+"', "+g.toString()+', this ); return false;" ondblclick="TP_jQuery_'+h+".timepicker.selectHours('#"+a.id+"', "+g.toString()+', this, true ); return false;" ><a href="#" class="ui-state-default '+(g==a.hours?"ui-state-active":"")+'">'+c.toString()+"</a></td>"},_generateHTMLMinuteCell:function(a,g,b){return'<td onclick="TP_jQuery_'+h+".timepicker.selectMinutes('#"+a.id+"', "+g.toString()+', this ); return false;" ondblclick="TP_jQuery_'+h+".timepicker.selectMinutes('#"+a.id+"', "+g.toString()+
', this, true ); return false;" ><a href="#" class="ui-state-default '+(g==a.minutes?"ui-state-active":"")+'" >'+b+"</a></td>"},_isDisabledTimepicker:function(a){if(!a)return!1;for(var g=0;g<this._disabledInputs.length;g++)if(this._disabledInputs[g]==a)return!0;return!1},_checkOffset:function(e,g,b){var f=e.tpDiv.outerWidth(),c=e.tpDiv.outerHeight(),h=e.input?e.input.outerWidth():0,n=e.input?e.input.outerHeight():0,s=document.documentElement.clientWidth+a(document).scrollLeft(),u=document.documentElement.clientHeight+
a(document).scrollTop();g.left-=this._get(e,"isRTL")?f-h:0;g.left-=b&&g.left==e.input.offset().left?a(document).scrollLeft():0;g.top-=b&&g.top==e.input.offset().top+n?a(document).scrollTop():0;g.left-=Math.min(g.left,g.left+f>s&&s>f?Math.abs(g.left+f-s):0);g.top-=Math.min(g.top,g.top+c>u&&u>c?Math.abs(c+n):0);return g},_findPos:function(e){for(var g=this._get(this._getInst(e),"isRTL");e&&(e.type=="hidden"||e.nodeType!=1);)e=e[g?"previousSibling":"nextSibling"];e=a(e).offset();return[e.left,e.top]},
_getBorders:function(a){var g=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(g(a.css("border-left-width"))),parseFloat(g(a.css("border-top-width")))]},_checkExternalClick:function(e){a.timepicker._curInst&&(e=a(e.target),e[0].id!=a.timepicker._mainDivId&&e.parents("#"+a.timepicker._mainDivId).length==0&&!e.hasClass(a.timepicker.markerClassName)&&!e.hasClass(a.timepicker._triggerClass)&&a.timepicker._timepickerShowing&&(!a.timepicker._inDialog||!a.blockUI)&&a.timepicker._hideTimepicker())},
_hideTimepicker:function(e){var g=this._curInst;if(g&&!(e&&g!=a.data(e,"timepicker"))&&this._timepickerShowing){var e=this._get(g,"showAnim"),b=this._get(g,"duration"),f=function(){a.timepicker._tidyDialog(g);this._curInst=null};if(a.effects&&a.effects[e])g.tpDiv.hide(e,a.timepicker._get(g,"showOptions"),b,f);else g.tpDiv[e=="slideDown"?"slideUp":e=="fadeIn"?"fadeOut":"hide"](e?b:null,f);e||f();(e=this._get(g,"onClose"))&&e.apply(g.input?g.input[0]:null,[g.input?g.input.val():"",g]);this._timepickerShowing=
!1;this._lastInput=null;this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),a.blockUI&&(a.unblockUI(),a("body").append(this.tpDiv)));this._inDialog=!1}},_tidyDialog:function(a){a.tpDiv.removeClass(this._dialogClass).unbind(".ui-timepicker")},_getInst:function(e){try{return a.data(e,"timepicker")}catch(g){throw"Missing instance data for this timepicker";}},_get:function(a,g){return a.settings[g]!==c?a.settings[g]:this._defaults[g]},_setTimeFromField:function(a){if(a.input.val()!=
a.lastVal){var g=this._get(a,"defaultTime"),b=this._getCurrentTimeRounded(a);g!=""&&(b=g);a.inline==!1&&a.input.val()!=""&&(b=a.input.val());g=a.lastVal=b;g=this.parseTime(a,g);a.hours=g.hours;a.minutes=g.minutes}},_getCurrentTimeRounded:function(a){var g=new Date,a=this._get(a,"timeSeparator"),b=g.getMinutes(),b=Math.round(b/5)*5;return g.getHours().toString()+a+b.toString()},parseTime:function(a,g){var b={hours:-1,minutes:-1},f=this._get(a,"timeSeparator"),c=this._get(a,"amPmText"),f=g.indexOf(f);
if(f==-1)return b;b.hours=parseInt(g.substr(0,f),10);b.minutes=parseInt(g.substr(f+1),10);var f=this._get(a,"showPeriod")==!0,h=g.toUpperCase();b.hours<12&&f&&h.indexOf(c[1].toUpperCase())!=-1&&(b.hours+=12);if(b.hours==12&&f&&h.indexOf(c[0].toUpperCase())!=-1)b.hours=0;return b},selectHours:function(e,g,b,f){e=this._getInst(a(e)[0]);a(b).parents(".ui-timepicker-hours:first").find("a").removeClass("ui-state-active");a(b).children("a").addClass("ui-state-active");e.hours=g;this._updateSelectedValue(e);
e._hoursClicked=!0;(e._minutesClicked||f)&&a.timepicker._hideTimepicker()},selectMinutes:function(e,g,b,f){e=this._getInst(a(e)[0]);a(b).parents(".ui-timepicker-minutes:first").find("a").removeClass("ui-state-active");a(b).children("a").addClass("ui-state-active");e.minutes=g;this._updateSelectedValue(e);e._minutesClicked=!0;(e._hoursClicked||f)&&a.timepicker._hideTimepicker()},_updateSelectedValue:function(a){if(a.hours<0||a.hours>23)a.hours=12;if(a.minutes<0||a.minutes>59)a.minutes=0;var g="",b=
this._get(a,"showPeriod")==!0,f=this._get(a,"showLeadingZero")==!0,c=this._get(a,"amPmText"),h=a.minutes?a.minutes:0,n=a.hours?a.hours:0;n||(displayHoyrs=0);b&&(a.hours==0&&(n=12),a.hours<12?g=c[0]:(g=c[1],n>12&&(n-=12)));b=n.toString();f&&n<10&&(b="0"+b);f=h.toString();h<10&&(f="0"+f);h=b+this._get(a,"timeSeparator")+f;g.length>0&&(h+=" "+g);a.input&&(a.input.val(h),a.input.trigger("change"));(g=this._get(a,"onSelect"))&&g.apply(a.input?a.input[0]:null,[h,a]);this._updateAlternate(a,h);return h},
_updateAlternate:function(e,g){var b=this._get(e,"altField");b&&a(b).each(function(){a(this).val(g)})}});a.fn.timepicker=function(e){if(!a.timepicker.initialized)a(document).mousedown(a.timepicker._checkExternalClick).find("body").append(a.timepicker.tpDiv),a.timepicker.initialized=!0;var g=Array.prototype.slice.call(arguments,1);if(typeof e=="string"&&(e=="isDisabled"||e=="getDate"||e=="widget"))return a.timepicker["_"+e+"Datepicker"].apply(a.timepicker,[this[0]].concat(g));if(e=="option"&&arguments.length==
2&&typeof arguments[1]=="string")return a.timepicker["_"+e+"Datepicker"].apply(a.timepicker,[this[0]].concat(g));return this.each(function(){typeof e=="string"?a.timepicker["_"+e+"Datepicker"].apply(a.timepicker,[this].concat(g)):a.timepicker._attachTimepicker(this,e)})};a.timepicker=new b;a.timepicker.initialized=!1;a.timepicker.uuid=(new Date).getTime();a.timepicker.version="1.8.6";window["TP_jQuery_"+h]=a})(jQuery);
(function(a){a.cluetip={version:"1.0.7"};var c,b,f,h,e,g,m,j;a.fn.cluetip=function(n,s){typeof n=="object"&&(s=n,n=null);if(n=="destroy")return this.removeData("thisInfo").unbind(".cluetip");return this.each(function(u){function w(){return!1}var v=this,t=a(this),r=a.extend(!0,{},a.fn.cluetip.defaults,s||{},a.metadata?t.metadata():a.meta?t.data():{}),A=!1,x=+r.cluezIndex;t.data("thisInfo",{title:v.title,zIndex:x});var B=!1,N=0;a("#cluetip").length||(a('<div id="cluetip"><div id="cluetip-outer"><h3 id="cluetip-title"></h3><div id="cluetip-inner"></div></div><div id="cluetip-extra"></div><div id="cluetip-arrows" class="cluetip-arrows"></div></div>')[k](p).hide(),
c=a("#cluetip").css({position:"absolute"}),f=a("#cluetip-outer").css({position:"relative",zIndex:x}),b=a("#cluetip-inner"),h=a("#cluetip-title"),e=a("#cluetip-arrows"),g=a('<div id="cluetip-waitimage"></div>').css({position:"absolute"}).insertBefore(c).hide());var O=r.dropShadow?+r.dropShadowSteps:0;if(!m){m=a([]);for(var y=0;y<O;y++)m=m.add(a("<div></div>").css({zIndex:x-1,opacity:0.1,top:1+y,left:1+y}));m.css({position:"absolute",backgroundColor:"#000"}).prependTo(c)}var z=t.attr(r.attribute),J=
r.cluetipClass;if(!z&&!r.splitTitle&&!n)return!0;r.local&&r.localPrefix&&(z=r.localPrefix+z);r.local&&r.hideLocal&&a(z+":first").hide();var T=parseInt(r.topOffset,10),Z=parseInt(r.leftOffset,10),V,ba,G=isNaN(parseInt(r.height,10))?"auto":/\D/g.test(r.height)?r.height:r.height+"px",I,H,C,L,U,E=parseInt(r.width,10)||275,P=E+(parseInt(c.css("paddingLeft"),10)||0)+(parseInt(c.css("paddingRight"),10)||0)+O,Y=this.offsetWidth,S,K,M,aa,X,R=r.attribute!="title"?t.attr(r.titleAttribute):"";r.splitTitle&&(R==
void 0&&(R=""),X=R.split(r.splitTitle),R=X.shift());r.escapeTitle&&(R=R.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;"));var Q=function(h){if(!r.onActivate(t))return!1;B=!0;c.removeClass().css({width:E});z==t.attr("href")&&t.css("cursor",r.cursor);r.hoverClass&&t.addClass(r.hoverClass);H=t.offset().top;S=t.offset().left;M=h.pageX;L=h.pageY;v.tagName.toLowerCase()!="area"&&(I=a(document).scrollTop(),aa=a(window).width());if(r.positionBy=="fixed")K=Y+S+Z,c.css({left:K});else{K=Y>S&&
S>P||S+Y+P+Z>aa?S-P-Z:Y+S+Z;if(v.tagName.toLowerCase()=="area"||r.positionBy=="mouse"||Y+P>aa)M+20+P>aa?(c.addClass(" cluetip-"+J),K=M-P-Z>=0?M-P-Z-parseInt(c.css("marginLeft"),10)+parseInt(b.css("marginRight"),10):M-P/2):K=M+Z;var m=K<0?h.pageY+T:h.pageY;c.css({left:K>0&&r.positionBy!="bottomTop"?K:M+P/2>aa?aa/2-P/2:Math.max(M-P/2,0),zIndex:t.data("thisInfo").zIndex});e.css({zIndex:t.data("thisInfo").zIndex+1})}ba=a(window).height();if(n)typeof n=="function"&&(n=n.call(v)),b.html(n),D(m);else if(X){h=
X.length;b.html(h?X[0]:"");if(h>1)for(var k=1;k<h;k++)b.append('<div class="split-body">'+X[k]+"</div>");D(m)}else if(!r.local&&z.indexOf("#")!==0)if(/\.(jpe?g|tiff?|gif|png)$/i.test(z))b.html('<img src="'+z+'" alt="'+R+'" />'),D(m);else if(A&&r.ajaxCache)b.html(A),D(m);else{var p=r.ajaxSettings.beforeSend,s=r.ajaxSettings.error,o=r.ajaxSettings.success,w=r.ajaxSettings.complete,h=a.extend(!0,{},r.ajaxSettings,{cache:!1,url:z,beforeSend:function(a){p&&p.call(v,a,c,b);f.children().empty();r.waitImage&&
g.css({top:L+20,left:M+20,zIndex:t.data("thisInfo").zIndex-1}).show()},error:function(a,e){B&&(s?s.call(v,a,e,c,b):b.html("<i>sorry, the contents could not be loaded</i>"))},success:function(a,e){A=r.ajaxProcess.call(v,a);B&&(o&&o.call(v,a,e,c,b),b.html(A))},complete:function(e,f){w&&w.call(v,e,f,c,b);var h=b[0].getElementsByTagName("img");j=h.length;for(var k=0,n=h.length;k<n;k++)h[k].complete&&j--;j&&!a.browser.opera?a(h).bind("load error",function(){j--;j<1&&(g.hide(),B&&D(m))}):(g.hide(),B&&D(m))}});
a.ajax(h)}else r.local&&(h=a(z+(/#\S+$/.test(z)?"":":eq("+u+")")).clone(!0).show(),b.html(h),D(m))},D=function(g){c.addClass("cluetip-"+J);if(r.truncate){var j=b.text().slice(0,r.truncate)+"...";b.html(j)}R?h.show().html(R):r.showTitle?h.show().html("&nbsp;"):h.hide();r.sticky&&(j=a('<div id="cluetip-close"><a href="#">'+r.closeText+"</a></div>"),r.closePosition=="bottom"?j.appendTo(b):r.closePosition=="title"?j.prependTo(h):j.prependTo(b),j.bind("click.cluetip",function(){W();return!1}),r.mouseOutClose?
c.bind("mouseleave.cluetip",function(){W()}):c.unbind("mouseleave.cluetip"));j="";f.css({zIndex:t.data("thisInfo").zIndex,overflow:G=="auto"?"visible":"auto",height:G});V=G=="auto"?Math.max(c.outerHeight(),c.height()):parseInt(G,10);C=H;U=I+ba;r.positionBy=="fixed"?C=H-r.dropShadowSteps+T:K<M&&Math.max(K,0)+P>M||r.positionBy=="bottomTop"?H+V+T>U&&L-I>V+T?(C=L-V-T,j="top"):(C=L+T,j="bottom"):C=H+V+T>U?V>=ba?I:U-V-T:t.css("display")=="block"||v.tagName.toLowerCase()=="area"||r.positionBy=="mouse"?g-
T:H-r.dropShadowSteps;j==""&&(K<S?j="left":j="right");c.css({top:C+"px"}).removeClass().addClass("clue-"+j+"-"+J).addClass(" cluetip-"+J);r.arrows?(g=H-C-r.dropShadowSteps,e.css({top:/(left|right)/.test(j)&&K>=0&&g>0?g+"px":/(left|right)/.test(j)?0:""}).show()):e.hide();m.hide();c.hide()[r.fx.open](r.fx.openSpeed||0);r.dropShadow&&m.css({height:V,width:E,zIndex:t.data("thisInfo").zIndex-1}).show();a.fn.bgiframe&&c.bgiframe();r.delayedClose>0&&(N=setTimeout(W,r.delayedClose));r.onShow.call(v,c,b)},
o=function(){B=!1;g.hide();if(!r.sticky||/click|toggle/.test(r.activation))W(),clearTimeout(N);r.hoverClass&&t.removeClass(r.hoverClass)},W=function(){f.parent().hide().removeClass();r.onHide.call(v,c,b);t.removeClass("cluetip-clicked");R&&t.attr(r.titleAttribute,R);t.css("cursor","");r.arrows&&e.css({top:""})};a(document).bind("hideCluetip",function(){W()});if(/click|toggle/.test(r.activation))t.bind("click.cluetip",function(e){c.is(":hidden")||!t.is(".cluetip-clicked")?(Q(e),a(".cluetip-clicked").removeClass("cluetip-clicked"),
t.addClass("cluetip-clicked")):o(e);this.blur();return!1});else if(r.activation=="focus")t.bind("focus.cluetip",function(a){Q(a)}),t.bind("blur.cluetip",function(a){o(a)});else{t[r.clickThrough?"unbind":"bind"]("click",w);var ca=function(a){if(r.tracking==!0){var e=K-a.pageX,g=C?C-a.pageY:H-a.pageY;t.bind("mousemove.cluetip",function(a){c.css({left:a.pageX+e,top:a.pageY+g})})}};a.fn.hoverIntent&&r.hoverIntent?t.hoverIntent({sensitivity:r.hoverIntent.sensitivity,interval:r.hoverIntent.interval,over:function(a){Q(a);
ca(a)},timeout:r.hoverIntent.timeout,out:function(a){o(a);t.unbind("mousemove.cluetip")}}):t.bind("mouseenter.cluetip",function(a){Q(a);ca(a)}).bind("mouseleave.cluetip",function(a){o(a);t.unbind("mousemove.cluetip")});t.bind("mouseover.cluetip",function(){t.attr("title","")}).bind("mouseleave.cluetip",function(){t.attr("title",t.data("thisInfo").title)})}})};a.fn.cluetip.defaults={width:275,height:"auto",cluezIndex:97,positionBy:"auto",topOffset:15,leftOffset:15,local:!1,localPrefix:null,hideLocal:!0,
attribute:"rel",titleAttribute:"title",splitTitle:"",escapeTitle:!1,showTitle:!0,cluetipClass:"default",hoverClass:"",waitImage:!0,cursor:"help",arrows:!1,dropShadow:!0,dropShadowSteps:6,sticky:!1,mouseOutClose:!1,activation:"hover",clickThrough:!1,tracking:!1,delayedClose:0,closePosition:"top",closeText:"Close",truncate:0,fx:{open:"show",openSpeed:""},hoverIntent:{sensitivity:3,interval:50,timeout:0},onActivate:function(){return!0},onShow:function(){},onHide:function(){},ajaxCache:!0,ajaxProcess:function(a){return a=
a.replace(/<(script|style|title)[^<]+<\/(script|style|title)>/gm,"").replace(/<(link|meta)[^>]+>/g,"")},ajaxSettings:{dataType:"html"},debug:!1};var k="appendTo",p="body";a.cluetip.setup=function(a){if(a&&a.insertionType&&a.insertionType.match(/appendTo|prependTo|insertBefore|insertAfter/))k=a.insertionType;if(a&&a.insertionElement)p=a.insertionElement}})(jQuery);
jQuery&&function(a){function c(a,e,b){for(var f="",h=0;h<e.length;h++)if(e[h].optgroup)f+='<label class="optGroup">',f+=b.optGroupSelectable?'<input type="checkbox" class="optGroup" />'+e[h].optgroup:e[h].optgroup,f+='</label><div class="optGroupContainer">',f+=c(a,e[h].options,b),f+="</div>";else{var n=e[h],s='<label><input type="checkbox" name="'+a+'[]" value="'+n.value+'"';n.selected&&(s+=' checked="checked"');s+=" />"+n.text+"</label>";f+=s}return f}function b(g){var b=a(this),j=b.next(".multiSelectOptions"),
k=b.data("config"),p=b.data("callback");j.html("");var n="";k.selectAll&&(n+='<label class="selectAll"><input type="checkbox" class="selectAll" />'+k.selectAllText+"</label>");n+=c(b.attr("id"),g,k);j.html(n);g=j.width();n=!1;j.height()>k.listHeight?(j.css("height",k.listHeight+"px"),n=!0):j.css("height","");g=n&&g==j.width()?17:0;j.width()+g<b.outerWidth()?j.css("width",b.outerWidth()-2+"px"):j.css("width",j.width()+g+"px");a.fn.bgiframe&&b.next(".multiSelectOptions").bgiframe({width:j.width(),height:j.height()});
k.selectAll&&j.find("INPUT.selectAll").click(function(){j.find("INPUT:checkbox").attr("checked",a(this).attr("checked")).parent("LABEL").toggleClass("checked",a(this).attr("checked"))});k.optGroupSelectable&&(j.addClass("optGroupHasCheckboxes"),j.find("INPUT.optGroup").click(function(){a(this).parent().next().find("INPUT:checkbox").attr("checked",a(this).attr("checked")).parent("LABEL").toggleClass("checked",a(this).attr("checked"))}));j.find("INPUT:checkbox").click(function(){a(this).parent("LABEL").toggleClass("checked",
a(this).attr("checked"));e.call(b);b.focus();a(this).parent().parent().hasClass("optGroupContainer")&&h.call(b,a(this).parent().parent().prev());p&&p(a(this))});j.each(function(){a(this).find("INPUT:checked").parent().addClass("checked")});e.call(b);k.optGroupSelectable&&j.find("LABEL.optGroup").each(function(){h.call(b,a(this))});j.find("LABEL:has(INPUT)").hover(function(){a(this).parent().find("LABEL").removeClass("hover");a(this).addClass("hover")},function(){a(this).parent().find("LABEL").removeClass("hover")});
b.keydown(function(g){var c=a(this).next(".multiSelectOptions");if(c.css("visibility")!="hidden"){if(g.keyCode==9)return a(this).addClass("focus").trigger("click"),a(this).focus().next(":input").focus(),!0;(g.keyCode==27||g.keyCode==37||g.keyCode==39)&&a(this).addClass("focus").trigger("click");if(g.keyCode==40||g.keyCode==38){var h=c.find("LABEL"),j=h.index(h.filter(".hover")),k=-1;j<0?c.find("LABEL:first").addClass("hover"):g.keyCode==40&&j<h.length-1?k=j+1:g.keyCode==38&&j>0&&(k=j-1);k>=0&&(a(h.get(j)).removeClass("hover"),
a(h.get(k)).addClass("hover"),f(c));return!1}if(g.keyCode==13||g.keyCode==32)return g=c.find("LABEL.hover INPUT:checkbox"),g.attr("checked",!g.attr("checked")).parent("LABEL").toggleClass("checked",g.attr("checked")),g.hasClass("selectAll")&&c.find("INPUT:checkbox").attr("checked",g.attr("checked")).parent("LABEL").addClass("checked").toggleClass("checked",g.attr("checked")),e.call(b),p&&p(a(this)),!1;if(g.keyCode>=33&&g.keyCode<=126){var h=c.find("LABEL:startsWith("+String.fromCharCode(g.keyCode)+
")"),n=h.index(h.filter("LABEL.hover")),j=h.filter(function(a){return a>n}),h=(j.length>=1?j:h).filter("LABEL:first");h.length==1&&(c.find("LABEL.hover").removeClass("hover"),h.addClass("hover"),f(c))}}else{if(g.keyCode==38||g.keyCode==40||g.keyCode==13||g.keyCode==32)return a(this).removeClass("focus").trigger("click"),c.find("LABEL:first").addClass("hover"),!1;if(g.keyCode==9)return c.next(":input").focus(),!0}if(g.keyCode==13)return!1})}function f(a){var e=a.find("LABEL.hover").position().top+
a.find("LABEL.hover").outerHeight();e>a.innerHeight()&&a.scrollTop(a.scrollTop()+e-a.innerHeight());a.find("LABEL.hover").position().top<0&&a.scrollTop(a.scrollTop()+a.find("LABEL.hover").position().top)}function h(e){if(a(this).data("config").optGroupSelectable){var b=!0;a(e).next().find("INPUT:checkbox").each(function(){if(!a(this).attr("checked"))return b=!1});a(e).find("INPUT.optGroup").attr("checked",b).parent("LABEL").toggleClass("checked",b)}}function e(){var e=a(this),b=e.next(".multiSelectOptions"),
f=e.data("config"),c=0,h=!0,n="";b.find("INPUT:checkbox").not(".selectAll, .optGroup").each(function(){a(this).attr("checked")?(c++,n=n+a(this).parent().text()+", "):h=!1});n=n.replace(/\s*\,\s*$/,"");c==0?e.find("span").html(f.noneSelected):f.oneOrMoreSelected=="*"?(e.find("span").html(n),e.attr("title",n)):e.find("span").html(f.oneOrMoreSelected.replace("%",c));f.selectAll&&b.find("INPUT.selectAll").attr("checked",h).parent("LABEL").toggleClass("checked",h)}a.extend(a.fn,{multiSelect:function(e,
f){e||(e={});if(e.selectAll==void 0)e.selectAll=!0;if(e.selectAllText==void 0)e.selectAllText="Select All";if(e.noneSelected==void 0)e.noneSelected="Select options";if(e.oneOrMoreSelected==void 0)e.oneOrMoreSelected="% selected";if(e.optGroupSelectable==void 0)e.optGroupSelectable=!1;if(e.listHeight==void 0)e.listHeight=150;a(this).each(function(){var c=a(this),h='<a href="javascript:;" class="multiSelect"><span></span></a>';h+='<div class="multiSelectOptions" style="position: absolute; z-index: 99999; visibility: hidden;"></div>';
a(c).after(h);var p=a(c).next(".multiSelect");p.next(".multiSelectOptions");p.find("span").css("width",a(c).width()+"px");p.data("config",e);p.data("callback",f);var n=[];a(c).children().each(function(){if(this.tagName.toUpperCase()=="OPTGROUP"){var e=[];n.push({optgroup:a(this).attr("label"),options:e});a(this).children("OPTION").each(function(){a(this).val()!=""&&e.push({text:a(this).html(),value:a(this).val(),selected:a(this).attr("selected")})})}else this.tagName.toUpperCase()=="OPTION"&&a(this).val()!=
""&&n.push({text:a(this).html(),value:a(this).val(),selected:a(this).attr("selected")})});a(c).remove();p.attr("id",a(c).attr("id"));b.call(p,n);p.hover(function(){a(this).addClass("hover")},function(){a(this).removeClass("hover")}).click(function(){a(this).hasClass("active")?a(this).multiSelectOptionsHide():a(this).multiSelectOptionsShow();return!1}).focus(function(){a(this).addClass("focus")}).blur(function(){a(this).removeClass("focus")});a(document).click(function(e){a(e.target).parents().andSelf().is(".multiSelectOptions")||
p.multiSelectOptionsHide()})})},multiSelectOptionsUpdate:function(e){b.call(a(this),e)},multiSelectOptionsHide:function(){a(this).removeClass("active").removeClass("hover").next(".multiSelectOptions").css("visibility","hidden")},multiSelectOptionsShow:function(){var e=a(this),b=e.next(".multiSelectOptions");e.data("config");a(".multiSelect").multiSelectOptionsHide();b.find("LABEL").removeClass("hover");e.addClass("active").next(".multiSelectOptions").css("visibility","visible");e.focus();e.next(".multiSelectOptions").scrollTop(0);
b=e.position();e.next(".multiSelectOptions").css({top:b.top+a(this).outerHeight()+"px"});e.next(".multiSelectOptions").css({left:b.left+"px"})},selectedValuesString:function(){var e="";a(this).next(".multiSelectOptions").find("INPUT:checkbox:checked").not(".optGroup, .selectAll").each(function(){e+=a(this).attr("value")+","});return e.replace(/\s*\,\s*$/,"")}});a.expr[":"].startsWith=function(e,b,f){b=f[3];if(!b)return!1;return eval("/^[/s]*"+b+"/i").test(a(e).text())}}(jQuery);
jQuery(document).ready(function(){jQuery(".s3_checkbox_label").cluetip({activation:"hover",positionBy:"auto",local:!0,hideLocal:!1,showTitle:!1,topOffset:0,mouseOutClose:!0,arrows:!0,clickThrough:!0})});
(function(a,c){function b(b){return!a(b).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};a.ui.version||(a.extend(a.ui,{version:"1.8.11",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,
PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({_focus:a.fn.focus,focus:function(b,c){return typeof b==="number"?this.each(function(){var e=this;setTimeout(function(){a(e).focus();c&&c.call(e)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;b=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,
"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(b){if(b!==c)return this.css("zIndex",b);if(this.length)for(var b=a(this[0]),h;b.length&&b[0]!==document;){h=b.css("position");if(h===
"absolute"||h==="relative"||h==="fixed")if(h=parseInt(b.css("zIndex"),10),!isNaN(h)&&h!==0)return h;b=b.parent()}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.each(["Width","Height"],function(b,h){function e(e,b,f,c){a.each(g,function(){b-=parseFloat(a.curCSS(e,"padding"+this,!0))||0;f&&(b-=parseFloat(a.curCSS(e,
"border"+this+"Width",!0))||0);c&&(b-=parseFloat(a.curCSS(e,"margin"+this,!0))||0)});return b}var g=h==="Width"?["Left","Right"]:["Top","Bottom"],m=h.toLowerCase(),j={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+h]=function(g){if(g===c)return j["inner"+h].call(this);return this.each(function(){a(this).css(m,e(this,g)+"px")})};a.fn["outer"+h]=function(g,b){if(typeof g!=="number")return j["outer"+h].call(this,g);return this.each(function(){a(this).css(m,
e(this,g,!0,b)+"px")})}}),a.extend(a.expr[":"],{data:function(b,c,e){return!!a.data(b,e[3])},focusable:function(f){var c=f.nodeName.toLowerCase(),e=a.attr(f,"tabindex");if("area"===c){c=f.parentNode;e=c.name;if(!f.href||!e||c.nodeName.toLowerCase()!=="map")return!1;f=a("img[usemap=#"+e+"]")[0];return!!f&&b(f)}return(/input|select|textarea|button|object/.test(c)?!f.disabled:"a"==c?f.href||!isNaN(e):!isNaN(e))&&b(f)},tabbable:function(b){var c=a.attr(b,"tabindex");return(isNaN(c)||c>=0)&&a(b).is(":focusable")}}),
a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});a.support.minHeight=c.offsetHeight===100;a.support.selectstart="onselectstart"in c;b.removeChild(c).style.display="none"}),a.extend(a.ui,{plugin:{add:function(b,c,e){var b=a.ui[b].prototype,g;for(g in e)b.plugins[g]=b.plugins[g]||[],b.plugins[g].push([c,e[g]])},call:function(a,b,e){if((b=a.plugins[b])&&a.element[0].parentNode)for(var g=0;g<b.length;g++)a.options[b[g][0]]&&
b[g][1].apply(a.element,e)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(b,c){if(a(b).css("overflow")==="hidden")return!1;var e=c&&c==="left"?"scrollLeft":"scrollTop",g=!1;if(b[e]>0)return!0;b[e]=1;g=b[e]>0;b[e]=0;return g},isOverAxis:function(a,b,e){return a>b&&a<b+e},isOver:function(b,c,e,g,m,j){return a.ui.isOverAxis(b,e,m)&&a.ui.isOverAxis(c,g,j)}}))})(jQuery);
function popup(a){newwindow=window.open(a,"name","height=400,width=600");window.focus&&newwindow.focus();return!1}function collapse(a){jQuery("#"+a).slideToggle()}function fade(a,c){c>0?jQuery("#"+a).hide().fadeIn("slow"):jQuery("#"+a).show().fadeOut("slow")}
function ajax(a,c,b){query="";if(typeof c=="string")(d=jQuery(c).serialize())&&(query=d);else{pcs=[];for(i=0;i<c.length;i++)(q=jQuery("#"+c[i]).serialize())&&pcs.push(q);pcs.length>0&&(query=pcs.join("&"))}jQuery.ajax({type:"POST",url:a,data:query,success:function(a){b&&(b==":eval"?eval(a):jQuery("#"+b).html(a))}})}String.prototype.reverse=function(){return this.split("").reverse().join("")};
function web2py_ajax_init(){jQuery(".hidden").hide();jQuery(".error").hide().slideDown("slow");jQuery(".flash").click(function(){jQuery(this).fadeOut("slow");return!1});jQuery("input.string").attr("size",50);jQuery("textarea.text").attr("cols",50).attr("rows",10);jQuery("input.integer").keyup(function(){this.value=this.value.reverse().replace(/[^0-9\-]|\-(?=.)/g,"").reverse()});jQuery("input.double").keyup(function(){this.value=this.value.reverse().replace(/[^0-9\-\.]|[\-](?=.)|[\.](?=[0-9]*[\.])/g,
"").reverse()})}jQuery(document).ready(function(){jQuery(".flash").hide().slideDown("slow");jQuery(".flash").html()!=""&&jQuery(".flash").slideDown("slow");web2py_ajax_init()});function web2py_trap_form(a,c){jQuery("#"+c+" form").each(function(){var b=jQuery(this);b.hasClass("no_trap")||b.submit(function(){jQuery(".flash").hide().html("");web2py_ajax_page("post",a,b.serialize(),c);return!1})})}
function web2py_ajax_page(a,c,b,f){jQuery.ajax({type:a,url:c,data:b,beforeSend:function(a){a.setRequestHeader("web2py-component-location",document.location);a.setRequestHeader("web2py-component-element",f)},complete:function(a){(command=a.getResponseHeader("web2py-component-command"))&&eval(command);(flash=a.getResponseHeader("web2py-component-flash"))&&jQuery(".flash").html(flash).slideDown()},success:function(a){jQuery("#"+f).html(a);web2py_trap_form(c,f);web2py_ajax_init()}})}
function web2py_component(a,c){jQuery(document).ready(function(){web2py_ajax_page("get",a,null,c)})}var S3MultiselectWidgetFileCounter=0;
function S3MultiselectWidgetAddClick(a){var c=a.WidgetID,b=[/DummyDisplay0/g,/DummyDisplay1/g,/DummyDisplay2/g,/DummyDisplay3/g,/DummyDisplay4/g],f=[/DummyJSON0/g,/DummyJSON1/g,/DummyJSON2/g,/DummyJSON3/g,/DummyJSON4/g],h=$("#"+c+"_json").val(),e="{",g,m=!0,j=a.NewRow,k="",p="";for(i=0;i<a.ColumnFields.length;i++){var n="#"+c+"_"+a.ColumnFields[i],s=$(n),u=$(n+"_auto_text").val();DisplayValue="";if(s.is("select"))g="'"+s.val()+"'",DisplayValue=$(n+" option:selected").text(),s.val("");else if(u!=void 0){DisplayValue=
u;g=$(n+"_auto_json").val();if(a.ColumnFields[i].slice(-3)=="_id"&&g==""){DisplayValue="";break}$(n+"_auto_text").val("");$(n+"_auto_json").val("");$(n+"_auto_edit").hide()}else s.attr("type")=="file"?(DisplayValue=s.val(),DisplayValue!=""&&(k=n,p=a.ColumnFields[i]+S3MultiselectWidgetFileCounter,g="'"+p+"'",S3MultiselectWidgetFileCounter++)):(DisplayValue=s.val(),s.val(""),s.attr("class")=="currency"&&(DisplayValue=g.replace("$","")),DisplayValue=DisplayValue.replace(/'/g,'"'),g="'"+DisplayValue+
"'");DisplayValue!=""&&(m=!1);j=j.replace(b[i],DisplayValue);j=j.replace(f[i],g);e=e+"'"+a.ColumnFields[i]+"':"+g+","}e=e.slice(0,-1)+"}";!m&&!h.match(e)&&(h!=""&&(h+=","),h+=e,$("#"+c+"_json").val(h),$(j).insertBefore("#"+a.WidgetID+"_input_row"),k!=""&&($(k).attr("id",p),$("#"+p).attr("name",p),$("#"+p).hide(),$('<input class="upload" id="drrpp_framework_file_dummy_file" type="file" />').insertAfter("#"+p)))}
function S3MultiselectWidgetDeleteClick(a,c){var b=c.WidgetID,f=$(a).attr("row_id");$("#"+c.DummyName).val();var h=$("#"+b+"_json").val();$(a).parent().parent().remove();if(f!="New")h!=""&&(h+=","),h=h+"{'id':'"+f+"','deleted':True},";else{f="{";for(i=0;i<c.ColumnFields.length;i++)f=f+"'"+c.ColumnFields[i]+"':'"+$(a).attr(c.ColumnFields[i])+"',";f=f.slice(0,-1)+"}";h=h.replace(f,"")}h=h.replace(",,",",");h.slice(-1)==","&&(h=h.slice(0,-1));$("#"+b+"_json").val(h)}
(function(a,c){function b(){this.debug=!1;this._curInst=null;this._keyEvent=!1;this._disabledInputs=[];this._inDialog=this._datepickerShowing=!1;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass=
"ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su",
"Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,
maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1};a.extend(this._defaults,this.regional[""]);this.dpDiv=a('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')}function f(e,g){a.extend(e,g);for(var b in g)if(g[b]==null||g[b]==c)e[b]=
g[b];return e}a.extend(a.ui,{datepicker:{version:"@VERSION"}});var h=(new Date).getTime();a.extend(b.prototype,{markerClassName:"hasDatepicker",log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){f(this._defaults,a||{});return this},_attachDatepicker:function(e,g){var b=null,c;for(c in this._defaults){var f=e.getAttribute("date:"+c);if(f){b=b||{};try{b[c]=eval(f)}catch(h){b[c]=f}}}c=e.nodeName.toLowerCase();f=c=="div"||
c=="span";if(!e.id)this.uuid+=1,e.id="dp"+this.uuid;var n=this._newInst(a(e),f);n.settings=a.extend({},g||{},b||{});c=="input"?this._connectDatepicker(e,n):f&&this._inlineDatepicker(e,n)},_newInst:function(e,g){return{id:e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:g,dpDiv:!g?this.dpDiv:a('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')}},_connectDatepicker:function(e,
g){var b=a(e);g.append=a([]);g.trigger=a([]);b.hasClass(this.markerClassName)||(this._attachments(b,g),b.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(a,e,b){g.settings[e]=b}).bind("getData.datepicker",function(a,e){return this._get(g,e)}),this._autoSize(g),a.data(e,"datepicker",g))},_attachments:function(e,g){var b=this._get(g,"appendText"),c=this._get(g,"isRTL");g.append&&g.append.remove();if(b)g.append=
a('<span class="'+this._appendClass+'">'+b+"</span>"),e[c?"before":"after"](g.append);e.unbind("focus",this._showDatepicker);g.trigger&&g.trigger.remove();b=this._get(g,"showOn");(b=="focus"||b=="both")&&e.focus(this._showDatepicker);if(b=="button"||b=="both"){var b=this._get(g,"buttonText"),f=this._get(g,"buttonImage");g.trigger=a(this._get(g,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:f,alt:b,title:b}):a('<button type="button"></button>').addClass(this._triggerClass).html(f==
""?b:a("<img/>").attr({src:f,alt:b,title:b})));e[c?"before":"after"](g.trigger);g.trigger.click(function(){a.datepicker._datepickerShowing&&a.datepicker._lastInput==e[0]?a.datepicker._hideDatepicker():a.datepicker._showDatepicker(e[0]);return!1})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var g=new Date(2009,11,20),b=this._get(a,"dateFormat");if(b.match(/[DM]/)){var c=function(a){for(var e=0,g=0,b=0;b<a.length;b++)if(a[b].length>e)e=a[b].length,g=b;return g};g.setMonth(c(this._get(a,
b.match(/MM/)?"monthNames":"monthNamesShort")));g.setDate(c(this._get(a,b.match(/DD/)?"dayNames":"dayNamesShort"))+20-g.getDay())}a.input.attr("size",this._formatDate(a,g).length)}},_inlineDatepicker:function(e,b){var c=a(e);c.hasClass(this.markerClassName)||(c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(a,e,c){b.settings[e]=c}).bind("getData.datepicker",function(a,e){return this._get(b,e)}),a.data(e,"datepicker",b),this._setDate(b,this._getDefaultDate(b),!0),
this._updateDatepicker(b),this._updateAlternate(b),b.dpDiv.show())},_dialogDatepicker:function(e,b,c,h,k){e=this._dialogInst;if(!e)this.uuid+=1,this._dialogInput=a('<input type="text" id="dp'+this.uuid+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>'),this._dialogInput.keydown(this._doKeyDown),a("body").append(this._dialogInput),e=this._dialogInst=this._newInst(this._dialogInput,!1),e.settings={},a.data(this._dialogInput[0],"datepicker",e);f(e.settings,h||{});b=b&&b.constructor==
Date?this._formatDate(e,b):b;this._dialogInput.val(b);this._pos=k?k.length?k:[k.pageX,k.pageY]:null;if(!this._pos)this._pos=[document.documentElement.clientWidth/2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/2-150+(document.documentElement.scrollTop||document.body.scrollTop)];this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");e.settings.onSelect=c;this._inDialog=!0;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);
a.blockUI&&a.blockUI(this.dpDiv);a.data(this._dialogInput[0],"datepicker",e);return this},_destroyDatepicker:function(e){var b=a(e),c=a.data(e,"datepicker");if(b.hasClass(this.markerClassName)){var f=e.nodeName.toLowerCase();a.removeData(e,"datepicker");f=="input"?(c.append.remove(),c.trigger.remove(),b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(f=="div"||f=="span")&&b.removeClass(this.markerClassName).empty()}},
_enableDatepicker:function(e){var b=a(e),c=a.data(e,"datepicker");if(b.hasClass(this.markerClassName)){var f=e.nodeName.toLowerCase();f=="input"?(e.disabled=!1,c.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):(f=="div"||f=="span")&&b.children("."+this._inlineClass).children().removeClass("ui-state-disabled");this._disabledInputs=a.map(this._disabledInputs,function(a){return a==e?null:a})}},_disableDatepicker:function(e){var b=a(e),c=
a.data(e,"datepicker");if(b.hasClass(this.markerClassName)){var f=e.nodeName.toLowerCase();f=="input"?(e.disabled=!0,c.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):(f=="div"||f=="span")&&b.children("."+this._inlineClass).children().addClass("ui-state-disabled");this._disabledInputs=a.map(this._disabledInputs,function(a){return a==e?null:a});this._disabledInputs[this._disabledInputs.length]=e}},_isDisabledDatepicker:function(a){if(!a)return!1;
for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]==a)return!0;return!1},_getInst:function(e){try{return a.data(e,"datepicker")}catch(b){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(e,b,h){var j=this._getInst(e);if(arguments.length==2&&typeof b=="string")return b=="defaults"?a.extend({},a.datepicker._defaults):j?b=="all"?a.extend({},j.settings):this._get(j,b):null;var k=b||{};typeof b=="string"&&(k={},k[b]=h);if(j){this._curInst==j&&this._hideDatepicker();
var p=this._getDateDatepicker(e,!0),n=this._getMinMaxDate(j,"min"),s=this._getMinMaxDate(j,"max");f(j.settings,k);if(n!==null&&k.dateFormat!==c&&k.minDate===c)j.settings.minDate=this._formatDate(j,n);if(s!==null&&k.dateFormat!==c&&k.maxDate===c)j.settings.maxDate=this._formatDate(j,s);this._attachments(a(e),j);this._autoSize(j);this._setDateDatepicker(e,p);this._updateDatepicker(j)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){(a=this._getInst(a))&&
this._updateDatepicker(a)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);c&&!c.inline&&this._setDateFromField(c,b);return c?this._getDate(c):null},_doKeyDown:function(e){var b=a.datepicker._getInst(e.target),c=!0,f=b.dpDiv.is(".ui-datepicker-rtl");b._keyEvent=!0;if(a.datepicker._datepickerShowing)switch(e.keyCode){case 9:a.datepicker._hideDatepicker();c=!1;
break;case 13:return c=a("td."+a.datepicker._dayOverClass+":not(."+a.datepicker._currentClass+")",b.dpDiv),c[0]?a.datepicker._selectDay(e.target,b.selectedMonth,b.selectedYear,c[0]):a.datepicker._hideDatepicker(),!1;case 27:a.datepicker._hideDatepicker();break;case 33:a.datepicker._adjustDate(e.target,e.ctrlKey?-a.datepicker._get(b,"stepBigMonths"):-a.datepicker._get(b,"stepMonths"),"M");break;case 34:a.datepicker._adjustDate(e.target,e.ctrlKey?+a.datepicker._get(b,"stepBigMonths"):+a.datepicker._get(b,
"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&a.datepicker._clearDate(e.target);c=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&a.datepicker._gotoToday(e.target);c=e.ctrlKey||e.metaKey;break;case 37:if(e.ctrlKey||e.metaKey)a.datepicker._adjustDate(e.target,f?1:-1,"D");c=e.ctrlKey||e.metaKey;e.originalEvent.altKey&&a.datepicker._adjustDate(e.target,e.ctrlKey?-a.datepicker._get(b,"stepBigMonths"):-a.datepicker._get(b,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&a.datepicker._adjustDate(e.target,
-7,"D");c=e.ctrlKey||e.metaKey;break;case 39:if(e.ctrlKey||e.metaKey)a.datepicker._adjustDate(e.target,f?-1:1,"D");c=e.ctrlKey||e.metaKey;e.originalEvent.altKey&&a.datepicker._adjustDate(e.target,e.ctrlKey?+a.datepicker._get(b,"stepBigMonths"):+a.datepicker._get(b,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&a.datepicker._adjustDate(e.target,7,"D");c=e.ctrlKey||e.metaKey;break;default:c=!1}else e.keyCode==36&&e.ctrlKey?a.datepicker._showDatepicker(this):c=!1;c&&(e.preventDefault(),e.stopPropagation())},
_doKeyPress:function(e){var b=a.datepicker._getInst(e.target);if(a.datepicker._get(b,"constrainInput")){var b=a.datepicker._possibleChars(a.datepicker._get(b,"dateFormat")),f=String.fromCharCode(e.charCode==c?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||f<" "||!b||b.indexOf(f)>-1}},_doKeyUp:function(e){e=a.datepicker._getInst(e.target);if(e.input.val()!=e.lastVal)try{if(a.datepicker.parseDate(a.datepicker._get(e,"dateFormat"),e.input?e.input.val():null,a.datepicker._getFormatConfig(e)))a.datepicker._setDateFromField(e),
a.datepicker._updateAlternate(e),a.datepicker._updateDatepicker(e)}catch(b){a.datepicker.log(b)}return!0},_showDatepicker:function(e){e=e.target||e;e.nodeName.toLowerCase()!="input"&&(e=a("input",e.parentNode)[0]);if(!(a.datepicker._isDisabledDatepicker(e)||a.datepicker._lastInput==e)){var b=a.datepicker._getInst(e);a.datepicker._curInst&&a.datepicker._curInst!=b&&a.datepicker._curInst.dpDiv.stop(!0,!0);var c=a.datepicker._get(b,"beforeShow");f(b.settings,c?c.apply(e,[e,b]):{});b.lastVal=null;a.datepicker._lastInput=
e;a.datepicker._setDateFromField(b);if(a.datepicker._inDialog)e.value="";if(!a.datepicker._pos)a.datepicker._pos=a.datepicker._findPos(e),a.datepicker._pos[1]+=e.offsetHeight;var h=!1;a(e).parents().each(function(){h|=a(this).css("position")=="fixed";return!h});h&&a.browser.opera&&(a.datepicker._pos[0]-=document.documentElement.scrollLeft,a.datepicker._pos[1]-=document.documentElement.scrollTop);c={left:a.datepicker._pos[0],top:a.datepicker._pos[1]};a.datepicker._pos=null;b.dpDiv.empty();b.dpDiv.css({position:"absolute",
display:"block",top:"-1000px"});a.datepicker._updateDatepicker(b);c=a.datepicker._checkOffset(b,c,h);b.dpDiv.css({position:a.datepicker._inDialog&&a.blockUI?"static":h?"fixed":"absolute",display:"none",left:c.left+"px",top:c.top+"px"});if(!b.inline){var c=a.datepicker._get(b,"showAnim"),k=a.datepicker._get(b,"duration"),p=function(){a.datepicker._datepickerShowing=!0;var e=b.dpDiv.find("iframe.ui-datepicker-cover");if(e.length){var c=a.datepicker._getBorders(b.dpDiv);e.css({left:-c[0],top:-c[1],width:b.dpDiv.outerWidth(),
height:b.dpDiv.outerHeight()})}};b.dpDiv.zIndex(a(e).zIndex()+1);if(a.effects&&(a.effects.effect[c]||a.effects[c]))b.dpDiv.show(c,a.datepicker._get(b,"showOptions"),k,p);else b.dpDiv[c||"show"](c?k:null,p);(!c||!k)&&p();b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus();a.datepicker._curInst=b}}},_updateDatepicker:function(e){var b=this,c=a.datepicker._getBorders(e.dpDiv);e.dpDiv.empty().append(this._generateHTML(e));var f=e.dpDiv.find("iframe.ui-datepicker-cover");f.length&&f.css({left:-c[0],
top:-c[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()});e.dpDiv.find("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a").bind("mouseout",function(){a(this).removeClass("ui-state-hover");this.className.indexOf("ui-datepicker-prev")!=-1&&a(this).removeClass("ui-datepicker-prev-hover");this.className.indexOf("ui-datepicker-next")!=-1&&a(this).removeClass("ui-datepicker-next-hover")}).bind("mouseover",function(){if(!b._isDisabledDatepicker(e.inline?e.dpDiv.parent()[0]:
e.input[0]))a(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),a(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&a(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&a(this).addClass("ui-datepicker-next-hover")}).end().find("."+this._dayOverClass+" a").trigger("mouseover").end();c=this._getNumberOfMonths(e);f=c[1];f>1?e.dpDiv.addClass("ui-datepicker-multi-"+f).css("width",17*f+"em"):e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");
e.dpDiv[(c[0]!=1||c[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi");e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");e==a.datepicker._curInst&&a.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!=document.activeElement&&e.input.focus();if(e.yearshtml){var h=e.yearshtml;setTimeout(function(){h===e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml);h=e.yearshtml=null},0)}},_getBorders:function(a){var b=
function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(e,b,c){var f=e.dpDiv.outerWidth(),h=e.dpDiv.outerHeight(),p=e.input?e.input.outerWidth():0,n=e.input?e.input.outerHeight():0,s=document.documentElement.clientWidth+a(document).scrollLeft(),u=document.documentElement.clientHeight+a(document).scrollTop();b.left-=this._get(e,"isRTL")?f-p:0;b.left-=c&&b.left==e.input.offset().left?a(document).scrollLeft():
0;b.top-=c&&b.top==e.input.offset().top+n?a(document).scrollTop():0;b.left-=Math.min(b.left,b.left+f>s&&s>f?Math.abs(b.left+f-s):0);b.top-=Math.min(b.top,b.top+h>u&&u>h?Math.abs(h+n):0);return b},_findPos:function(e){for(var b=this._get(this._getInst(e),"isRTL");e&&(e.type=="hidden"||e.nodeType!=1||a.expr.filters.hidden(e));)e=e[b?"previousSibling":"nextSibling"];e=a(e).offset();return[e.left,e.top]},_hideDatepicker:function(e){var b=this._curInst;if(b&&!(e&&b!=a.data(e,"datepicker"))&&this._datepickerShowing){var e=
this._get(b,"showAnim"),c=this._get(b,"duration"),f=function(){a.datepicker._tidyDialog(b);this._curInst=null};if(a.effects&&(a.effects.effect[e]||a.effects[e]))b.dpDiv.hide(e,a.datepicker._get(b,"showOptions"),c,f);else b.dpDiv[e=="slideDown"?"slideUp":e=="fadeIn"?"fadeOut":"hide"](e?c:null,f);e||f();(e=this._get(b,"onClose"))&&e.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b]);this._datepickerShowing=!1;this._lastInput=null;this._inDialog&&(this._dialogInput.css({position:"absolute",
left:"0",top:"-100px"}),a.blockUI&&(a.unblockUI(),a("body").append(this.dpDiv)));this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){a.datepicker._curInst&&(e=a(e.target),e[0].id!=a.datepicker._mainDivId&&e.parents("#"+a.datepicker._mainDivId).length==0&&!e.hasClass(a.datepicker.markerClassName)&&!e.hasClass(a.datepicker._triggerClass)&&a.datepicker._datepickerShowing&&(!a.datepicker._inDialog||!a.blockUI)&&
a.datepicker._hideDatepicker())},_adjustDate:function(e,b,c){var e=a(e),f=this._getInst(e[0]);this._isDisabledDatepicker(e[0])||(this._adjustInstDate(f,b+(c=="M"?this._get(f,"showCurrentAtPos"):0),c),this._updateDatepicker(f))},_gotoToday:function(e){var e=a(e),b=this._getInst(e[0]);if(this._get(b,"gotoCurrent")&&b.currentDay)b.selectedDay=b.currentDay,b.drawMonth=b.selectedMonth=b.currentMonth,b.drawYear=b.selectedYear=b.currentYear;else{var c=new Date;b.selectedDay=c.getDate();b.drawMonth=b.selectedMonth=
c.getMonth();b.drawYear=b.selectedYear=c.getFullYear()}this._notifyChange(b);this._adjustDate(e)},_selectMonthYear:function(e,b,c){var e=a(e),f=this._getInst(e[0]);f._selectingMonthYear=!1;f["selected"+(c=="M"?"Month":"Year")]=f["draw"+(c=="M"?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10);this._notifyChange(f);this._adjustDate(e)},_clickMonthYear:function(e){var b=this._getInst(a(e)[0]);b.input&&b._selectingMonthYear&&setTimeout(function(){b.input.focus()},0);b._selectingMonthYear=
!b._selectingMonthYear},_selectDay:function(e,b,c,f){var h=a(e);if(!a(f).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(h[0]))h=this._getInst(h[0]),h.selectedDay=h.currentDay=a("a",f).html(),h.selectedMonth=h.currentMonth=b,h.selectedYear=h.currentYear=c,this._selectDate(e,this._formatDate(h,h.currentDay,h.currentMonth,h.currentYear))},_clearDate:function(e){e=a(e);this._getInst(e[0]);this._selectDate(e,"")},_selectDate:function(e,b){var c=this._getInst(a(e)[0]),b=b!=null?b:this._formatDate(c);
c.input&&c.input.val(b);this._updateAlternate(c);var f=this._get(c,"onSelect");f?f.apply(c.input?c.input[0]:null,[b,c]):c.input&&c.input.trigger("change");c.inline?this._updateDatepicker(c):(this._hideDatepicker(),this._lastInput=c.input[0],typeof c.input[0]!="object"&&c.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var b=this._get(e,"altField");if(b){var c=this._get(e,"altFormat")||this._get(e,"dateFormat"),f=this._getDate(e),h=this.formatDate(c,f,this._getFormatConfig(e));a(b).each(function(){a(this).val(h)})}},
noWeekends:function(a){a=a.getDay();return[a>0&&a<6,""]},iso8601Week:function(a){a=new Date(a.getTime());a.setDate(a.getDate()+4-(a.getDay()||7));var b=a.getTime();a.setMonth(0);a.setDate(1);return Math.floor(Math.round((b-a)/864E5)/7)+1},parseDate:function(a,b,c){if(a==null||b==null)throw"Invalid arguments";b=typeof b=="object"?b.toString():b+"";if(b=="")return null;for(var f=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff,f=typeof f!="string"?f:(new Date).getFullYear()%100+parseInt(f,
10),h=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,p=(c?c.dayNames:null)||this._defaults.dayNames,n=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,s=(c?c.monthNames:null)||this._defaults.monthNames,u=c=-1,w=-1,v=-1,t=!1,r=function(b){(b=O+1<a.length&&a.charAt(O+1)==b)&&O++;return b},A=function(a){var e=r(a),a=b.substring(N).match(RegExp("^\\d{1,"+(a=="@"?14:a=="!"?20:a=="y"&&e?4:a=="o"?3:2)+"}"));if(!a)throw"Missing number at position "+N;N+=a[0].length;return parseInt(a[0],
10)},x=function(a,e,c){a=r(a)?c:e;for(e=0;e<a.length;e++)if(b.substr(N,a[e].length).toLowerCase()==a[e].toLowerCase())return N+=a[e].length,e+1;throw"Unknown name at position "+N;},B=function(){if(b.charAt(N)!=a.charAt(O))throw"Unexpected literal at position "+N;N++},N=0,O=0;O<a.length;O++)if(t)a.charAt(O)=="'"&&!r("'")?t=!1:B();else switch(a.charAt(O)){case "d":w=A("d");break;case "D":x("D",h,p);break;case "o":v=A("o");break;case "m":u=A("m");break;case "M":u=x("M",n,s);break;case "y":c=A("y");break;
case "@":var y=new Date(A("@")),c=y.getFullYear(),u=y.getMonth()+1,w=y.getDate();break;case "!":y=new Date((A("!")-this._ticksTo1970)/1E4);c=y.getFullYear();u=y.getMonth()+1;w=y.getDate();break;case "'":r("'")?B():t=!0;break;default:B()}c==-1?c=(new Date).getFullYear():c<100&&(c+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c<=f?0:-100));if(v>-1){u=1;w=v;do{f=this._getDaysInMonth(c,u-1);if(w<=f)break;u++;w-=f}while(1)}y=this._daylightSavingAdjust(new Date(c,u-1,w));if(y.getFullYear()!=c||
y.getMonth()+1!=u||y.getDate()!=w)throw"Invalid date";return y},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*864E9,formatDate:function(a,b,c){if(!b)return"";var f=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,h=(c?c.dayNames:null)||this._defaults.dayNames,
p=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,c=(c?c.monthNames:null)||this._defaults.monthNames,n=function(b){(b=t+1<a.length&&a.charAt(t+1)==b)&&t++;return b},s=function(a,e,b){e=""+e;if(n(a))for(;e.length<b;)e="0"+e;return e},u=function(a,e,b,c){return n(a)?c[e]:b[e]},w="",v=!1;if(b)for(var t=0;t<a.length;t++)if(v)a.charAt(t)=="'"&&!n("'")?v=!1:w+=a.charAt(t);else switch(a.charAt(t)){case "d":w+=s("d",b.getDate(),2);break;case "D":w+=u("D",b.getDay(),f,h);break;case "o":w+=s("o",
(b.getTime()-(new Date(b.getFullYear(),0,0)).getTime())/864E5,3);break;case "m":w+=s("m",b.getMonth()+1,2);break;case "M":w+=u("M",b.getMonth(),p,c);break;case "y":w+=n("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case "@":w+=b.getTime();break;case "!":w+=b.getTime()*1E4+this._ticksTo1970;break;case "'":n("'")?w+="'":v=!0;break;default:w+=a.charAt(t)}return w},_possibleChars:function(a){for(var b="",c=!1,f=function(b){(b=h+1<a.length&&a.charAt(h+1)==b)&&h++;return b},h=0;h<
a.length;h++)if(c)a.charAt(h)=="'"&&!f("'")?c=!1:b+=a.charAt(h);else switch(a.charAt(h)){case "d":case "m":case "y":case "@":b+="0123456789";break;case "D":case "M":return null;case "'":f("'")?b+="'":c=!0;break;default:b+=a.charAt(h)}return b},_get:function(a,b){return a.settings[b]!==c?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!=a.lastVal){var c=this._get(a,"dateFormat"),f=a.lastVal=a.input?a.input.val():null,h,p;h=p=this._getDefaultDate(a);var n=this._getFormatConfig(a);
try{h=this.parseDate(c,f,n)||p}catch(s){this.log(s),f=b?"":f}a.selectedDay=h.getDate();a.drawMonth=a.selectedMonth=h.getMonth();a.drawYear=a.selectedYear=h.getFullYear();a.currentDay=f?h.getDate():0;a.currentMonth=f?h.getMonth():0;a.currentYear=f?h.getFullYear():0;this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(b,c,f){var e;var h=function(a){var b=new Date;b.setDate(b.getDate()+
a);return b};if(e=(c=c==null||c===""?f:typeof c=="string"?function(c){try{return a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),c,a.datepicker._getFormatConfig(b))}catch(f){}for(var g=(c.toLowerCase().match(/^c/)?a.datepicker._getDate(b):null)||new Date,h=g.getFullYear(),j=g.getMonth(),g=g.getDate(),m=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,v=m.exec(c);v;){switch(v[2]||"d"){case "d":case "D":g+=parseInt(v[1],10);break;case "w":case "W":g+=parseInt(v[1],10)*7;break;case "m":case "M":j+=parseInt(v[1],
10);g=Math.min(g,a.datepicker._getDaysInMonth(h,j));break;case "y":case "Y":h+=parseInt(v[1],10),g=Math.min(g,a.datepicker._getDaysInMonth(h,j))}v=m.exec(c)}return new Date(h,j,g)}(c):typeof c=="number"?isNaN(c)?f:h(c):new Date(c.getTime()))&&c.toString()=="Invalid Date"?f:c,c=e)c.setHours(0),c.setMinutes(0),c.setSeconds(0),c.setMilliseconds(0);return this._daylightSavingAdjust(c)},_daylightSavingAdjust:function(a){if(!a)return null;a.setHours(a.getHours()>12?a.getHours()+2:0);return a},_setDate:function(a,
b,c){var f=!b,h=a.selectedMonth,p=a.selectedYear,b=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=b.getDate();a.drawMonth=a.selectedMonth=a.currentMonth=b.getMonth();a.drawYear=a.selectedYear=a.currentYear=b.getFullYear();(h!=a.selectedMonth||p!=a.selectedYear)&&!c&&this._notifyChange(a);this._adjustInstDate(a);a.input&&a.input.val(f?"":this._formatDate(a))},_getDate:function(a){return!a.currentYear||a.input&&a.input.val()==""?null:this._daylightSavingAdjust(new Date(a.currentYear,
a.currentMonth,a.currentDay))},_generateHTML:function(b){var c=new Date,c=this._daylightSavingAdjust(new Date(c.getFullYear(),c.getMonth(),c.getDate())),f=this._get(b,"isRTL"),j=this._get(b,"showButtonPanel"),k=this._get(b,"hideIfNoPrevNext"),p=this._get(b,"navigationAsDateFormat"),n=this._getNumberOfMonths(b),s=this._get(b,"showCurrentAtPos"),u=this._get(b,"stepMonths"),w=n[0]!=1||n[1]!=1,v=this._daylightSavingAdjust(!b.currentDay?new Date(9999,9,9):new Date(b.currentYear,b.currentMonth,b.currentDay)),
t=this._getMinMaxDate(b,"min"),r=this._getMinMaxDate(b,"max"),s=b.drawMonth-s,A=b.drawYear;s<0&&(s+=12,A--);if(r)for(var x=this._daylightSavingAdjust(new Date(r.getFullYear(),r.getMonth()-n[0]*n[1]+1,r.getDate())),x=t&&x<t?t:x;this._daylightSavingAdjust(new Date(A,s,1))>x;)s--,s<0&&(s=11,A--);b.drawMonth=s;b.drawYear=A;var x=this._get(b,"prevText"),x=!p?x:this.formatDate(x,this._daylightSavingAdjust(new Date(A,s-u,1)),this._getFormatConfig(b)),x=this._canAdjustMonth(b,-1,A,s)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+
h+".datepicker._adjustDate('#"+b.id+"', -"+u+", 'M');\" title=\""+x+'"><span class="ui-icon ui-icon-circle-triangle-'+(f?"e":"w")+'">'+x+"</span></a>":k?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+x+'"><span class="ui-icon ui-icon-circle-triangle-'+(f?"e":"w")+'">'+x+"</span></a>",B=this._get(b,"nextText"),B=!p?B:this.formatDate(B,this._daylightSavingAdjust(new Date(A,s+u,1)),this._getFormatConfig(b)),k=this._canAdjustMonth(b,1,A,s)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+
h+".datepicker._adjustDate('#"+b.id+"', +"+u+", 'M');\" title=\""+B+'"><span class="ui-icon ui-icon-circle-triangle-'+(f?"w":"e")+'">'+B+"</span></a>":k?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+B+'"><span class="ui-icon ui-icon-circle-triangle-'+(f?"w":"e")+'">'+B+"</span></a>",u=this._get(b,"currentText"),B=this._get(b,"gotoCurrent")&&b.currentDay?v:c,u=!p?u:this.formatDate(u,B,this._getFormatConfig(b)),p=!b.inline?'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+
h+'.datepicker._hideDatepicker();">'+this._get(b,"closeText")+"</button>":"",j=j?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(f?p:"")+(this._isInRange(b,B)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+h+".datepicker._gotoToday('#"+b.id+"');\">"+u+"</button>":"")+(f?"":p)+"</div>":"",p=parseInt(this._get(b,"firstDay"),10),p=isNaN(p)?0:p,u=this._get(b,"showWeek"),B=this._get(b,"dayNames");this._get(b,"dayNamesShort");
var N=this._get(b,"dayNamesMin"),O=this._get(b,"monthNames"),y=this._get(b,"monthNamesShort"),z=this._get(b,"beforeShowDay"),J=this._get(b,"showOtherMonths"),T=this._get(b,"selectOtherMonths");this._get(b,"calculateWeek");for(var Z=this._getDefaultDate(b),V="",ba=0;ba<n[0];ba++){for(var G="",I=0;I<n[1];I++){var H=this._daylightSavingAdjust(new Date(A,s,b.selectedDay)),C=" ui-corner-all",L="";if(w){L+='<div class="ui-datepicker-group';if(n[1]>1)switch(I){case 0:L+=" ui-datepicker-group-first";C=" ui-corner-"+
(f?"right":"left");break;case n[1]-1:L+=" ui-datepicker-group-last";C=" ui-corner-"+(f?"left":"right");break;default:L+=" ui-datepicker-group-middle",C=""}L+='">'}L+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+C+'">'+(/all|left/.test(C)&&ba==0?f?k:x:"")+(/all|right/.test(C)&&ba==0?f?x:k:"")+this._generateMonthYearHeader(b,s,A,t,r,ba>0||I>0,O,y)+'</div><table class="ui-datepicker-calendar"><thead><tr>';for(var U=u?'<th class="ui-datepicker-week-col">'+this._get(b,"weekHeader")+
"</th>":"",C=0;C<7;C++){var E=(C+p)%7;U+="<th"+((C+p+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+B[E]+'">'+N[E]+"</span></th>"}L+=U+"</tr></thead><tbody>";U=this._getDaysInMonth(A,s);if(A==b.selectedYear&&s==b.selectedMonth)b.selectedDay=Math.min(b.selectedDay,U);for(var C=(this._getFirstDayOfMonth(A,s)-p+7)%7,U=w?6:Math.ceil((C+U)/7),E=this._daylightSavingAdjust(new Date(A,s,1-C)),P=0;P<U;P++){L+="<tr>";for(var Y=!u?"":'<td class="ui-datepicker-week-col">'+this._get(b,"calculateWeek")(E)+
"</td>",C=0;C<7;C++){var S=z?z.apply(b.input?b.input[0]:null,[E]):[!0,""],K=E.getMonth()!=s,M=K&&!T||!S[0]||t&&E<t||r&&E>r;Y+='<td class="'+((C+p+6)%7>=5?" ui-datepicker-week-end":"")+(K?" ui-datepicker-other-month":"")+(E.getTime()==H.getTime()&&s==b.selectedMonth&&b._keyEvent||Z.getTime()==E.getTime()&&Z.getTime()==H.getTime()?" "+this._dayOverClass:"")+(M?" "+this._unselectableClass+" ui-state-disabled":"")+(K&&!J?"":" "+S[1]+(E.getTime()==v.getTime()?" "+this._currentClass:"")+(E.getTime()==c.getTime()?
" ui-datepicker-today":""))+'"'+((!K||J)&&S[2]?' title="'+S[2]+'"':"")+(M?"":' onclick="DP_jQuery_'+h+".datepicker._selectDay('#"+b.id+"',"+E.getMonth()+","+E.getFullYear()+', this);return false;"')+">"+(K&&!J?"&#xa0;":M?'<span class="ui-state-default">'+E.getDate()+"</span>":'<a class="ui-state-default'+(E.getTime()==c.getTime()?" ui-state-highlight":"")+(E.getTime()==v.getTime()?" ui-state-active":"")+(K?" ui-priority-secondary":"")+'" href="#">'+E.getDate()+"</a>")+"</td>";E.setDate(E.getDate()+
1);E=this._daylightSavingAdjust(E)}L+=Y+"</tr>"}s++;s>11&&(s=0,A++);L+="</tbody></table>"+(w?"</div>"+(n[0]>0&&I==n[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"");G+=L}V+=G}V+=j+(a.browser.msie&&parseInt(a.browser.version,10)<7&&!b.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':"");b._keyEvent=!1;return V},_generateMonthYearHeader:function(b,c,f,j,k,p,n,s){var u=this._get(b,"changeMonth"),w=this._get(b,"changeYear"),v=this._get(b,"showMonthAfterYear"),
t='<div class="ui-datepicker-title">',r="";if(p||!u)r+='<span class="ui-datepicker-month">'+n[c]+"</span>";else{var n=j&&j.getFullYear()==f,A=k&&k.getFullYear()==f;r+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+h+".datepicker._selectMonthYear('#"+b.id+"', this, 'M');\" onclick=\"DP_jQuery_"+h+".datepicker._clickMonthYear('#"+b.id+"');\">";for(var x=0;x<12;x++)if((!n||x>=j.getMonth())&&(!A||x<=k.getMonth()))r+='<option value="'+x+'"'+(x==c?' selected="selected"':"")+">"+s[x]+"</option>";
r+="</select>"}v||(t+=r+(p||!u||!w?"&#xa0;":""));b.yearshtml="";if(p||!w)t+='<span class="ui-datepicker-year">'+f+"</span>";else{var s=this._get(b,"yearRange").split(":"),B=(new Date).getFullYear(),n=function(a){a=a.match(/c[+-].*/)?f+parseInt(a.substring(1),10):a.match(/[+-].*/)?B+parseInt(a,10):parseInt(a,10);return isNaN(a)?B:a},c=n(s[0]),s=Math.max(c,n(s[1]||"")),c=j?Math.max(c,j.getFullYear()):c,s=k?Math.min(s,k.getFullYear()):s;for(b.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+
h+".datepicker._selectMonthYear('#"+b.id+"', this, 'Y');\" onclick=\"DP_jQuery_"+h+".datepicker._clickMonthYear('#"+b.id+"');\">";c<=s;c++)b.yearshtml+='<option value="'+c+'"'+(c==f?' selected="selected"':"")+">"+c+"</option>";b.yearshtml+="</select>";a.browser.mozilla?t+='<select class="ui-datepicker-year"><option value="'+f+'" selected="selected">'+f+"</option></select>":(t+=b.yearshtml,b.yearshtml=null)}t+=this._get(b,"yearSuffix");v&&(t+=(p||!u||!w?"&#xa0;":"")+r);t+="</div>";return t},_adjustInstDate:function(a,
b,c){var f=a.drawYear+(c=="Y"?b:0),h=a.drawMonth+(c=="M"?b:0),b=Math.min(a.selectedDay,this._getDaysInMonth(f,h))+(c=="D"?b:0),f=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(f,h,b)));a.selectedDay=f.getDate();a.drawMonth=a.selectedMonth=f.getMonth();a.drawYear=a.selectedYear=f.getFullYear();(c=="M"||c=="Y")&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),f=this._getMinMaxDate(a,"max"),c=c&&b<c?c:b;return f&&c>f?f:c},_notifyChange:function(a){var b=
this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){a=this._get(a,"numberOfMonths");return a==null?[1,1]:typeof a=="number"?[1,a]:a},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,
f){var h=this._getNumberOfMonths(a),c=this._daylightSavingAdjust(new Date(c,f+(b<0?b:h[0]*h[1]),1));b<0&&c.setDate(this._getDaysInMonth(c.getFullYear(),c.getMonth()));return this._isInRange(a,c)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min"),f=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!f||b.getTime()<=f.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff"),b=typeof b!="string"?b:(new Date).getFullYear()%100+parseInt(b,10);return{shortYearCutoff:b,
dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,f){if(!b)a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear;b=b?typeof b=="object"?b:this._daylightSavingAdjust(new Date(f,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),b,this._getFormatConfig(a))}});
a.fn.datepicker=function(b){if(!this.length)return this;if(!a.datepicker.initialized)a(document).mousedown(a.datepicker._checkExternalClick).find("body").append(a.datepicker.dpDiv),a.datepicker.initialized=!0;var c=Array.prototype.slice.call(arguments,1);if(typeof b=="string"&&(b=="isDisabled"||b=="getDate"||b=="widget"))return a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c));if(b=="option"&&arguments.length==2&&typeof arguments[1]=="string")return a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,
[this[0]].concat(c));return this.each(function(){typeof b=="string"?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this].concat(c)):a.datepicker._attachDatepicker(this,b)})};a.datepicker=new b;a.datepicker.initialized=!1;a.datepicker.uuid=(new Date).getTime();a.datepicker.version="@VERSION";window["DP_jQuery_"+h]=a})(jQuery);
(function(a,c){var b=Array.prototype.slice,f=a.cleanData;a.cleanData=function(b){for(var e=0,c;(c=b[e])!=null;e++)a(c).triggerHandler("remove");f(b)};a.widget=function(c,e,f){var m=c.split(".")[0],j,c=c.split(".")[1];j=m+"-"+c;if(!f)f=e,e=a.Widget;a.expr[":"][j]=function(b){return!!a.data(b,c)};a[m]=a[m]||{};a[m][c]=a.extend(function(b,e){if(!this._createWidget)return new a[m][c](b,e);arguments.length&&this._createWidget(b,e)},a[m][c]);var k=new e;k.options=a.extend(!0,{},k.options);a.each(f,function(c,
h){a.isFunction(h)&&(f[c]=function(){var a=function(a){return e.prototype[a].apply(this,b.call(arguments,1))},c=function(a,b){return e.prototype[a].apply(this,b)};return function(){var b=this._super,e=this._superApply,f;this._super=a;this._superApply=c;f=h.apply(this,arguments);this._super=b;this._superApply=e;return f}}())});a[m][c].prototype=a.extend(!0,k,{namespace:m,widgetName:c,widgetEventPrefix:c,widgetBaseClass:j},f);a.widget.bridge(c,a[m][c])};a.widget.bridge=function(f,e){a.fn[f]=function(g){var m=
typeof g==="string",j=b.call(arguments,1),k=this,g=!m&&j.length?a.extend.apply(null,[!0,g].concat(j)):g;m?this.each(function(){var b=a.data(this,f);if(!b)return a.error("cannot call methods on "+f+" prior to initialization; attempted to call method '"+g+"'");if(!a.isFunction(b[g])||g.charAt(0)==="_")return a.error("no such method '"+g+"' for "+f+" widget instance");var e=b[g].apply(b,j);if(e!==b&&e!==c)return k=e.jquery?k.pushStack(e.get()):e,!1}):this.each(function(){var b=a.data(this,f);b?b.option(g||
{})._init():e(g,this)});return k}};a.Widget=function(b,e){if(!this._createWidget)return new a[namespace][name](b,e);arguments.length&&this._createWidget(b,e)};a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1},_createWidget:function(b,e){e=a(e||this.defaultElement||this)[0];this.element=a(e);this.options=a.extend(!0,{},this.options,this._getCreateOptions(),b);this.bindings=a();this.hoverable=a();this.focusable=a();e!==this&&(a.data(e,this.widgetName,
this),this._bind({remove:"destroy"}));this._create();this._trigger("create");this._init()},_getCreateOptions:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy();this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled");this.bindings.unbind("."+this.widgetName);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},
_destroy:a.noop,widget:function(){return this.element},option:function(b,e){var f=b,m,j,k;if(arguments.length===0)return a.extend({},this.options);if(typeof b==="string"){if(e===c)return this.options[b];f={};m=b.split(".");b=m.shift();if(m.length){j=f[b]=a.extend(!0,{},this.options[b]);for(k=0;k<m.length-1;k++)j[m[k]]=j[m[k]]||{},j=j[m[k]];j[m.pop()]=e}else f[b]=e}this._setOptions(f);return this},_setOptions:function(b){var e=this;a.each(b,function(a,b){e._setOption(a,b)});return this},_setOption:function(a,
b){this.options[a]=b;a==="disabled"&&(this.widget().toggleClass(this.widgetBaseClass+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"));return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_bind:function(b,e){e?(b=a(b),this.bindings=this.bindings.add(b)):(e=b,b=this.element);var c=this;a.each(e,function(e,f){b.bind(e+"."+c.widgetName,
function(){if(!(c.options.disabled===!0||a(this).hasClass("ui-state-disabled")))return(typeof f==="string"?c[f]:f).apply(c,arguments)})})},_hoverable:function(b){this.hoverable=this.hoverable.add(b);this._bind(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b);this._bind(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},
_trigger:function(b,e,c){var f=this.options[b],e=a.Event(e);e.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase();c=c||{};if(e.originalEvent)for(var b=a.event.props.length,j;b;)j=a.event.props[--b],e[j]=e.originalEvent[j];this.element.trigger(e,c);c=a.isArray(c)?[e].concat(c):[e,c];return!(a.isFunction(f)&&f.apply(this.element[0],c)===!1||e.isDefaultPrevented())}};if(a.uiBackCompat!==!1)a.Widget.prototype._getCreateOptions=function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]}})(jQuery);
var s3_gis_pullNext;
function s3_gis_dropdown_select(a,c){s3_gis_pullNext=!1;a==s3_gis_maxlevel?($("#gis_location__label__row").removeClass("hidden").show(),$("#gis_location___row").removeClass("hidden").show(),$("#gis_location_").removeClass("hidden").show()):($("#gis_location_L"+(a+1)+"_label__row").removeClass("hidden").show(),$("#gis_location_L"+(a+1)+"__row").removeClass("hidden").show(),s3_gis_hide_dropdown(a+2));var b=$("#gis_location_name").val(),f=$("#gis_location_lat").val(),h=$("#gis_location_lon").val(),e=
$("#gis_location_addr_street").val(),g=$("#gis_location_postcode").val(),b=b||f||h||e||g?!0:!1;if((f=$("#gis_location_L"+a).val())||c){h=a==s3_gis_maxlevel?s3_gis_url+"/search.json?filter=%3D&field=level&value=nullnone":s3_gis_url+"/search.json?filter=%3D&field=level&value=L"+(a+1);f&&(h+="&parent="+f);var m;$.getJSONS3(h,function(b){if(b.length==0)m=s3_gis_empty_set;else if(!c&&a!=s3_gis_maxlevel&&b.length==1)m=s3_gis_select_location,m+='<option selected="" value="'+b[0].id+'">'+b[0].name+"</option>",
s3_gis_pullNext=!0;else{m=s3_gis_select_location;for(var e=0;e<b.length;e++)m+='<option value="'+b[e].id+'">'+b[e].name+"</option>"}a==s3_gis_maxlevel?$("#gis_location_").html(m):$("#gis_location_L"+(a+1)).html(m)},!1,!0);s3_gis_pullNext?(f=$("#gis_location_L"+(a+1)).val(),b||$("#"+s3_gis_location_id).val(f),s3_gis_dropdown_select(a+1)):b||$("#"+s3_gis_location_id).val(f)}else a!=s3_gis_maxlevel&&(s3_gis_hide_dropdown(a+1),0==a&&!b&&$("#"+s3_gis_location_id).val(""))}
function s3_gis_hide_dropdown(a){for(l=a;l<=s3_gis_maxlevel;l+=1)$("#gis_location_L"+l+"_label__row").hide(),$("#gis_location_L"+l+"__row").hide(),$("#gis_location_L"+l).html(s3_gis_loading_locations);a<parseInt(s3_gis_maxlevel)+2&&($("#gis_location___row").hide(),$("#gis_location__label__row").hide(),$("#gis_location_details-btn").hide(),$("#gis_location_").html(s3_gis_loading_locations))}
function s3_gis_hide_details(){$("#gis_location_name_label").hide();$("#gis_location_name").hide();$("#gis_location_details_hide-btn").hide();$("#gis_location_addr_street_label").hide();$("#gis_location_addr_street_row").hide();$("#gis_location_postcode_label").hide();$("#gis_location_postcode_row").hide();$("#gis_location_map-btn").hide();$("#gis_location_advanced_div").hide()}
function s3_gis_show_details(){$("#gis_location_name_label").removeClass("hidden").show();$("#gis_location_name").removeClass("hidden").show();$("#gis_location_details_hide-btn").removeClass("hidden").show();$("#gis_location_addr_street_label").removeClass("hidden").show();$("#gis_location_addr_street_row").removeClass("hidden").show();$("#gis_location_postcode_label").removeClass("hidden").show();$("#gis_location_postcode_row").removeClass("hidden").show();$("#gis_location_map-btn").removeClass("hidden").show();
$("#gis_location_advanced_div").removeClass("hidden").show()}
function s3_gis_search(){$("#gis_location_search-btn-label").removeClass("hidden").show();$("#gis_location_autocomplete_div").removeClass("hidden").show();$("#gis_location_add-btn").removeClass("hidden").show();$("#gis_location_cancel-btn").hide();$("#gis_location_L0_label__row").hide();$("#gis_location_L0__row").hide();$("#gis_location_L1_label__row").hide();$("#gis_location_L1__row").hide();$("#gis_location_L2_label__row").hide();$("#gis_location_L2__row").hide();$("#gis_location_L3_label__row").hide();
$("#gis_location_L3__row").hide();$("#gis_location_L4_label__row").hide();$("#gis_location_L4__row").hide();$("#gis_location_L5_label__row").hide();$("#gis_location_L5__row").hide();$("#gis_location___row").hide();$("#gis_location__label__row").hide();$("#gis_location_details-btn").hide();s3_gis_hide_details()}
function s3_gis_add_new(){$("#gis_location_cancel-btn").removeClass("hidden").show();$("#gis_location_autocomplete_div").hide();$("#gis_location_search-btn-label").hide();$("#gis_location_search-btn").show();$("#gis_location_L0_label__row").show();$("#gis_location_L0__row").show();$("#gis_location_L1").html()!=s3_gis_loading_locations&&($("#gis_location_L1_label__row").show(),$("#gis_location_L1__row").show());$("#gis_location_L2").html()!=s3_gis_loading_locations&&($("#gis_location_L2_label__row").show(),
$("#gis_location_L2__row").show());$("#gis_location_L3").html()!=s3_gis_loading_locations&&($("#gis_location_L3_label__row").show(),$("#gis_location_L3__row").show());$("#gis_location_L4").html()!=s3_gis_loading_locations&&($("#gis_location_L4_label__row").show(),$("#gis_location_L4__row").show());$("#gis_location_L5").html()!=s3_gis_loading_locations&&($("#gis_location_L5_label__row").show(),$("#gis_location_L5__row").show());$("#gis_location__label__row").hide();$("#gis_location___row").hide();
navigator.geolocation&&$("#gis_location_geolocate-btn").removeClass("hidden").show();if(""!=S3.gis.uuid)$("body").data("uuid",S3.gis.uuid),S3.gis.uuid="";var a=$("#gis_location_name").val(),c=$("#gis_location_addr_street").val(),b=$("#gis_location_postcode").val(),f=$("#gis_location_lat").val(),h=$("#gis_location_lat").val();$("body").data("name",a);$("body").data("addr_street",c);$("body").data("postcode",b);$("body").data("lat",f);$("body").data("lon",h);$("#gis_location_name").val("");$("#gis_location_addr_street").val("");
$("#gis_location_postcode").val("");$("#gis_location_lat").val("");$("#gis_location_lon").val("");s3_gis_show_details();$("#gis_location_details_hide-btn").hide()}
function s3_gis_cancel(){S3.gis.uuid=$("body").data("uuid");$("#gis_location_name").val($("body").data("name"));$("#gis_location_addr_street").val($("body").data("addr_street"));$("#gis_location_postcode").val($("body").data("postcode"));$("#gis_location_lat").val($("body").data("lat"));$("#gis_location_lon").val($("body").data("lon"));$("#gis_location_").val()&&($("#gis_location__label__row").show(),$("#gis_location___row").show());$("#gis_location_search-btn-label").hide();$("#gis_location_search-btn").show();
$("#gis_location_add-btn").show();$("#gis_location_details_hide-btn").show();s3_gis_hide_details()}function s3_gis_update_details(a){$.getJSONS3(s3_gis_url+"/search.json?filter=%3D&field=id&value="+a,function(a){a.length!=0&&($("#gis_location_name").val(a[0].name),$("#gis_location_addr_street").val(a[0].addr_street),$("#gis_location_postcode").val(a[0].addr_postcode),$("#gis_location_lat").val(a[0].lat),$("#gis_location_lon").val(a[0].lon))},!1,!0)}
function s3_gis_save_location(a,c,b,f,h){var e=$("#gis_location_L5").val();if(void 0==e||""==e)if(e=$("#gis_location_L4").val(),void 0==e||""==e)if(e=$("#gis_location_L3").val(),void 0==e||""==e)if(e=$("#gis_location_L2").val(),void 0==e||""==e)if(e=$("#gis_location_L1").val(),void 0==e||""==e)e=$("#gis_location_L0").val();a=""==S3.gis.uuid?s3_gis_url+"/create.url?name="+a:s3_gis_url+"/update.url?uuid="+S3.gis.uuid+"&name="+a;""==c||""==b||(a=a+"&lat="+c+"&lon="+b);""!=f&&(a=a+"&addr_street="+f.replace(/\n/g,
"%0d"));""!=h&&(a=a+"&addr_postcode="+h);void 0==e||""==e||(a=a+"&parent="+e);$.ajax({async:!1,url:a,dataType:"json",success:function(a){""==S3.gis.uuid&&a.status=="success"&&(a=a.message.split("=")[1],$("#"+s3_gis_location_id).val(a))}})}function s3_gis_geolocate(a){var c=a.coords.latitude,a=a.coords.longitude;$("#gis_location_lat").val(c);$("#gis_location_lon").val(a)}var s3_gis_calcDone=!1,s3_gis_calcAnswer;
function s3_gis_convertDD(){var a=$("#DDMMSS_deg").val(),c=$("#DDMMSS_min").val(),b=$("#DDMMSS_sec").val(),f=!1;if(a=="")a=0;else if(isNaN(a)||a>180||a<-180)alert(s3_gis_degrees_validation_error),f=!0;if(c=="")c=0;else if(isNaN(c)||c>60||c<0)alert(s3_gis_minutes_validation_error),f=!0;if(b=="")b=0;else if(isNaN(b)||b>60||b<0)alert(s3_gis_seconds_validation_error),f=!0;f==!1&&(c=c*1+b/60,s3_gis_calcAnswer=a>0?a*1+c/60:a*1-c/60,$("#DDMMSS_dec").val(s3_gis_calcAnswer),s3_gis_calcDone=!0)}
function s3_gis_convertGps(){var a=0,c=0,a=$("#gps_deg").val(),c=$("#gps_min").val(),b=!1;if(a=="")a=0;else if(isNaN(a)||a>180||a<-180)alert(s3_gis_degrees_validation_error),b=!0;if(c=="")c=0;else if(isNaN(c)||c>60||c<0)alert(s3_gis_minutes_validation_error),b=!0;b==!1&&(s3_gis_calcAnswer=a>0?a*1+c/60:a*1-c/60,$("#gps_dec").val(s3_gis_calcAnswer),s3_gis_calcDone=!0)}
function s3_gis_convertFillBack(a){if(s3_gis_calcDone==!0)return a==1?$("#gis_location_lat").attr("value",s3_gis_calcAnswer):$("#gis_location_lon").attr("value",s3_gis_calcAnswer),!0;else alert(s3_gis_no_calculations_error);return!1}
$(function(){if(typeof s3_gis_location_id!="undefined"){$("#gis_location_L0").change(function(){s3_gis_dropdown_select(0)});$("#gis_location_L1").change(function(){s3_gis_dropdown_select(1)});$("#gis_location_L2").change(function(){s3_gis_dropdown_select(2)});$("#gis_location_L3").change(function(){s3_gis_dropdown_select(3)});$("#gis_location_L4").change(function(){s3_gis_dropdown_select(4)});$("#gis_location_").change(function(){var a=$(this).val();$("#"+s3_gis_location_id).val(a);s3_gis_update_details(a);
$("#gis_location__label__row").hide();$("#gis_location___row").hide();$("#gis_location_add-btn").hide();s3_gis_show_details()});$("#gis_location_search-btn").click(function(a){$(this).hide();s3_gis_search();a.preventDefault()});$("#gis_location_add-btn").click(function(a){$(this).hide();s3_gis_add_new();a.preventDefault()});$("#gis_location_cancel-btn").click(function(a){$(this).hide();s3_gis_cancel();a.preventDefault()});$("#gis_location_advanced_checkbox").change(function(a){$("#gis_location_advanced_checkbox").is(":checked")?
($("#gis_location_lat_label").removeClass("hidden").show(),$("#gis_location_lat_row").removeClass("hidden").show(),$("#gis_location_lon_label").removeClass("hidden").show(),$("#gis_location_lon_row").removeClass("hidden").show()):($("#gis_location_lat_label").hide(),$("#gis_location_lat_row").hide(),$("#gis_location_lon_label").hide(),$("#gis_location_lon_row").hide());a.preventDefault()});$("#gis_location_details-btn").click(function(a){$("#gis_location_add-btn").hide();$("#gis_location___row").hide();
$("#gis_location__label__row").hide();$("#gis_location_details-btn").hide();$("#gis_location_details_hide-btn").removeClass("hidden").show();s3_gis_show_details();a.preventDefault()});$("#gis_location_details_hide-btn").click(function(a){$("#gis_location_add-btn").removeClass("hidden").show();$("#gis_location___row").show();$("#gis_location__label__row").show();$("#gis_location_details-btn").removeClass("hidden").show();$("#gis_location_details_hide-btn").hide();s3_gis_hide_details();a.preventDefault()});
$("#gis_location_geolocate-btn").click(function(a){navigator.geolocation.getCurrentPosition(s3_gis_geolocate);a.preventDefault()});var a={val:$("#gis_location_autocomplete").val(),accept:!1};$("#gis_location_autocomplete").autocomplete({source:s3_gis_url+"/search.json?filter=~&field=name&exclude_field=level&exclude_value=XX",minLength:2,search:function(){$("#gis_location_autocomplete_throbber").removeClass("hidden").show();return!0},response:function(a,b,f){$("#gis_location_autocomplete_throbber").hide();
return f},focus:function(a,b){$("#gis_location_autocomplete").val(b.item.name);return!1},select:function(c,b){$("#gis_location_autocomplete").val(b.item.name);$("#"+s3_gis_location_id).val(b.item.id);a.accept=!0;$("ul.ui-autocomplete").hide();$("#gis_location_autocomplete_div").hide();$("#gis_location_search-btn-label").hide();$("#gis_location_search-btn").show();$("#gis_location_L0_label__row").show();$("#gis_location_L0__row").show();var f=b.item.path,h=b.item.id,e,g,m,j,k=[];switch(b.item.level){case "L0":$("#gis_location_L0").val(h);
$("#"+s3_gis_location_id).val(h);s3_gis_dropdown_select(0);break;case "L1":if(f)if(f=f.split("/"),f.length==2&&f[1]==h)$("#gis_location_L0").val(f[0]);else{s3_gis_dropdown_select(0,!0);$("#gis_location_L1").val(h);$("#"+s3_gis_location_id).val(h);break}s3_gis_dropdown_select(0,!0);$("#gis_location_L1").val(h);$("#"+s3_gis_location_id).val(h);s3_gis_dropdown_select(1);break;case "L2":if(f)if(f=f.split("/"),f.length==3&&f[2]==h)$("#gis_location_L0").val(f[0]),e=f[1];else if(f.length==2&&f[1]==h)void 0!=
$("#gis_location_L0 option[value="+f[0]+"]")[0]?$("#gis_location_L0").val(f[0]):e=f[0];else{s3_gis_dropdown_select(1,!0);$("#gis_location_L2").val(h);$("#"+s3_gis_location_id).val(h);break}s3_gis_dropdown_select(0,!0);$("#gis_location_L1").val(e);s3_gis_dropdown_select(1,!0);$("#gis_location_L2").val(h);$("#"+s3_gis_location_id).val(h);s3_gis_dropdown_select(2);break;case "L3":if(f)if(f=f.split("/"),f.length==4&&f[3]==h)$("#gis_location_L0").val(f[0]),e=f[1],g=f[2];else if(f.length==3&&f[2]==h)void 0!=
$("#gis_location_L0 option[value="+f[0]+"]")[0]?($("#gis_location_L0").val(f[0]),k=[f[1]]):(e=f[0],g=f[1]);else if(f.length==2&&f[1]==h)void 0!=$("#gis_location_L0 option[value="+f[0]+"]")[0]?$("#gis_location_L0").val(f[0]):k=[f[0]];else{s3_gis_dropdown_select(2,!0);$("#gis_location_L3").val(h);$("#"+s3_gis_location_id).val(h);break}s3_gis_dropdown_select(0,!0);k[0]&&void 0!=$("#gis_location_L1 option[value="+k[0]+"]")[0]&&(e=k[0]);$("#gis_location_L1").val(e);s3_gis_dropdown_select(1,!0);k[0]&&void 0!=
$("#gis_location_L2 option[value="+k[0]+"]")[0]&&(g=k[0]);$("#gis_location_L2").val(g);s3_gis_dropdown_select(2,!0);$("#gis_location_L3").val(h);$("#"+s3_gis_location_id).val(h);s3_gis_dropdown_select(3);break;case "L4":if(f)if(f=f.split("/"),f.length==5&&f[4]==h)$("#gis_location_L0").val(f[0]),e=f[1],g=f[2],m=f[3];else if(f.length==4&&f[3]==h)void 0!=$("#gis_location_L0 option[value="+f[0]+"]")[0]?($("#gis_location_L0").val(f[0]),k=[f[1],f[2]]):k=[f[0],f[1],f[2]];else if(f.length==3&&f[2]==h)void 0!=
$("#gis_location_L0 option[value="+f[0]+"]")[0]?($("#gis_location_L0").val(f[0]),k=[f[1]]):k=[f[0],f[1]];else if(f.length==2&&f[1]==h)void 0!=$("#gis_location_L0 option[value="+f[0]+"]")[0]?$("#gis_location_L0").val(f[0]):k=[f[0]];else{s3_gis_dropdown_select(3,!0);$("#gis_location_L4").val(h);$("#"+s3_gis_location_id).val(h);break}s3_gis_dropdown_select(0,!0);k[0]&&void 0!=$("#gis_location_L1 option[value="+k[0]+"]")[0]&&(e=k[0]);$("#gis_location_L1").val(e);s3_gis_dropdown_select(1,!0);k[0]&&(void 0!=
$("#gis_location_L2 option[value="+k[0]+"]")[0]?g=k[0]:k[1]&&void 0!=$("#gis_location_L2 option[value="+k[1]+"]")[0]&&(g=k[1]));$("#gis_location_L2").val(g);s3_gis_dropdown_select(2,!0);k[0]&&(void 0!=$("#gis_location_L3 option[value="+k[0]+"]")[0]?m=k[0]:k[1]&&(void 0!=$("#gis_location_L3 option[value="+k[1]+"]")[0]?m=k[1]:k[2]&&void 0!=$("#gis_location_L3 option[value="+k[2]+"]")[0]&&(m=k[2])));$("#gis_location_L3").val(m);s3_gis_dropdown_select(3,!0);$("#gis_location_L4").val(h);$("#"+s3_gis_location_id).val(h);
s3_gis_dropdown_select(4);break;case "L5":break;default:if(f){f=f.split("/");if(f.length==6&&f[5]==h)$("#gis_location_L0").val(f[0]),e=f[1],g=f[2],m=f[4];else if(f.length==5&&f[4]==h)void 0!=$("#gis_location_L0 option[value="+f[0]+"]")[0]?($("#gis_location_L0").val(f[0]),k=[f[1],f[2],f[3]]):k=[f[0],f[1],f[2],f[3]];else if(f.length==4&&f[3]==h)void 0!=$("#gis_location_L0 option[value="+f[0]+"]")[0]?($("#gis_location_L0").val(f[0]),k=[f[1],f[2]]):k=[f[0],f[1],f[2]];else if(f.length==3&&f[2]==h)void 0!=
$("#gis_location_L0 option[value="+f[0]+"]")[0]?($("#gis_location_L0").val(f[0]),k=[f[1]]):k=[f[0],f[1]];else if(f.length==2&&f[1]==h)void 0!=$("#gis_location_L0 option[value="+f[0]+"]")[0]?$("#gis_location_L0").val(f[0]):k=[f[0]];else{s3_gis_dropdown_select(4,!0);$("#gis_location_").val(h);$("#"+s3_gis_location_id).val(h);break}s3_gis_dropdown_select(0,!0);k[0]&&void 0!=$("#gis_location_L1 option[value="+k[0]+"]")[0]&&(e=k[0]);$("#gis_location_L1").val(e);s3_gis_dropdown_select(1,!0);k[0]&&(void 0!=
$("#gis_location_L2 option[value="+k[0]+"]")[0]?g=k[0]:k[1]&&void 0!=$("#gis_location_L2 option[value="+k[1]+"]")[0]&&(g=k[1]));$("#gis_location_L2").val(g);s3_gis_dropdown_select(2,!0);k[0]&&(void 0!=$("#gis_location_L3 option[value="+k[0]+"]")[0]?m=k[0]:k[1]&&(void 0!=$("#gis_location_L3 option[value="+k[1]+"]")[0]?m=k[1]:k[2]&&void 0!=$("#gis_location_L3 option[value="+k[2]+"]")[0]&&(m=k[2])));$("#gis_location_L3").val(m);s3_gis_dropdown_select(3,!0);k[0]&&(void 0!=$("#gis_location_L4 option[value="+
k[0]+"]")[0]?j=k[0]:k[1]&&(void 0!=$("#gis_location_L4 option[value="+k[1]+"]")[0]?j=k[1]:k[2]&&(void 0!=$("#gis_location_L4 option[value="+k[2]+"]")[0]?j=k[2]:k[3]&&void 0!=$("#gis_location_L4 option[value="+k[4]+"]")[0]&&(j=k[3]))));$("#gis_location_L4").val(j);s3_gis_dropdown_select(4,!0);void 0==$("#gis_location_ option[value="+h+"]")[0]&&$("#gis_location_").append(new Option(b.item.name,h));$("#gis_location_").val(h)}$("#"+s3_gis_location_id).val(h);s3_gis_update_details(h);$("#gis_location_details-btn").removeClass("hidden").show()}return!1}}).data("autocomplete")._renderItem=
function(a,b){return $("<li></li>").data("item.autocomplete",b).append("<a>"+b.name+"</a>").appendTo(a)};$("#gis_location_autocomplete").blur(function(){if(!$("#gis_location_autocomplete").val())$("#"+s3_gis_location_id).val(""),a.accept=!0;a.accept?a.val=$("#gis_location_autocomplete").val():$("#gis_location_autocomplete").val(a.val);a.accept=!1});$("form").submit(function(){S3ClearNavigateAwayConfirm();var a=$("#gis_location_name").val(),b=$("#gis_location_lat").val(),f=$("#gis_location_lon").val(),
h=$("#gis_location_addr_street").val(),e=$("#gis_location_postcode").val();s3_gis_save_location(a,b,f,h,e);return!0})}});
Ext.onReady(function(){var a,c=Ext.get("gis_location_converter-btn"),b=Ext.get("gis_location_map-btn");if(b)b.on("click",function(){mapWin.show(this)});if(c)c.on("click",function(){a||(a=new Ext.Window({applyTo:"gis-convert-win",layout:"fit",width:400,height:250,closeAction:"hide",plain:!0,items:new Ext.TabPanel({applyTo:"gis-convert-tabs",autoTabs:!0,activeTab:0,deferredRender:!1,border:!1}),buttons:[{text:s3_gis_fill_lat,disabled:!1,handler:function(){s3_gis_convertFillBack(1)&&(s3_gis_calcDone=
!1,$("#DDMMSS_dec").val(""),$("#gps_dec").val(""))}},{text:s3_gis_fill_lon,handler:function(){s3_gis_convertFillBack(2)&&(s3_gis_calcDone=!1,$("#DDMMSS_dec").val(""),$("#gps_dec").val(""))}}]}));a.show(this)})});(function(a){a.fn.elementExists=function(){return jQuery(this).length>0}})(jQuery);(function(a){a.fn.formElementType=function(){return jQuery(this).elementExists()?jQuery(this).attr("type"):""}})(jQuery);(function(a){a.fn.isTextBox=function(){return jQuery(this).formElementType()==="text"}})(jQuery);
(function(a){a.fn.isTextArea=function(){return jQuery(this).formElementType()==="textarea"}})(jQuery);(function(a){a.fn.isPassword=function(){return jQuery(this).formElementType()==="password"}})(jQuery);(function(a){a.fn.isHiddenInput=function(){return jQuery(this).formElementType()==="hidden"}})(jQuery);(function(a){a.fn.isCheckBox=function(){return jQuery(this).formElementType()==="checkbox"}})(jQuery);(function(a){a.fn.isRadioBox=function(){return jQuery(this).formElementType()==="radio"}})(jQuery);
(function(a){a.fn.isButton=function(){return jQuery(this).formElementType()==="button"}})(jQuery);(function(a){a.fn.isSubmitButton=function(){return jQuery(this).formElementType()==="submit"}})(jQuery);(function(a){a.fn.isResetButton=function(){return jQuery(this).formElementType()==="reset"}})(jQuery);(function(a){a.fn.isSelectBox=function(){var a=jQuery(this).formElementType(),b=this.attr("size");return a!=="select-one"?!1:typeof b==="undefined"?!1:parseInt(b)>1}})(jQuery);
(function(a){a.fn.isMultiSelectBox=function(){return jQuery(this).formElementType()==="select-multiple"}})(jQuery);(function(a){a.fn.isDropDownList=function(){var a=jQuery(this).formElementType(),b=this.attr("size");return a!=="select-one"?!1:typeof b==="undefined"?!0:parseInt(b)<=1}})(jQuery);(function(a){a.fn.isChecked=function(){return jQuery(this).is(":checked")}})(jQuery);
(function(a){a.fn.isSelected=function(){var a=jQuery(this);if(arguments.length===0)return!1;var b=!1,f=arguments[0],h=arguments;if(a.isRadioBox()){if(a=jQuery("input[type='radio'][name='"+a.attr("name")+"'][checked]"),a.length===1)return f===a.val()}else if(a.isSelectBox()||a.isDropDownList()){if(a=jQuery("#"+a.attr("id")+" option:selected"),a.length===1)return f===a.val()}else a.isMultiSelectBox()&&(a=jQuery("#"+a.attr("id")+" option:selected"),jQuery.each(a,function(){var a=jQuery(this);b=!1;for(var c=
0;c<h.length;c++)if(h[c]===a.val()){b=!0;break}}));return b}})(jQuery);
(function(a){a.fn.selectedItem=function(a){var b=jQuery(this);if(typeof a==="undefined"||isNaN(a))a=0;if(b.isRadioBox()){var f=jQuery("input[type='radio'][name='"+b.attr("name")+"'][checked]");a>f.length-1?a=f.length-1:a<0&&(a=0);if(f.length>0)return jQuery(f[a])}else if(b.isSelectBox()||b.isMultiSelectBox()||b.isDropDownList())if(f=jQuery("#"+b.attr("id")+" option:selected"),a>f.length-1?a=f.length-1:a<0&&(a=0),f.length>0)return jQuery(f[a]);return b}})(jQuery);
(function(a){a.fn.firstSelectedItem=function(){return jQuery(this).selectedItem()}})(jQuery);(function(a){a.fn.lastSelectedItem=function(){return jQuery(this).selectedItem(Number.MAX_VALUE)}})(jQuery);(function(a){a.fn.selectedValue=function(){return jQuery(this).selectedItem(0).val()}})(jQuery);
(function(a){a.fn.selectedValues=function(){var a=[],b=jQuery(this);b.isMultiSelectBox()?(b=jQuery("#"+b.attr("id")+" option:selected"),jQuery.each(b,function(){a.push(jQuery(this).val())})):a.push(b.selectedValue());return a}})(jQuery);
(function(a){a.fn.itemExists=function(a){var b=jQuery(this),f=!1;if(b.isRadioBox())f=jQuery("input[type='radio'][name='"+b.attr("name")+"'][value='"+a+"']").length===1;else if(b.isSelectBox()||b.isMultiSelectBox()||b.isDropDownList())b=jQuery("#"+b.attr("id")+" option"),jQuery.each(b,function(){if(jQuery(this).val()===a)return f=!0,!1});else return jQuery(this).val()===a;return f}})(jQuery);
jQuery.fn.fancyZoom=function(a){function c(c){if(m)return!1;m=!0;var f=$($(this).attr("href")),g=a.height,j=window.innerWidth||window.document.documentElement.clientWidth||window.document.body.clientWidth,v=window.innerHeight||window.document.documentElement.clientHeight||window.document.body.clientHeight,t=window.pageYOffset||window.document.documentElement.scrollTop||window.document.body.scrollTop,r={width:j,height:v,x:window.pageXOffset||window.document.documentElement.scrollLeft||window.document.body.scrollLeft,
y:t},j=(a.width||f.width())+60,v=(g||f.height())+60,g=Math.max(r.height/2-v/2+t,0),r=r.width/2-j/2,t=c.pageY,c=c.pageX;k.attr("curTop",t);k.attr("curLeft",c);k.attr("scaleImg",a.scaleImg?"true":"false");$("#zoom").hide().css({position:"absolute",top:t+"px",left:c+"px",width:"1px",height:"1px"});h();k.hide();a.closeOnClick&&$("#zoom").click(b);a.scaleImg?(p.html(f.html()),$("#zoom_content img").css("width","100%")):p.html("");$("#zoom").animate({top:g+"px",left:r+"px",opacity:"show",width:j,height:v},
500,null,function(){a.scaleImg!=!0&&p.html(f.html());e();k.show();m=!1});return!1}function b(){if(m)return!1;m=!0;$("#zoom").unbind("click");h();k.attr("scaleImg")!="true"&&p.html("");k.hide();$("#zoom").animate({top:k.attr("curTop")+"px",left:k.attr("curLeft")+"px",opacity:"hide",width:"1px",height:"1px"},500,null,function(){k.attr("scaleImg")=="true"&&p.html("");e();m=!1});return!1}function f(a){$("#zoom_table td").each(function(){var b=$(this).css("background-image").replace(/\.(png|gif|none)\"\)$/,
"."+a+'")');$(this).css("background-image",b)});var b=k.children("img"),e=b.attr("src").replace(/\.(png|gif|none)$/,"."+a);b.attr("src",e)}function h(){$.browser.msie&&parseFloat($.browser.version)>=7&&f("gif")}function e(){$.browser.msie&&$.browser.version>=7&&f("png")}var g=(a=a||{})&&a.directory?a.directory:"images",m=!1;if($("#zoom").length==0){var j=$.browser.msie?"gif":"png";$("body").append('<div id="zoom" style="display:none;">                   <table id="zoom_table" style="border-collapse:collapse; width:100%; height:100%;">                     <tbody>                       <tr>                         <td class="tl" style="background:url('+
g+"/tl."+j+') 0 0 no-repeat; width:20px height:20px; overflow:hidden;" />                         <td class="tm" style="background:url('+g+"/tm."+j+') 0 0 repeat-x; height:20px; overflow:hidden;" />                         <td class="tr" style="background:url('+g+"/tr."+j+') 100% 0 no-repeat; width:20px height:20px; overflow:hidden;" />                       </tr>                       <tr>                         <td class="ml" style="background:url('+g+"/ml."+j+') 0 0 repeat-y; width:20px; overflow:hidden;" />                         <td class="mm" style="background:#fff; vertical-align:top; padding:10px;">                           <div id="zoom_content">                           </div>                         </td>                         <td class="mr" style="background:url('+
g+"/mr."+j+') 100% 0 repeat-y;  width:20px; overflow:hidden;" />                       </tr>                       <tr>                         <td class="bl" style="background:url('+g+"/bl."+j+') 0 100% no-repeat; width:20px height:20px; overflow:hidden;" />                         <td class="bm" style="background:url('+g+"/bm."+j+') 0 100% repeat-x; height:20px; overflow:hidden;" />                         <td class="br" style="background:url('+g+"/br."+j+') 100% 100% no-repeat; width:20px height:20px; overflow:hidden;" />                       </tr>                     </tbody>                   </table>                   <a href="#" title="Close" id="zoom_close" style="position:absolute; top:0; left:0;">                     <img src="'+
g+"/closebox."+j+'" alt="Close" style="border:none; margin:0; padding:0;" />                   </a>                 </div>');$("html").click(function(a){$(a.target).parents("#zoom:visible").length==0&&b()});$(document).keyup(function(a){a.keyCode==27&&$("#zoom:visible").length>0&&b()});$("#zoom_close").click(b)}$("#zoom");$("#zoom_table");var k=$("#zoom_close"),p=$("#zoom_content");$("td.ml,td.mm,td.mr");this.each(function(){$($(this).attr("href")).hide();$(this).click(c)});return this};
(function(a,c){a.ui=a.ui||{};var b=/left|center|right/,f=/top|center|bottom/,h=/[+-]\d+%?/,e=/^\w+/,g=/%$/,m=a.fn.position;a.fn.position=function(c){if(!c||!c.of)return m.apply(this,arguments);var c=a.extend({},c),k=a(c.of),p=k[0],n=(c.collision||"flip").split(" "),s={},u,w,v,t;p.nodeType===9?(w=k.width(),v=k.height(),t={top:0,left:0}):a.isWindow(p)?(w=k.width(),v=k.height(),t={top:k.scrollTop(),left:k.scrollLeft()}):p.preventDefault?(c.at="left top",w=v=0,t={top:c.of.pageY,left:c.of.pageX}):(w=k.outerWidth(),
v=k.outerHeight(),t=k.offset());a.each(["my","at"],function(){var a=(c[this]||"").split(" "),g,k;a.length===1&&(a=b.test(a[0])?a.concat(["center"]):f.test(a[0])?["center"].concat(a):["center","center"]);a[0]=b.test(a[0])?a[0]:"center";a[1]=f.test(a[1])?a[1]:"center";g=h.exec(a[0]);k=h.exec(a[1]);s[this]=[g?g[0]:0,k?k[0]:0];c[this]=[e.exec(a[0])[0],e.exec(a[1])[0]]});n.length===1&&(n[1]=n[0]);c.at[0]==="right"?t.left+=w:c.at[0]==="center"&&(t.left+=w/2);c.at[1]==="bottom"?t.top+=v:c.at[1]==="center"&&
(t.top+=v/2);u=[parseInt(s.at[0],10)*(g.test(s.at[0])?w/100:1),parseInt(s.at[1],10)*(g.test(s.at[1])?v/100:1)];t.left+=u[0];t.top+=u[1];return this.each(function(){var b=a(this),e=b.outerWidth(),f=b.outerHeight(),h=parseInt(a.curCSS(this,"marginLeft",!0))||0,k=parseInt(a.curCSS(this,"marginTop",!0))||0,m=e+h+(parseInt(a.curCSS(this,"marginRight",!0))||0),p=f+k+(parseInt(a.curCSS(this,"marginBottom",!0))||0),z=a.extend({},t),J=[parseInt(s.my[0],10)*(g.test(s.my[0])?b.outerWidth()/100:1),parseInt(s.my[1],
10)*(g.test(s.my[1])?b.outerHeight()/100:1)],T;c.my[0]==="right"?z.left-=e:c.my[0]==="center"&&(z.left-=e/2);c.my[1]==="bottom"?z.top-=f:c.my[1]==="center"&&(z.top-=f/2);z.left+=J[0];z.top+=J[1];z.left=Math.round(z.left);z.top=Math.round(z.top);T={left:z.left-h,top:z.top-k};a.each(["left","top"],function(b,g){if(a.ui.position[n[b]])a.ui.position[n[b]][g](z,{targetWidth:w,targetHeight:v,elemWidth:e,elemHeight:f,collisionPosition:T,collisionWidth:m,collisionHeight:p,offset:[u[0]+J[0],u[1]+J[1]],my:c.my,
at:c.at})});a.fn.bgiframe&&b.bgiframe();b.offset(a.extend(z,{using:c.using}))})};a.ui.position={fit:{left:function(b,e){var c=a(window),c=e.collisionPosition.left+e.collisionWidth-c.width()-c.scrollLeft();b.left=c>0?b.left-c:Math.max(b.left-e.collisionPosition.left,b.left)},top:function(b,e){var c=a(window),c=e.collisionPosition.top+e.collisionHeight-c.height()-c.scrollTop();b.top=c>0?b.top-c:Math.max(b.top-e.collisionPosition.top,b.top)}},flip:{left:function(b,e){if(e.at[0]!=="center"){var c=a(window),
c=e.collisionPosition.left+e.collisionWidth-c.width()-c.scrollLeft(),f=e.my[0]==="left"?-e.elemWidth:e.my[0]==="right"?e.elemWidth:0,g=e.at[0]==="left"?e.targetWidth:-e.targetWidth,h=-2*e.offset[0];b.left+=e.collisionPosition.left<0?f+g+h:c>0?f+g+h:0}},top:function(b,e){if(e.at[1]!=="center"){var c=a(window),c=e.collisionPosition.top+e.collisionHeight-c.height()-c.scrollTop(),f=e.my[1]==="top"?-e.elemHeight:e.my[1]==="bottom"?e.elemHeight:0,g=e.at[1]==="top"?e.targetHeight:-e.targetHeight,h=-2*e.offset[1];
b.top+=e.collisionPosition.top<0?f+g+h:c>0?f+g+h:0}}}};a.uiBackCompat!==!1&&function(a){var b=a.fn.position;a.fn.position=function(e){if(!e||!("offset"in e))return b.call(this,e);var f=e.offset.split(" "),g=e.at.split(" ");f.length===1&&(f[1]=f[0]);/^\d/.test(f[0])&&(f[0]="+"+f[0]);/^\d/.test(f[1])&&(f[1]="+"+f[1]);g.length===1&&(/left|center|right/.test(g[0])?g[1]="center":(g[1]=g[0],g[0]="center"));return b.call(this,a.extend(e,{at:g[0]+f[0]+" "+g[1]+f[1],offset:c}))}}(jQuery)})(jQuery);
(function(a){var c=0;a.widget("ui.menu",{defaultElement:"<ul>",delay:150,options:{position:{my:"left top",at:"right top"}},_create:function(){var b=this;this.activeMenu=this.element;this.menuId=this.element.attr("id")||"ui-menu-"+c++;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({id:this.menuId,role:"listbox"}).bind("click.menu",function(c){var h=a(c.target).closest(".ui-menu-item:has(a)");if(b.options.disabled)return!1;h.length&&(c.preventDefault(),(!b.active||b.active[0]!==
h[0])&&b.focus(c,h),b.select(c))}).bind("mouseover.menu",function(c){if(!b.options.disabled){var h=a(c.target).closest(".ui-menu-item");h.length&&b.focus(c,h)}}).bind("mouseout.menu",function(c){b.options.disabled||a(c.target).closest(".ui-menu-item").length&&b.blur(c)});this.refresh();this.element.attr("tabIndex",0).bind("keydown.menu",function(c){if(!b.options.disabled)switch(c.keyCode){case a.ui.keyCode.PAGE_UP:b.previousPage(c);c.preventDefault();c.stopImmediatePropagation();break;case a.ui.keyCode.PAGE_DOWN:b.nextPage(c);
c.preventDefault();c.stopImmediatePropagation();break;case a.ui.keyCode.UP:b.previous(c);c.preventDefault();c.stopImmediatePropagation();break;case a.ui.keyCode.DOWN:b.next(c);c.preventDefault();c.stopImmediatePropagation();break;case a.ui.keyCode.LEFT:b.left(c)&&c.stopImmediatePropagation();c.preventDefault();break;case a.ui.keyCode.RIGHT:b.right(c)&&c.stopImmediatePropagation();c.preventDefault();break;case a.ui.keyCode.ENTER:b.select(c);c.preventDefault();c.stopImmediatePropagation();break;case a.ui.keyCode.ESCAPE:b.left(c)&&
c.stopImmediatePropagation();c.preventDefault();break;default:c.stopPropagation();clearTimeout(b.filterTimer);var h=b.previousFilter||"",e=String.fromCharCode(c.keyCode),g=!1;e==h?g=!0:e=h+e;var m=function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},h=b.widget().children(".ui-menu-item").filter(function(){return RegExp("^"+m(e),"i").test(a(this).children("a").text())}),h=g&&h.index(b.active.next())!=-1?b.active.nextAll(".ui-menu-item"):h;h.length||(e=String.fromCharCode(c.keyCode),h=b.widget().children(".ui-menu-item").filter(function(){return RegExp("^"+
m(e),"i").test(a(this).children("a").text())}));h.length?(b.focus(c,h),h.length>1?(b.previousFilter=e,b.filterTimer=setTimeout(function(){delete b.previousFilter},1E3)):delete b.previousFilter):delete b.previousFilter}})},_destroy:function(){this.element.removeClass("ui-menu ui-widget ui-widget-content ui-corner-all").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-activedescendant");this.element.children(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").children("a").removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").unbind(".menu")},
refresh:function(){var a=this.element.find("ul:not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide();a.prev("a").prepend('<span class="ui-icon ui-icon-carat-1-e"></span>');a.add(this.element).children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").attr("tabIndex",-1)},focus:function(b,c){var h=this;this.blur();if(this._hasScroll()){var e=parseFloat(a.curCSS(this.element[0],"borderTopWidth",!0))||
0,g=parseFloat(a.curCSS(this.element[0],"paddingTop",!0))||0,e=c.offset().top-this.element.offset().top-e-g,g=this.element.attr("scrollTop"),m=this.element.height(),j=c.height();e<0?this.element.attr("scrollTop",g+e):e+j>m&&this.element.attr("scrollTop",g+e-m+j)}this.active=c.first().children("a").addClass("ui-state-focus").attr("id",function(a,b){return h.itemId=b||h.menuId+"-activedescendant"}).end();this.element.removeAttr("aria-activedescendant").attr("aria-activedescendant",h.itemId);h.timer=
setTimeout(function(){h._close()},h.delay);e=a(">ul",c);e.length&&/^mouse/.test(b.type)&&h._startOpening(e);this.activeMenu=c.parent();this._trigger("focus",b,{item:c})},blur:function(b){if(this.active)clearTimeout(this.timer),this.active.children("a").removeClass("ui-state-focus"),a("#"+this.menuId+"-activedescendant").removeAttr("id"),this.element.removeAttr("aria-activedescenant"),this._trigger("blur",b),this.active=null},_startOpening:function(a){clearTimeout(this.timer);var c=this;c.timer=setTimeout(function(){c._close();
c._open(a)},c.delay)},_open:function(b){this.element.find(".ui-menu").not(b.parents()).hide();var c=a.extend({},{of:this.active},a.type(this.options.position)=="function"?this.options.position(this.active):this.options.position);b.show().position(c);this.active.find(">a:first").addClass("ui-state-active")},closeAll:function(){this.element.find("ul").hide().end().find("a.ui-state-active").removeClass("ui-state-active");this.blur();this.activeMenu=this.element},_close:function(){this.active.parent().find("ul").hide().end().find("a.ui-state-active").removeClass("ui-state-active")},
left:function(a){var c=this.active&&this.active.parents("li").first();if(c&&c.length)return this.active.parent().hide(),this.focus(a,c),!0},right:function(a){var c=this.active&&this.active.children("ul").children("li").first();if(c&&c.length)return this._open(c.parent()),this.focus(a,c),!0},next:function(a){this._move("next",".ui-menu-item","first",a)},previous:function(a){this._move("prev",".ui-menu-item","last",a)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},
last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(a,c,h,e){this.active?(a=this.active[a+"All"](".ui-menu-item").eq(0),a.length?this.focus(e,a):this.focus(e,this.activeMenu.children(c)[h]())):this.focus(e,this.activeMenu.children(c)[h]())},nextPage:function(b){if(this._hasScroll())if(!this.active||this.last())this.focus(b,this.activeMenu.children(".ui-menu-item").first());else{var c=this.active.offset().top,h=this.element.height(),e;this.active.nextAll(".ui-menu-item").each(function(){e=
a(this);return a(this).offset().top-c-h<0});this.focus(b,e)}else this.focus(b,this.activeMenu.children(".ui-menu-item")[!this.active||this.last()?"first":"last"]())},previousPage:function(b){if(this._hasScroll())if(!this.active||this.first())this.focus(b,this.activeMenu.children(".ui-menu-item").last());else{var c=this.active.offset().top,h=this.element.height(),e;this.active.prevAll(".ui-menu-item").each(function(){e=a(this);return a(this).offset().top-c+h>0});this.focus(b,e)}else this.focus(b,this.activeMenu.children(".ui-menu-item")[!this.active||
this.first()?":last":":first"]())},_hasScroll:function(){return this.element.height()<this.element.attr("scrollHeight")},select:function(a){var c={item:this.active};this.closeAll();this._trigger("select",a,c)}});a.ui.menu.version="@VERSION"})(jQuery);
(function(a){var c=0;a.widget("ui.autocomplete",{defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var b=this,c=this.element[0].ownerDocument,h,e;this.valueMethod=this.element[this.element.is("input")?"val":"text"];this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",
function(c){if(!b.options.disabled&&!b.element.attr("readonly")){e=h=!1;var f=a.ui.keyCode;switch(c.keyCode){case f.PAGE_UP:b._move("previousPage",c);break;case f.PAGE_DOWN:b._move("nextPage",c);break;case f.UP:b._move("previous",c);c.preventDefault();break;case f.DOWN:b._move("next",c);c.preventDefault();break;case f.ENTER:case f.NUMPAD_ENTER:b.menu.active&&(h=!0,c.preventDefault()),e=!0;case f.TAB:if(!b.menu.active)break;b.menu.select(c);break;case f.ESCAPE:b._value(b.term);b.close(c);break;default:clearTimeout(b.searching),
b.searching=setTimeout(function(){if(b.term!=b._value())b.selectedItem=null,b.search(null,c)},b.options.delay)}}}).bind("keypress.autocomplete",function(b){h&&(h=!1,b.preventDefault());if(b.keyCode==a.ui.keyCode.ENTER||b.keyCode==a.ui.keyCode.NUMPAD_ENTER)e=!0}).bind("keyup.autocomplete",function(c){if(e)e=!1;else if(!(c.keyCode!=a.ui.keyCode.ENTER&&c.keyCode!=a.ui.keyCode.NUMPAD_ENTER)&&!b.options.disabled&&!b.element.attr("readonly"))clearTimeout(b.searching),b.searching=setTimeout(function(){if(b.term!=
b.element.val())b.selectedItem=null,b.search(null,c)},b.options.delay)}).bind("focus.autocomplete",function(){if(!b.options.disabled)b.selectedItem=null,b.previous=b._value()}).bind("blur.autocomplete",function(a){if(!b.options.disabled)clearTimeout(b.searching),b.closing=setTimeout(function(){b.close(a);b._change(a)},150)});this._initSource();this.response=function(){return b._response.apply(b,arguments)};this.menu=a("<ul></ul>").addClass("ui-autocomplete").appendTo(a(this.options.appendTo||"body",
c)[0]).mousedown(function(e){var c=b.menu.element[0];a(e.target).closest(".ui-menu-item").length||setTimeout(function(){a(document).one("mousedown",function(e){e.target!==b.element[0]&&e.target!==c&&!a.contains(c,e.target)&&b.close()})},1);setTimeout(function(){clearTimeout(b.closing)},13)}).menu({input:a(),focus:function(a,e){var c=e.item.data("item.autocomplete");!1!==b._trigger("focus",a,{item:c})&&/^key/.test(a.originalEvent.type)&&b._value(c.value)},select:function(a,e){var h=e.item.data("item.autocomplete"),
k=b.previous;if(b.element[0]!==c.activeElement)b.element.focus(),b.previous=k,setTimeout(function(){b.previous=k;b.selectedItem=h},1);!1!==b._trigger("select",a,{item:h})&&b._value(h.value);b.term=b._value();b.close(a);b.selectedItem=h},blur:function(){b.menu.element.is(":visible")&&b._value()!==b.term&&b._value(b.term)}}).zIndex(this.element.zIndex()+1).hide().data("menu");a.fn.bgiframe&&this.menu.element.bgiframe()},_destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");
this.menu.element.remove()},_setOption:function(b,c){this._super("_setOption",b,c);b==="source"&&this._initSource();b==="appendTo"&&this.menu.element.appendTo(a(c||"body",this.element[0].ownerDocument)[0]);b==="disabled"&&c&&this.xhr&&this.xhr.abort()},_initSource:function(){var b=this,f,h;a.isArray(this.options.source)?(f=this.options.source,this.source=function(b,c){c(a.ui.autocomplete.filter(f,b.term))}):typeof this.options.source==="string"?(h=this.options.source,this.source=function(e,f){b.xhr&&
b.xhr.abort();b.xhr=a.ajax({url:h,data:e,dataType:"json",autocompleteRequest:++c,success:function(a){this.autocompleteRequest===c&&f(a)},error:function(){this.autocompleteRequest===c&&f([])}})}):this.source=this.options.source},search:function(a,c){a=a!=null?a:this._value();this.term=this._value();if(a.length<this.options.minLength)return this.close(c);clearTimeout(this.closing);if(this._trigger("search",c)!==!1)return this._search(a)},_search:function(a){this.pending++;this.element.addClass("ui-autocomplete-loading");
this.source({term:a},this.response)},_response:function(a){a&&(a=this._normalize(a));this._trigger("response",null,{content:a});!this.options.disabled&&a&&a.length?(this._suggest(a),this._trigger("open")):this.close();this.pending--;this.pending||this.element.removeClass("ui-autocomplete-loading")},close:function(a){clearTimeout(this.closing);this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this._trigger("close",a))},_change:function(a){this.previous!==this._value()&&this._trigger("change",
a,{item:this.selectedItem})},_normalize:function(b){if(b.length&&b[0].label&&b[0].value)return b;return a.map(b,function(b){if(typeof b==="string")return{label:b,value:b};return a.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(b){var c=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(c,b);this.menu.blur();this.menu.refresh();c.show();this._resizeMenu();c.position(a.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next(new a.Event("mouseover"))},
_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth(),this.element.outerWidth()))},_renderMenu:function(b,c){var h=this;a.each(c,function(a,c){h._renderItem(b,c)})},_renderItem:function(b,c){return a("<li></li>").data("item.autocomplete",c).append(a("<a></a>").text(c.label)).appendTo(b)},_move:function(a,c){if(this.menu.element.is(":visible"))if(this.menu.first()&&/^previous/.test(a)||this.menu.last()&&/^next/.test(a))this._value(this.term),this.menu.blur();
else this.menu[a](c);else this.search(null,c)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)}});a.extend(a.ui.autocomplete,{version:"@VERSION",escapeRegex:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(b,c){var h=RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return h.test(a.label||a.value||a)})}})})(jQuery);
$(document).ready(function(){S3.rtl?$('div.label label[id!="delete_record__label"]').prepend(":"):$('div.label label[id!="delete_record__label"]').append(":")});var S3={gis:{}},popupWin=null;function openPopup(a){!popupWin||popupWin.closed?popupWin=window.open(a,"popupWin","width=640, height=480"):popupWin.focus()}
$(document).ready(function(){try{$(".zoom").fancyZoom({scaleImg:!0,closeOnClick:!0,directory:S3.Ap.concat("/static/media")})}catch(a){}$("input.date").datepicker({changeMonth:!0,changeYear:!0,showOn:"both",buttonImage:S3.Ap.concat("/static/img/jquery-ui/calendar.gif"),buttonImageOnly:!0,dateFormat:"yy-mm-dd",isRTL:S3.rtl});$(".error").hide().slideDown("slow");$(".error").click(function(){$(this).fadeOut("slow");return!1});$(".warning").hide().slideDown("slow");$(".warning").click(function(){$(this).fadeOut("slow");
return!1});$(".information").hide().slideDown("slow");$(".information").click(function(){$(this).fadeOut("slow");return!1});$(".confirmation").hide().slideDown("slow");$(".confirmation").click(function(){$(this).fadeOut("slow");return!1});$(".hoverable").hover(function(){$(this).addClass("hovered")},function(){$(this).removeClass("hovered")});$("#modulenav li").hover(function(){var a=$(this).width(),c=$("ul",this).width();c!=null&&c<a&&$("ul",this).css({width:a.toString()+"px"});$("ul",this).css("display",
"block")},function(){$("ul",this).css("display","none")});$("#subnav li").hover(function(){var a=$(this).width()-2;$("ul",this).css({display:"block",width:a.toString()+"px"})},function(){$("ul",this).css("display","none")});$("a.colorbox").attr("href",function(a,c){var h="";try{h=$(this).parents("tr").attr("id").replace(/__row/,"")}catch(e){if(h=="")return c}var g=c;c.indexOf("&caller=")==-1&&(g=c+"&caller="+h);return g});$(".colorbox").click(function(){$.fn.colorbox({iframe:!0,width:"99%",height:"99%",
href:this.href,title:this.title});return!1});$(".tooltip").cluetip({activation:"hover",sticky:!1,splitTitle:"|"});var c='<img src="'+S3.Ap.concat("/static/img/cross2.png")+'" alt="close" />';$(".stickytip").cluetip({activation:"hover",sticky:!0,closePosition:"title",closeText:c,splitTitle:"|"});$(".ajaxtip").cluetip({activation:"click",sticky:!0,closePosition:"title",closeText:c,width:380});now=new Date;$("form").append("<input type='hidden' value="+now.getTimezoneOffset()+" name='_utc_offset'/>")});
function s3_tb_remove(){$.fn.colorbox.close()}
(function(a){a.ajaxS3=function(c){var b=a.extend({},a.ajaxS3Settings,c);b.tryCount=0;c.message&&s3_showStatus(S3.i18n.ajax_get+" "+(c.message?c.message:S3.i18n.ajax_fmd)+"...",this.ajaxS3Settings.msgTimeout);b.success=function(a,b){s3_hideStatus();c.success&&c.success(a,b)};b.error=function(b,h){h=="timeout"?(this.tryCount++,this.tryCount<=this.retryLimit?(s3_showStatus(S3.i18n.ajax_get+" "+(c.message?c.message:S3.i18n.ajax_fmd)+"... "+S3.i18n.ajax_rtr+" "+this.tryCount,a.ajaxS3Settings.msgTimeout),
a.ajax(this)):s3_showStatus(S3.i18n.ajax_wht+" "+(this.retryLimit+1)+" "+S3.i18n.ajax_gvn,a.ajaxS3Settings.msgTimeout,!1,!0)):b.status==500?s3_showStatus(S3.i18n.ajax_500,a.ajaxS3Settings.msgTimeout,!1,!0):s3_showStatus(S3.i18n.ajax_dwn,a.ajaxS3Settings.msgTimeout,!1,!0)};a.ajax(b)};a.postS3=function(c,b,f,h){return a.ajaxS3({type:"POST",url:c,data:b,success:f,dataType:h})};a.getS3=function(c,b,f,h,e,g){a.isFunction(b)&&(g=e,e=h,h=f,f=b,b=null);if(g)var m=!1;return a.ajaxS3({type:"GET",url:c,async:m,
data:b,success:f,dataType:h,message:e})};a.getJSONS3=function(c,b,f,h,e){a.isFunction(b)&&(e=h,h=f,f=b,b=null);e||(e=!1);return a.getS3(c,b,f,"json",h,e)};a.ajaxS3Settings={timeout:1E4,msgTimeout:2E3,retryLimit:10,dataType:"json",async:!0,type:"GET"};a.ajaxS3Setup=function(c){a.extend(a.ajaxS3Settings,c)}})($);
function S3StatusBar(a,c){var b=this,f=null;this.elementId="_showstatus";this.prependMultiline=!0;this.showCloseButton=!1;this.afterTimeoutText=null;this.cssClass="statusbar";this.highlightClass="statusbarhighlight";this.errorClass="statusbarerror";this.closeButtonClass="statusbarclose";this.additive=!1;$.extend(this,c);a&&(f=$(a));f||(f=$("<div id='_statusbar' class='"+b.cssClass+"'><div class='"+b.closeButtonClass+"'>"+(b.showCloseButton?" X </div></div>":"")).appendTo(document.body).show());$("."+
b.cssClass).click(function(){$(f).hide()});this.show=function(a,c,g,m){g||g==void 0&&b.additive?(a="<div style='margin-bottom: 2px;' >"+a+"</div>",b.prependMultiline?f.prepend(a):f.append(a)):b.showCloseButton?(g=f.find("div.statusbarclose"),f.text(a).prepend(g)):f.text(a);f.show();c&&(m?f.addClass(b.errorClass):f.addClass(b.highlightClass),setTimeout(function(){f.removeClass(b.highlightClass);b.afterTimeoutText&&b.show(b.afterTimeoutText)},c))};this.release=function(){_statusbar&&($("#_statusbar").remove(),
_statusbar=void 0)}}var _statusbar=null;function s3_showStatus(a,c,b,f){_statusbar||(_statusbar=new S3StatusBar);_statusbar.show(a,c,b,f)}function s3_hideStatus(){_statusbar&&_statusbar.release()}function S3SetNavigateAwayConfirm(){window.onbeforeunload=function(){return S3.i18n.unsaved_changes}}function S3ClearNavigateAwayConfirm(){window.onbeforeunload=function(){}}
function S3EnableNavigateAwayConfirm(){$(document).ready(function(){$("[class=error]").length>0&&S3SetNavigateAwayConfirm();$(":input:not(input[id=gis_location_advanced_checkbox])").keypress(S3SetNavigateAwayConfirm);$(":input:not(input[id=gis_location_advanced_checkbox])").change(S3SetNavigateAwayConfirm);$("form").submit(S3ClearNavigateAwayConfirm)})}function S3ConfirmClick(a,c){$(a).click(function(a){return confirm(c)?!0:(a.preventDefault(),!1)})}
function s3_viewMap(a){var a=S3.Ap.concat("/gis/display_feature/")+a,c=$("#map").html(),a="<iframe width='640' height='480' src='"+a+"'></iframe>",b=$('<a href="#">'+S3.i18n.close_map+"</a>");b.bind("click",function(a){$("#map").html(c);a.preventDefault()});$("#map").html(a);$("#map").append($("<div style='margin-bottom: 10px' />").append(b))}
function s3_viewMapMulti(a,c,b,f){var a=S3.Ap.concat("/gis/display_feature//?module=")+a+"&resource="+c+"&instance="+b+"&jresource="+f,h=$("#map").html(),a='<iframe width="640" height="480" src="'+a+'"></iframe>',c=$('<a href="#">'+S3.i18n.close_map+"</a>");c.bind("click",function(a){$("#map").html(h);a.preventDefault()});$("#map").html(a);$("#map").append($("<div style='margin-bottom: 10px' />").append(c))};
