Calendar=function(a,h,e,f){this.timeout=this.getDateText=this.getDateToolTip=this.getDateStatus=this.currentDateEl=this.activeDiv=null;this.onSelected=e||null;this.onClose=f||null;this.hidden=this.dragging=false;this.minYear=1970;this.maxYear=2050;this.dateFormat=Calendar._TT.DEF_DATE_FORMAT;this.ttDateFormat=Calendar._TT.TT_DATE_FORMAT;this.weekNumbers=this.isPopup=true;this.firstDayOfWeek=typeof a=="number"?a:Calendar._FD;this.showsOtherMonths=false;this.dateStr=h;this.ar_days=null;this.showsTime=
false;this.time24=true;this.yearStep=2;this.hiliteToday=true;this.activeYear=this.hilitedYear=this.activeMonth=this.hilitedMonth=this.yearsCombo=this.monthsCombo=this.firstdayname=this.tbody=this.element=this.table=this.multiple=null;this.dateClicked=false;if(typeof Calendar._SDN=="undefined"){if(typeof Calendar._SDN_len=="undefined")Calendar._SDN_len=3;a=[];for(h=8;h>0;)a[--h]=Calendar._DN[h].substr(0,Calendar._SDN_len);Calendar._SDN=a;if(typeof Calendar._SMN_len=="undefined")Calendar._SMN_len=3;
a=[];for(h=12;h>0;)a[--h]=Calendar._MN[h].substr(0,Calendar._SMN_len);Calendar._SMN=a}};Calendar._C=null;Calendar.is_ie=/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent);Calendar.is_ie5=Calendar.is_ie&&/msie 5\.0/i.test(navigator.userAgent);Calendar.is_opera=/opera/i.test(navigator.userAgent);Calendar.is_khtml=/Konqueror|Safari|KHTML/i.test(navigator.userAgent);
Calendar.getAbsolutePos=function(a){var h=0,e=0,f=/^div$/i.test(a.tagName);if(f&&a.scrollLeft)h=a.scrollLeft;if(f&&a.scrollTop)e=a.scrollTop;h={x:a.offsetLeft-h,y:a.offsetTop-e};if(a.offsetParent){a=this.getAbsolutePos(a.offsetParent);h.x+=a.x;h.y+=a.y}return h};Calendar.isRelated=function(a,h){var e=h.relatedTarget;if(!e){var f=h.type;if(f=="mouseover")e=h.fromElement;else if(f=="mouseout")e=h.toElement}for(;e;){if(e==a)return true;e=e.parentNode}return false};
Calendar.removeClass=function(a,h){if(a&&a.className){for(var e=a.className.split(" "),f=[],j=e.length;j>0;)if(e[--j]!=h)f[f.length]=e[j];a.className=f.join(" ")}};Calendar.addClass=function(a,h){Calendar.removeClass(a,h);a.className+=" "+h};Calendar.getElement=function(a){for(a=Calendar.is_ie?window.event.srcElement:a.currentTarget;a.nodeType!=1||/^div$/i.test(a.tagName);)a=a.parentNode;return a};
Calendar.getTargetElement=function(a){for(a=Calendar.is_ie?window.event.srcElement:a.target;a.nodeType!=1;)a=a.parentNode;return a};Calendar.stopEvent=function(a){a||(a=window.event);if(Calendar.is_ie){a.cancelBubble=true;a.returnValue=false}else{a.preventDefault();a.stopPropagation()}return false};Calendar.addEvent=function(a,h,e){if(a.attachEvent)a.attachEvent("on"+h,e);else if(a.addEventListener)a.addEventListener(h,e,true);else a["on"+h]=e};
Calendar.removeEvent=function(a,h,e){if(a.detachEvent)a.detachEvent("on"+h,e);else if(a.removeEventListener)a.removeEventListener(h,e,true);else a["on"+h]=null};Calendar.createElement=function(a,h){var e=null;e=document.createElementNS?document.createElementNS("http://www.w3.org/1999/xhtml",a):document.createElement(a);typeof h!="undefined"&&h.appendChild(e);return e};
Calendar._add_evs=function(a){with(Calendar){addEvent(a,"mouseover",dayMouseOver);addEvent(a,"mousedown",dayMouseDown);addEvent(a,"mouseout",dayMouseOut);if(is_ie){addEvent(a,"dblclick",dayMouseDblClick);a.setAttribute("unselectable",true)}}};Calendar.findMonth=function(a){if(typeof a.month!="undefined")return a;else if(typeof a.parentNode.month!="undefined")return a.parentNode;return null};
Calendar.findYear=function(a){if(typeof a.year!="undefined")return a;else if(typeof a.parentNode.year!="undefined")return a.parentNode;return null};
Calendar.showMonthsCombo=function(){var a=Calendar._C;if(!a)return false;var h=a.activeDiv,e=a.monthsCombo;a.hilitedMonth&&Calendar.removeClass(a.hilitedMonth,"hilite");a.activeMonth&&Calendar.removeClass(a.activeMonth,"active");var f=a.monthsCombo.getElementsByTagName("div")[a.date.getMonth()];Calendar.addClass(f,"active");a.activeMonth=f;a=e.style;a.display="block";if(h.navtype<0)a.left=h.offsetLeft+"px";else{e=e.offsetWidth;if(typeof e=="undefined")e=50;a.left=h.offsetLeft+h.offsetWidth-e+"px"}a.top=
h.offsetTop+h.offsetHeight+"px"};
Calendar.showYearsCombo=function(a){var h=Calendar._C;if(!h)return false;var e=h.activeDiv,f=h.yearsCombo;h.hilitedYear&&Calendar.removeClass(h.hilitedYear,"hilite");h.activeYear&&Calendar.removeClass(h.activeYear,"active");h.activeYear=null;for(var j=h.date.getFullYear()+(a?1:-1),b=f.firstChild,c=false,g=12;g>0;--g){if(j>=h.minYear&&j<=h.maxYear){b.innerHTML=j;b.year=j;b.style.display="block";c=true}else b.style.display="none";b=b.nextSibling;j+=a?h.yearStep:-h.yearStep}if(c){a=f.style;a.display=
"block";if(e.navtype<0)a.left=e.offsetLeft+"px";else{f=f.offsetWidth;if(typeof f=="undefined")f=50;a.left=e.offsetLeft+e.offsetWidth-f+"px"}a.top=e.offsetTop+e.offsetHeight+"px"}};
Calendar.tableMouseUp=function(a){var h=Calendar._C;if(!h)return false;h.timeout&&clearTimeout(h.timeout);var e=h.activeDiv;if(!e)return false;var f=Calendar.getTargetElement(a);a||(a=window.event);Calendar.removeClass(e,"active");if(f==e||f.parentNode==e)Calendar.cellClick(e,a);var j=Calendar.findMonth(f);e=null;if(j){e=new Date(h.date);if(j.month!=e.getMonth()){e.setMonth(j.month);h.setDate(e);h.dateClicked=false;h.callHandler()}}else if(f=Calendar.findYear(f)){e=new Date(h.date);if(f.year!=e.getFullYear()){e.setFullYear(f.year);
h.setDate(e);h.dateClicked=false;h.callHandler()}}with(Calendar){removeEvent(document,"mouseup",tableMouseUp);removeEvent(document,"mouseover",tableMouseOver);removeEvent(document,"mousemove",tableMouseOver);h._hideCombos();_C=null;return stopEvent(a)}};
Calendar.tableMouseOver=function(a){var h=Calendar._C;if(h){var e=h.activeDiv,f=Calendar.getTargetElement(a);if(f==e||f.parentNode==e){Calendar.addClass(e,"hilite active");Calendar.addClass(e.parentNode,"rowhilite")}else{if(typeof e.navtype=="undefined"||e.navtype!=50&&(e.navtype==0||Math.abs(e.navtype)>2))Calendar.removeClass(e,"active");Calendar.removeClass(e,"hilite");Calendar.removeClass(e.parentNode,"rowhilite")}a||(a=window.event);if(e.navtype==50&&f!=e){var j=Calendar.getAbsolutePos(e),b=e.offsetWidth,
c=a.clientX,g=true;if(c>j.x+b){c=c-j.x-b;g=false}else c=j.x-c;if(c<0)c=0;j=e._range;b=e._current;c=Math.floor(c/10)%j.length;for(var k=j.length;--k>=0;)if(j[k]==b)break;for(;c-- >0;)if(g){if(--k<0)k=j.length-1}else if(++k>=j.length)k=0;e.innerHTML=j[k];h.onUpdateTime()}if(e=Calendar.findMonth(f))if(e.month!=h.date.getMonth()){h.hilitedMonth&&Calendar.removeClass(h.hilitedMonth,"hilite");Calendar.addClass(e,"hilite");h.hilitedMonth=e}else h.hilitedMonth&&Calendar.removeClass(h.hilitedMonth,"hilite");
else{h.hilitedMonth&&Calendar.removeClass(h.hilitedMonth,"hilite");if(f=Calendar.findYear(f))if(f.year!=h.date.getFullYear()){h.hilitedYear&&Calendar.removeClass(h.hilitedYear,"hilite");Calendar.addClass(f,"hilite");h.hilitedYear=f}else h.hilitedYear&&Calendar.removeClass(h.hilitedYear,"hilite");else h.hilitedYear&&Calendar.removeClass(h.hilitedYear,"hilite")}return Calendar.stopEvent(a)}};Calendar.tableMouseDown=function(a){if(Calendar.getTargetElement(a)==Calendar.getElement(a))return Calendar.stopEvent(a)};
Calendar.calDragIt=function(a){var h=Calendar._C;if(!(h&&h.dragging))return false;var e,f;if(Calendar.is_ie){f=window.event.clientY+document.body.scrollTop;e=window.event.clientX+document.body.scrollLeft}else{e=a.pageX;f=a.pageY}h.hideShowCovered();var j=h.element.style;j.left=e-h.xOffs+"px";j.top=f-h.yOffs+"px";return Calendar.stopEvent(a)};
Calendar.calDragEnd=function(a){var h=Calendar._C;if(!h)return false;h.dragging=false;with(Calendar){removeEvent(document,"mousemove",calDragIt);removeEvent(document,"mouseup",calDragEnd);tableMouseUp(a)}h.hideShowCovered()};
Calendar.dayMouseDown=function(a){var h=Calendar.getElement(a);if(h.disabled)return false;var e=h.calendar;e.activeDiv=h;Calendar._C=e;if(h.navtype!=300)with(Calendar){if(h.navtype==50){h._current=h.innerHTML;addEvent(document,"mousemove",tableMouseOver)}else addEvent(document,Calendar.is_ie5?"mousemove":"mouseover",tableMouseOver);addClass(h,"hilite active");addEvent(document,"mouseup",tableMouseUp)}else e.isPopup&&e._dragStart(a);if(h.navtype==-1||h.navtype==1){e.timeout&&clearTimeout(e.timeout);
e.timeout=setTimeout("Calendar.showMonthsCombo()",250)}else if(h.navtype==-2||h.navtype==2){e.timeout&&clearTimeout(e.timeout);e.timeout=setTimeout(h.navtype>0?"Calendar.showYearsCombo(true)":"Calendar.showYearsCombo(false)",250)}else e.timeout=null;return Calendar.stopEvent(a)};Calendar.dayMouseDblClick=function(a){Calendar.cellClick(Calendar.getElement(a),a||window.event);Calendar.is_ie&&document.selection.empty()};
Calendar.dayMouseOver=function(a){var h=Calendar.getElement(a);if(Calendar.isRelated(h,a)||Calendar._C||h.disabled)return false;if(h.ttip){if(h.ttip.substr(0,1)=="_")h.ttip=h.caldate.print(h.calendar.ttDateFormat)+h.ttip.substr(1);h.calendar.tooltips.innerHTML=h.ttip}if(h.navtype!=300){Calendar.addClass(h,"hilite");h.caldate&&Calendar.addClass(h.parentNode,"rowhilite")}return Calendar.stopEvent(a)};
Calendar.dayMouseOut=function(a){with(Calendar){var h=getElement(a);if(isRelated(h,a)||_C||h.disabled)return false;removeClass(h,"hilite");h.caldate&&removeClass(h.parentNode,"rowhilite");if(h.calendar)h.calendar.tooltips.innerHTML=_TT.SEL_DATE;return stopEvent(a)}};
Calendar.cellClick=function(a,h){var e=a.calendar,f=false,j=false,b=null;if(typeof a.navtype=="undefined"){if(e.currentDateEl){Calendar.removeClass(e.currentDateEl,"selected");Calendar.addClass(a,"selected");f=e.currentDateEl==a;if(!f)e.currentDateEl=a}e.date.setDateOnly(a.caldate);b=e.date;var c=!(e.dateClicked=!a.otherMonth);if(!c&&!e.currentDateEl)e._toggleMultipleDate(new Date(b));else j=!a.disabled;c&&e._init(e.firstDayOfWeek,b)}else{if(a.navtype==200){Calendar.removeClass(a,"hilite");e.callCloseHandler();
return}b=new Date(e.date);a.navtype==0&&b.setDateOnly(new Date);e.dateClicked=false;c=b.getFullYear();var g=b.getMonth(),k=function(m){var o=b.getDate(),n=b.getMonthDays(m);o>n&&b.setDate(n);b.setMonth(m)};switch(a.navtype){case 400:Calendar.removeClass(a,"hilite");f=Calendar._TT.ABOUT;if(typeof f!="undefined")f+=e.showsTime?Calendar._TT.ABOUT_TIME:"";else f='Help and about box text is not translated into this language.\nIf you know this language and you feel generous please update\nthe corresponding file in "lang" subdir to match calendar-en.js\nand send it back to <mihai_bazon@yahoo.com> to get it into the distribution  ;-)\n\nThank you!\nhttp://dynarch.com/mishoo/calendar.epl\n';
alert(f);return;case -2:c>e.minYear&&b.setFullYear(c-1);break;case -1:if(g>0)k(g-1);else if(c-- >e.minYear){b.setFullYear(c);k(11)}break;case 1:if(g<11)k(g+1);else if(c<e.maxYear){b.setFullYear(c+1);k(0)}break;case 2:c<e.maxYear&&b.setFullYear(c+1);break;case 100:e.setFirstDayOfWeek(a.fdow);return;case 50:f=a._range;j=a.innerHTML;for(c=f.length;--c>=0;)if(f[c]==j)break;if(h&&h.shiftKey){if(--c<0)c=f.length-1}else if(++c>=f.length)c=0;a.innerHTML=f[c];e.onUpdateTime();return;case 0:if(typeof e.getDateStatus==
"function"&&e.getDateStatus(b,b.getFullYear(),b.getMonth(),b.getDate()))return false}if(b.equalsTo(e.date)){if(a.navtype==0)j=f=true}else{e.setDate(b);j=true}}j&&h&&e.callHandler();if(f){Calendar.removeClass(a,"hilite");h&&e.callCloseHandler()}};
Calendar.prototype.create=function(a){var h=null;if(a){h=a;this.isPopup=false}else{h=document.getElementsByTagName("body")[0];this.isPopup=true}this.date=this.dateStr?new Date(this.dateStr):new Date;this.table=a=Calendar.createElement("table");a.cellSpacing=0;a.cellPadding=0;a.calendar=this;Calendar.addEvent(a,"mousedown",Calendar.tableMouseDown);var e=Calendar.createElement("div");this.element=e;e.className="calendar";if(this.isPopup){e.style.position="absolute";e.style.display="none"}e.appendChild(a);
var f=Calendar.createElement("thead",a),j=null,b=null,c=this;e=function(m,o,n){j=Calendar.createElement("td",b);j.colSpan=o;j.className="button";if(n!=0&&Math.abs(n)<=2)j.className+=" nav";Calendar._add_evs(j);j.calendar=c;j.navtype=n;j.innerHTML="<div unselectable='on'>"+m+"</div>";return j};b=Calendar.createElement("tr",f);var g=6;this.isPopup&&--g;this.weekNumbers&&++g;e("?",1,400).ttip=Calendar._TT.INFO;this.title=e("",g,300);this.title.className="title";if(this.isPopup){this.title.ttip=Calendar._TT.DRAG_TO_MOVE;
this.title.style.cursor="move";e("&#x00d7;",1,200).ttip=Calendar._TT.CLOSE}b=Calendar.createElement("tr",f);b.className="headrow";this._nav_py=e("&#x00ab;",1,-2);this._nav_py.ttip=Calendar._TT.PREV_YEAR;this._nav_pm=e("&#x2039;",1,-1);this._nav_pm.ttip=Calendar._TT.PREV_MONTH;this._nav_now=e(Calendar._TT.TODAY,this.weekNumbers?4:3,0);this._nav_now.ttip=Calendar._TT.GO_TODAY;this._nav_nm=e("&#x203a;",1,1);this._nav_nm.ttip=Calendar._TT.NEXT_MONTH;this._nav_ny=e("&#x00bb;",1,2);this._nav_ny.ttip=Calendar._TT.NEXT_YEAR;
b=Calendar.createElement("tr",f);b.className="daynames";if(this.weekNumbers){j=Calendar.createElement("td",b);j.className="name wn";j.innerHTML=Calendar._TT.WK}for(f=7;f>0;--f){j=Calendar.createElement("td",b);if(!f){j.navtype=100;j.calendar=this;Calendar._add_evs(j)}}this.firstdayname=this.weekNumbers?b.firstChild.nextSibling:b.firstChild;this._displayWeekdays();this.tbody=g=Calendar.createElement("tbody",a);for(f=6;f>0;--f){b=Calendar.createElement("tr",g);if(this.weekNumbers)j=Calendar.createElement("td",
b);for(var k=7;k>0;--k){j=Calendar.createElement("td",b);j.calendar=this;Calendar._add_evs(j)}}if(this.showsTime){b=Calendar.createElement("tr",g);b.className="time";j=Calendar.createElement("td",b);j.className="time";j.colSpan=2;j.innerHTML=Calendar._TT.TIME||"&nbsp;";j=Calendar.createElement("td",b);j.className="time";j.colSpan=this.weekNumbers?4:3;(function(){function m(r,y,z,E){var C=Calendar.createElement("span",j);C.className=r;C.innerHTML=y;C.calendar=c;C.ttip=Calendar._TT.TIME_PART;C.navtype=
50;C._range=[];if(typeof z!="number")C._range=z;else for(r=z;r<=E;++r)C._range[C._range.length]=r<10&&E>=10?"0"+r:""+r;Calendar._add_evs(C);return C}var o=c.date.getHours(),n=c.date.getMinutes(),p=!c.time24,t=o>12;if(p&&t)o-=12;var v=m("hour",o,p?1:0,p?12:23);o=Calendar.createElement("span",j);o.innerHTML=":";o.className="colon";var w=m("minute",n,0,59),u=null;j=Calendar.createElement("td",b);j.className="time";j.colSpan=2;if(p)u=m("ampm",t?"pm":"am",["am","pm"]);else j.innerHTML="&nbsp;";c.onSetTime=
function(){var r,y=this.date.getHours(),z=this.date.getMinutes();if(p){if(r=y>=12)y-=12;if(y==0)y=12;u.innerHTML=r?"pm":"am"}v.innerHTML=y<10?"0"+y:y;w.innerHTML=z<10?"0"+z:z};c.onUpdateTime=function(){var r=this.date,y=parseInt(v.innerHTML,10);if(p)if(/pm/i.test(u.innerHTML)&&y<12)y+=12;else if(/am/i.test(u.innerHTML)&&y==12)y=0;var z=r.getDate(),E=r.getMonth(),C=r.getFullYear();r.setHours(y);r.setMinutes(parseInt(w.innerHTML,10));r.setFullYear(C);r.setMonth(E);r.setDate(z);this.dateClicked=false;
this.callHandler()}})()}else this.onSetTime=this.onUpdateTime=function(){};a=Calendar.createElement("tfoot",a);b=Calendar.createElement("tr",a);b.className="footrow";j=e(Calendar._TT.SEL_DATE,this.weekNumbers?8:7,300);j.className="ttip";if(this.isPopup){j.ttip=Calendar._TT.DRAG_TO_MOVE;j.style.cursor="move"}this.tooltips=j;this.monthsCombo=e=Calendar.createElement("div",this.element);e.className="combo";for(f=0;f<Calendar._MN.length;++f){a=Calendar.createElement("div");a.className=Calendar.is_ie?
"label-IEfix":"label";a.month=f;a.innerHTML=Calendar._SMN[f];e.appendChild(a)}this.yearsCombo=e=Calendar.createElement("div",this.element);e.className="combo";for(f=12;f>0;--f){a=Calendar.createElement("div");a.className=Calendar.is_ie?"label-IEfix":"label";e.appendChild(a)}this._init(this.firstDayOfWeek,this.date);h.appendChild(this.element)};
Calendar._keyEvent=function(a){var h=window._dynarch_popupCalendar;if(!h||h.multiple)return false;Calendar.is_ie&&(a=window.event);var e=Calendar.is_ie||a.type=="keypress",f=a.keyCode;if(a.ctrlKey)switch(f){case 37:e&&Calendar.cellClick(h._nav_pm);break;case 38:e&&Calendar.cellClick(h._nav_py);break;case 39:e&&Calendar.cellClick(h._nav_nm);break;case 40:e&&Calendar.cellClick(h._nav_ny);break;default:return false}else switch(f){case 32:Calendar.cellClick(h._nav_now);break;case 27:e&&h.callCloseHandler();
break;case 37:case 38:case 39:case 40:if(e){var j,b,c,g,k;e=f==37||f==38;k=f==37||f==39?1:7;var m=function(){g=h.currentDateEl;var p=g.pos;j=p&15;b=p>>4;c=h.ar_days[b][j]};m();for(var o=function(){var p=new Date(h.date);p.setDate(p.getDate()-k);h.setDate(p)},n=function(){var p=new Date(h.date);p.setDate(p.getDate()+k);h.setDate(p)};;){switch(f){case 37:if(--j>=0)c=h.ar_days[b][j];else{j=6;f=38;continue}break;case 38:if(--b>=0)c=h.ar_days[b][j];else{o();m()}break;case 39:if(++j<7)c=h.ar_days[b][j];
else{j=0;f=40;continue}break;case 40:if(++b<h.ar_days.length)c=h.ar_days[b][j];else{n();m()}}break}if(c)if(c.disabled)e?o():n();else Calendar.cellClick(c)}break;case 13:e&&Calendar.cellClick(h.currentDateEl,a);break;default:return false}return Calendar.stopEvent(a)};
Calendar.prototype._init=function(a,h){var e=new Date,f=e.getFullYear(),j=e.getMonth();e=e.getDate();this.table.style.visibility="hidden";var b=h.getFullYear();if(b<this.minYear){b=this.minYear;h.setFullYear(b)}else if(b>this.maxYear){b=this.maxYear;h.setFullYear(b)}this.firstDayOfWeek=a;this.date=new Date(h);var c=h.getMonth(),g=h.getDate();h.getMonthDays();h.setDate(1);var k=(h.getDay()-this.firstDayOfWeek)%7;if(k<0)k+=7;h.setDate(0-k);h.setDate(h.getDate()+1);k=this.tbody.firstChild;for(var m=
this.ar_days=[],o=Calendar._TT.WEEKEND,n=this.multiple?this.datesCells={}:null,p=0;p<6;++p,k=k.nextSibling){var t=k.firstChild;if(this.weekNumbers){t.className="day wn";t.innerHTML=h.getWeekNumber();t=t.nextSibling}k.className="daysrow";for(var v=false,w,u=m[p]=[],r=0;r<7;++r,t=t.nextSibling,h.setDate(w+1)){w=h.getDate();var y=h.getDay();t.className="day";t.pos=p<<4|r;u[r]=t;var z=h.getMonth()==c;if(z){t.otherMonth=false;v=true}else if(this.showsOtherMonths){t.className+=" othermonth";t.otherMonth=
true}else{t.className="emptycell";t.innerHTML="&nbsp;";t.disabled=true;continue}t.disabled=false;t.innerHTML=this.getDateText?this.getDateText(h,w):w;if(n)n[h.print("%Y%m%d")]=t;if(this.getDateStatus){var E=this.getDateStatus(h,b,c,w);if(this.getDateToolTip){var C=this.getDateToolTip(h,b,c,w);if(C)t.title=C}if(E===true){t.className+=" disabled";t.disabled=true}else{if(/disabled/i.test(E))t.disabled=true;t.className+=" "+E}}if(!t.disabled){t.caldate=new Date(h);t.ttip="_";if(!this.multiple&&z&&w==
g&&this.hiliteToday){t.className+=" selected";this.currentDateEl=t}if(h.getFullYear()==f&&h.getMonth()==j&&w==e){t.className+=" today";t.ttip+=Calendar._TT.PART_TODAY}if(o.indexOf(y.toString())!=-1)t.className+=t.otherMonth?" oweekend":" weekend"}}if(!(v||this.showsOtherMonths))k.className="emptyrow"}this.title.innerHTML=Calendar._MN[c]+", "+b;this.onSetTime();this.table.style.visibility="visible";this._initMultipleDates()};
Calendar.prototype._initMultipleDates=function(){if(this.multiple)for(var a in this.multiple){var h=this.datesCells[a];if(this.multiple[a])if(h)h.className+=" selected"}};Calendar.prototype._toggleMultipleDate=function(a){if(this.multiple){var h=a.print("%Y%m%d"),e=this.datesCells[h];if(e)if(this.multiple[h]){Calendar.removeClass(e,"selected");delete this.multiple[h]}else{Calendar.addClass(e,"selected");this.multiple[h]=a}}};
Calendar.prototype.setDateToolTipHandler=function(a){this.getDateToolTip=a};Calendar.prototype.setDate=function(a){a.equalsTo(this.date)||this._init(this.firstDayOfWeek,a)};Calendar.prototype.refresh=function(){this._init(this.firstDayOfWeek,this.date)};Calendar.prototype.setFirstDayOfWeek=function(a){this._init(a,this.date);this._displayWeekdays()};Calendar.prototype.setDateStatusHandler=Calendar.prototype.setDisabledHandler=function(a){this.getDateStatus=a};
Calendar.prototype.setRange=function(a,h){this.minYear=a;this.maxYear=h};Calendar.prototype.callHandler=function(){if(this.onSelected)this.onSelected(this,this.date.print(this.dateFormat))};Calendar.prototype.callCloseHandler=function(){if(this.onClose)this.onClose(this);this.hideShowCovered()};Calendar.prototype.destroy=function(){this.element.parentNode.removeChild(this.element);Calendar._C=null;window._dynarch_popupCalendar=null};
Calendar.prototype.reparent=function(a){var h=this.element;h.parentNode.removeChild(h);a.appendChild(h)};Calendar._checkCalendar=function(a){var h=window._dynarch_popupCalendar;if(!h)return false;for(var e=Calendar.is_ie?Calendar.getElement(a):Calendar.getTargetElement(a);e!=null&&e!=h.element;e=e.parentNode);if(e==null){window._dynarch_popupCalendar.callCloseHandler();return Calendar.stopEvent(a)}};
Calendar.prototype.show=function(){for(var a=this.table.getElementsByTagName("tr"),h=a.length;h>0;){var e=a[--h];Calendar.removeClass(e,"rowhilite");e=e.getElementsByTagName("td");for(var f=e.length;f>0;){var j=e[--f];Calendar.removeClass(j,"hilite");Calendar.removeClass(j,"active")}}this.element.style.display="block";this.hidden=false;if(this.isPopup){window._dynarch_popupCalendar=this;Calendar.addEvent(document,"keydown",Calendar._keyEvent);Calendar.addEvent(document,"keypress",Calendar._keyEvent);
Calendar.addEvent(document,"mousedown",Calendar._checkCalendar)}this.hideShowCovered()};Calendar.prototype.hide=function(){if(this.isPopup){Calendar.removeEvent(document,"keydown",Calendar._keyEvent);Calendar.removeEvent(document,"keypress",Calendar._keyEvent);Calendar.removeEvent(document,"mousedown",Calendar._checkCalendar)}this.element.style.display="none";this.hidden=true;this.hideShowCovered()};Calendar.prototype.showAt=function(a,h){var e=this.element.style;e.left=a+"px";e.top=h+"px";this.show()};
Calendar.prototype.showAtElement=function(a,h){var e=this,f=Calendar.getAbsolutePos(a);if(!h||typeof h!="string"){this.showAt(f.x,f.y+a.offsetHeight);return true}this.element.style.display="block";Calendar.continuation_for_the_fucking_khtml_browser=function(){var j=e.element.offsetWidth,b=e.element.offsetHeight;e.element.style.display="none";var c=h.substr(0,1),g="l";if(h.length>1)g=h.substr(1,1);switch(c){case "T":f.y-=b;break;case "B":f.y+=a.offsetHeight;break;case "C":f.y+=(a.offsetHeight-b)/2;
break;case "t":f.y+=a.offsetHeight-b}switch(g){case "L":f.x-=j;break;case "R":f.x+=a.offsetWidth;break;case "C":f.x+=(a.offsetWidth-j)/2;break;case "l":f.x+=a.offsetWidth-j}f.width=j;f.height=b+40;e.monthsCombo.style.display="none";if(f.x<0)f.x=0;if(f.y<0)f.y=0;j=document.createElement("div");b=j.style;b.position="absolute";b.right=b.bottom=b.width=b.height="0px";document.body.appendChild(j);b=Calendar.getAbsolutePos(j);document.body.removeChild(j);if(Calendar.is_ie){b.y+=document.body.scrollTop;
b.x+=document.body.scrollLeft}else{b.y+=window.scrollY;b.x+=window.scrollX}j=f.x+f.width-b.x;if(j>0)f.x-=j;j=f.y+f.height-b.y;if(j>0)f.y-=j;e.showAt(f.x,f.y)};Calendar.is_khtml?setTimeout("Calendar.continuation_for_the_fucking_khtml_browser()",10):Calendar.continuation_for_the_fucking_khtml_browser()};Calendar.prototype.setDateFormat=function(a){this.dateFormat=a};Calendar.prototype.setTtDateFormat=function(a){this.ttDateFormat=a};
Calendar.prototype.parseDate=function(a,h){if(!h)h=this.dateFormat;this.setDate(Date.parseDate(a,h))};
Calendar.prototype.hideShowCovered=function(){function a(v){var w=v.style.visibility;w||(w=document.defaultView&&typeof document.defaultView.getComputedStyle=="function"?Calendar.is_khtml?"":document.defaultView.getComputedStyle(v,"").getPropertyValue("visibility"):v.currentStyle?v.currentStyle.visibility:"");return w}if(Calendar.is_ie||Calendar.is_opera){var h=["applet","iframe","select"],e=this.element,f=Calendar.getAbsolutePos(e),j=f.x,b=e.offsetWidth+j,c=f.y;e=e.offsetHeight+c;for(var g=h.length;g>
0;)for(var k=document.getElementsByTagName(h[--g]),m=null,o=k.length;o>0;){m=k[--o];f=Calendar.getAbsolutePos(m);var n=f.x,p=m.offsetWidth+n;f=f.y;var t=m.offsetHeight+f;if(this.hidden||n>b||p<j||f>e||t<c){if(!m.__msh_save_visibility)m.__msh_save_visibility=a(m);m.style.visibility=m.__msh_save_visibility}else{if(!m.__msh_save_visibility)m.__msh_save_visibility=a(m);m.style.visibility="hidden"}}}};
Calendar.prototype._displayWeekdays=function(){for(var a=this.firstDayOfWeek,h=this.firstdayname,e=Calendar._TT.WEEKEND,f=0;f<7;++f){h.className="day name";var j=(f+a)%7;if(f){h.ttip=Calendar._TT.DAY_FIRST.replace("%s",Calendar._DN[j]);h.navtype=100;h.calendar=this;h.fdow=j;Calendar._add_evs(h)}e.indexOf(j.toString())!=-1&&Calendar.addClass(h,"weekend");h.innerHTML=Calendar._SDN[(f+a)%7];h=h.nextSibling}};
Calendar.prototype._hideCombos=function(){this.monthsCombo.style.display="none";this.yearsCombo.style.display="none"};
Calendar.prototype._dragStart=function(a){if(!this.dragging){this.dragging=true;var h;if(Calendar.is_ie){h=window.event.clientY+document.body.scrollTop;a=window.event.clientX+document.body.scrollLeft}else{h=a.clientY+window.scrollY;a=a.clientX+window.scrollX}var e=this.element.style;this.xOffs=a-parseInt(e.left);this.yOffs=h-parseInt(e.top);with(Calendar){addEvent(document,"mousemove",calDragIt);addEvent(document,"mouseup",calDragEnd)}}};Date._MD=[31,28,31,30,31,30,31,31,30,31,30,31];
Date.SECOND=1E3;Date.MINUTE=60*Date.SECOND;Date.HOUR=60*Date.MINUTE;Date.DAY=24*Date.HOUR;Date.WEEK=7*Date.DAY;
Date.parseDate=function(a,h){var e=new Date,f=0,j=-1,b=0,c=a.split(/\W+/),g=h.match(/%./g),k=0,m=0,o=0,n=0;for(k=0;k<c.length;++k)if(c[k])switch(g[k]){case "%d":case "%e":b=parseInt(c[k],10);break;case "%m":j=parseInt(c[k],10)-1;break;case "%Y":case "%y":f=parseInt(c[k],10);f<100&&(f+=f>29?1900:2E3);break;case "%b":case "%B":for(m=0;m<12;++m)if(Calendar._MN[m].substr(0,c[k].length).toLowerCase()==c[k].toLowerCase()){j=m;break}break;case "%H":case "%I":case "%k":case "%l":o=parseInt(c[k],10);break;
case "%P":case "%p":if(/pm/i.test(c[k])&&o<12)o+=12;else if(/am/i.test(c[k])&&o>=12)o-=12;break;case "%M":n=parseInt(c[k],10)}if(isNaN(f))f=e.getFullYear();if(isNaN(j))j=e.getMonth();if(isNaN(b))b=e.getDate();if(isNaN(o))o=e.getHours();if(isNaN(n))n=e.getMinutes();if(f!=0&&j!=-1&&b!=0)return new Date(f,j,b,o,n,0);f=0;j=-1;for(k=b=0;k<c.length;++k)if(c[k].search(/[a-zA-Z]+/)!=-1){g=-1;for(m=0;m<12;++m)if(Calendar._MN[m].substr(0,c[k].length).toLowerCase()==c[k].toLowerCase()){g=m;break}if(g!=-1){if(j!=
-1)b=j+1;j=g}}else if(parseInt(c[k],10)<=12&&j==-1)j=c[k]-1;else if(parseInt(c[k],10)>31&&f==0){f=parseInt(c[k],10);f<100&&(f+=f>29?1900:2E3)}else if(b==0)b=c[k];if(f==0)f=e.getFullYear();if(j!=-1&&b!=0)return new Date(f,j,b,o,n,0);return e};Date.prototype.getMonthDays=function(a){var h=this.getFullYear();if(typeof a=="undefined")a=this.getMonth();return 0==h%4&&(0!=h%100||0==h%400)&&a==1?29:Date._MD[a]};
Date.prototype.getDayOfYear=function(){var a=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0),h=new Date(this.getFullYear(),0,0,0,0,0);return Math.floor((a-h)/Date.DAY)};Date.prototype.getWeekNumber=function(){var a=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0),h=a.getDay();a.setDate(a.getDate()-(h+6)%7+3);h=a.valueOf();a.setMonth(0);a.setDate(4);return Math.round((h-a.valueOf())/6048E5)+1};
Date.prototype.equalsTo=function(a){return this.getFullYear()==a.getFullYear()&&this.getMonth()==a.getMonth()&&this.getDate()==a.getDate()&&this.getHours()==a.getHours()&&this.getMinutes()==a.getMinutes()};Date.prototype.setDateOnly=function(a){a=new Date(a);this.setDate(1);this.setFullYear(a.getFullYear());this.setMonth(a.getMonth());this.setDate(a.getDate())};
Date.prototype.print=function(a){var h=this.getMonth(),e=this.getDate(),f=this.getFullYear(),j=this.getWeekNumber(),b=this.getDay(),c={},g=this.getHours(),k=g>=12,m=k?g-12:g,o=this.getDayOfYear();if(m==0)m=12;var n=this.getMinutes(),p=this.getSeconds();c["%a"]=Calendar._SDN[b];c["%A"]=Calendar._DN[b];c["%b"]=Calendar._SMN[h];c["%B"]=Calendar._MN[h];c["%C"]=1+Math.floor(f/100);c["%d"]=e<10?"0"+e:e;c["%e"]=e;c["%H"]=g<10?"0"+g:g;c["%I"]=m<10?"0"+m:m;c["%j"]=o<100?o<10?"00"+o:"0"+o:o;c["%k"]=g;c["%l"]=
m;c["%m"]=h<9?"0"+(1+h):1+h;c["%M"]=n<10?"0"+n:n;c["%n"]="\n";c["%p"]=k?"PM":"AM";c["%P"]=k?"pm":"am";c["%s"]=Math.floor(this.getTime()/1E3);c["%S"]=p<10?"0"+p:p;c["%t"]="\t";c["%U"]=c["%W"]=c["%V"]=j<10?"0"+j:j;c["%u"]=b+1;c["%w"]=b;c["%y"]=(""+f).substr(2,2);c["%Y"]=f;c["%%"]="%";h=/%./g;if(!Calendar.is_ie5&&!Calendar.is_khtml)return a.replace(h,function(t){return c[t]||t});e=a.match(h);for(f=0;f<e.length;f++)if(j=c[e[f]]){h=RegExp(e[f],"g");a=a.replace(h,j)}return a};
Date.prototype.__msh_oldSetFullYear=Date.prototype.setFullYear;Date.prototype.setFullYear=function(a){var h=new Date(this);h.__msh_oldSetFullYear(a);h.getMonth()!=this.getMonth()&&this.setDate(28);this.__msh_oldSetFullYear(a)};window._dynarch_popupCalendar=null;Calendar._DN=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];Calendar._SDN=["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"];Calendar._FD=0;
Calendar._MN=["January","February","March","April","May","June","July","August","September","October","November","December"];Calendar._SMN=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];Calendar._TT={};Calendar._TT.INFO="About the calendar";
Calendar._TT.ABOUT="DHTML Date/Time Selector\n(c) dynarch.com 2002-2005 / Author: Mihai Bazon\nFor latest version visit: http://www.dynarch.com/projects/calendar/\nDistributed under GNU LGPL.  See http://gnu.org/licenses/lgpl.html for details.\n\nDate selection:\n- Use the \u00ab, \u00bb buttons to select year\n- Use the "+String.fromCharCode(8249)+", "+String.fromCharCode(8250)+" buttons to select month\n- Hold mouse button on any of the above buttons for faster selection.";
Calendar._TT.ABOUT_TIME="\n\nTime selection:\n- Click on any of the time parts to increase it\n- or Shift-click to decrease it\n- or click and drag for faster selection.";Calendar._TT.PREV_YEAR="Prev. year (hold for menu)";Calendar._TT.PREV_MONTH="Prev. month (hold for menu)";Calendar._TT.GO_TODAY="Go Today";Calendar._TT.NEXT_MONTH="Next month (hold for menu)";Calendar._TT.NEXT_YEAR="Next year (hold for menu)";Calendar._TT.SEL_DATE="Select date";Calendar._TT.DRAG_TO_MOVE="Drag to move";
Calendar._TT.PART_TODAY=" (today)";Calendar._TT.DAY_FIRST="Display %s first";Calendar._TT.WEEKEND="0,6";Calendar._TT.CLOSE="Close";Calendar._TT.TODAY="Today";Calendar._TT.TIME_PART="(Shift-)Click or drag to change value";Calendar._TT.DEF_DATE_FORMAT="%Y-%m-%d";Calendar._TT.TT_DATE_FORMAT="%a, %b %e";Calendar._TT.WK="wk";Calendar._TT.TIME="Time:";
Calendar.setup=function(a){function h(c,g){if(typeof a[c]=="undefined")a[c]=g}function e(c){var g=c.params,k=c.dateClicked||g.electric;if(k&&g.inputField){g.inputField.value=c.date.print(g.ifFormat);if(typeof g.inputField.onchange=="function")g.inputField.onchange()}if(k&&g.displayArea)g.displayArea.innerHTML=c.date.print(g.daFormat);if(k&&typeof g.onUpdate=="function")g.onUpdate(c);k&&g.flat&&typeof g.flatCallback=="function"&&g.flatCallback(c);k&&g.singleClick&&c.dateClicked&&c.callCloseHandler()}
h("inputField",null);h("displayArea",null);h("button",null);h("eventName","click");h("ifFormat","%Y/%m/%d");h("daFormat","%Y/%m/%d");h("singleClick",true);h("disableFunc",null);h("dateStatusFunc",a.disableFunc);h("dateText",null);h("firstDay",null);h("align","Br");h("range",[1900,2999]);h("weekNumbers",true);h("flat",null);h("flatCallback",null);h("onSelect",null);h("onClose",null);h("onUpdate",null);h("date",null);h("showsTime",false);h("timeFormat","24");h("electric",true);h("step",2);h("position",
null);h("cache",false);h("showOthers",false);h("multiple",null);var f=["inputField","displayArea","button"],j;for(j in f)if(typeof a[f[j]]=="string")a[f[j]]=document.getElementById(a[f[j]]);if(!(a.flat||a.multiple||a.inputField||a.displayArea||a.button)){alert("Calendar.setup:\n  Nothing to setup (no fields found).  Please check your code");return false}if(a.flat!=null){if(typeof a.flat=="string")a.flat=document.getElementById(a.flat);if(!a.flat){alert("Calendar.setup:\n  Flat specified but can't find parent.");
return false}var b=new Calendar(a.firstDay,a.date,a.onSelect||e);b.showsOtherMonths=a.showOthers;b.showsTime=a.showsTime;b.time24=a.timeFormat=="24";b.params=a;b.weekNumbers=a.weekNumbers;b.setRange(a.range[0],a.range[1]);b.setDateStatusHandler(a.dateStatusFunc);b.getDateText=a.dateText;a.ifFormat&&b.setDateFormat(a.ifFormat);a.inputField&&typeof a.inputField.value=="string"&&b.parseDate(a.inputField.value);b.create(a.flat);b.show();return false}(a.button||a.displayArea||a.inputField)["on"+a.eventName]=
function(){var c=a.inputField||a.displayArea,g=a.inputField?a.ifFormat:a.daFormat,k=false,m=window.calendar;if(c)a.date=Date.parseDate(c.value||c.innerHTML,g);if(m&&a.cache){a.date&&m.setDate(a.date);m.hide()}else{window.calendar=m=new Calendar(a.firstDay,a.date,a.onSelect||e,a.onClose||function(p){p.hide()});m.showsTime=a.showsTime;m.time24=a.timeFormat=="24";m.weekNumbers=a.weekNumbers;k=true}if(a.multiple){m.multiple={};for(c=a.multiple.length;--c>=0;){var o=a.multiple[c],n=o.print("%Y%m%d");m.multiple[n]=
o}}m.showsOtherMonths=a.showOthers;m.yearStep=a.step;m.setRange(a.range[0],a.range[1]);m.params=a;m.setDateStatusHandler(a.dateStatusFunc);m.getDateText=a.dateText;m.setDateFormat(g);k&&m.create();m.refresh();a.position?m.showAt(a.position[0],a.position[1]):m.showAtElement(a.button||a.displayArea||a.inputField,a.align);return false};return b};
$(document).ready(function(){function a(){try{e.abort()}catch(j){}$("#TotalQuantity").remove();$("#inv_quantity_ajax_throbber").length==0&&$('[name = "quantity"]').after('<div id="inv_quantity_ajax_throbber" class="ajax_throbber" style="float:right"/>');url="/eden/inv/inv_item_quantity/";url+=$('[name = "inv_item_id"]').val();e=$.getJSON(url,function(b){var c=b.inv_inv_item.quantity;b=b.supply_item_pack.quantity;var g=$('[name = "item_pack_id"] option:selected').text(),k=/\(([0-9]*)\sx/.exec(g);TotalQuantity=
'<span id = "TotalQuantity"> / '+(c*b/(k==null?1:k[1])).toFixed(2)+" "+g+" ("+S3.i18n.in_inv+")</span>";$("#inv_quantity_ajax_throbber").remove();$('[name = "quantity"]').after(TotalQuantity)})}function h(){try{e.abort()}catch(j){}var b=$('[name $= "item_id"]'),c=$('[name = "item_pack_id"]');$('[id$="item_pack_id__row1"]').show();$('[id$="item_pack_id__row"]').show();$("#item_pack_ajax_throbber").length==0&&c.after('<div id="item_pack_ajax_throbber" class="ajax_throbber style="display:inline;"/>');
c.hide();var g;g=$('[name = "item_id"]').length!=0?S3.Ap.concat("/supply/item_pack.json?item_pack.item_id=",b.val()):S3.Ap.concat("/inv/inv_item_packs/",b.val());e=$.ajax({url:g,dataType:"json",context:b,success:function(k){var m="",o="";if(k.length==0)m+='<option value="">'+S3.i18n.no_packs+"</options>";else{for(var n=0;n<k.length;n++)if(k[n].quantity==1){o=k[n].name;break}for(n=0;n<k.length;n++){m+='<option value="'+k[n].id+'">';m+=k[n].quantity==1?k[n].name:k[n].name+" ("+k[n].quantity+" x "+o+
")";m+="</option>"}}c.html(m).val(1).show();href=$("#item_pack_add").attr("href")+"&item_id="+$('[name = "item_id"]').val();$("#item_pack_add").attr("href",href).show();$("#item_pack_ajax_throbber").remove();this.attr("name")=="inv_item_id"&&a()}})}var e;$("#inv_send_item_item_pack_id").change(a);var f=$('[name $= "item_id"]').val();if(f==""|f==undefined){$('[id$="item_pack_id__row1"]').hide();$('[id$="item_pack_id__row"]').hide()}else h();$('[name $= "item_id"]').change(h);$(".quantity.ajax_more").live("click",
function(j){j.preventDefault();j=$(this);var b,c;if(j.hasClass("collapsed")){if(j.hasClass("fulfil")){c="inv";b="recv"}else if(j.hasClass("transit")){b="send";c="inv"}else if(j.hasClass("commit")){b="commit";c="req"}j.after('<div class="ajax_throbber quantity_req_ajax_throbber"/>').removeClass("collapsed").addClass("expanded");var g=/req_item\/(.*)\//i.exec($(".action-btn",j.parent().parent().parent()).attr("href"))[1];g=S3.Ap.concat("/",c,"/",b,"_item_json/",g);$.ajax({url:g,dataType:"json",context:j,
success:function(k){RecvTable='<table class="recv_table">';for(i=0;i<k.length;i++){RecvTable+="<tr><td>";if(i==0)RecvTable+=k[0].id;else{RecvURL=S3.Ap.concat("/",c,"/",b,"/",k[i].id);RecvTable+="<a href = '"+RecvURL+"'>";RecvTable+=k[i].datetime!=null?k[i].datetime.substring(0,10)+"</a>":" - </a>"}RecvTable+="</td><td>"+k[i].quantity+"</td></tr>"}RecvTable+="</table>";$(".quantity_req_ajax_throbber",this.parent()).remove();this.parent().after(RecvTable)}})}else{j.removeClass("expanded").addClass("collapsed");
$(".recv_table",j.parent().parent()).remove()}})});
(function(a,h){function e(x,G){x=x?' id="'+n+x+'"':"";return a("<div"+x+(G?' style="'+G+'"':"")+"/>")}function f(x,G){G=G==="x"?O.width():O.height();return typeof x==="string"?Math.round(/%/.test(x)?G/100*parseInt(x,10):parseInt(x,10)):x}function j(x){return s.photo||/\.(gif|png|jpg|jpeg|bmp)(?:\?([^#]*))?(?:#(\.*))?$/i.test(x)}function b(x){for(var G in x)if(a.isFunction(x[G])&&G.substring(0,2)!=="on")x[G]=x[G].call(X);x.rel=x.rel||X.rel||"nofollow";x.href=x.href||a(X).attr("href");x.title=x.title||
X.title;return x}function c(x,G){G&&G.call(X);a.event.trigger(x)}function g(){var x,G=n+"Slideshow_",D="click."+n,S,V;if(s.slideshow&&M[1]){S=function(){W.text(s.slideshowStop).unbind(D).bind(v,function(){if(K<M.length-1||s.loop)x=setTimeout(B.next,s.slideshowSpeed)}).bind(t,function(){clearTimeout(x)}).one(D+" "+w,V);H.removeClass(G+"off").addClass(G+"on");x=setTimeout(B.next,s.slideshowSpeed)};V=function(){clearTimeout(x);W.text(s.slideshowStart).unbind([v,t,w,D].join(" ")).one(D,S);H.removeClass(G+
"on").addClass(G+"off")};s.slideshowAuto?S():V()}}function k(x){if(!F){X=x;s=b(a.extend({},a.data(X,o)));M=a(X);K=0;if(s.rel!=="nofollow"){M=a("."+ka).filter(function(){return(a.data(this,o).rel||this.rel)===s.rel});K=M.index(X);if(K===-1){M=M.add(X);K=M.length-1}}if(!fa){fa=ma=true;H.show();if(s.returnFocus)try{X.blur();a(X).one(u,function(){try{this.focus()}catch(D){}})}catch(G){}Q.css({opacity:+s.opacity,cursor:s.overlayClose?"pointer":"auto"}).show();s.w=f(s.initialWidth,"x");s.h=f(s.initialHeight,
"y");B.position(0);E&&O.bind("resize."+C+" scroll."+C,function(){Q.css({width:O.width(),height:O.height(),top:O.scrollTop(),left:O.scrollLeft()})}).trigger("scroll."+C);c(p,s.onOpen);L.add(aa).add(ha).add(W).add(ea).hide();R.html(s.close).show()}B.load(true)}}var m={transition:"elastic",speed:300,width:false,initialWidth:"600",innerWidth:false,maxWidth:false,height:false,initialHeight:"450",innerHeight:false,maxHeight:false,scalePhotos:true,scrolling:true,inline:false,html:false,iframe:false,photo:false,
href:false,title:false,rel:false,opacity:0.9,preloading:true,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",open:false,returnFocus:true,loop:true,slideshow:false,slideshowAuto:true,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:false,onLoad:false,onComplete:false,onCleanup:false,onClosed:false,overlayClose:true,escKey:true,arrowKey:true},o="colorbox",n="cbox",p=n+"_open",t=n+"_load",v=n+"_complete",w=n+"_cleanup",u=n+
"_closed",r=n+"_purge",y=n+"_loaded",z=a.browser.msie&&!a.support.opacity,E=z&&a.browser.version<7,C=n+"_IE6",Q,H,A,I,Y,ca,ba,ja,M,O,N,J,T,ea,L,W,ha,aa,R,U,ia,ga,Z,X,K,s,fa,ma,F=false,B,ka=n+"Element";B=a.fn[o]=a[o]=function(x,G){var D=this,S;if(!D[0]&&D.selector)return D;x=x||{};if(G)x.onComplete=G;if(!D[0]||D.selector===undefined){D=a("<a/>");x.open=true}D.each(function(){a.data(this,o,a.extend({},a.data(this,o)||m,x));a(this).addClass(ka)});S=x.open;if(a.isFunction(S))S=S.call(D);S&&k(D[0]);return D};
B.init=function(){O=a(h);H=e().attr({id:o,"class":z?n+"IE":""});Q=e("Overlay",E?"position:absolute":"").hide();A=e("Wrapper");I=e("Content").append(N=e("LoadedContent","width:0; height:0; overflow:hidden"),T=e("LoadingOverlay").add(e("LoadingGraphic")),ea=e("Title"),L=e("Current"),ha=e("Next"),aa=e("Previous"),W=e("Slideshow").bind(p,g),R=e("Close"));A.append(e().append(e("TopLeft"),Y=e("TopCenter"),e("TopRight")),e(false,"clear:left").append(ca=e("MiddleLeft"),I,ba=e("MiddleRight")),e(false,"clear:left").append(e("BottomLeft"),
ja=e("BottomCenter"),e("BottomRight"))).children().children().css({"float":"left"});J=e(false,"position:absolute; width:9999px; visibility:hidden; display:none");a("body").prepend(Q,H.append(A,J));I.children().hover(function(){a(this).addClass("hover")},function(){a(this).removeClass("hover")}).addClass("hover");U=Y.height()+ja.height()+I.outerHeight(true)-I.height();ia=ca.width()+ba.width()+I.outerWidth(true)-I.width();ga=N.outerHeight(true);Z=N.outerWidth(true);H.css({"padding-bottom":U,"padding-right":ia}).hide();
ha.click(B.next);aa.click(B.prev);R.click(B.close);I.children().removeClass("hover");a("."+ka).live("click",function(x){if(!(x.button!==0&&typeof x.button!=="undefined"||x.ctrlKey||x.shiftKey||x.altKey)){x.preventDefault();k(this)}});Q.click(function(){s.overlayClose&&B.close()});a(document).bind("keydown",function(x){if(fa&&s.escKey&&x.keyCode===27){x.preventDefault();B.close()}if(fa&&s.arrowKey&&!ma&&M[1])if(x.keyCode===37&&(K||s.loop)){x.preventDefault();aa.click()}else if(x.keyCode===39&&(K<M.length-
1||s.loop)){x.preventDefault();ha.click()}})};B.remove=function(){H.add(Q).remove();a("."+ka).die("click").removeData(o).removeClass(ka)};B.position=function(x,G){function D(da){Y[0].style.width=ja[0].style.width=I[0].style.width=da.style.width;T[0].style.height=T[1].style.height=I[0].style.height=ca[0].style.height=ba[0].style.height=da.style.height}var S,V=Math.max(document.documentElement.clientHeight-s.h-ga-U,0)/2+O.scrollTop(),P=Math.max(O.width()-s.w-Z-ia,0)/2+O.scrollLeft();S=H.width()===s.w+
Z&&H.height()===s.h+ga?0:x;A[0].style.width=A[0].style.height="9999px";H.dequeue().animate({width:s.w+Z,height:s.h+ga,top:V,left:P},{duration:S,complete:function(){D(this);ma=false;A[0].style.width=s.w+Z+ia+"px";A[0].style.height=s.h+ga+U+"px";G&&G()},step:function(){D(this)}})};B.resize=function(x){if(fa){x=x||{};if(x.width)s.w=f(x.width,"x")-Z-ia;if(x.innerWidth)s.w=f(x.innerWidth,"x");N.css({width:s.w});if(x.height)s.h=f(x.height,"y")-ga-U;if(x.innerHeight)s.h=f(x.innerHeight,"y");if(!x.innerHeight&&
!x.height){x=N.wrapInner("<div style='overflow:auto'></div>").children();s.h=x.height();x.replaceWith(x.children())}N.css({height:s.h});B.position(s.transition==="none"?0:s.speed)}};B.prep=function(x){function G(V){var P,da,la,na,oa=M.length,pa=s.loop;B.position(V,function(){function qa(){z&&H[0].style.removeAttribute("filter")}if(fa){z&&D&&N.fadeIn(100);N.show();c(y);ea.show().html(s.title);if(oa>1){typeof s.current==="string"&&L.html(s.current.replace(/\{current\}/,K+1).replace(/\{total\}/,oa)).show();
ha[pa||K<oa-1?"show":"hide"]().html(s.next);aa[pa||K?"show":"hide"]().html(s.previous);P=K?M[K-1]:M[oa-1];la=K<oa-1?M[K+1]:M[0];s.slideshow&&W.show();if(s.preloading){na=a.data(la,o).href||la.href;da=a.data(P,o).href||P.href;na=a.isFunction(na)?na.call(la):na;da=a.isFunction(da)?da.call(P):da;if(j(na))a("<img/>")[0].src=na;if(j(da))a("<img/>")[0].src=da}}T.hide();s.transition==="fade"?H.fadeTo(S,1,function(){qa()}):qa();O.bind("resize."+n,function(){B.position(0)});c(v,s.onComplete)}})}if(fa){var D,
S=s.transition==="none"?0:s.speed;O.unbind("resize."+n);N.remove();N=e("LoadedContent").html(x);N.hide().appendTo(J.show()).css({width:function(){s.w=s.w||N.width();s.w=s.mw&&s.mw<s.w?s.mw:s.w;return s.w}(),overflow:s.scrolling?"auto":"hidden"}).css({height:function(){s.h=s.h||N.height();s.h=s.mh&&s.mh<s.h?s.mh:s.h;return s.h}()}).prependTo(I);J.hide();a("#"+n+"Photo").css({cssFloat:"none",marginLeft:"auto",marginRight:"auto"});if(E)a("select").not(H.find("select")).filter(function(){return this.style.visibility!==
"hidden"}).css({visibility:"hidden"}).one(w,function(){this.style.visibility="inherit"});s.transition==="fade"?H.fadeTo(S,0,function(){G(0)}):G(S)}};B.load=function(x){var G,D,S,V=B.prep;ma=true;X=M[K];x||(s=b(a.extend({},a.data(X,o))));c(r);c(t,s.onLoad);s.h=s.height?f(s.height,"y")-ga-U:s.innerHeight&&f(s.innerHeight,"y");s.w=s.width?f(s.width,"x")-Z-ia:s.innerWidth&&f(s.innerWidth,"x");s.mw=s.w;s.mh=s.h;if(s.maxWidth){s.mw=f(s.maxWidth,"x")-Z-ia;s.mw=s.w&&s.w<s.mw?s.w:s.mw}if(s.maxHeight){s.mh=
f(s.maxHeight,"y")-ga-U;s.mh=s.h&&s.h<s.mh?s.h:s.mh}G=s.href;T.show();if(s.inline){e().hide().insertBefore(a(G)[0]).one(r,function(){a(this).replaceWith(N.children())});V(a(G))}else if(s.iframe){H.one(y,function(){var P=a("<iframe frameborder='0' style='width:100%; height:100%; border:0; display:block'/>")[0];P.name=n+ +new Date;P.src=s.href;if(!s.scrolling)P.scrolling="no";if(z)P.allowtransparency="true";a(P).appendTo(N).one(r,function(){P.src="//about:blank"})});V(" ")}else if(s.html)V(s.html);
else if(j(G)){D=new Image;D.onload=function(){var P;D.onload=null;D.id=n+"Photo";a(D).css({border:"none",display:"block",cssFloat:"left"});if(s.scalePhotos){S=function(){D.height-=D.height*P;D.width-=D.width*P};if(s.mw&&D.width>s.mw){P=(D.width-s.mw)/D.width;S()}if(s.mh&&D.height>s.mh){P=(D.height-s.mh)/D.height;S()}}if(s.h)D.style.marginTop=Math.max(s.h-D.height,0)/2+"px";if(M[1]&&(K<M.length-1||s.loop))a(D).css({cursor:"pointer"}).click(B.next);if(z)D.style.msInterpolationMode="bicubic";setTimeout(function(){V(D)},
1)};setTimeout(function(){D.src=G},1)}else G&&J.load(G,function(P,da,la){V(da==="error"?"Request unsuccessful: "+la.statusText:a(this).children())})};B.next=function(){if(!ma){K=K<M.length-1?K+1:0;B.load()}};B.prev=function(){if(!ma){K=K?K-1:M.length-1;B.load()}};B.close=function(){if(fa&&!F){F=true;fa=false;c(w,s.onCleanup);O.unbind("."+n+" ."+C);Q.fadeTo("fast",0);H.stop().fadeTo("fast",0,function(){c(r);N.remove();H.add(Q).css({opacity:1,cursor:"auto"}).hide();setTimeout(function(){F=false;c(u,
s.onClosed)},1)})}};B.element=function(){return a(X)};B.settings=m;a(B.init)})(jQuery,this);
(function(a,h){function e(){this.debug=true;this._curInst=null;this._isInline=false;this._disabledInputs=[];this._inDialog=this._timepickerShowing=false;this._dialogClass="ui-timepicker-dialog";this._mainDivId="ui-timepicker-div";this._inlineClass="ui-timepicker-inline";this._currentClass="ui-timepicker-current";this._dayOverClass="ui-timepicker-days-cell-over";this.regional=[];this.regional[""]={hourText:"Hour",minuteText:"Minute",amPmText:["AM","PM"]};this._defaults={showOn:"focus",showAnim:"fadeIn",
showOptions:{},appendText:"",onSelect:null,onClose:null,timeSeparator:":",showPeriod:false,showLeadingZero:true,showMinutesLeadingZero:true,altField:"",defaultTime:""};a.extend(this._defaults,this.regional[""]);this.tpDiv=a('<div id="'+this._mainDivId+'" class="ui-timepicker ui-widget ui-helper-clearfix ui-corner-all " style="display: none"></div>')}function f(b,c){a.extend(b,c);for(var g in c)if(c[g]==null||c[g]==h)b[g]=c[g];return b}a.extend(a.ui,{timepicker:{version:"0.0.1"}});var j=(new Date).getTime();
a.extend(e.prototype,{markerClassName:"hasTimepicker",log:function(){this.debug&&console.log.apply("",arguments)},_widgetTimepicker:function(){return this.tpDiv},setDefaults:function(b){f(this._defaults,b||{});return this},_attachTimepicker:function(b,c){var g=null,k;for(k in this._defaults){var m=b.getAttribute("time:"+k);if(m){g=g||{};try{g[k]=eval(m)}catch(o){g[k]=m}}}k=b.nodeName.toLowerCase();m=k=="div"||k=="span";if(!b.id){this.uuid+=1;b.id="tp"+this.uuid}var n=this._newInst(a(b),m);n.settings=
a.extend({},c||{},g||{});if(k=="input")this._connectTimepicker(b,n);else m&&this._inlineTimepicker(b,n)},_newInst:function(b,c){return{id:b[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:b,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:c,tpDiv:!c?this.tpDiv:a('<div class="'+this._inlineClass+' ui-timepicker ui-widget  ui-helper-clearfix"></div>')}},_connectTimepicker:function(b,c){var g=a(b);c.append=a([]);c.trigger=a([]);if(!g.hasClass(this.markerClassName)){this._attachments(g,
c);g.addClass(this.markerClassName).keydown(this._doKeyDown).keyup(this._doKeyUp).bind("setData.timepicker",function(k,m,o){c.settings[m]=o}).bind("getData.timepicker",function(k,m){return this._get(c,m)});a.data(b,"timepicker",c)}},_doKeyDown:function(b){var c=true;a.timepicker._getInst(b.target)._keyEvent=true;if(a.timepicker._timepickerShowing)switch(b.keyCode){case 9:a.timepicker._hideTimepicker();c=false;break;case 27:a.timepicker._hideTimepicker();break;default:c=false}else if(b.keyCode==36&&
b.ctrlKey)a.timepicker._showTimepicker(this);else c=false;if(c){b.preventDefault();b.stopPropagation()}},_doKeyUp:function(b){b=a.timepicker._getInst(b.target);a.timepicker._setTimeFromField(b);a.timepicker._updateTimepicker(b)},_attachments:function(b,c){var g=this._get(c,"appendText"),k=this._get(c,"isRTL");c.append&&c.append.remove();if(g){c.append=a('<span class="'+this._appendClass+'">'+g+"</span>");b[k?"before":"after"](c.append)}b.unbind("focus",this._showTimepicker);c.trigger&&c.trigger.remove();
g=this._get(c,"showOn");if(g=="focus"||g=="both")b.focus(this._showTimepicker);if(g=="button"||g=="both"){g=this._get(c,"buttonText");var m=this._get(c,"buttonImage");c.trigger=a(this._get(c,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:m,alt:g,title:g}):a('<button type="button"></button>').addClass(this._triggerClass).html(m==""?g:a("<img/>").attr({src:m,alt:g,title:g})));b[k?"before":"after"](c.trigger);c.trigger.click(function(){a.timepicker._timepickerShowing&&a.timepicker._lastInput==
b[0]?a.timepicker._hideTimepicker():a.timepicker._showTimepicker(b[0]);return false})}},_inlineTimepicker:function(b,c){var g=a(b);if(!g.hasClass(this.markerClassName)){g.addClass(this.markerClassName).append(c.tpDiv).bind("setData.timepicker",function(k,m,o){c.settings[m]=o}).bind("getData.timepicker",function(k,m){return this._get(c,m)});a.data(b,"timepicker",c);this._setTimeFromField(c);this._updateTimepicker(c);c.tpDiv.show()}},_showTimepicker:function(b){b=b.target||b;if(b.nodeName.toLowerCase()!=
"input")b=a("input",b.parentNode)[0];if(!(a.timepicker._isDisabledTimepicker(b)||a.timepicker._lastInput==b)){var c=a.timepicker._getInst(b);a.timepicker._curInst&&a.timepicker._curInst!=c&&a.timepicker._curInst.tpDiv.stop(true,true);var g=a.timepicker._get(c,"beforeShow");f(c.settings,g?g.apply(b,[b,c]):{});c.lastVal=null;a.timepicker._lastInput=b;a.timepicker._setTimeFromField(c);if(a.timepicker._inDialog)b.value="";if(!a.timepicker._pos){a.timepicker._pos=a.timepicker._findPos(b);a.timepicker._pos[1]+=
b.offsetHeight}var k=false;a(b).parents().each(function(){k|=a(this).css("position")=="fixed";return!k});if(k&&a.browser.opera){a.timepicker._pos[0]-=document.documentElement.scrollLeft;a.timepicker._pos[1]-=document.documentElement.scrollTop}g={left:a.timepicker._pos[0],top:a.timepicker._pos[1]};a.timepicker._pos=null;c.tpDiv.css({position:"absolute",display:"block",top:"-1000px"});a.timepicker._updateTimepicker(c);c._hoursClicked=false;c._minutesClicked=false;g=a.timepicker._checkOffset(c,g,k);
c.tpDiv.css({position:a.timepicker._inDialog&&a.blockUI?"static":k?"fixed":"absolute",display:"none",left:g.left+"px",top:g.top+"px"});if(!c.inline){g=a.timepicker._get(c,"showAnim");var m=a.timepicker._get(c,"duration"),o=function(){a.timepicker._timepickerShowing=true;var n=a.timepicker._getBorders(c.tpDiv);c.tpDiv.find("iframe.ui-timepicker-cover").css({left:-n[0],top:-n[1],width:c.tpDiv.outerWidth(),height:c.tpDiv.outerHeight()})};c.tpDiv.zIndex(a(b).zIndex()+1);if(a.effects&&a.effects[g])c.tpDiv.show(g,
a.timepicker._get(c,"showOptions"),m,o);else c.tpDiv[g||"show"](g?m:null,o);if(!g||!m)o();c.input.is(":visible")&&!c.input.is(":disabled")&&c.input.focus();a.timepicker._curInst=c}}},_updateTimepicker:function(b){var c=this,g=a.timepicker._getBorders(b.tpDiv);b.tpDiv.empty().append(this._generateHTML(b)).find("iframe.ui-timepicker-cover").css({left:-g[0],top:-g[1],width:b.tpDiv.outerWidth(),height:b.tpDiv.outerHeight()}).end().find(".ui-timepicker td a").bind("mouseout",function(){a(this).removeClass("ui-state-hover");
this.className.indexOf("ui-timepicker-prev")!=-1&&a(this).removeClass("ui-timepicker-prev-hover");this.className.indexOf("ui-timepicker-next")!=-1&&a(this).removeClass("ui-timepicker-next-hover")}).bind("mouseover",function(){if(!c._isDisabledTimepicker(b.inline?b.tpDiv.parent()[0]:b.input[0])){a(this).parents(".ui-timepicker-calendar").find("a").removeClass("ui-state-hover");a(this).addClass("ui-state-hover");this.className.indexOf("ui-timepicker-prev")!=-1&&a(this).addClass("ui-timepicker-prev-hover");
this.className.indexOf("ui-timepicker-next")!=-1&&a(this).addClass("ui-timepicker-next-hover")}}).end().find("."+this._dayOverClass+" a").trigger("mouseover").end()},_generateHTML:function(b){var c,g="",k=this._get(b,"showPeriod")==true,m=this._get(b,"showLeadingZero")==true,o=this._get(b,"showMinutesLeadingZero")==true,n=this._get(b,"amPmText");g='<table class="ui-timepicker-table ui-widget-content ui-corner-all"><tr><td class="ui-timepicker-hours"><div class="ui-timepicker-title ui-widget-header ui-helper-clearfix ui-corner-all">'+
this._get(b,"hourText")+'</div><table class="ui-timepicker">';g+='<tr><th rowspan="2" class="periods">'+n[0]+"</th>";for(c=0;c<=5;c++)g+=this._generateHTMLHourCell(b,c,k,m);g+="</tr><tr>";for(c=6;c<=11;c++)g+=this._generateHTMLHourCell(b,c,k,m);g+='</tr><tr><th rowspan="2" class="periods">'+n[1]+"</th>";for(c=12;c<=17;c++)g+=this._generateHTMLHourCell(b,c,k,m);g+="</tr><tr>";for(c=18;c<=23;c++)g+=this._generateHTMLHourCell(b,c,k,m);g+='</tr></table></td><td class="ui-timepicker-minutes"><div class="ui-timepicker-title ui-widget-header ui-helper-clearfix ui-corner-all">'+
this._get(b,"minuteText")+'</div><table class="ui-timepicker"><tr>';for(c=0;c<15;c+=5)g+=this._generateHTMLMinuteCell(b,c,c<10&&o?"0"+c.toString():c.toString());g+="</tr><tr>";for(c=15;c<30;c+=5)g+=this._generateHTMLMinuteCell(b,c,c.toString());g+="</tr><tr>";for(c=30;c<45;c+=5)g+=this._generateHTMLMinuteCell(b,c,c.toString());g+="</tr><tr>";for(c=45;c<60;c+=5)g+=this._generateHTMLMinuteCell(b,c,c.toString());g+="</tr></table></td></tr></table>";return g},_generateHTMLHourCell:function(b,c,g,k){var m=
c;if(c>12&&g)m=c-12;if(m==0&&g)m=12;if(m<10&&k)m="0"+m;return'<td onclick="TP_jQuery_'+j+".timepicker.selectHours('#"+b.id+"', "+c.toString()+', this ); return false;" ondblclick="TP_jQuery_'+j+".timepicker.selectHours('#"+b.id+"', "+c.toString()+', this, true ); return false;" ><a href="#" class="ui-state-default '+(c==b.hours?"ui-state-active":"")+'">'+m.toString()+"</a></td>"},_generateHTMLMinuteCell:function(b,c,g){return'<td onclick="TP_jQuery_'+j+".timepicker.selectMinutes('#"+b.id+"', "+c.toString()+
', this ); return false;" ondblclick="TP_jQuery_'+j+".timepicker.selectMinutes('#"+b.id+"', "+c.toString()+', this, true ); return false;" ><a href="#" class="ui-state-default '+(c==b.minutes?"ui-state-active":"")+'" >'+g+"</a></td>"},_isDisabledTimepicker:function(b){if(!b)return false;for(var c=0;c<this._disabledInputs.length;c++)if(this._disabledInputs[c]==b)return true;return false},_checkOffset:function(b,c,g){var k=b.tpDiv.outerWidth(),m=b.tpDiv.outerHeight(),o=b.input?b.input.outerWidth():
0,n=b.input?b.input.outerHeight():0,p=document.documentElement.clientWidth+a(document).scrollLeft(),t=document.documentElement.clientHeight+a(document).scrollTop();c.left-=this._get(b,"isRTL")?k-o:0;c.left-=g&&c.left==b.input.offset().left?a(document).scrollLeft():0;c.top-=g&&c.top==b.input.offset().top+n?a(document).scrollTop():0;c.left-=Math.min(c.left,c.left+k>p&&p>k?Math.abs(c.left+k-p):0);c.top-=Math.min(c.top,c.top+m>t&&t>m?Math.abs(m+n):0);return c},_findPos:function(b){for(var c=this._get(this._getInst(b),
"isRTL");b&&(b.type=="hidden"||b.nodeType!=1);)b=b[c?"previousSibling":"nextSibling"];b=a(b).offset();return[b.left,b.top]},_getBorders:function(b){var c=function(g){return{thin:1,medium:2,thick:3}[g]||g};return[parseFloat(c(b.css("border-left-width"))),parseFloat(c(b.css("border-top-width")))]},_checkExternalClick:function(b){if(a.timepicker._curInst){b=a(b.target);b[0].id!=a.timepicker._mainDivId&&b.parents("#"+a.timepicker._mainDivId).length==0&&!b.hasClass(a.timepicker.markerClassName)&&!b.hasClass(a.timepicker._triggerClass)&&
a.timepicker._timepickerShowing&&!(a.timepicker._inDialog&&a.blockUI)&&a.timepicker._hideTimepicker()}},_hideTimepicker:function(b){var c=this._curInst;if(!(!c||b&&c!=a.data(b,"timepicker")))if(this._timepickerShowing){b=this._get(c,"showAnim");var g=this._get(c,"duration"),k=function(){a.timepicker._tidyDialog(c);this._curInst=null};if(a.effects&&a.effects[b])c.tpDiv.hide(b,a.timepicker._get(c,"showOptions"),g,k);else c.tpDiv[b=="slideDown"?"slideUp":b=="fadeIn"?"fadeOut":"hide"](b?g:null,k);b||
k();if(b=this._get(c,"onClose"))b.apply(c.input?c.input[0]:null,[c.input?c.input.val():"",c]);this._timepickerShowing=false;this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if(a.blockUI){a.unblockUI();a("body").append(this.tpDiv)}}this._inDialog=false}},_tidyDialog:function(b){b.tpDiv.removeClass(this._dialogClass).unbind(".ui-timepicker")},_getInst:function(b){try{return a.data(b,"timepicker")}catch(c){throw"Missing instance data for this timepicker";
}},_get:function(b,c){return b.settings[c]!==h?b.settings[c]:this._defaults[c]},_setTimeFromField:function(b){if(b.input.val()!=b.lastVal){var c=this._get(b,"defaultTime"),g=this._getCurrentTimeRounded(b);if(c!="")g=c;if(b.inline==false&&b.input.val()!="")g=b.input.val();c=b.lastVal=g;c=this.parseTime(b,c);b.hours=c.hours;b.minutes=c.minutes}},_getCurrentTimeRounded:function(b){var c=new Date;b=this._get(b,"timeSeparator");var g=c.getMinutes();g=Math.round(g/5)*5;return c.getHours().toString()+b+
g.toString()},parseTime:function(b,c){var g={};g.hours=-1;g.minutes=-1;var k=this._get(b,"timeSeparator"),m=this._get(b,"amPmText");k=c.indexOf(k);if(k==-1)return g;g.hours=parseInt(c.substr(0,k),10);g.minutes=parseInt(c.substr(k+1),10);k=this._get(b,"showPeriod")==true;var o=c.toUpperCase();if(g.hours<12&&k&&o.indexOf(m[1].toUpperCase())!=-1)g.hours+=12;if(g.hours==12&&k&&o.indexOf(m[0].toUpperCase())!=-1)g.hours=0;return g},selectHours:function(b,c,g,k){b=this._getInst(a(b)[0]);a(g).parents(".ui-timepicker-hours:first").find("a").removeClass("ui-state-active");
a(g).children("a").addClass("ui-state-active");b.hours=c;this._updateSelectedValue(b);b._hoursClicked=true;if(b._minutesClicked||k)a.timepicker._hideTimepicker()},selectMinutes:function(b,c,g,k){b=this._getInst(a(b)[0]);a(g).parents(".ui-timepicker-minutes:first").find("a").removeClass("ui-state-active");a(g).children("a").addClass("ui-state-active");b.minutes=c;this._updateSelectedValue(b);b._minutesClicked=true;if(b._hoursClicked||k)a.timepicker._hideTimepicker()},_updateSelectedValue:function(b){if(b.hours<
0||b.hours>23)b.hours=12;if(b.minutes<0||b.minutes>59)b.minutes=0;var c="",g=this._get(b,"showPeriod")==true,k=this._get(b,"showLeadingZero")==true,m=this._get(b,"amPmText"),o=b.minutes?b.minutes:0,n=b.hours?b.hours:0;n||(displayHoyrs=0);if(g){if(b.hours==0)n=12;if(b.hours<12)c=m[0];else{c=m[1];if(n>12)n-=12}}g=n.toString();if(k&&n<10)g="0"+g;k=o.toString();if(o<10)k="0"+k;o=g+this._get(b,"timeSeparator")+k;if(c.length>0)o+=" "+c;if(b.input){b.input.val(o);b.input.trigger("change")}if(c=this._get(b,
"onSelect"))c.apply(b.input?b.input[0]:null,[o,b]);this._updateAlternate(b,o);return o},_updateAlternate:function(b,c){var g=this._get(b,"altField");g&&a(g).each(function(){a(this).val(c)})}});a.fn.timepicker=function(b){if(!a.timepicker.initialized){a(document).mousedown(a.timepicker._checkExternalClick).find("body").append(a.timepicker.tpDiv);a.timepicker.initialized=true}var c=Array.prototype.slice.call(arguments,1);if(typeof b=="string"&&(b=="isDisabled"||b=="getDate"||b=="widget"))return a.timepicker["_"+
b+"Datepicker"].apply(a.timepicker,[this[0]].concat(c));if(b=="option"&&arguments.length==2&&typeof arguments[1]=="string")return a.timepicker["_"+b+"Datepicker"].apply(a.timepicker,[this[0]].concat(c));return this.each(function(){typeof b=="string"?a.timepicker["_"+b+"Datepicker"].apply(a.timepicker,[this].concat(c)):a.timepicker._attachTimepicker(this,b)})};a.timepicker=new e;a.timepicker.initialized=false;a.timepicker.uuid=(new Date).getTime();a.timepicker.version="1.8.6";window["TP_jQuery_"+j]=
a})(jQuery);
(function(a){a.cluetip={version:"1.0.7"};var h,e,f,j,b,c,g,k;a.fn.cluetip=function(n,p){if(typeof n=="object"){p=n;n=null}if(n=="destroy")return this.removeData("thisInfo").unbind(".cluetip");return this.each(function(t){function v(){return false}var w=this,u=a(this),r=a.extend(true,{},a.fn.cluetip.defaults,p||{},a.metadata?u.metadata():a.meta?u.data():{}),y=false,z=+r.cluezIndex;u.data("thisInfo",{title:w.title,zIndex:z});var E=false,C=0;if(!a("#cluetip").length){a('<div id="cluetip"><div id="cluetip-outer"><h3 id="cluetip-title"></h3><div id="cluetip-inner"></div></div><div id="cluetip-extra"></div><div id="cluetip-arrows" class="cluetip-arrows"></div></div>')[m](o).hide();h=
a("#cluetip").css({position:"absolute"});f=a("#cluetip-outer").css({position:"relative",zIndex:z});e=a("#cluetip-inner");j=a("#cluetip-title");b=a("#cluetip-arrows");c=a('<div id="cluetip-waitimage"></div>').css({position:"absolute"}).insertBefore(h).hide()}var Q=r.dropShadow?+r.dropShadowSteps:0;if(!g){g=a([]);for(var H=0;H<Q;H++)g=g.add(a("<div></div>").css({zIndex:z-1,opacity:0.1,top:1+H,left:1+H}));g.css({position:"absolute",backgroundColor:"#000"}).prependTo(h)}var A=u.attr(r.attribute),I=r.cluetipClass;
if(!A&&!r.splitTitle&&!n)return true;if(r.local&&r.localPrefix)A=r.localPrefix+A;r.local&&r.hideLocal&&a(A+":first").hide();var Y=parseInt(r.topOffset,10),ca=parseInt(r.leftOffset,10),ba,ja,M=isNaN(parseInt(r.height,10))?"auto":/\D/g.test(r.height)?r.height:r.height+"px",O,N,J,T,ea,L=parseInt(r.width,10)||275,W=L+(parseInt(h.css("paddingLeft"),10)||0)+(parseInt(h.css("paddingRight"),10)||0)+Q,ha=this.offsetWidth,aa,R,U,ia,ga,Z=r.attribute!="title"?u.attr(r.titleAttribute):"";if(r.splitTitle){if(Z==
undefined)Z="";ga=Z.split(r.splitTitle);Z=ga.shift()}if(r.escapeTitle)Z=Z.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;");var X=function(F){if(!r.onActivate(u))return false;E=true;h.removeClass().css({width:L});A==u.attr("href")&&u.css("cursor",r.cursor);r.hoverClass&&u.addClass(r.hoverClass);N=u.offset().top;aa=u.offset().left;U=F.pageX;T=F.pageY;if(w.tagName.toLowerCase()!="area"){O=a(document).scrollTop();ia=a(window).width()}if(r.positionBy=="fixed"){R=ha+aa+ca;h.css({left:R})}else{R=
ha>aa&&aa>W||aa+ha+W+ca>ia?aa-W-ca:ha+aa+ca;if(w.tagName.toLowerCase()=="area"||r.positionBy=="mouse"||ha+W>ia)if(U+20+W>ia){h.addClass(" cluetip-"+I);R=U-W-ca>=0?U-W-ca-parseInt(h.css("marginLeft"),10)+parseInt(e.css("marginRight"),10):U-W/2}else R=U+ca;var B=R<0?F.pageY+Y:F.pageY;h.css({left:R>0&&r.positionBy!="bottomTop"?R:U+W/2>ia?ia/2-W/2:Math.max(U-W/2,0),zIndex:u.data("thisInfo").zIndex});b.css({zIndex:u.data("thisInfo").zIndex+1})}ja=a(window).height();if(n){if(typeof n=="function")n=n.call(w);
e.html(n);K(B)}else if(ga){F=ga.length;e.html(F?ga[0]:"");if(F>1)for(var ka=1;ka<F;ka++)e.append('<div class="split-body">'+ga[ka]+"</div>");K(B)}else if(!r.local&&A.indexOf("#")!==0)if(/\.(jpe?g|tiff?|gif|png)$/i.test(A)){e.html('<img src="'+A+'" alt="'+Z+'" />');K(B)}else if(y&&r.ajaxCache){e.html(y);K(B)}else{var x=r.ajaxSettings.beforeSend,G=r.ajaxSettings.error,D=r.ajaxSettings.success,S=r.ajaxSettings.complete;F=a.extend(true,{},r.ajaxSettings,{cache:false,url:A,beforeSend:function(V){x&&x.call(w,
V,h,e);f.children().empty();r.waitImage&&c.css({top:T+20,left:U+20,zIndex:u.data("thisInfo").zIndex-1}).show()},error:function(V,P){if(E)G?G.call(w,V,P,h,e):e.html("<i>sorry, the contents could not be loaded</i>")},success:function(V,P){y=r.ajaxProcess.call(w,V);if(E){D&&D.call(w,V,P,h,e);e.html(y)}},complete:function(V,P){S&&S.call(w,V,P,h,e);var da=e[0].getElementsByTagName("img");k=da.length;for(var la=0,na=da.length;la<na;la++)da[la].complete&&k--;if(k&&!a.browser.opera)a(da).bind("load error",
function(){k--;if(k<1){c.hide();E&&K(B)}});else{c.hide();E&&K(B)}}});a.ajax(F)}else if(r.local){F=a(A+(/#\S+$/.test(A)?"":":eq("+t+")")).clone(true).show();e.html(F);K(B)}},K=function(F){h.addClass("cluetip-"+I);if(r.truncate){var B=e.text().slice(0,r.truncate)+"...";e.html(B)}Z?j.show().html(Z):r.showTitle?j.show().html("&nbsp;"):j.hide();if(r.sticky){B=a('<div id="cluetip-close"><a href="#">'+r.closeText+"</a></div>");r.closePosition=="bottom"?B.appendTo(e):r.closePosition=="title"?B.prependTo(j):
B.prependTo(e);B.bind("click.cluetip",function(){fa();return false});r.mouseOutClose?h.bind("mouseleave.cluetip",function(){fa()}):h.unbind("mouseleave.cluetip")}B="";f.css({zIndex:u.data("thisInfo").zIndex,overflow:M=="auto"?"visible":"auto",height:M});ba=M=="auto"?Math.max(h.outerHeight(),h.height()):parseInt(M,10);J=N;ea=O+ja;if(r.positionBy=="fixed")J=N-r.dropShadowSteps+Y;else if(R<U&&Math.max(R,0)+W>U||r.positionBy=="bottomTop")if(N+ba+Y>ea&&T-O>ba+Y){J=T-ba-Y;B="top"}else{J=T+Y;B="bottom"}else J=
N+ba+Y>ea?ba>=ja?O:ea-ba-Y:u.css("display")=="block"||w.tagName.toLowerCase()=="area"||r.positionBy=="mouse"?F-Y:N-r.dropShadowSteps;if(B=="")R<aa?B="left":B="right";h.css({top:J+"px"}).removeClass().addClass("clue-"+B+"-"+I).addClass(" cluetip-"+I);if(r.arrows){F=N-J-r.dropShadowSteps;b.css({top:/(left|right)/.test(B)&&R>=0&&F>0?F+"px":/(left|right)/.test(B)?0:""}).show()}else b.hide();g.hide();h.hide()[r.fx.open](r.fx.openSpeed||0);r.dropShadow&&g.css({height:ba,width:L,zIndex:u.data("thisInfo").zIndex-
1}).show();a.fn.bgiframe&&h.bgiframe();if(r.delayedClose>0)C=setTimeout(fa,r.delayedClose);r.onShow.call(w,h,e)},s=function(){E=false;c.hide();if(!r.sticky||/click|toggle/.test(r.activation)){fa();clearTimeout(C)}r.hoverClass&&u.removeClass(r.hoverClass)},fa=function(){f.parent().hide().removeClass();r.onHide.call(w,h,e);u.removeClass("cluetip-clicked");Z&&u.attr(r.titleAttribute,Z);u.css("cursor","");r.arrows&&b.css({top:""})};a(document).bind("hideCluetip",function(){fa()});if(/click|toggle/.test(r.activation))u.bind("click.cluetip",
function(F){if(h.is(":hidden")||!u.is(".cluetip-clicked")){X(F);a(".cluetip-clicked").removeClass("cluetip-clicked");u.addClass("cluetip-clicked")}else s(F);this.blur();return false});else if(r.activation=="focus"){u.bind("focus.cluetip",function(F){X(F)});u.bind("blur.cluetip",function(F){s(F)})}else{u[r.clickThrough?"unbind":"bind"]("click",v);var ma=function(F){if(r.tracking==true){var B=R-F.pageX,ka=J?J-F.pageY:N-F.pageY;u.bind("mousemove.cluetip",function(x){h.css({left:x.pageX+B,top:x.pageY+
ka})})}};a.fn.hoverIntent&&r.hoverIntent?u.hoverIntent({sensitivity:r.hoverIntent.sensitivity,interval:r.hoverIntent.interval,over:function(F){X(F);ma(F)},timeout:r.hoverIntent.timeout,out:function(F){s(F);u.unbind("mousemove.cluetip")}}):u.bind("mouseenter.cluetip",function(F){X(F);ma(F)}).bind("mouseleave.cluetip",function(F){s(F);u.unbind("mousemove.cluetip")});u.bind("mouseover.cluetip",function(){u.attr("title","")}).bind("mouseleave.cluetip",function(){u.attr("title",u.data("thisInfo").title)})}})};
a.fn.cluetip.defaults={width:275,height:"auto",cluezIndex:97,positionBy:"auto",topOffset:15,leftOffset:15,local:false,localPrefix:null,hideLocal:true,attribute:"rel",titleAttribute:"title",splitTitle:"",escapeTitle:false,showTitle:true,cluetipClass:"default",hoverClass:"",waitImage:true,cursor:"help",arrows:false,dropShadow:true,dropShadowSteps:6,sticky:false,mouseOutClose:false,activation:"hover",clickThrough:false,tracking:false,delayedClose:0,closePosition:"top",closeText:"Close",truncate:0,fx:{open:"show",
openSpeed:""},hoverIntent:{sensitivity:3,interval:50,timeout:0},onActivate:function(){return true},onShow:function(){},onHide:function(){},ajaxCache:true,ajaxProcess:function(n){return n=n.replace(/<(script|style|title)[^<]+<\/(script|style|title)>/gm,"").replace(/<(link|meta)[^>]+>/g,"")},ajaxSettings:{dataType:"html"},debug:false};var m="appendTo",o="body";a.cluetip.setup=function(n){if(n&&n.insertionType&&n.insertionType.match(/appendTo|prependTo|insertBefore|insertAfter/))m=n.insertionType;if(n&&
n.insertionElement)o=n.insertionElement}})(jQuery);
jQuery&&function(a){function h(c,g,k){for(var m="",o=0;o<g.length;o++)if(g[o].optgroup){m+='<label class="optGroup">';m+=k.optGroupSelectable?'<input type="checkbox" class="optGroup" />'+g[o].optgroup:g[o].optgroup;m+='</label><div class="optGroupContainer">';m+=h(c,g[o].options,k);m+="</div>"}else{var n=g[o],p='<label><input type="checkbox" name="'+c+'[]" value="'+n.value+'"';if(n.selected)p+=' checked="checked"';p+=" />"+n.text+"</label>";m+=p}return m}function e(c){var g=a(this),k=g.next(".multiSelectOptions"),
m=g.data("config"),o=g.data("callback");k.html("");var n="";if(m.selectAll)n+='<label class="selectAll"><input type="checkbox" class="selectAll" />'+m.selectAllText+"</label>";n+=h(g.attr("id"),c,m);k.html(n);c=k.width();n=false;if(k.height()>m.listHeight){k.css("height",m.listHeight+"px");n=true}else k.css("height","");c=n&&c==k.width()?17:0;k.width()+c<g.outerWidth()?k.css("width",g.outerWidth()-2+"px"):k.css("width",k.width()+c+"px");a.fn.bgiframe&&g.next(".multiSelectOptions").bgiframe({width:k.width(),
height:k.height()});m.selectAll&&k.find("INPUT.selectAll").click(function(){k.find("INPUT:checkbox").attr("checked",a(this).attr("checked")).parent("LABEL").toggleClass("checked",a(this).attr("checked"))});if(m.optGroupSelectable){k.addClass("optGroupHasCheckboxes");k.find("INPUT.optGroup").click(function(){a(this).parent().next().find("INPUT:checkbox").attr("checked",a(this).attr("checked")).parent("LABEL").toggleClass("checked",a(this).attr("checked"))})}k.find("INPUT:checkbox").click(function(){a(this).parent("LABEL").toggleClass("checked",
a(this).attr("checked"));b.call(g);g.focus();a(this).parent().parent().hasClass("optGroupContainer")&&j.call(g,a(this).parent().parent().prev());o&&o(a(this))});k.each(function(){a(this).find("INPUT:checked").parent().addClass("checked")});b.call(g);m.optGroupSelectable&&k.find("LABEL.optGroup").each(function(){j.call(g,a(this))});k.find("LABEL:has(INPUT)").hover(function(){a(this).parent().find("LABEL").removeClass("hover");a(this).addClass("hover")},function(){a(this).parent().find("LABEL").removeClass("hover")});
g.keydown(function(p){var t=a(this).next(".multiSelectOptions");if(t.css("visibility")!="hidden"){if(p.keyCode==9){a(this).addClass("focus").trigger("click");a(this).focus().next(":input").focus();return true}if(p.keyCode==27||p.keyCode==37||p.keyCode==39)a(this).addClass("focus").trigger("click");if(p.keyCode==40||p.keyCode==38){var v=t.find("LABEL"),w=v.index(v.filter(".hover")),u=-1;if(w<0)t.find("LABEL:first").addClass("hover");else if(p.keyCode==40&&w<v.length-1)u=w+1;else if(p.keyCode==38&&
w>0)u=w-1;if(u>=0){a(v.get(w)).removeClass("hover");a(v.get(u)).addClass("hover");f(t)}return false}if(p.keyCode==13||p.keyCode==32){p=t.find("LABEL.hover INPUT:checkbox");p.attr("checked",!p.attr("checked")).parent("LABEL").toggleClass("checked",p.attr("checked"));p.hasClass("selectAll")&&t.find("INPUT:checkbox").attr("checked",p.attr("checked")).parent("LABEL").addClass("checked").toggleClass("checked",p.attr("checked"));b.call(g);o&&o(a(this));return false}if(p.keyCode>=33&&p.keyCode<=126){v=t.find("LABEL:startsWith("+
String.fromCharCode(p.keyCode)+")");var r=v.index(v.filter("LABEL.hover"));w=v.filter(function(y){return y>r});v=(w.length>=1?w:v).filter("LABEL:first");if(v.length==1){t.find("LABEL.hover").removeClass("hover");v.addClass("hover");f(t)}}}else{if(p.keyCode==38||p.keyCode==40||p.keyCode==13||p.keyCode==32){a(this).removeClass("focus").trigger("click");t.find("LABEL:first").addClass("hover");return false}if(p.keyCode==9){t.next(":input").focus();return true}}if(p.keyCode==13)return false})}function f(c){var g=
c.find("LABEL.hover").position().top+c.find("LABEL.hover").outerHeight();g>c.innerHeight()&&c.scrollTop(c.scrollTop()+g-c.innerHeight());c.find("LABEL.hover").position().top<0&&c.scrollTop(c.scrollTop()+c.find("LABEL.hover").position().top)}function j(c){if(a(this).data("config").optGroupSelectable){var g=true;a(c).next().find("INPUT:checkbox").each(function(){if(!a(this).attr("checked"))return g=false});a(c).find("INPUT.optGroup").attr("checked",g).parent("LABEL").toggleClass("checked",g)}}function b(){var c=
a(this),g=c.next(".multiSelectOptions"),k=c.data("config"),m=0,o=true,n="";g.find("INPUT:checkbox").not(".selectAll, .optGroup").each(function(){if(a(this).attr("checked")){m++;n=n+a(this).parent().text()+", "}else o=false});n=n.replace(/\s*\,\s*$/,"");if(m==0)c.find("span").html(k.noneSelected);else if(k.oneOrMoreSelected=="*"){c.find("span").html(n);c.attr("title",n)}else c.find("span").html(k.oneOrMoreSelected.replace("%",m));k.selectAll&&g.find("INPUT.selectAll").attr("checked",o).parent("LABEL").toggleClass("checked",
o)}a.extend(a.fn,{multiSelect:function(c,g){c||(c={});if(c.selectAll==undefined)c.selectAll=true;if(c.selectAllText==undefined)c.selectAllText="Select All";if(c.noneSelected==undefined)c.noneSelected="Select options";if(c.oneOrMoreSelected==undefined)c.oneOrMoreSelected="% selected";if(c.optGroupSelectable==undefined)c.optGroupSelectable=false;if(c.listHeight==undefined)c.listHeight=150;a(this).each(function(){var k=a(this),m='<a href="javascript:;" class="multiSelect"><span></span></a>';m+='<div class="multiSelectOptions" style="position: absolute; z-index: 99999; visibility: hidden;"></div>';
a(k).after(m);var o=a(k).next(".multiSelect");o.next(".multiSelectOptions");o.find("span").css("width",a(k).width()+"px");o.data("config",c);o.data("callback",g);var n=[];a(k).children().each(function(){if(this.tagName.toUpperCase()=="OPTGROUP"){var p=[];n.push({optgroup:a(this).attr("label"),options:p});a(this).children("OPTION").each(function(){a(this).val()!=""&&p.push({text:a(this).html(),value:a(this).val(),selected:a(this).attr("selected")})})}else this.tagName.toUpperCase()=="OPTION"&&a(this).val()!=
""&&n.push({text:a(this).html(),value:a(this).val(),selected:a(this).attr("selected")})});a(k).remove();o.attr("id",a(k).attr("id"));e.call(o,n);o.hover(function(){a(this).addClass("hover")},function(){a(this).removeClass("hover")}).click(function(){a(this).hasClass("active")?a(this).multiSelectOptionsHide():a(this).multiSelectOptionsShow();return false}).focus(function(){a(this).addClass("focus")}).blur(function(){a(this).removeClass("focus")});a(document).click(function(p){a(p.target).parents().andSelf().is(".multiSelectOptions")||
o.multiSelectOptionsHide()})})},multiSelectOptionsUpdate:function(c){e.call(a(this),c)},multiSelectOptionsHide:function(){a(this).removeClass("active").removeClass("hover").next(".multiSelectOptions").css("visibility","hidden")},multiSelectOptionsShow:function(){var c=a(this),g=c.next(".multiSelectOptions");c.data("config");a(".multiSelect").multiSelectOptionsHide();g.find("LABEL").removeClass("hover");c.addClass("active").next(".multiSelectOptions").css("visibility","visible");c.focus();c.next(".multiSelectOptions").scrollTop(0);
g=c.position();c.next(".multiSelectOptions").css({top:g.top+a(this).outerHeight()+"px"});c.next(".multiSelectOptions").css({left:g.left+"px"})},selectedValuesString:function(){var c="";a(this).next(".multiSelectOptions").find("INPUT:checkbox:checked").not(".optGroup, .selectAll").each(function(){c+=a(this).attr("value")+","});return c.replace(/\s*\,\s*$/,"")}});a.expr[":"].startsWith=function(c,g,k){g=k[3];if(!g)return false;return eval("/^[/s]*"+g+"/i").test(a(c).text())}}(jQuery);
var S3MultiselectWidgetFileCounter=0;
function S3MultiselectWidgetAddClick(a){var h=a.WidgetID,e=[/DummyDisplay0/g,/DummyDisplay1/g,/DummyDisplay2/g,/DummyDisplay3/g,/DummyDisplay4/g],f=[/DummyJSON0/g,/DummyJSON1/g,/DummyJSON2/g,/DummyJSON3/g,/DummyJSON4/g],j=$("#"+h+"_json").val(),b="{",c,g=true,k=a.NewRow,m="",o="";for(i=0;i<a.ColumnFields.length;i++){var n="#"+h+"_"+a.ColumnFields[i],p=$(n),t=$(n+"_auto_text").val();DisplayValue="";if(p.is("select")){c="'"+p.val()+"'";DisplayValue=$(n+" option:selected").text();p.val("")}else if(t!=
undefined){DisplayValue=t;c=$(n+"_auto_json").val();if(a.ColumnFields[i].slice(-3)=="_id"&&c==""){DisplayValue="";break}$(n+"_auto_text").val("");$(n+"_auto_json").val("");$(n+"_auto_edit").hide()}else if(p.attr("type")=="file"){DisplayValue=p.val();if(DisplayValue!=""){m=n;o=a.ColumnFields[i]+S3MultiselectWidgetFileCounter;c="'"+o+"'";S3MultiselectWidgetFileCounter++}}else{DisplayValue=p.val();p.val("");if(p.attr("class")=="currency")DisplayValue=c.replace("$","");DisplayValue=DisplayValue.replace(/'/g,
'"');c="'"+DisplayValue+"'"}if(DisplayValue!="")g=false;k=k.replace(e[i],DisplayValue);k=k.replace(f[i],c);b=b+"'"+a.ColumnFields[i]+"':"+c+","}b=b.slice(0,-1)+"}";if(!g&&!j.match(b)){if(j!="")j+=",";j+=b;$("#"+h+"_json").val(j);$(k).insertBefore("#"+a.WidgetID+"_input_row");if(m!=""){$(m).attr("id",o);$("#"+o).attr("name",o);$("#"+o).hide();$('<input class="upload" id="drrpp_framework_file_dummy_file" type="file" />').insertAfter("#"+o)}}}
function S3MultiselectWidgetDeleteClick(a,h){var e=h.WidgetID,f=$(a).attr("row_id");$("#"+h.DummyName).val();var j=$("#"+e+"_json").val();$(a).parent().parent().remove();if(f!="New"){if(j!="")j+=",";j=j+"{'id':'"+f+"','deleted':True},"}else{f="{";for(i=0;i<h.ColumnFields.length;i++)f=f+"'"+h.ColumnFields[i]+"':'"+$(a).attr(h.ColumnFields[i])+"',";f=f.slice(0,-1)+"}";j=j.replace(f,"")}j=j.replace(",,",",");if(j.slice(-1)==",")j=j.slice(0,-1);$("#"+e+"_json").val(j)}
(function(a,h){function e(f){return!a(f).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};if(!a.ui.version){a.extend(a.ui,{version:"1.8.11",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,
PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});a.fn.extend({_focus:a.fn.focus,focus:function(f,j){return typeof f==="number"?this.each(function(){var b=this;setTimeout(function(){a(b).focus();j&&j.call(b)},f)}):this._focus.apply(this,arguments)},scrollParent:function(){var f;f=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,
"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!f.length?a(document):f},zIndex:function(f){if(f!==h)return this.css("zIndex",f);if(this.length){f=a(this[0]);for(var j;f.length&&f[0]!==document;){j=f.css("position");
if(j==="absolute"||j==="relative"||j==="fixed"){j=parseInt(f.css("zIndex"),10);if(!isNaN(j)&&j!==0)return j}f=f.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(f){f.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});a.each(["Width","Height"],function(f,j){function b(m,o,n,p){a.each(c,function(){o-=parseFloat(a.curCSS(m,"padding"+this,true))||0;if(n)o-=parseFloat(a.curCSS(m,
"border"+this+"Width",true))||0;if(p)o-=parseFloat(a.curCSS(m,"margin"+this,true))||0});return o}var c=j==="Width"?["Left","Right"]:["Top","Bottom"],g=j.toLowerCase(),k={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+j]=function(m){if(m===h)return k["inner"+j].call(this);return this.each(function(){a(this).css(g,b(this,m)+"px")})};a.fn["outer"+j]=function(m,o){if(typeof m!=="number")return k["outer"+j].call(this,m);return this.each(function(){a(this).css(g,
b(this,m,true,o)+"px")})}});a.extend(a.expr[":"],{data:function(f,j,b){return!!a.data(f,b[3])},focusable:function(f){var j=f.nodeName.toLowerCase(),b=a.attr(f,"tabindex");if("area"===j){j=f.parentNode;b=j.name;if(!f.href||!b||j.nodeName.toLowerCase()!=="map")return false;f=a("img[usemap=#"+b+"]")[0];return!!f&&e(f)}return(/input|select|textarea|button|object/.test(j)?!f.disabled:"a"==j?f.href||!isNaN(b):!isNaN(b))&&e(f)},tabbable:function(f){var j=a.attr(f,"tabindex");return(isNaN(j)||j>=0)&&a(f).is(":focusable")}});
a(function(){var f=document.body,j=f.appendChild(j=document.createElement("div"));a.extend(j.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});a.support.minHeight=j.offsetHeight===100;a.support.selectstart="onselectstart"in j;f.removeChild(j).style.display="none"});a.extend(a.ui,{plugin:{add:function(f,j,b){f=a.ui[f].prototype;for(var c in b){f.plugins[c]=f.plugins[c]||[];f.plugins[c].push([j,b[c]])}},call:function(f,j,b){if((j=f.plugins[j])&&f.element[0].parentNode)for(var c=0;c<j.length;c++)f.options[j[c][0]]&&
j[c][1].apply(f.element,b)}},contains:function(f,j){return document.compareDocumentPosition?f.compareDocumentPosition(j)&16:f!==j&&f.contains(j)},hasScroll:function(f,j){if(a(f).css("overflow")==="hidden")return false;var b=j&&j==="left"?"scrollLeft":"scrollTop",c=false;if(f[b]>0)return true;f[b]=1;c=f[b]>0;f[b]=0;return c},isOverAxis:function(f,j,b){return f>j&&f<j+b},isOver:function(f,j,b,c,g,k){return a.ui.isOverAxis(f,b,g)&&a.ui.isOverAxis(j,c,k)}})}})(jQuery);var s3_gis_pullNext;
function s3_gis_dropdown_select(a,h){s3_gis_pullNext=false;if(a==s3_gis_maxlevel){$("#gis_location__label__row").removeClass("hidden").show();$("#gis_location___row").removeClass("hidden").show();$("#gis_location_").removeClass("hidden").show()}else{$("#gis_location_L"+(a+1)+"_label__row").removeClass("hidden").show();$("#gis_location_L"+(a+1)+"__row").removeClass("hidden").show();s3_gis_hide_dropdown(a+2)}var e=$("#gis_location_name").val(),f=$("#gis_location_lat").val(),j=$("#gis_location_lon").val(),
b=$("#gis_location_addr_street").val(),c=$("#gis_location_postcode").val();e=e||f||j||b||c?true:false;if((f=$("#gis_location_L"+a).val())||h){var g;$.getJSONS3(a==s3_gis_maxlevel?s3_gis_url+"/search.json?filter=%3D&field=level&value=nullnone&parent="+f:s3_gis_url+"/search.json?filter=%3D&field=level&value=L"+(a+1)+"&parent="+f,function(k){if(k.length==0)g=s3_gis_empty_set;else if(!h&&a!=s3_gis_maxlevel&&k.length==1){g=s3_gis_select_location;g+='<option selected="" value="'+k[0].id+'">'+k[0].name+
"</option>";s3_gis_pullNext=true}else{g=s3_gis_select_location;for(var m=0;m<k.length;m++)g+='<option value="'+k[m].id+'">'+k[m].name+"</option>"}a==s3_gis_maxlevel?$("#gis_location_").html(g):$("#gis_location_L"+(a+1)).html(g)},false,true);if(s3_gis_pullNext){f=$("#gis_location_L"+(a+1)).val();e||$("#"+s3_gis_location_id).val(f);s3_gis_dropdown_select(a+1)}else e||$("#"+s3_gis_location_id).val(f)}else if(a!=s3_gis_maxlevel){s3_gis_hide_dropdown(a+1);0==a&&!e&&$("#"+s3_gis_location_id).val("")}}
function s3_gis_hide_dropdown(a){for(l=a;l<=s3_gis_maxlevel;l+=1){$("#gis_location_L"+l+"_label__row").hide();$("#gis_location_L"+l+"__row").hide();$("#gis_location_L"+l).html(s3_gis_loading_locations)}if(a<parseInt(s3_gis_maxlevel)+2){$("#gis_location___row").hide();$("#gis_location__label__row").hide();$("#gis_location_details-btn").hide();$("#gis_location_").html(s3_gis_loading_locations)}}
function s3_gis_hide_details(){$("#gis_location_name_label").hide();$("#gis_location_name").hide();$("#gis_location_details_hide-btn").hide();$("#gis_location_addr_street_label").hide();$("#gis_location_addr_street_row").hide();$("#gis_location_postcode_label").hide();$("#gis_location_postcode_row").hide();$("#gis_location_map-btn").hide();$("#gis_location_advanced_div").hide()}
function s3_gis_show_details(){$("#gis_location_name_label").removeClass("hidden").show();$("#gis_location_name").removeClass("hidden").show();$("#gis_location_details_hide-btn").removeClass("hidden").show();$("#gis_location_addr_street_label").removeClass("hidden").show();$("#gis_location_addr_street_row").removeClass("hidden").show();$("#gis_location_postcode_label").removeClass("hidden").show();$("#gis_location_postcode_row").removeClass("hidden").show();$("#gis_location_map-btn").removeClass("hidden").show();
$("#gis_location_advanced_div").removeClass("hidden").show()}
function s3_gis_search(){$("#gis_location_search-btn-label").removeClass("hidden").show();$("#gis_location_autocomplete_div").removeClass("hidden").show();$("#gis_location_add-btn").removeClass("hidden").show();$("#gis_location_cancel-btn").hide();$("#gis_location_L0_label__row").hide();$("#gis_location_L0__row").hide();$("#gis_location_L1_label__row").hide();$("#gis_location_L1__row").hide();$("#gis_location_L2_label__row").hide();$("#gis_location_L2__row").hide();$("#gis_location_L3_label__row").hide();
$("#gis_location_L3__row").hide();$("#gis_location_L4_label__row").hide();$("#gis_location_L4__row").hide();$("#gis_location_L5_label__row").hide();$("#gis_location_L5__row").hide();$("#gis_location___row").hide();$("#gis_location__label__row").hide();$("#gis_location_details-btn").hide();s3_gis_hide_details()}
function s3_gis_add_new(){$("#gis_location_cancel-btn").removeClass("hidden").show();$("#gis_location_autocomplete_div").hide();$("#gis_location_search-btn-label").hide();$("#gis_location_search-btn").show();$("#gis_location_L0_label__row").show();$("#gis_location_L0__row").show();if($("#gis_location_L1").html()!=s3_gis_loading_locations){$("#gis_location_L1_label__row").show();$("#gis_location_L1__row").show()}if($("#gis_location_L2").html()!=s3_gis_loading_locations){$("#gis_location_L2_label__row").show();
$("#gis_location_L2__row").show()}if($("#gis_location_L3").html()!=s3_gis_loading_locations){$("#gis_location_L3_label__row").show();$("#gis_location_L3__row").show()}if($("#gis_location_L4").html()!=s3_gis_loading_locations){$("#gis_location_L4_label__row").show();$("#gis_location_L4__row").show()}if($("#gis_location_L5").html()!=s3_gis_loading_locations){$("#gis_location_L5_label__row").show();$("#gis_location_L5__row").show()}$("#gis_location__label__row").hide();$("#gis_location___row").hide();
navigator.geolocation&&$("#gis_location_geolocate-btn").removeClass("hidden").show();if(""!=S3.gis.uuid){$("body").data("uuid",S3.gis.uuid);S3.gis.uuid=""}var a=$("#gis_location_name").val(),h=$("#gis_location_addr_street").val(),e=$("#gis_location_postcode").val(),f=$("#gis_location_lat").val(),j=$("#gis_location_lat").val();$("body").data("name",a);$("body").data("addr_street",h);$("body").data("postcode",e);$("body").data("lat",f);$("body").data("lon",j);$("#gis_location_name").val("");$("#gis_location_addr_street").val("");
$("#gis_location_postcode").val("");$("#gis_location_lat").val("");$("#gis_location_lon").val("");s3_gis_show_details();$("#gis_location_details_hide-btn").hide()}
function s3_gis_cancel(){S3.gis.uuid=$("body").data("uuid");$("#gis_location_name").val($("body").data("name"));$("#gis_location_addr_street").val($("body").data("addr_street"));$("#gis_location_postcode").val($("body").data("postcode"));$("#gis_location_lat").val($("body").data("lat"));$("#gis_location_lon").val($("body").data("lon"));if($("#gis_location_").val()){$("#gis_location__label__row").show();$("#gis_location___row").show()}$("#gis_location_search-btn-label").hide();$("#gis_location_search-btn").show();
$("#gis_location_add-btn").show();$("#gis_location_details_hide-btn").show();s3_gis_hide_details()}function s3_gis_update_details(a){$.getJSONS3(s3_gis_url+"/search.json?filter=%3D&field=id&value="+a,function(h){if(h.length!=0){$("#gis_location_name").val(h[0].name);$("#gis_location_addr_street").val(h[0].addr_street);$("#gis_location_postcode").val(h[0].addr_postcode);$("#gis_location_lat").val(h[0].lat);$("#gis_location_lon").val(h[0].lon)}},false,true)}
function s3_gis_save_location(a,h,e,f,j){var b=$("#gis_location_L5").val();if(undefined==b||""==b){b=$("#gis_location_L4").val();if(undefined==b||""==b){b=$("#gis_location_L3").val();if(undefined==b||""==b){b=$("#gis_location_L2").val();if(undefined==b||""==b){b=$("#gis_location_L1").val();if(undefined==b||""==b)b=$("#gis_location_L0").val()}}}}a=""==S3.gis.uuid?s3_gis_url+"/create.url?name="+a:s3_gis_url+"/update.url?uuid="+S3.gis.uuid+"&name="+a;""==h||""==e||(a=a+"&lat="+h+"&lon="+e);if(""!=f)a=
a+"&addr_street="+f.replace(/\n/g,"%0d");if(""!=j)a=a+"&addr_postcode="+j;undefined==b||""==b||(a=a+"&parent="+b);$.ajax({async:false,url:a,dataType:"json",success:function(c){if(""==S3.gis.uuid&&c.status=="success"){c=c.message.split("=")[1];$("#"+s3_gis_location_id).val(c)}}})}function s3_gis_geolocate(a){var h=a.coords.latitude;a=a.coords.longitude;$("#gis_location_lat").val(h);$("#gis_location_lon").val(a)}var s3_gis_calcDone=false,s3_gis_calcAnswer;
function s3_gis_convertDD(){var a=$("#DDMMSS_deg").val(),h=$("#DDMMSS_min").val(),e=$("#DDMMSS_sec").val(),f=false;if(a=="")a=0;else if(isNaN(a)||a>180||a<-180){alert(s3_gis_degrees_validation_error);f=true}if(h=="")h=0;else if(isNaN(h)||h>60||h<0){alert(s3_gis_minutes_validation_error);f=true}if(e=="")e=0;else if(isNaN(e)||e>60||e<0){alert(s3_gis_seconds_validation_error);f=true}if(f==false){h=h*1+e/60;s3_gis_calcAnswer=a>0?a*1+h/60:a*1-h/60;$("#DDMMSS_dec").val(s3_gis_calcAnswer);s3_gis_calcDone=
true}}function s3_gis_convertGps(){var a=0,h=0;a=$("#gps_deg").val();h=$("#gps_min").val();var e=false;if(a=="")a=0;else if(isNaN(a)||a>180||a<-180){alert(s3_gis_degrees_validation_error);e=true}if(h=="")h=0;else if(isNaN(h)||h>60||h<0){alert(s3_gis_minutes_validation_error);e=true}if(e==false){s3_gis_calcAnswer=a>0?a*1+h/60:a*1-h/60;$("#gps_dec").val(s3_gis_calcAnswer);s3_gis_calcDone=true}}
function s3_gis_convertFillBack(a){if(s3_gis_calcDone==true){a==1?$("#gis_location_lat").attr("value",s3_gis_calcAnswer):$("#gis_location_lon").attr("value",s3_gis_calcAnswer);return true}else alert(s3_gis_no_calculations_error);return false}
$(function(){if(typeof s3_gis_location_id!="undefined"){$("#gis_location_L0").change(function(){s3_gis_dropdown_select(0)});$("#gis_location_L1").change(function(){s3_gis_dropdown_select(1)});$("#gis_location_L2").change(function(){s3_gis_dropdown_select(2)});$("#gis_location_L3").change(function(){s3_gis_dropdown_select(3)});$("#gis_location_L4").change(function(){s3_gis_dropdown_select(4)});$("#gis_location_").change(function(){var h=$(this).val();$("#"+s3_gis_location_id).val(h);s3_gis_update_details(h);
$("#gis_location__label__row").hide();$("#gis_location___row").hide();$("#gis_location_add-btn").hide();s3_gis_show_details()});$("#gis_location_search-btn").click(function(h){$(this).hide();s3_gis_search();h.preventDefault()});$("#gis_location_add-btn").click(function(h){$(this).hide();s3_gis_add_new();h.preventDefault()});$("#gis_location_cancel-btn").click(function(h){$(this).hide();s3_gis_cancel();h.preventDefault()});$("#gis_location_advanced_checkbox").change(function(h){if($("#gis_location_advanced_checkbox").is(":checked")){$("#gis_location_lat_label").removeClass("hidden").show();
$("#gis_location_lat_row").removeClass("hidden").show();$("#gis_location_lon_label").removeClass("hidden").show();$("#gis_location_lon_row").removeClass("hidden").show()}else{$("#gis_location_lat_label").hide();$("#gis_location_lat_row").hide();$("#gis_location_lon_label").hide();$("#gis_location_lon_row").hide()}h.preventDefault()});$("#gis_location_details-btn").click(function(h){$("#gis_location_add-btn").hide();$("#gis_location___row").hide();$("#gis_location__label__row").hide();$("#gis_location_details-btn").hide();
$("#gis_location_details_hide-btn").removeClass("hidden").show();s3_gis_show_details();h.preventDefault()});$("#gis_location_details_hide-btn").click(function(h){$("#gis_location_add-btn").removeClass("hidden").show();$("#gis_location___row").show();$("#gis_location__label__row").show();$("#gis_location_details-btn").removeClass("hidden").show();$("#gis_location_details_hide-btn").hide();s3_gis_hide_details();h.preventDefault()});$("#gis_location_geolocate-btn").click(function(h){navigator.geolocation.getCurrentPosition(s3_gis_geolocate);
h.preventDefault()});var a={val:$("#gis_location_autocomplete").val(),accept:false};$("#gis_location_autocomplete").autocomplete({source:s3_gis_url+"/search.json?filter=~&field=name&exclude_field=level&exclude_value=XX",minLength:2,search:function(){$("#gis_location_autocomplete_throbber").removeClass("hidden").show();return true},response:function(h,e,f){$("#gis_location_autocomplete_throbber").hide();return f},focus:function(h,e){$("#gis_location_autocomplete").val(e.item.name);return false},select:function(h,
e){$("#gis_location_autocomplete").val(e.item.name);$("#"+s3_gis_location_id).val(e.item.id);a.accept=true;$("ul.ui-autocomplete").hide();$("#gis_location_autocomplete_div").hide();$("#gis_location_search-btn-label").hide();$("#gis_location_search-btn").show();$("#gis_location_L0_label__row").show();$("#gis_location_L0__row").show();var f=e.item.path,j=e.item.id,b,c,g,k,m=[];switch(e.item.level){case "L0":$("#gis_location_L0").val(j);$("#"+s3_gis_location_id).val(j);s3_gis_dropdown_select(0);break;
case "L1":if(f){f=f.split("/");if(f.length==2&&f[1]==j)$("#gis_location_L0").val(f[0]);else{s3_gis_dropdown_select(0,true);$("#gis_location_L1").val(j);$("#"+s3_gis_location_id).val(j);break}}s3_gis_dropdown_select(0,true);$("#gis_location_L1").val(j);$("#"+s3_gis_location_id).val(j);s3_gis_dropdown_select(1);break;case "L2":if(f){f=f.split("/");if(f.length==3&&f[2]==j){$("#gis_location_L0").val(f[0]);b=f[1]}else if(f.length==2&&f[1]==j)if(undefined!=$("#gis_location_L0 option[value="+f[0]+"]")[0])$("#gis_location_L0").val(f[0]);
else b=f[0];else{s3_gis_dropdown_select(1,true);$("#gis_location_L2").val(j);$("#"+s3_gis_location_id).val(j);break}}s3_gis_dropdown_select(0,true);$("#gis_location_L1").val(b);s3_gis_dropdown_select(1,true);$("#gis_location_L2").val(j);$("#"+s3_gis_location_id).val(j);s3_gis_dropdown_select(2);break;case "L3":if(f){f=f.split("/");if(f.length==4&&f[3]==j){$("#gis_location_L0").val(f[0]);b=f[1];c=f[2]}else if(f.length==3&&f[2]==j)if(undefined!=$("#gis_location_L0 option[value="+f[0]+"]")[0]){$("#gis_location_L0").val(f[0]);
m=[f[1]]}else{b=f[0];c=f[1]}else if(f.length==2&&f[1]==j)if(undefined!=$("#gis_location_L0 option[value="+f[0]+"]")[0])$("#gis_location_L0").val(f[0]);else m=[f[0]];else{s3_gis_dropdown_select(2,true);$("#gis_location_L3").val(j);$("#"+s3_gis_location_id).val(j);break}}s3_gis_dropdown_select(0,true);if(m[0])if(undefined!=$("#gis_location_L1 option[value="+m[0]+"]")[0])b=m[0];$("#gis_location_L1").val(b);s3_gis_dropdown_select(1,true);if(m[0])if(undefined!=$("#gis_location_L2 option[value="+m[0]+"]")[0])c=
m[0];$("#gis_location_L2").val(c);s3_gis_dropdown_select(2,true);$("#gis_location_L3").val(j);$("#"+s3_gis_location_id).val(j);s3_gis_dropdown_select(3);break;case "L4":if(f){f=f.split("/");if(f.length==5&&f[4]==j){$("#gis_location_L0").val(f[0]);b=f[1];c=f[2];g=f[3]}else if(f.length==4&&f[3]==j)if(undefined!=$("#gis_location_L0 option[value="+f[0]+"]")[0]){$("#gis_location_L0").val(f[0]);m=[f[1],f[2]]}else m=[f[0],f[1],f[2]];else if(f.length==3&&f[2]==j)if(undefined!=$("#gis_location_L0 option[value="+
f[0]+"]")[0]){$("#gis_location_L0").val(f[0]);m=[f[1]]}else m=[f[0],f[1]];else if(f.length==2&&f[1]==j)if(undefined!=$("#gis_location_L0 option[value="+f[0]+"]")[0])$("#gis_location_L0").val(f[0]);else m=[f[0]];else{s3_gis_dropdown_select(3,true);$("#gis_location_L4").val(j);$("#"+s3_gis_location_id).val(j);break}}s3_gis_dropdown_select(0,true);if(m[0])if(undefined!=$("#gis_location_L1 option[value="+m[0]+"]")[0])b=m[0];$("#gis_location_L1").val(b);s3_gis_dropdown_select(1,true);if(m[0])if(undefined!=
$("#gis_location_L2 option[value="+m[0]+"]")[0])c=m[0];else if(m[1])if(undefined!=$("#gis_location_L2 option[value="+m[1]+"]")[0])c=m[1];$("#gis_location_L2").val(c);s3_gis_dropdown_select(2,true);if(m[0])if(undefined!=$("#gis_location_L3 option[value="+m[0]+"]")[0])g=m[0];else if(m[1])if(undefined!=$("#gis_location_L3 option[value="+m[1]+"]")[0])g=m[1];else if(m[2])if(undefined!=$("#gis_location_L3 option[value="+m[2]+"]")[0])g=m[2];$("#gis_location_L3").val(g);s3_gis_dropdown_select(3,true);$("#gis_location_L4").val(j);
$("#"+s3_gis_location_id).val(j);s3_gis_dropdown_select(4);break;case "L5":break;default:if(f){f=f.split("/");if(f.length==6&&f[5]==j){$("#gis_location_L0").val(f[0]);b=f[1];c=f[2];g=f[4]}else if(f.length==5&&f[4]==j)if(undefined!=$("#gis_location_L0 option[value="+f[0]+"]")[0]){$("#gis_location_L0").val(f[0]);m=[f[1],f[2],f[3]]}else m=[f[0],f[1],f[2],f[3]];else if(f.length==4&&f[3]==j)if(undefined!=$("#gis_location_L0 option[value="+f[0]+"]")[0]){$("#gis_location_L0").val(f[0]);m=[f[1],f[2]]}else m=
[f[0],f[1],f[2]];else if(f.length==3&&f[2]==j)if(undefined!=$("#gis_location_L0 option[value="+f[0]+"]")[0]){$("#gis_location_L0").val(f[0]);m=[f[1]]}else m=[f[0],f[1]];else if(f.length==2&&f[1]==j)if(undefined!=$("#gis_location_L0 option[value="+f[0]+"]")[0])$("#gis_location_L0").val(f[0]);else m=[f[0]];else{s3_gis_dropdown_select(4,true);$("#gis_location_").val(j);$("#"+s3_gis_location_id).val(j);break}s3_gis_dropdown_select(0,true);if(m[0])if(undefined!=$("#gis_location_L1 option[value="+m[0]+
"]")[0])b=m[0];$("#gis_location_L1").val(b);s3_gis_dropdown_select(1,true);if(m[0])if(undefined!=$("#gis_location_L2 option[value="+m[0]+"]")[0])c=m[0];else if(m[1])if(undefined!=$("#gis_location_L2 option[value="+m[1]+"]")[0])c=m[1];$("#gis_location_L2").val(c);s3_gis_dropdown_select(2,true);if(m[0])if(undefined!=$("#gis_location_L3 option[value="+m[0]+"]")[0])g=m[0];else if(m[1])if(undefined!=$("#gis_location_L3 option[value="+m[1]+"]")[0])g=m[1];else if(m[2])if(undefined!=$("#gis_location_L3 option[value="+
m[2]+"]")[0])g=m[2];$("#gis_location_L3").val(g);s3_gis_dropdown_select(3,true);if(m[0])if(undefined!=$("#gis_location_L4 option[value="+m[0]+"]")[0])k=m[0];else if(m[1])if(undefined!=$("#gis_location_L4 option[value="+m[1]+"]")[0])k=m[1];else if(m[2])if(undefined!=$("#gis_location_L4 option[value="+m[2]+"]")[0])k=m[2];else if(m[3])if(undefined!=$("#gis_location_L4 option[value="+m[4]+"]")[0])k=m[3];$("#gis_location_L4").val(k);s3_gis_dropdown_select(4,true);$("#gis_location_").val(j)}$("#"+s3_gis_location_id).val(j);
s3_gis_update_details(j);$("#gis_location_details-btn").removeClass("hidden").show()}return false}}).data("autocomplete")._renderItem=function(h,e){return $("<li></li>").data("item.autocomplete",e).append("<a>"+e.name+"</a>").appendTo(h)};$("#gis_location_autocomplete").blur(function(){if(!$("#gis_location_autocomplete").val()){$("#"+s3_gis_location_id).val("");a.accept=true}if(a.accept)a.val=$("#gis_location_autocomplete").val();else $("#gis_location_autocomplete").val(a.val);a.accept=false});$("form").submit(function(){S3ClearNavigateAwayConfirm();
var h=$("#gis_location_name").val(),e=$("#gis_location_lat").val(),f=$("#gis_location_lon").val(),j=$("#gis_location_addr_street").val(),b=$("#gis_location_postcode").val();s3_gis_save_location(h,e,f,j,b);return true})}});
Ext.onReady(function(){var a,h=Ext.get("gis_location_converter-btn"),e=Ext.get("gis_location_map-btn");if(e)e.on("click",function(){mapWin.show(this)});if(h)h.on("click",function(){a||(a=new Ext.Window({applyTo:"gis-convert-win",layout:"fit",width:400,height:250,closeAction:"hide",plain:true,items:new Ext.TabPanel({applyTo:"gis-convert-tabs",autoTabs:true,activeTab:0,deferredRender:false,border:false}),buttons:[{text:s3_gis_fill_lat,disabled:false,handler:function(){if(s3_gis_convertFillBack(1)){s3_gis_calcDone=
false;$("#DDMMSS_dec").val("");$("#gps_dec").val("")}}},{text:s3_gis_fill_lon,handler:function(){if(s3_gis_convertFillBack(2)){s3_gis_calcDone=false;$("#DDMMSS_dec").val("");$("#gps_dec").val("")}}}]}));a.show(this)})});
(function(a,h){function e(){this.debug=false;this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._inDialog=this._datepickerShowing=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass=
"ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su",
"Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",
minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false};a.extend(this._defaults,this.regional[""]);this.dpDiv=a('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')}function f(b,c){a.extend(b,c);for(var g in c)if(c[g]==
null||c[g]==h)b[g]=c[g];return b}a.extend(a.ui,{datepicker:{version:"@VERSION"}});var j=(new Date).getTime();a.extend(e.prototype,{markerClassName:"hasDatepicker",log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(b){f(this._defaults,b||{});return this},_attachDatepicker:function(b,c){var g=null,k;for(k in this._defaults){var m=b.getAttribute("date:"+k);if(m){g=g||{};try{g[k]=eval(m)}catch(o){g[k]=m}}}k=b.nodeName.toLowerCase();
m=k=="div"||k=="span";if(!b.id){this.uuid+=1;b.id="dp"+this.uuid}var n=this._newInst(a(b),m);n.settings=a.extend({},c||{},g||{});if(k=="input")this._connectDatepicker(b,n);else m&&this._inlineDatepicker(b,n)},_newInst:function(b,c){return{id:b[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:b,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:c,dpDiv:!c?this.dpDiv:a('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')}},
_connectDatepicker:function(b,c){var g=a(b);c.append=a([]);c.trigger=a([]);if(!g.hasClass(this.markerClassName)){this._attachments(g,c);g.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(k,m,o){c.settings[m]=o}).bind("getData.datepicker",function(k,m){return this._get(c,m)});this._autoSize(c);a.data(b,"datepicker",c)}},_attachments:function(b,c){var g=this._get(c,"appendText"),k=this._get(c,"isRTL");c.append&&
c.append.remove();if(g){c.append=a('<span class="'+this._appendClass+'">'+g+"</span>");b[k?"before":"after"](c.append)}b.unbind("focus",this._showDatepicker);c.trigger&&c.trigger.remove();g=this._get(c,"showOn");if(g=="focus"||g=="both")b.focus(this._showDatepicker);if(g=="button"||g=="both"){g=this._get(c,"buttonText");var m=this._get(c,"buttonImage");c.trigger=a(this._get(c,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:m,alt:g,title:g}):a('<button type="button"></button>').addClass(this._triggerClass).html(m==
""?g:a("<img/>").attr({src:m,alt:g,title:g})));b[k?"before":"after"](c.trigger);c.trigger.click(function(){a.datepicker._datepickerShowing&&a.datepicker._lastInput==b[0]?a.datepicker._hideDatepicker():a.datepicker._showDatepicker(b[0]);return false})}},_autoSize:function(b){if(this._get(b,"autoSize")&&!b.inline){var c=new Date(2009,11,20),g=this._get(b,"dateFormat");if(g.match(/[DM]/)){var k=function(m){for(var o=0,n=0,p=0;p<m.length;p++)if(m[p].length>o){o=m[p].length;n=p}return n};c.setMonth(k(this._get(b,
g.match(/MM/)?"monthNames":"monthNamesShort")));c.setDate(k(this._get(b,g.match(/DD/)?"dayNames":"dayNamesShort"))+20-c.getDay())}b.input.attr("size",this._formatDate(b,c).length)}},_inlineDatepicker:function(b,c){var g=a(b);if(!g.hasClass(this.markerClassName)){g.addClass(this.markerClassName).append(c.dpDiv).bind("setData.datepicker",function(k,m,o){c.settings[m]=o}).bind("getData.datepicker",function(k,m){return this._get(c,m)});a.data(b,"datepicker",c);this._setDate(c,this._getDefaultDate(c),
true);this._updateDatepicker(c);this._updateAlternate(c);c.dpDiv.show()}},_dialogDatepicker:function(b,c,g,k,m){b=this._dialogInst;if(!b){this.uuid+=1;this._dialogInput=a('<input type="text" id="'+("dp"+this.uuid)+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>');this._dialogInput.keydown(this._doKeyDown);a("body").append(this._dialogInput);b=this._dialogInst=this._newInst(this._dialogInput,false);b.settings={};a.data(this._dialogInput[0],"datepicker",b)}f(b.settings,k||{});
c=c&&c.constructor==Date?this._formatDate(b,c):c;this._dialogInput.val(c);this._pos=m?m.length?m:[m.pageX,m.pageY]:null;if(!this._pos)this._pos=[document.documentElement.clientWidth/2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/2-150+(document.documentElement.scrollTop||document.body.scrollTop)];this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");b.settings.onSelect=g;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);
this._showDatepicker(this._dialogInput[0]);a.blockUI&&a.blockUI(this.dpDiv);a.data(this._dialogInput[0],"datepicker",b);return this},_destroyDatepicker:function(b){var c=a(b),g=a.data(b,"datepicker");if(c.hasClass(this.markerClassName)){var k=b.nodeName.toLowerCase();a.removeData(b,"datepicker");if(k=="input"){g.append.remove();g.trigger.remove();c.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",
this._doKeyUp)}else if(k=="div"||k=="span")c.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(b){var c=a(b),g=a.data(b,"datepicker");if(c.hasClass(this.markerClassName)){var k=b.nodeName.toLowerCase();if(k=="input"){b.disabled=false;g.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""})}else if(k=="div"||k=="span")c.children("."+this._inlineClass).children().removeClass("ui-state-disabled");this._disabledInputs=a.map(this._disabledInputs,
function(m){return m==b?null:m})}},_disableDatepicker:function(b){var c=a(b),g=a.data(b,"datepicker");if(c.hasClass(this.markerClassName)){var k=b.nodeName.toLowerCase();if(k=="input"){b.disabled=true;g.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else if(k=="div"||k=="span")c.children("."+this._inlineClass).children().addClass("ui-state-disabled");this._disabledInputs=a.map(this._disabledInputs,function(m){return m==b?null:
m});this._disabledInputs[this._disabledInputs.length]=b}},_isDisabledDatepicker:function(b){if(!b)return false;for(var c=0;c<this._disabledInputs.length;c++)if(this._disabledInputs[c]==b)return true;return false},_getInst:function(b){try{return a.data(b,"datepicker")}catch(c){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(b,c,g){var k=this._getInst(b);if(arguments.length==2&&typeof c=="string")return c=="defaults"?a.extend({},a.datepicker._defaults):k?c=="all"?a.extend({},
k.settings):this._get(k,c):null;var m=c||{};if(typeof c=="string"){m={};m[c]=g}if(k){this._curInst==k&&this._hideDatepicker();var o=this._getDateDatepicker(b,true),n=this._getMinMaxDate(k,"min"),p=this._getMinMaxDate(k,"max");f(k.settings,m);if(n!==null&&m.dateFormat!==h&&m.minDate===h)k.settings.minDate=this._formatDate(k,n);if(p!==null&&m.dateFormat!==h&&m.maxDate===h)k.settings.maxDate=this._formatDate(k,p);this._attachments(a(b),k);this._autoSize(k);this._setDateDatepicker(b,o);this._updateDatepicker(k)}},
_changeDatepicker:function(b,c,g){this._optionDatepicker(b,c,g)},_refreshDatepicker:function(b){(b=this._getInst(b))&&this._updateDatepicker(b)},_setDateDatepicker:function(b,c){var g=this._getInst(b);if(g){this._setDate(g,c);this._updateDatepicker(g);this._updateAlternate(g)}},_getDateDatepicker:function(b,c){var g=this._getInst(b);g&&!g.inline&&this._setDateFromField(g,c);return g?this._getDate(g):null},_doKeyDown:function(b){var c=a.datepicker._getInst(b.target),g=true,k=c.dpDiv.is(".ui-datepicker-rtl");
c._keyEvent=true;if(a.datepicker._datepickerShowing)switch(b.keyCode){case 9:a.datepicker._hideDatepicker();g=false;break;case 13:g=a("td."+a.datepicker._dayOverClass+":not(."+a.datepicker._currentClass+")",c.dpDiv);g[0]?a.datepicker._selectDay(b.target,c.selectedMonth,c.selectedYear,g[0]):a.datepicker._hideDatepicker();return false;case 27:a.datepicker._hideDatepicker();break;case 33:a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(c,"stepBigMonths"):-a.datepicker._get(c,"stepMonths"),
"M");break;case 34:a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(c,"stepBigMonths"):+a.datepicker._get(c,"stepMonths"),"M");break;case 35:if(b.ctrlKey||b.metaKey)a.datepicker._clearDate(b.target);g=b.ctrlKey||b.metaKey;break;case 36:if(b.ctrlKey||b.metaKey)a.datepicker._gotoToday(b.target);g=b.ctrlKey||b.metaKey;break;case 37:if(b.ctrlKey||b.metaKey)a.datepicker._adjustDate(b.target,k?+1:-1,"D");g=b.ctrlKey||b.metaKey;if(b.originalEvent.altKey)a.datepicker._adjustDate(b.target,b.ctrlKey?
-a.datepicker._get(c,"stepBigMonths"):-a.datepicker._get(c,"stepMonths"),"M");break;case 38:if(b.ctrlKey||b.metaKey)a.datepicker._adjustDate(b.target,-7,"D");g=b.ctrlKey||b.metaKey;break;case 39:if(b.ctrlKey||b.metaKey)a.datepicker._adjustDate(b.target,k?-1:+1,"D");g=b.ctrlKey||b.metaKey;if(b.originalEvent.altKey)a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(c,"stepBigMonths"):+a.datepicker._get(c,"stepMonths"),"M");break;case 40:if(b.ctrlKey||b.metaKey)a.datepicker._adjustDate(b.target,
+7,"D");g=b.ctrlKey||b.metaKey;break;default:g=false}else if(b.keyCode==36&&b.ctrlKey)a.datepicker._showDatepicker(this);else g=false;if(g){b.preventDefault();b.stopPropagation()}},_doKeyPress:function(b){var c=a.datepicker._getInst(b.target);if(a.datepicker._get(c,"constrainInput")){c=a.datepicker._possibleChars(a.datepicker._get(c,"dateFormat"));var g=String.fromCharCode(b.charCode==h?b.keyCode:b.charCode);return b.ctrlKey||b.metaKey||g<" "||!c||c.indexOf(g)>-1}},_doKeyUp:function(b){b=a.datepicker._getInst(b.target);
if(b.input.val()!=b.lastVal)try{if(a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),b.input?b.input.val():null,a.datepicker._getFormatConfig(b))){a.datepicker._setDateFromField(b);a.datepicker._updateAlternate(b);a.datepicker._updateDatepicker(b)}}catch(c){a.datepicker.log(c)}return true},_showDatepicker:function(b){b=b.target||b;if(b.nodeName.toLowerCase()!="input")b=a("input",b.parentNode)[0];if(!(a.datepicker._isDisabledDatepicker(b)||a.datepicker._lastInput==b)){var c=a.datepicker._getInst(b);
a.datepicker._curInst&&a.datepicker._curInst!=c&&a.datepicker._curInst.dpDiv.stop(true,true);var g=a.datepicker._get(c,"beforeShow");f(c.settings,g?g.apply(b,[b,c]):{});c.lastVal=null;a.datepicker._lastInput=b;a.datepicker._setDateFromField(c);if(a.datepicker._inDialog)b.value="";if(!a.datepicker._pos){a.datepicker._pos=a.datepicker._findPos(b);a.datepicker._pos[1]+=b.offsetHeight}var k=false;a(b).parents().each(function(){k|=a(this).css("position")=="fixed";return!k});if(k&&a.browser.opera){a.datepicker._pos[0]-=
document.documentElement.scrollLeft;a.datepicker._pos[1]-=document.documentElement.scrollTop}g={left:a.datepicker._pos[0],top:a.datepicker._pos[1]};a.datepicker._pos=null;c.dpDiv.empty();c.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});a.datepicker._updateDatepicker(c);g=a.datepicker._checkOffset(c,g,k);c.dpDiv.css({position:a.datepicker._inDialog&&a.blockUI?"static":k?"fixed":"absolute",display:"none",left:g.left+"px",top:g.top+"px"});if(!c.inline){g=a.datepicker._get(c,"showAnim");
var m=a.datepicker._get(c,"duration"),o=function(){a.datepicker._datepickerShowing=true;var n=c.dpDiv.find("iframe.ui-datepicker-cover");if(n.length){var p=a.datepicker._getBorders(c.dpDiv);n.css({left:-p[0],top:-p[1],width:c.dpDiv.outerWidth(),height:c.dpDiv.outerHeight()})}};c.dpDiv.zIndex(a(b).zIndex()+1);if(a.effects&&(a.effects.effect[g]||a.effects[g]))c.dpDiv.show(g,a.datepicker._get(c,"showOptions"),m,o);else c.dpDiv[g||"show"](g?m:null,o);if(!g||!m)o();c.input.is(":visible")&&!c.input.is(":disabled")&&
c.input.focus();a.datepicker._curInst=c}}},_updateDatepicker:function(b){var c=this,g=a.datepicker._getBorders(b.dpDiv);b.dpDiv.empty().append(this._generateHTML(b));var k=b.dpDiv.find("iframe.ui-datepicker-cover");k.length&&k.css({left:-g[0],top:-g[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()});b.dpDiv.find("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a").bind("mouseout",function(){a(this).removeClass("ui-state-hover");this.className.indexOf("ui-datepicker-prev")!=
-1&&a(this).removeClass("ui-datepicker-prev-hover");this.className.indexOf("ui-datepicker-next")!=-1&&a(this).removeClass("ui-datepicker-next-hover")}).bind("mouseover",function(){if(!c._isDisabledDatepicker(b.inline?b.dpDiv.parent()[0]:b.input[0])){a(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");a(this).addClass("ui-state-hover");this.className.indexOf("ui-datepicker-prev")!=-1&&a(this).addClass("ui-datepicker-prev-hover");this.className.indexOf("ui-datepicker-next")!=
-1&&a(this).addClass("ui-datepicker-next-hover")}}).end().find("."+this._dayOverClass+" a").trigger("mouseover").end();g=this._getNumberOfMonths(b);k=g[1];k>1?b.dpDiv.addClass("ui-datepicker-multi-"+k).css("width",17*k+"em"):b.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");b.dpDiv[(g[0]!=1||g[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi");b.dpDiv[(this._get(b,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");b==a.datepicker._curInst&&a.datepicker._datepickerShowing&&
b.input&&b.input.is(":visible")&&!b.input.is(":disabled")&&b.input[0]!=document.activeElement&&b.input.focus();if(b.yearshtml){var m=b.yearshtml;setTimeout(function(){m===b.yearshtml&&b.dpDiv.find("select.ui-datepicker-year:first").replaceWith(b.yearshtml);m=b.yearshtml=null},0)}},_getBorders:function(b){var c=function(g){return{thin:1,medium:2,thick:3}[g]||g};return[parseFloat(c(b.css("border-left-width"))),parseFloat(c(b.css("border-top-width")))]},_checkOffset:function(b,c,g){var k=b.dpDiv.outerWidth(),
m=b.dpDiv.outerHeight(),o=b.input?b.input.outerWidth():0,n=b.input?b.input.outerHeight():0,p=document.documentElement.clientWidth+a(document).scrollLeft(),t=document.documentElement.clientHeight+a(document).scrollTop();c.left-=this._get(b,"isRTL")?k-o:0;c.left-=g&&c.left==b.input.offset().left?a(document).scrollLeft():0;c.top-=g&&c.top==b.input.offset().top+n?a(document).scrollTop():0;c.left-=Math.min(c.left,c.left+k>p&&p>k?Math.abs(c.left+k-p):0);c.top-=Math.min(c.top,c.top+m>t&&t>m?Math.abs(m+n):
0);return c},_findPos:function(b){for(var c=this._get(this._getInst(b),"isRTL");b&&(b.type=="hidden"||b.nodeType!=1||a.expr.filters.hidden(b));)b=b[c?"previousSibling":"nextSibling"];b=a(b).offset();return[b.left,b.top]},_hideDatepicker:function(b){var c=this._curInst;if(!(!c||b&&c!=a.data(b,"datepicker")))if(this._datepickerShowing){b=this._get(c,"showAnim");var g=this._get(c,"duration"),k=function(){a.datepicker._tidyDialog(c);this._curInst=null};if(a.effects&&(a.effects.effect[b]||a.effects[b]))c.dpDiv.hide(b,
a.datepicker._get(c,"showOptions"),g,k);else c.dpDiv[b=="slideDown"?"slideUp":b=="fadeIn"?"fadeOut":"hide"](b?g:null,k);b||k();if(b=this._get(c,"onClose"))b.apply(c.input?c.input[0]:null,[c.input?c.input.val():"",c]);this._datepickerShowing=false;this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if(a.blockUI){a.unblockUI();a("body").append(this.dpDiv)}}this._inDialog=false}},_tidyDialog:function(b){b.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},
_checkExternalClick:function(b){if(a.datepicker._curInst){b=a(b.target);b[0].id!=a.datepicker._mainDivId&&b.parents("#"+a.datepicker._mainDivId).length==0&&!b.hasClass(a.datepicker.markerClassName)&&!b.hasClass(a.datepicker._triggerClass)&&a.datepicker._datepickerShowing&&!(a.datepicker._inDialog&&a.blockUI)&&a.datepicker._hideDatepicker()}},_adjustDate:function(b,c,g){b=a(b);var k=this._getInst(b[0]);if(!this._isDisabledDatepicker(b[0])){this._adjustInstDate(k,c+(g=="M"?this._get(k,"showCurrentAtPos"):
0),g);this._updateDatepicker(k)}},_gotoToday:function(b){b=a(b);var c=this._getInst(b[0]);if(this._get(c,"gotoCurrent")&&c.currentDay){c.selectedDay=c.currentDay;c.drawMonth=c.selectedMonth=c.currentMonth;c.drawYear=c.selectedYear=c.currentYear}else{var g=new Date;c.selectedDay=g.getDate();c.drawMonth=c.selectedMonth=g.getMonth();c.drawYear=c.selectedYear=g.getFullYear()}this._notifyChange(c);this._adjustDate(b)},_selectMonthYear:function(b,c,g){b=a(b);var k=this._getInst(b[0]);k._selectingMonthYear=
false;k["selected"+(g=="M"?"Month":"Year")]=k["draw"+(g=="M"?"Month":"Year")]=parseInt(c.options[c.selectedIndex].value,10);this._notifyChange(k);this._adjustDate(b)},_clickMonthYear:function(b){var c=this._getInst(a(b)[0]);c.input&&c._selectingMonthYear&&setTimeout(function(){c.input.focus()},0);c._selectingMonthYear=!c._selectingMonthYear},_selectDay:function(b,c,g,k){var m=a(b);if(!(a(k).hasClass(this._unselectableClass)||this._isDisabledDatepicker(m[0]))){m=this._getInst(m[0]);m.selectedDay=m.currentDay=
a("a",k).html();m.selectedMonth=m.currentMonth=c;m.selectedYear=m.currentYear=g;this._selectDate(b,this._formatDate(m,m.currentDay,m.currentMonth,m.currentYear))}},_clearDate:function(b){b=a(b);this._getInst(b[0]);this._selectDate(b,"")},_selectDate:function(b,c){var g=this._getInst(a(b)[0]);c=c!=null?c:this._formatDate(g);g.input&&g.input.val(c);this._updateAlternate(g);var k=this._get(g,"onSelect");if(k)k.apply(g.input?g.input[0]:null,[c,g]);else g.input&&g.input.trigger("change");if(g.inline)this._updateDatepicker(g);
else{this._hideDatepicker();this._lastInput=g.input[0];typeof g.input[0]!="object"&&g.input.focus();this._lastInput=null}},_updateAlternate:function(b){var c=this._get(b,"altField");if(c){var g=this._get(b,"altFormat")||this._get(b,"dateFormat"),k=this._getDate(b),m=this.formatDate(g,k,this._getFormatConfig(b));a(c).each(function(){a(this).val(m)})}},noWeekends:function(b){b=b.getDay();return[b>0&&b<6,""]},iso8601Week:function(b){b=new Date(b.getTime());b.setDate(b.getDate()+4-(b.getDay()||7));var c=
b.getTime();b.setMonth(0);b.setDate(1);return Math.floor(Math.round((c-b)/864E5)/7)+1},parseDate:function(b,c,g){if(b==null||c==null)throw"Invalid arguments";c=typeof c=="object"?c.toString():c+"";if(c=="")return null;var k=(g?g.shortYearCutoff:null)||this._defaults.shortYearCutoff;k=typeof k!="string"?k:(new Date).getFullYear()%100+parseInt(k,10);for(var m=(g?g.dayNamesShort:null)||this._defaults.dayNamesShort,o=(g?g.dayNames:null)||this._defaults.dayNames,n=(g?g.monthNamesShort:null)||this._defaults.monthNamesShort,
p=(g?g.monthNames:null)||this._defaults.monthNames,t=g=-1,v=-1,w=-1,u=false,r=function(A){(A=Q+1<b.length&&b.charAt(Q+1)==A)&&Q++;return A},y=function(A){var I=r(A);A=c.substring(C).match(RegExp("^\\d{1,"+(A=="@"?14:A=="!"?20:A=="y"&&I?4:A=="o"?3:2)+"}"));if(!A)throw"Missing number at position "+C;C+=A[0].length;return parseInt(A[0],10)},z=function(A,I,Y){A=r(A)?Y:I;for(I=0;I<A.length;I++)if(c.substr(C,A[I].length).toLowerCase()==A[I].toLowerCase()){C+=A[I].length;return I+1}throw"Unknown name at position "+
C;},E=function(){if(c.charAt(C)!=b.charAt(Q))throw"Unexpected literal at position "+C;C++},C=0,Q=0;Q<b.length;Q++)if(u)if(b.charAt(Q)=="'"&&!r("'"))u=false;else E();else switch(b.charAt(Q)){case "d":v=y("d");break;case "D":z("D",m,o);break;case "o":w=y("o");break;case "m":t=y("m");break;case "M":t=z("M",n,p);break;case "y":g=y("y");break;case "@":var H=new Date(y("@"));g=H.getFullYear();t=H.getMonth()+1;v=H.getDate();break;case "!":H=new Date((y("!")-this._ticksTo1970)/1E4);g=H.getFullYear();t=H.getMonth()+
1;v=H.getDate();break;case "'":if(r("'"))E();else u=true;break;default:E()}if(g==-1)g=(new Date).getFullYear();else if(g<100)g+=(new Date).getFullYear()-(new Date).getFullYear()%100+(g<=k?0:-100);if(w>-1){t=1;v=w;do{k=this._getDaysInMonth(g,t-1);if(v<=k)break;t++;v-=k}while(1)}H=this._daylightSavingAdjust(new Date(g,t-1,v));if(H.getFullYear()!=g||H.getMonth()+1!=t||H.getDate()!=v)throw"Invalid date";return H},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",
RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*864E9,formatDate:function(b,c,g){if(!c)return"";var k=(g?g.dayNamesShort:null)||this._defaults.dayNamesShort,m=(g?g.dayNames:null)||this._defaults.dayNames,o=(g?g.monthNamesShort:null)||this._defaults.monthNamesShort;g=(g?g.monthNames:null)||this._defaults.monthNames;var n=function(r){(r=u+1<b.length&&b.charAt(u+
1)==r)&&u++;return r},p=function(r,y,z){y=""+y;if(n(r))for(;y.length<z;)y="0"+y;return y},t=function(r,y,z,E){return n(r)?E[y]:z[y]},v="",w=false;if(c)for(var u=0;u<b.length;u++)if(w)if(b.charAt(u)=="'"&&!n("'"))w=false;else v+=b.charAt(u);else switch(b.charAt(u)){case "d":v+=p("d",c.getDate(),2);break;case "D":v+=t("D",c.getDay(),k,m);break;case "o":v+=p("o",(c.getTime()-(new Date(c.getFullYear(),0,0)).getTime())/864E5,3);break;case "m":v+=p("m",c.getMonth()+1,2);break;case "M":v+=t("M",c.getMonth(),
o,g);break;case "y":v+=n("y")?c.getFullYear():(c.getYear()%100<10?"0":"")+c.getYear()%100;break;case "@":v+=c.getTime();break;case "!":v+=c.getTime()*1E4+this._ticksTo1970;break;case "'":if(n("'"))v+="'";else w=true;break;default:v+=b.charAt(u)}return v},_possibleChars:function(b){for(var c="",g=false,k=function(o){(o=m+1<b.length&&b.charAt(m+1)==o)&&m++;return o},m=0;m<b.length;m++)if(g)if(b.charAt(m)=="'"&&!k("'"))g=false;else c+=b.charAt(m);else switch(b.charAt(m)){case "d":case "m":case "y":case "@":c+=
"0123456789";break;case "D":case "M":return null;case "'":if(k("'"))c+="'";else g=true;break;default:c+=b.charAt(m)}return c},_get:function(b,c){return b.settings[c]!==h?b.settings[c]:this._defaults[c]},_setDateFromField:function(b,c){if(b.input.val()!=b.lastVal){var g=this._get(b,"dateFormat"),k=b.lastVal=b.input?b.input.val():null,m,o;m=o=this._getDefaultDate(b);var n=this._getFormatConfig(b);try{m=this.parseDate(g,k,n)||o}catch(p){this.log(p);k=c?"":k}b.selectedDay=m.getDate();b.drawMonth=b.selectedMonth=
m.getMonth();b.drawYear=b.selectedYear=m.getFullYear();b.currentDay=k?m.getDate():0;b.currentMonth=k?m.getMonth():0;b.currentYear=k?m.getFullYear():0;this._adjustInstDate(b)}},_getDefaultDate:function(b){return this._restrictMinMax(b,this._determineDate(b,this._get(b,"defaultDate"),new Date))},_determineDate:function(b,c,g){var k=function(m){var o=new Date;o.setDate(o.getDate()+m);return o};if(c=(c=c==null||c===""?g:typeof c=="string"?function(m){try{return a.datepicker.parseDate(a.datepicker._get(b,
"dateFormat"),m,a.datepicker._getFormatConfig(b))}catch(o){}var n=(m.toLowerCase().match(/^c/)?a.datepicker._getDate(b):null)||new Date,p=n.getFullYear(),t=n.getMonth();n=n.getDate();for(var v=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,w=v.exec(m);w;){switch(w[2]||"d"){case "d":case "D":n+=parseInt(w[1],10);break;case "w":case "W":n+=parseInt(w[1],10)*7;break;case "m":case "M":t+=parseInt(w[1],10);n=Math.min(n,a.datepicker._getDaysInMonth(p,t));break;case "y":case "Y":p+=parseInt(w[1],10);n=Math.min(n,
a.datepicker._getDaysInMonth(p,t))}w=v.exec(m)}return new Date(p,t,n)}(c):typeof c=="number"?isNaN(c)?g:k(c):new Date(c.getTime()))&&c.toString()=="Invalid Date"?g:c){c.setHours(0);c.setMinutes(0);c.setSeconds(0);c.setMilliseconds(0)}return this._daylightSavingAdjust(c)},_daylightSavingAdjust:function(b){if(!b)return null;b.setHours(b.getHours()>12?b.getHours()+2:0);return b},_setDate:function(b,c,g){var k=!c,m=b.selectedMonth,o=b.selectedYear;c=this._restrictMinMax(b,this._determineDate(b,c,new Date));
b.selectedDay=b.currentDay=c.getDate();b.drawMonth=b.selectedMonth=b.currentMonth=c.getMonth();b.drawYear=b.selectedYear=b.currentYear=c.getFullYear();if((m!=b.selectedMonth||o!=b.selectedYear)&&!g)this._notifyChange(b);this._adjustInstDate(b);if(b.input)b.input.val(k?"":this._formatDate(b))},_getDate:function(b){return!b.currentYear||b.input&&b.input.val()==""?null:this._daylightSavingAdjust(new Date(b.currentYear,b.currentMonth,b.currentDay))},_generateHTML:function(b){var c=new Date;c=this._daylightSavingAdjust(new Date(c.getFullYear(),
c.getMonth(),c.getDate()));var g=this._get(b,"isRTL"),k=this._get(b,"showButtonPanel"),m=this._get(b,"hideIfNoPrevNext"),o=this._get(b,"navigationAsDateFormat"),n=this._getNumberOfMonths(b),p=this._get(b,"showCurrentAtPos"),t=this._get(b,"stepMonths"),v=n[0]!=1||n[1]!=1,w=this._daylightSavingAdjust(!b.currentDay?new Date(9999,9,9):new Date(b.currentYear,b.currentMonth,b.currentDay)),u=this._getMinMaxDate(b,"min"),r=this._getMinMaxDate(b,"max");p=b.drawMonth-p;var y=b.drawYear;if(p<0){p+=12;y--}if(r){var z=
this._daylightSavingAdjust(new Date(r.getFullYear(),r.getMonth()-n[0]*n[1]+1,r.getDate()));for(z=u&&z<u?u:z;this._daylightSavingAdjust(new Date(y,p,1))>z;){p--;if(p<0){p=11;y--}}}b.drawMonth=p;b.drawYear=y;z=this._get(b,"prevText");z=!o?z:this.formatDate(z,this._daylightSavingAdjust(new Date(y,p-t,1)),this._getFormatConfig(b));z=this._canAdjustMonth(b,-1,y,p)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+j+".datepicker._adjustDate('#"+b.id+"', -"+t+", 'M');\" title=\""+z+'"><span class="ui-icon ui-icon-circle-triangle-'+
(g?"e":"w")+'">'+z+"</span></a>":m?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+z+'"><span class="ui-icon ui-icon-circle-triangle-'+(g?"e":"w")+'">'+z+"</span></a>";var E=this._get(b,"nextText");E=!o?E:this.formatDate(E,this._daylightSavingAdjust(new Date(y,p+t,1)),this._getFormatConfig(b));m=this._canAdjustMonth(b,+1,y,p)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+j+".datepicker._adjustDate('#"+b.id+"', +"+t+", 'M');\" title=\""+E+'"><span class="ui-icon ui-icon-circle-triangle-'+
(g?"w":"e")+'">'+E+"</span></a>":m?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+E+'"><span class="ui-icon ui-icon-circle-triangle-'+(g?"w":"e")+'">'+E+"</span></a>";t=this._get(b,"currentText");E=this._get(b,"gotoCurrent")&&b.currentDay?w:c;t=!o?t:this.formatDate(t,E,this._getFormatConfig(b));o=!b.inline?'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+j+'.datepicker._hideDatepicker();">'+this._get(b,
"closeText")+"</button>":"";k=k?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(g?o:"")+(this._isInRange(b,E)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+j+".datepicker._gotoToday('#"+b.id+"');\">"+t+"</button>":"")+(g?"":o)+"</div>":"";o=parseInt(this._get(b,"firstDay"),10);o=isNaN(o)?0:o;t=this._get(b,"showWeek");E=this._get(b,"dayNames");this._get(b,"dayNamesShort");var C=this._get(b,"dayNamesMin"),Q=
this._get(b,"monthNames"),H=this._get(b,"monthNamesShort"),A=this._get(b,"beforeShowDay"),I=this._get(b,"showOtherMonths"),Y=this._get(b,"selectOtherMonths");this._get(b,"calculateWeek");for(var ca=this._getDefaultDate(b),ba="",ja=0;ja<n[0];ja++){for(var M="",O=0;O<n[1];O++){var N=this._daylightSavingAdjust(new Date(y,p,b.selectedDay)),J=" ui-corner-all",T="";if(v){T+='<div class="ui-datepicker-group';if(n[1]>1)switch(O){case 0:T+=" ui-datepicker-group-first";J=" ui-corner-"+(g?"right":"left");break;
case n[1]-1:T+=" ui-datepicker-group-last";J=" ui-corner-"+(g?"left":"right");break;default:T+=" ui-datepicker-group-middle";J=""}T+='">'}T+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+J+'">'+(/all|left/.test(J)&&ja==0?g?m:z:"")+(/all|right/.test(J)&&ja==0?g?z:m:"")+this._generateMonthYearHeader(b,p,y,u,r,ja>0||O>0,Q,H)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var ea=t?'<th class="ui-datepicker-week-col">'+this._get(b,"weekHeader")+"</th>":"";for(J=0;J<
7;J++){var L=(J+o)%7;ea+="<th"+((J+o+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+E[L]+'">'+C[L]+"</span></th>"}T+=ea+"</tr></thead><tbody>";ea=this._getDaysInMonth(y,p);if(y==b.selectedYear&&p==b.selectedMonth)b.selectedDay=Math.min(b.selectedDay,ea);J=(this._getFirstDayOfMonth(y,p)-o+7)%7;ea=v?6:Math.ceil((J+ea)/7);L=this._daylightSavingAdjust(new Date(y,p,1-J));for(var W=0;W<ea;W++){T+="<tr>";var ha=!t?"":'<td class="ui-datepicker-week-col">'+this._get(b,"calculateWeek")(L)+"</td>";
for(J=0;J<7;J++){var aa=A?A.apply(b.input?b.input[0]:null,[L]):[true,""],R=L.getMonth()!=p,U=R&&!Y||!aa[0]||u&&L<u||r&&L>r;ha+='<td class="'+((J+o+6)%7>=5?" ui-datepicker-week-end":"")+(R?" ui-datepicker-other-month":"")+(L.getTime()==N.getTime()&&p==b.selectedMonth&&b._keyEvent||ca.getTime()==L.getTime()&&ca.getTime()==N.getTime()?" "+this._dayOverClass:"")+(U?" "+this._unselectableClass+" ui-state-disabled":"")+(R&&!I?"":" "+aa[1]+(L.getTime()==w.getTime()?" "+this._currentClass:"")+(L.getTime()==
c.getTime()?" ui-datepicker-today":""))+'"'+((!R||I)&&aa[2]?' title="'+aa[2]+'"':"")+(U?"":' onclick="DP_jQuery_'+j+".datepicker._selectDay('#"+b.id+"',"+L.getMonth()+","+L.getFullYear()+', this);return false;"')+">"+(R&&!I?"&#xa0;":U?'<span class="ui-state-default">'+L.getDate()+"</span>":'<a class="ui-state-default'+(L.getTime()==c.getTime()?" ui-state-highlight":"")+(L.getTime()==w.getTime()?" ui-state-active":"")+(R?" ui-priority-secondary":"")+'" href="#">'+L.getDate()+"</a>")+"</td>";L.setDate(L.getDate()+
1);L=this._daylightSavingAdjust(L)}T+=ha+"</tr>"}p++;if(p>11){p=0;y++}T+="</tbody></table>"+(v?"</div>"+(n[0]>0&&O==n[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"");M+=T}ba+=M}ba+=k+(a.browser.msie&&parseInt(a.browser.version,10)<7&&!b.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':"");b._keyEvent=false;return ba},_generateMonthYearHeader:function(b,c,g,k,m,o,n,p){var t=this._get(b,"changeMonth"),v=this._get(b,"changeYear"),w=this._get(b,
"showMonthAfterYear"),u='<div class="ui-datepicker-title">',r="";if(o||!t)r+='<span class="ui-datepicker-month">'+n[c]+"</span>";else{n=k&&k.getFullYear()==g;var y=m&&m.getFullYear()==g;r+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+j+".datepicker._selectMonthYear('#"+b.id+"', this, 'M');\" onclick=\"DP_jQuery_"+j+".datepicker._clickMonthYear('#"+b.id+"');\">";for(var z=0;z<12;z++)if((!n||z>=k.getMonth())&&(!y||z<=m.getMonth()))r+='<option value="'+z+'"'+(z==c?' selected="selected"':
"")+">"+p[z]+"</option>";r+="</select>"}w||(u+=r+(o||!(t&&v)?"&#xa0;":""));b.yearshtml="";if(o||!v)u+='<span class="ui-datepicker-year">'+g+"</span>";else{p=this._get(b,"yearRange").split(":");var E=(new Date).getFullYear();n=function(C){C=C.match(/c[+-].*/)?g+parseInt(C.substring(1),10):C.match(/[+-].*/)?E+parseInt(C,10):parseInt(C,10);return isNaN(C)?E:C};c=n(p[0]);p=Math.max(c,n(p[1]||""));c=k?Math.max(c,k.getFullYear()):c;p=m?Math.min(p,m.getFullYear()):p;for(b.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+
j+".datepicker._selectMonthYear('#"+b.id+"', this, 'Y');\" onclick=\"DP_jQuery_"+j+".datepicker._clickMonthYear('#"+b.id+"');\">";c<=p;c++)b.yearshtml+='<option value="'+c+'"'+(c==g?' selected="selected"':"")+">"+c+"</option>";b.yearshtml+="</select>";if(a.browser.mozilla)u+='<select class="ui-datepicker-year"><option value="'+g+'" selected="selected">'+g+"</option></select>";else{u+=b.yearshtml;b.yearshtml=null}}u+=this._get(b,"yearSuffix");if(w)u+=(o||!(t&&v)?"&#xa0;":"")+r;u+="</div>";return u},
_adjustInstDate:function(b,c,g){var k=b.drawYear+(g=="Y"?c:0),m=b.drawMonth+(g=="M"?c:0);c=Math.min(b.selectedDay,this._getDaysInMonth(k,m))+(g=="D"?c:0);k=this._restrictMinMax(b,this._daylightSavingAdjust(new Date(k,m,c)));b.selectedDay=k.getDate();b.drawMonth=b.selectedMonth=k.getMonth();b.drawYear=b.selectedYear=k.getFullYear();if(g=="M"||g=="Y")this._notifyChange(b)},_restrictMinMax:function(b,c){var g=this._getMinMaxDate(b,"min"),k=this._getMinMaxDate(b,"max");g=g&&c<g?g:c;return k&&g>k?k:g},
_notifyChange:function(b){var c=this._get(b,"onChangeMonthYear");if(c)c.apply(b.input?b.input[0]:null,[b.selectedYear,b.selectedMonth+1,b])},_getNumberOfMonths:function(b){b=this._get(b,"numberOfMonths");return b==null?[1,1]:typeof b=="number"?[1,b]:b},_getMinMaxDate:function(b,c){return this._determineDate(b,this._get(b,c+"Date"),null)},_getDaysInMonth:function(b,c){return 32-this._daylightSavingAdjust(new Date(b,c,32)).getDate()},_getFirstDayOfMonth:function(b,c){return(new Date(b,c,1)).getDay()},
_canAdjustMonth:function(b,c,g,k){var m=this._getNumberOfMonths(b);g=this._daylightSavingAdjust(new Date(g,k+(c<0?c:m[0]*m[1]),1));c<0&&g.setDate(this._getDaysInMonth(g.getFullYear(),g.getMonth()));return this._isInRange(b,g)},_isInRange:function(b,c){var g=this._getMinMaxDate(b,"min"),k=this._getMinMaxDate(b,"max");return(!g||c.getTime()>=g.getTime())&&(!k||c.getTime()<=k.getTime())},_getFormatConfig:function(b){var c=this._get(b,"shortYearCutoff");c=typeof c!="string"?c:(new Date).getFullYear()%
100+parseInt(c,10);return{shortYearCutoff:c,dayNamesShort:this._get(b,"dayNamesShort"),dayNames:this._get(b,"dayNames"),monthNamesShort:this._get(b,"monthNamesShort"),monthNames:this._get(b,"monthNames")}},_formatDate:function(b,c,g,k){if(!c){b.currentDay=b.selectedDay;b.currentMonth=b.selectedMonth;b.currentYear=b.selectedYear}c=c?typeof c=="object"?c:this._daylightSavingAdjust(new Date(k,g,c)):this._daylightSavingAdjust(new Date(b.currentYear,b.currentMonth,b.currentDay));return this.formatDate(this._get(b,
"dateFormat"),c,this._getFormatConfig(b))}});a.fn.datepicker=function(b){if(!this.length)return this;if(!a.datepicker.initialized){a(document).mousedown(a.datepicker._checkExternalClick).find("body").append(a.datepicker.dpDiv);a.datepicker.initialized=true}var c=Array.prototype.slice.call(arguments,1);if(typeof b=="string"&&(b=="isDisabled"||b=="getDate"||b=="widget"))return a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c));if(b=="option"&&arguments.length==2&&typeof arguments[1]==
"string")return a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c));return this.each(function(){typeof b=="string"?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this].concat(c)):a.datepicker._attachDatepicker(this,b)})};a.datepicker=new e;a.datepicker.initialized=false;a.datepicker.uuid=(new Date).getTime();a.datepicker.version="@VERSION";window["DP_jQuery_"+j]=a})(jQuery);
(function(a,h){var e=Array.prototype.slice,f=a.cleanData;a.cleanData=function(j){for(var b=0,c;(c=j[b])!=null;b++)a(c).triggerHandler("remove");f(j)};a.widget=function(j,b,c){var g=j.split(".")[0],k;j=j.split(".")[1];k=g+"-"+j;if(!c){c=b;b=a.Widget}a.expr[":"][k]=function(o){return!!a.data(o,j)};a[g]=a[g]||{};a[g][j]=a.extend(function(o,n){if(!this._createWidget)return new a[g][j](o,n);arguments.length&&this._createWidget(o,n)},a[g][j]);var m=new b;m.options=a.extend(true,{},m.options);a.each(c,function(o,
n){if(a.isFunction(n))c[o]=function(){var p=function(v){return b.prototype[v].apply(this,e.call(arguments,1))},t=function(v,w){return b.prototype[v].apply(this,w)};return function(){var v=this._super,w=this._superApply,u;this._super=p;this._superApply=t;u=n.apply(this,arguments);this._super=v;this._superApply=w;return u}}()});a[g][j].prototype=a.extend(true,m,{namespace:g,widgetName:j,widgetEventPrefix:j,widgetBaseClass:k},c);a.widget.bridge(j,a[g][j])};a.widget.bridge=function(j,b){a.fn[j]=function(c){var g=
typeof c==="string",k=e.call(arguments,1),m=this;c=!g&&k.length?a.extend.apply(null,[true,c].concat(k)):c;g?this.each(function(){var o=a.data(this,j);if(!o)return a.error("cannot call methods on "+j+" prior to initialization; attempted to call method '"+c+"'");if(!a.isFunction(o[c])||c.charAt(0)==="_")return a.error("no such method '"+c+"' for "+j+" widget instance");var n=o[c].apply(o,k);if(n!==o&&n!==h){m=n.jquery?m.pushStack(n.get()):n;return false}}):this.each(function(){var o=a.data(this,j);
o?o.option(c||{})._init():b(c,this)});return m}};a.Widget=function(j,b){if(!this._createWidget)return new a[namespace][name](j,b);arguments.length&&this._createWidget(j,b)};a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:false},_createWidget:function(j,b){b=a(b||this.defaultElement||this)[0];this.element=a(b);this.options=a.extend(true,{},this.options,this._getCreateOptions(),j);this.bindings=a();this.hoverable=a();this.focusable=a();if(b!==this){a.data(b,
this.widgetName,this);this._bind({remove:"destroy"})}this._create();this._trigger("create");this._init()},_getCreateOptions:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy();this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled");this.bindings.unbind("."+this.widgetName);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},
_destroy:a.noop,widget:function(){return this.element},option:function(j,b){var c=j,g,k,m;if(arguments.length===0)return a.extend({},this.options);if(typeof j==="string"){if(b===h)return this.options[j];c={};g=j.split(".");j=g.shift();if(g.length){k=c[j]=a.extend(true,{},this.options[j]);for(m=0;m<g.length-1;m++){k[g[m]]=k[g[m]]||{};k=k[g[m]]}k[g.pop()]=b}else c[j]=b}this._setOptions(c);return this},_setOptions:function(j){var b=this;a.each(j,function(c,g){b._setOption(c,g)});return this},_setOption:function(j,
b){this.options[j]=b;if(j==="disabled"){this.widget().toggleClass(this.widgetBaseClass+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_bind:function(j,b){if(b){j=a(j);this.bindings=this.bindings.add(j)}else{b=j;j=this.element}var c=this;a.each(b,function(g,k){j.bind(g+
"."+c.widgetName,function(){if(!(c.options.disabled===true||a(this).hasClass("ui-state-disabled")))return(typeof k==="string"?c[k]:k).apply(c,arguments)})})},_hoverable:function(j){this.hoverable=this.hoverable.add(j);this._bind(j,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(j){this.focusable=this.focusable.add(j);this._bind(j,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},
focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(j,b,c){var g=this.options[j];b=a.Event(b);b.type=(j===this.widgetEventPrefix?j:this.widgetEventPrefix+j).toLowerCase();c=c||{};if(b.originalEvent){j=a.event.props.length;for(var k;j;){k=a.event.props[--j];b[k]=b.originalEvent[k]}}this.element.trigger(b,c);c=a.isArray(c)?[b].concat(c):[b,c];return!(a.isFunction(g)&&g.apply(this.element[0],c)===false||b.isDefaultPrevented())}};if(a.uiBackCompat!==false)a.Widget.prototype._getCreateOptions=
function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]}})(jQuery);function popup(a){newwindow=window.open(a,"name","height=400,width=600");window.focus&&newwindow.focus();return false}function collapse(a){jQuery("#"+a).slideToggle()}function fade(a,h){h>0?jQuery("#"+a).hide().fadeIn("slow"):jQuery("#"+a).show().fadeOut("slow")}
function ajax(a,h,e){query="";if(typeof h=="string"){if(d=jQuery(h).serialize())query=d}else{pcs=[];for(i=0;i<h.length;i++)(q=jQuery("#"+h[i]).serialize())&&pcs.push(q);if(pcs.length>0)query=pcs.join("&")}jQuery.ajax({type:"POST",url:a,data:query,success:function(f){if(e)e==":eval"?eval(f):jQuery("#"+e).html(f)}})}String.prototype.reverse=function(){return this.split("").reverse().join("")};
function web2py_ajax_init(){jQuery(".hidden").hide();jQuery(".error").hide().slideDown("slow");jQuery(".flash").click(function(){jQuery(this).fadeOut("slow");return false});jQuery("input.string").attr("size",50);jQuery("textarea.text").attr("cols",50).attr("rows",10);jQuery("input.integer").keyup(function(){this.value=this.value.reverse().replace(/[^0-9\-]|\-(?=.)/g,"").reverse()});jQuery("input.double").keyup(function(){this.value=this.value.reverse().replace(/[^0-9\-\.]|[\-](?=.)|[\.](?=[0-9]*[\.])/g,
"").reverse()})}jQuery(document).ready(function(){jQuery(".flash").hide().slideDown("slow");jQuery(".flash").html()!=""&&jQuery(".flash").slideDown("slow");web2py_ajax_init()});function web2py_trap_form(a,h){jQuery("#"+h+" form").each(function(){var e=jQuery(this);e.hasClass("no_trap")||e.submit(function(){jQuery(".flash").hide().html("");web2py_ajax_page("post",a,e.serialize(),h);return false})})}
function web2py_ajax_page(a,h,e,f){jQuery.ajax({type:a,url:h,data:e,beforeSend:function(j){j.setRequestHeader("web2py-component-location",document.location);j.setRequestHeader("web2py-component-element",f)},complete:function(j){(command=j.getResponseHeader("web2py-component-command"))&&eval(command);(flash=j.getResponseHeader("web2py-component-flash"))&&jQuery(".flash").html(flash).slideDown()},success:function(j){jQuery("#"+f).html(j);web2py_trap_form(h,f);web2py_ajax_init()}})}
function web2py_component(a,h){jQuery(document).ready(function(){web2py_ajax_page("get",a,null,h)})}(function(a){a.fn.elementExists=function(){return jQuery(this).length>0}})(jQuery);(function(a){a.fn.formElementType=function(){return jQuery(this).elementExists()?jQuery(this).attr("type"):""}})(jQuery);(function(a){a.fn.isTextBox=function(){return jQuery(this).formElementType()==="text"}})(jQuery);(function(a){a.fn.isTextArea=function(){return jQuery(this).formElementType()==="textarea"}})(jQuery);
(function(a){a.fn.isPassword=function(){return jQuery(this).formElementType()==="password"}})(jQuery);(function(a){a.fn.isHiddenInput=function(){return jQuery(this).formElementType()==="hidden"}})(jQuery);(function(a){a.fn.isCheckBox=function(){return jQuery(this).formElementType()==="checkbox"}})(jQuery);(function(a){a.fn.isRadioBox=function(){return jQuery(this).formElementType()==="radio"}})(jQuery);(function(a){a.fn.isButton=function(){return jQuery(this).formElementType()==="button"}})(jQuery);
(function(a){a.fn.isSubmitButton=function(){return jQuery(this).formElementType()==="submit"}})(jQuery);(function(a){a.fn.isResetButton=function(){return jQuery(this).formElementType()==="reset"}})(jQuery);(function(a){a.fn.isSelectBox=function(){var h=jQuery(this).formElementType(),e=this.attr("size");return h!=="select-one"?false:typeof e==="undefined"?false:parseInt(e)>1}})(jQuery);(function(a){a.fn.isMultiSelectBox=function(){return jQuery(this).formElementType()==="select-multiple"}})(jQuery);
(function(a){a.fn.isDropDownList=function(){var h=jQuery(this).formElementType(),e=this.attr("size");return h!=="select-one"?false:typeof e==="undefined"?true:parseInt(e)<=1}})(jQuery);(function(a){a.fn.isChecked=function(){return jQuery(this).is(":checked")}})(jQuery);
(function(a){a.fn.isSelected=function(){var h=jQuery(this);if(arguments.length===0)return false;var e=false,f=arguments[0],j=arguments;if(h.isRadioBox()){h=jQuery("input[type='radio'][name='"+h.attr("name")+"'][checked]");if(h.length===1)return f===h.val()}else if(h.isSelectBox()||h.isDropDownList()){h=jQuery("#"+h.attr("id")+" option:selected");if(h.length===1)return f===h.val()}else if(h.isMultiSelectBox()){h=jQuery("#"+h.attr("id")+" option:selected");jQuery.each(h,function(){var b=jQuery(this);
e=false;for(var c=0;c<j.length;c++)if(j[c]===b.val()){e=true;break}})}return e}})(jQuery);
(function(a){a.fn.selectedItem=function(h){var e=jQuery(this);if(typeof h==="undefined"||isNaN(h))h=0;if(e.isRadioBox()){var f=jQuery("input[type='radio'][name='"+e.attr("name")+"'][checked]");if(h>f.length-1)h=f.length-1;else if(h<0)h=0;if(f.length>0)return jQuery(f[h])}else if(e.isSelectBox()||e.isMultiSelectBox()||e.isDropDownList()){f=jQuery("#"+e.attr("id")+" option:selected");if(h>f.length-1)h=f.length-1;else if(h<0)h=0;if(f.length>0)return jQuery(f[h])}return e}})(jQuery);
(function(a){a.fn.firstSelectedItem=function(){return jQuery(this).selectedItem()}})(jQuery);(function(a){a.fn.lastSelectedItem=function(){return jQuery(this).selectedItem(Number.MAX_VALUE)}})(jQuery);(function(a){a.fn.selectedValue=function(){return jQuery(this).selectedItem(0).val()}})(jQuery);
(function(a){a.fn.selectedValues=function(){var h=[],e=jQuery(this);if(e.isMultiSelectBox()){e=jQuery("#"+e.attr("id")+" option:selected");jQuery.each(e,function(){h.push(jQuery(this).val())})}else h.push(e.selectedValue());return h}})(jQuery);
(function(a){a.fn.itemExists=function(h){var e=jQuery(this),f=false;if(e.isRadioBox())f=jQuery("input[type='radio'][name='"+e.attr("name")+"'][value='"+h+"']").length===1;else if(e.isSelectBox()||e.isMultiSelectBox()||e.isDropDownList()){e=jQuery("#"+e.attr("id")+" option");jQuery.each(e,function(){if(jQuery(this).val()===h){f=true;return false}})}else return jQuery(this).val()===h;return f}})(jQuery);
jQuery(document).ready(function(){jQuery(".s3_checkbox_label").cluetip({activation:"hover",positionBy:"auto",local:true,hideLocal:false,showTitle:false,topOffset:0,mouseOutClose:true,arrows:true,clickThrough:true})});
jQuery.fn.fancyZoom=function(a){function h(n){if(g)return false;g=true;var p=$($(this).attr("href")),t=a.height,v=window.innerWidth||window.document.documentElement.clientWidth||window.document.body.clientWidth,w=window.innerHeight||window.document.documentElement.clientHeight||window.document.body.clientHeight,u=window.pageYOffset||window.document.documentElement.scrollTop||window.document.body.scrollTop,r={width:v,height:w,x:window.pageXOffset||window.document.documentElement.scrollLeft||window.document.body.scrollLeft,
y:u};v=(a.width||p.width())+60;w=(t||p.height())+60;t=Math.max(r.height/2-w/2+u,0);r=r.width/2-v/2;u=n.pageY;n=n.pageX;m.attr("curTop",u);m.attr("curLeft",n);m.attr("scaleImg",a.scaleImg?"true":"false");$("#zoom").hide().css({position:"absolute",top:u+"px",left:n+"px",width:"1px",height:"1px"});j();m.hide();a.closeOnClick&&$("#zoom").click(e);if(a.scaleImg){o.html(p.html());$("#zoom_content img").css("width","100%")}else o.html("");$("#zoom").animate({top:t+"px",left:r+"px",opacity:"show",width:v,
height:w},500,null,function(){a.scaleImg!=true&&o.html(p.html());b();m.show();g=false});return false}function e(){if(g)return false;g=true;$("#zoom").unbind("click");j();m.attr("scaleImg")!="true"&&o.html("");m.hide();$("#zoom").animate({top:m.attr("curTop")+"px",left:m.attr("curLeft")+"px",opacity:"hide",width:"1px",height:"1px"},500,null,function(){m.attr("scaleImg")=="true"&&o.html("");b();g=false});return false}function f(n){$("#zoom_table td").each(function(){var v=$(this).css("background-image").replace(/\.(png|gif|none)\"\)$/,
"."+n+'")');$(this).css("background-image",v)});var p=m.children("img"),t=p.attr("src").replace(/\.(png|gif|none)$/,"."+n);p.attr("src",t)}function j(){$.browser.msie&&parseFloat($.browser.version)>=7&&f("gif")}function b(){$.browser.msie&&$.browser.version>=7&&f("png")}var c=(a=a||{})&&a.directory?a.directory:"images",g=false;if($("#zoom").length==0){var k=$.browser.msie?"gif":"png";$("body").append('<div id="zoom" style="display:none;">                   <table id="zoom_table" style="border-collapse:collapse; width:100%; height:100%;">                     <tbody>                       <tr>                         <td class="tl" style="background:url('+
c+"/tl."+k+') 0 0 no-repeat; width:20px height:20px; overflow:hidden;" />                         <td class="tm" style="background:url('+c+"/tm."+k+') 0 0 repeat-x; height:20px; overflow:hidden;" />                         <td class="tr" style="background:url('+c+"/tr."+k+') 100% 0 no-repeat; width:20px height:20px; overflow:hidden;" />                       </tr>                       <tr>                         <td class="ml" style="background:url('+c+"/ml."+k+') 0 0 repeat-y; width:20px; overflow:hidden;" />                         <td class="mm" style="background:#fff; vertical-align:top; padding:10px;">                           <div id="zoom_content">                           </div>                         </td>                         <td class="mr" style="background:url('+
c+"/mr."+k+') 100% 0 repeat-y;  width:20px; overflow:hidden;" />                       </tr>                       <tr>                         <td class="bl" style="background:url('+c+"/bl."+k+') 0 100% no-repeat; width:20px height:20px; overflow:hidden;" />                         <td class="bm" style="background:url('+c+"/bm."+k+') 0 100% repeat-x; height:20px; overflow:hidden;" />                         <td class="br" style="background:url('+c+"/br."+k+') 100% 100% no-repeat; width:20px height:20px; overflow:hidden;" />                       </tr>                     </tbody>                   </table>                   <a href="#" title="Close" id="zoom_close" style="position:absolute; top:0; left:0;">                     <img src="'+
c+"/closebox."+k+'" alt="Close" style="border:none; margin:0; padding:0;" />                   </a>                 </div>');$("html").click(function(n){$(n.target).parents("#zoom:visible").length==0&&e()});$(document).keyup(function(n){n.keyCode==27&&$("#zoom:visible").length>0&&e()});$("#zoom_close").click(e)}$("#zoom");$("#zoom_table");var m=$("#zoom_close"),o=$("#zoom_content");$("td.ml,td.mm,td.mr");this.each(function(){$($(this).attr("href")).hide();$(this).click(h)});return this};
(function(a,h){a.ui=a.ui||{};var e=/left|center|right/,f=/top|center|bottom/,j=/[+-]\d+%?/,b=/^\w+/,c=/%$/,g=a.fn.position;a.fn.position=function(k){if(!k||!k.of)return g.apply(this,arguments);k=a.extend({},k);var m=a(k.of),o=m[0],n=(k.collision||"flip").split(" "),p={},t,v,w,u;if(o.nodeType===9){v=m.width();w=m.height();u={top:0,left:0}}else if(a.isWindow(o)){v=m.width();w=m.height();u={top:m.scrollTop(),left:m.scrollLeft()}}else if(o.preventDefault){k.at="left top";v=w=0;u={top:k.of.pageY,left:k.of.pageX}}else{v=
m.outerWidth();w=m.outerHeight();u=m.offset()}a.each(["my","at"],function(){var r=(k[this]||"").split(" "),y,z;if(r.length===1)r=e.test(r[0])?r.concat(["center"]):f.test(r[0])?["center"].concat(r):["center","center"];r[0]=e.test(r[0])?r[0]:"center";r[1]=f.test(r[1])?r[1]:"center";y=j.exec(r[0]);z=j.exec(r[1]);p[this]=[y?y[0]:0,z?z[0]:0];k[this]=[b.exec(r[0])[0],b.exec(r[1])[0]]});if(n.length===1)n[1]=n[0];if(k.at[0]==="right")u.left+=v;else if(k.at[0]==="center")u.left+=v/2;if(k.at[1]==="bottom")u.top+=
w;else if(k.at[1]==="center")u.top+=w/2;t=[parseInt(p.at[0],10)*(c.test(p.at[0])?v/100:1),parseInt(p.at[1],10)*(c.test(p.at[1])?w/100:1)];u.left+=t[0];u.top+=t[1];return this.each(function(){var r=a(this),y=r.outerWidth(),z=r.outerHeight(),E=parseInt(a.curCSS(this,"marginLeft",true))||0,C=parseInt(a.curCSS(this,"marginTop",true))||0,Q=y+E+(parseInt(a.curCSS(this,"marginRight",true))||0),H=z+C+(parseInt(a.curCSS(this,"marginBottom",true))||0),A=a.extend({},u),I=[parseInt(p.my[0],10)*(c.test(p.my[0])?
r.outerWidth()/100:1),parseInt(p.my[1],10)*(c.test(p.my[1])?r.outerHeight()/100:1)],Y;if(k.my[0]==="right")A.left-=y;else if(k.my[0]==="center")A.left-=y/2;if(k.my[1]==="bottom")A.top-=z;else if(k.my[1]==="center")A.top-=z/2;A.left+=I[0];A.top+=I[1];A.left=Math.round(A.left);A.top=Math.round(A.top);Y={left:A.left-E,top:A.top-C};a.each(["left","top"],function(ca,ba){if(a.ui.position[n[ca]])a.ui.position[n[ca]][ba](A,{targetWidth:v,targetHeight:w,elemWidth:y,elemHeight:z,collisionPosition:Y,collisionWidth:Q,
collisionHeight:H,offset:[t[0]+I[0],t[1]+I[1]],my:k.my,at:k.at})});a.fn.bgiframe&&r.bgiframe();r.offset(a.extend(A,{using:k.using}))})};a.ui.position={fit:{left:function(k,m){var o=a(window);o=m.collisionPosition.left+m.collisionWidth-o.width()-o.scrollLeft();k.left=o>0?k.left-o:Math.max(k.left-m.collisionPosition.left,k.left)},top:function(k,m){var o=a(window);o=m.collisionPosition.top+m.collisionHeight-o.height()-o.scrollTop();k.top=o>0?k.top-o:Math.max(k.top-m.collisionPosition.top,k.top)}},flip:{left:function(k,
m){if(m.at[0]!=="center"){var o=a(window);o=m.collisionPosition.left+m.collisionWidth-o.width()-o.scrollLeft();var n=m.my[0]==="left"?-m.elemWidth:m.my[0]==="right"?m.elemWidth:0,p=m.at[0]==="left"?m.targetWidth:-m.targetWidth,t=-2*m.offset[0];k.left+=m.collisionPosition.left<0?n+p+t:o>0?n+p+t:0}},top:function(k,m){if(m.at[1]!=="center"){var o=a(window);o=m.collisionPosition.top+m.collisionHeight-o.height()-o.scrollTop();var n=m.my[1]==="top"?-m.elemHeight:m.my[1]==="bottom"?m.elemHeight:0,p=m.at[1]===
"top"?m.targetHeight:-m.targetHeight,t=-2*m.offset[1];k.top+=m.collisionPosition.top<0?n+p+t:o>0?n+p+t:0}}}};a.uiBackCompat!==false&&function(k){var m=k.fn.position;k.fn.position=function(o){if(!o||!("offset"in o))return m.call(this,o);var n=o.offset.split(" "),p=o.at.split(" ");if(n.length===1)n[1]=n[0];if(/^\d/.test(n[0]))n[0]="+"+n[0];if(/^\d/.test(n[1]))n[1]="+"+n[1];if(p.length===1)if(/left|center|right/.test(p[0]))p[1]="center";else{p[1]=p[0];p[0]="center"}return m.call(this,k.extend(o,{at:p[0]+
n[0]+" "+p[1]+n[1],offset:h}))}}(jQuery)})(jQuery);
(function(a){var h=0;a.widget("ui.menu",{defaultElement:"<ul>",delay:150,options:{position:{my:"left top",at:"right top"}},_create:function(){var e=this;this.activeMenu=this.element;this.menuId=this.element.attr("id")||"ui-menu-"+h++;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({id:this.menuId,role:"listbox"}).bind("click.menu",function(f){var j=a(f.target).closest(".ui-menu-item:has(a)");if(e.options.disabled)return false;if(j.length){f.preventDefault();if(!e.active||
e.active[0]!==j[0])e.focus(f,j);e.select(f)}}).bind("mouseover.menu",function(f){if(!e.options.disabled){var j=a(f.target).closest(".ui-menu-item");j.length&&e.focus(f,j)}}).bind("mouseout.menu",function(f){e.options.disabled||a(f.target).closest(".ui-menu-item").length&&e.blur(f)});this.refresh();this.element.attr("tabIndex",0).bind("keydown.menu",function(f){if(!e.options.disabled)switch(f.keyCode){case a.ui.keyCode.PAGE_UP:e.previousPage(f);f.preventDefault();f.stopImmediatePropagation();break;
case a.ui.keyCode.PAGE_DOWN:e.nextPage(f);f.preventDefault();f.stopImmediatePropagation();break;case a.ui.keyCode.UP:e.previous(f);f.preventDefault();f.stopImmediatePropagation();break;case a.ui.keyCode.DOWN:e.next(f);f.preventDefault();f.stopImmediatePropagation();break;case a.ui.keyCode.LEFT:e.left(f)&&f.stopImmediatePropagation();f.preventDefault();break;case a.ui.keyCode.RIGHT:e.right(f)&&f.stopImmediatePropagation();f.preventDefault();break;case a.ui.keyCode.ENTER:e.select(f);f.preventDefault();
f.stopImmediatePropagation();break;case a.ui.keyCode.ESCAPE:e.left(f)&&f.stopImmediatePropagation();f.preventDefault();break;default:f.stopPropagation();clearTimeout(e.filterTimer);var j=e.previousFilter||"",b=String.fromCharCode(f.keyCode),c=false;if(b==j)c=true;else b=j+b;var g=function(k){return k.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")};j=e.widget().children(".ui-menu-item").filter(function(){return RegExp("^"+g(b),"i").test(a(this).children("a").text())});j=c&&j.index(e.active.next())!=-1?
e.active.nextAll(".ui-menu-item"):j;if(!j.length){b=String.fromCharCode(f.keyCode);j=e.widget().children(".ui-menu-item").filter(function(){return RegExp("^"+g(b),"i").test(a(this).children("a").text())})}if(j.length){e.focus(f,j);if(j.length>1){e.previousFilter=b;e.filterTimer=setTimeout(function(){delete e.previousFilter},1E3)}else delete e.previousFilter}else delete e.previousFilter}})},_destroy:function(){this.element.removeClass("ui-menu ui-widget ui-widget-content ui-corner-all").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-activedescendant");
this.element.children(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").children("a").removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").unbind(".menu")},refresh:function(){var e=this.element.find("ul:not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide();e.prev("a").prepend('<span class="ui-icon ui-icon-carat-1-e"></span>');e.add(this.element).children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").attr("tabIndex",
-1)},focus:function(e,f){var j=this;this.blur();if(this._hasScroll()){var b=parseFloat(a.curCSS(this.element[0],"borderTopWidth",true))||0,c=parseFloat(a.curCSS(this.element[0],"paddingTop",true))||0;b=f.offset().top-this.element.offset().top-b-c;c=this.element.attr("scrollTop");var g=this.element.height(),k=f.height();if(b<0)this.element.attr("scrollTop",c+b);else b+k>g&&this.element.attr("scrollTop",c+b-g+k)}this.active=f.first().children("a").addClass("ui-state-focus").attr("id",function(m,o){return j.itemId=
o||j.menuId+"-activedescendant"}).end();this.element.removeAttr("aria-activedescendant").attr("aria-activedescendant",j.itemId);j.timer=setTimeout(function(){j._close()},j.delay);b=a(">ul",f);b.length&&/^mouse/.test(e.type)&&j._startOpening(b);this.activeMenu=f.parent();this._trigger("focus",e,{item:f})},blur:function(e){if(this.active){clearTimeout(this.timer);this.active.children("a").removeClass("ui-state-focus");a("#"+this.menuId+"-activedescendant").removeAttr("id");this.element.removeAttr("aria-activedescenant");
this._trigger("blur",e);this.active=null}},_startOpening:function(e){clearTimeout(this.timer);var f=this;f.timer=setTimeout(function(){f._close();f._open(e)},f.delay)},_open:function(e){this.element.find(".ui-menu").not(e.parents()).hide();var f=a.extend({},{of:this.active},a.type(this.options.position)=="function"?this.options.position(this.active):this.options.position);e.show().position(f);this.active.find(">a:first").addClass("ui-state-active")},closeAll:function(){this.element.find("ul").hide().end().find("a.ui-state-active").removeClass("ui-state-active");
this.blur();this.activeMenu=this.element},_close:function(){this.active.parent().find("ul").hide().end().find("a.ui-state-active").removeClass("ui-state-active")},left:function(e){var f=this.active&&this.active.parents("li").first();if(f&&f.length){this.active.parent().hide();this.focus(e,f);return true}},right:function(e){var f=this.active&&this.active.children("ul").children("li").first();if(f&&f.length){this._open(f.parent());this.focus(e,f);return true}},next:function(e){this._move("next",".ui-menu-item",
"first",e)},previous:function(e){this._move("prev",".ui-menu-item","last",e)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,f,j,b){if(this.active){e=this.active[e+"All"](".ui-menu-item").eq(0);e.length?this.focus(b,e):this.focus(b,this.activeMenu.children(f)[j]())}else this.focus(b,this.activeMenu.children(f)[j]())},nextPage:function(e){if(this._hasScroll())if(!this.active||
this.last())this.focus(e,this.activeMenu.children(".ui-menu-item").first());else{var f=this.active.offset().top,j=this.element.height(),b;this.active.nextAll(".ui-menu-item").each(function(){b=a(this);return a(this).offset().top-f-j<0});this.focus(e,b)}else this.focus(e,this.activeMenu.children(".ui-menu-item")[!this.active||this.last()?"first":"last"]())},previousPage:function(e){if(this._hasScroll())if(!this.active||this.first())this.focus(e,this.activeMenu.children(".ui-menu-item").last());else{var f=
this.active.offset().top,j=this.element.height(),b;this.active.prevAll(".ui-menu-item").each(function(){b=a(this);return a(this).offset().top-f+j>0});this.focus(e,b)}else this.focus(e,this.activeMenu.children(".ui-menu-item")[!this.active||this.first()?":last":":first"]())},_hasScroll:function(){return this.element.height()<this.element.attr("scrollHeight")},select:function(e){var f={item:this.active};this.closeAll();this._trigger("select",e,f)}});a.ui.menu.version="@VERSION"})(jQuery);
(function(a){var h=0;a.widget("ui.autocomplete",{defaultElement:"<input>",options:{appendTo:"body",autoFocus:false,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var e=this,f=this.element[0].ownerDocument,j;this.valueMethod=this.element[this.element.is("input")?"val":"text"];this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",
function(b){if(!(e.options.disabled||e.element.attr("readonly"))){j=false;var c=a.ui.keyCode;switch(b.keyCode){case c.PAGE_UP:e._move("previousPage",b);break;case c.PAGE_DOWN:e._move("nextPage",b);break;case c.UP:e._move("previous",b);b.preventDefault();break;case c.DOWN:e._move("next",b);b.preventDefault();break;case c.ENTER:case c.NUMPAD_ENTER:if(e.menu.active){j=true;b.preventDefault()}case c.TAB:if(!e.menu.active)break;e.menu.select(b);break;case c.ESCAPE:e._value(e.term);e.close(b);break;default:clearTimeout(e.searching);
e.searching=setTimeout(function(){if(e.term!=e._value()){e.selectedItem=null;e.search(null,b)}},e.options.delay)}}}).bind("keypress.autocomplete",function(b){if(j){j=false;b.preventDefault()}}).bind("focus.autocomplete",function(){if(!e.options.disabled){e.selectedItem=null;e.previous=e._value()}}).bind("blur.autocomplete",function(b){if(!e.options.disabled){clearTimeout(e.searching);e.closing=setTimeout(function(){e.close(b);e._change(b)},150)}});this._initSource();this.response=function(){return e._response.apply(e,
arguments)};this.menu=a("<ul></ul>").addClass("ui-autocomplete").appendTo(a(this.options.appendTo||"body",f)[0]).mousedown(function(b){var c=e.menu.element[0];a(b.target).closest(".ui-menu-item").length||setTimeout(function(){a(document).one("mousedown",function(g){g.target!==e.element[0]&&g.target!==c&&!a.contains(c,g.target)&&e.close()})},1);setTimeout(function(){clearTimeout(e.closing)},13)}).menu({input:a(),focus:function(b,c){var g=c.item.data("item.autocomplete");false!==e._trigger("focus",
b,{item:g})&&/^key/.test(b.originalEvent.type)&&e._value(g.value)},select:function(b,c){var g=c.item.data("item.autocomplete"),k=e.previous;if(e.element[0]!==f.activeElement){e.element.focus();e.previous=k;setTimeout(function(){e.previous=k;e.selectedItem=g},1)}false!==e._trigger("select",b,{item:g})&&e._value(g.value);e.term=e._value();e.close(b);e.selectedItem=g},blur:function(){e.menu.element.is(":visible")&&e._value()!==e.term&&e._value(e.term)}}).zIndex(this.element.zIndex()+1).hide().data("menu");
a.fn.bgiframe&&this.menu.element.bgiframe()},_destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");this.menu.element.remove()},_setOption:function(e,f){this._super("_setOption",e,f);e==="source"&&this._initSource();if(e==="appendTo")this.menu.element.appendTo(a(f||"body",this.element[0].ownerDocument)[0]);e==="disabled"&&f&&this.xhr&&this.xhr.abort()},_initSource:function(){var e=
this,f,j;if(a.isArray(this.options.source)){f=this.options.source;this.source=function(b,c){c(a.ui.autocomplete.filter(f,b.term))}}else if(typeof this.options.source==="string"){j=this.options.source;this.source=function(b,c){e.xhr&&e.xhr.abort();e.xhr=a.ajax({url:j,data:b,dataType:"json",autocompleteRequest:++h,success:function(g){this.autocompleteRequest===h&&c(g)},error:function(){this.autocompleteRequest===h&&c([])}})}}else this.source=this.options.source},search:function(e,f){e=e!=null?e:this._value();
this.term=this._value();if(e.length<this.options.minLength)return this.close(f);clearTimeout(this.closing);if(this._trigger("search",f)!==false)return this._search(e)},_search:function(e){this.pending++;this.element.addClass("ui-autocomplete-loading");this.source({term:e},this.response)},_response:function(e){if(e)e=this._normalize(e);this._trigger("response",null,{content:e});if(!this.options.disabled&&e&&e.length){this._suggest(e);this._trigger("open")}else this.close();this.pending--;this.pending||
this.element.removeClass("ui-autocomplete-loading")},close:function(e){clearTimeout(this.closing);if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.blur();this._trigger("close",e)}},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(e){if(e.length&&e[0].label&&e[0].value)return e;return a.map(e,function(f){if(typeof f==="string")return{label:f,value:f};return a.extend({label:f.label||f.value,value:f.value||
f.label},f)})},_suggest:function(e){var f=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(f,e);this.menu.blur();this.menu.refresh();f.show();this._resizeMenu();f.position(a.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next(new a.Event("mouseover"))},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth(),this.element.outerWidth()))},_renderMenu:function(e,f){var j=this;a.each(f,function(b,c){j._renderItem(e,
c)})},_renderItem:function(e,f){return a("<li></li>").data("item.autocomplete",f).append(a("<a></a>").text(f.label)).appendTo(e)},_move:function(e,f){if(this.menu.element.is(":visible"))if(this.menu.first()&&/^previous/.test(e)||this.menu.last()&&/^next/.test(e)){this._value(this.term);this.menu.blur()}else this.menu[e](f);else this.search(null,f)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)}});a.extend(a.ui.autocomplete,{version:"@VERSION",
escapeRegex:function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(e,f){var j=RegExp(a.ui.autocomplete.escapeRegex(f),"i");return a.grep(e,function(b){return j.test(b.label||b.value||b)})}})})(jQuery);$(document).ready(function(){S3.rtl?$('div.label label[id!="delete_record__label"]').prepend(":"):$('div.label label[id!="delete_record__label"]').append(":")});var S3={};S3.gis={};var popupWin=null;
function openPopup(a){if(!popupWin||popupWin.closed)popupWin=window.open(a,"popupWin","width=640, height=480");else popupWin.focus()}
$(document).ready(function(){try{$(".zoom").fancyZoom({scaleImg:true,closeOnClick:true,directory:S3.Ap.concat("/static/media")})}catch(a){}$("input.date").datepicker({changeMonth:true,changeYear:true,showOn:"both",buttonImage:S3.Ap.concat("/static/img/jquery-ui/calendar.gif"),buttonImageOnly:true,dateFormat:"yy-mm-dd",isRTL:S3.rtl});$(".error").hide().slideDown("slow");$(".error").click(function(){$(this).fadeOut("slow");return false});$(".warning").hide().slideDown("slow");$(".warning").click(function(){$(this).fadeOut("slow");
return false});$(".information").hide().slideDown("slow");$(".information").click(function(){$(this).fadeOut("slow");return false});$(".confirmation").hide().slideDown("slow");$(".confirmation").click(function(){$(this).fadeOut("slow");return false});$(".hoverable").hover(function(){$(this).addClass("hovered")},function(){$(this).removeClass("hovered")});$("#modulenav li").hover(function(){var e=$(this).width(),f=$("ul",this).width();f!=null&&f<e&&$("ul",this).css({width:e.toString()+"px"});$("ul",
this).css("display","block")},function(){$("ul",this).css("display","none")});$("#subnav li").hover(function(){var e=$(this).width()-2;$("ul",this).css({display:"block",width:e.toString()+"px"})},function(){$("ul",this).css("display","none")});$("a.colorbox").attr("href",function(e,f){var j="";try{j=$(this).parents("tr").attr("id").replace(/__row/,"")}catch(b){if(j=="")return f}var c=f;if(f.indexOf("&caller=")==-1)c=f+"&caller="+j;return c});$(".colorbox").click(function(){$.fn.colorbox({iframe:true,
width:"99%",height:"99%",href:this.href,title:this.title});return false});$(".tooltip").cluetip({activation:"hover",sticky:false,splitTitle:"|"});var h='<img src="'+S3.Ap.concat("/static/img/cross2.png")+'" alt="close" />';$(".stickytip").cluetip({activation:"hover",sticky:true,closePosition:"title",closeText:h,splitTitle:"|"});$(".ajaxtip").cluetip({activation:"click",sticky:true,closePosition:"title",closeText:h,width:380});now=new Date;$("form").append("<input type='hidden' value="+now.getTimezoneOffset()+
" name='_utc_offset'/>")});function s3_tb_remove(){$.fn.colorbox.close()}
(function(a){a.ajaxS3=function(h){var e=a.extend({},a.ajaxS3Settings,h);e.tryCount=0;if(h.message)s3_showStatus(S3.i18n.ajax_get+" "+(h.message?h.message:S3.i18n.ajax_fmd)+"...",this.ajaxS3Settings.msgTimeout);e.success=function(f,j){s3_hideStatus();h.success&&h.success(f,j)};e.error=function(f,j){if(j=="timeout"){this.tryCount++;if(this.tryCount<=this.retryLimit){s3_showStatus(S3.i18n.ajax_get+" "+(h.message?h.message:S3.i18n.ajax_fmd)+"... "+S3.i18n.ajax_rtr+" "+this.tryCount,a.ajaxS3Settings.msgTimeout);
a.ajax(this)}else s3_showStatus(S3.i18n.ajax_wht+" "+(this.retryLimit+1)+" "+S3.i18n.ajax_gvn,a.ajaxS3Settings.msgTimeout,false,true)}else f.status==500?s3_showStatus(S3.i18n.ajax_500,a.ajaxS3Settings.msgTimeout,false,true):s3_showStatus(S3.i18n.ajax_dwn,a.ajaxS3Settings.msgTimeout,false,true)};a.ajax(e)};a.postS3=function(h,e,f,j){return a.ajaxS3({type:"POST",url:h,data:e,success:f,dataType:j})};a.getS3=function(h,e,f,j,b,c){if(a.isFunction(e)){c=b;b=j;j=f;f=e;e=null}if(c)var g=false;return a.ajaxS3({type:"GET",
url:h,async:g,data:e,success:f,dataType:j,message:b})};a.getJSONS3=function(h,e,f,j,b){if(a.isFunction(e)){b=j;j=f;f=e;e=null}b||(b=false);return a.getS3(h,e,f,"json",j,b)};a.ajaxS3Settings={timeout:1E4,msgTimeout:2E3,retryLimit:10,dataType:"json",async:true,type:"GET"};a.ajaxS3Setup=function(h){a.extend(a.ajaxS3Settings,h)}})($);
function S3StatusBar(a,h){var e=this,f=null;this.elementId="_showstatus";this.prependMultiline=true;this.showCloseButton=false;this.afterTimeoutText=null;this.cssClass="statusbar";this.highlightClass="statusbarhighlight";this.errorClass="statusbarerror";this.closeButtonClass="statusbarclose";this.additive=false;$.extend(this,h);if(a)f=$(a);f||(f=$("<div id='_statusbar' class='"+e.cssClass+"'><div class='"+e.closeButtonClass+"'>"+(e.showCloseButton?" X </div></div>":"")).appendTo(document.body).show());
$("."+e.cssClass).click(function(){$(f).hide()});this.show=function(j,b,c,g){if(c||c==undefined&&e.additive){j="<div style='margin-bottom: 2px;' >"+j+"</div>";e.prependMultiline?f.prepend(j):f.append(j)}else if(e.showCloseButton){c=f.find("div.statusbarclose");f.text(j).prepend(c)}else f.text(j);f.show();if(b){g?f.addClass(e.errorClass):f.addClass(e.highlightClass);setTimeout(function(){f.removeClass(e.highlightClass);e.afterTimeoutText&&e.show(e.afterTimeoutText)},b)}};this.release=function(){if(_statusbar){$("#_statusbar").remove();
_statusbar=undefined}}}var _statusbar=null;function s3_showStatus(a,h,e,f){_statusbar||(_statusbar=new S3StatusBar);_statusbar.show(a,h,e,f)}function s3_hideStatus(){_statusbar&&_statusbar.release()}function S3SetNavigateAwayConfirm(){window.onbeforeunload=function(){return S3.i18n.unsaved_changes}}function S3ClearNavigateAwayConfirm(){window.onbeforeunload=function(){}}
function S3EnableNavigateAwayConfirm(){$(document).ready(function(){$("[class=error]").length>0&&S3SetNavigateAwayConfirm();$(":input:not(input[id=gis_location_advanced_checkbox])").keypress(S3SetNavigateAwayConfirm);$(":input:not(input[id=gis_location_advanced_checkbox])").change(S3SetNavigateAwayConfirm);$("form").submit(S3ClearNavigateAwayConfirm)})}function S3ConfirmClick(a,h){$(a).click(function(e){if(confirm(h))return true;else{e.preventDefault();return false}})}
function s3_viewMap(a){a=S3.Ap.concat("/gis/display_feature/")+a;var h=$("#map").html();a="<iframe width='640' height='480' src='"+a+"'></iframe>";var e=$('<a href="#">'+S3.i18n.close_map+"</a>");e.bind("click",function(f){$("#map").html(h);f.preventDefault()});$("#map").html(a);$("#map").append($("<div style='margin-bottom: 10px' />").append(e))}
function s3_viewMapMulti(a,h,e,f){a=S3.Ap.concat("/gis/display_feature//?module=")+a+"&resource="+h+"&instance="+e+"&jresource="+f;var j=$("#map").html();a='<iframe width="640" height="480" src="'+a+'"></iframe>';h=$('<a href="#">'+S3.i18n.close_map+"</a>");h.bind("click",function(b){$("#map").html(j);b.preventDefault()});$("#map").html(a);$("#map").append($("<div style='margin-bottom: 10px' />").append(h))};
