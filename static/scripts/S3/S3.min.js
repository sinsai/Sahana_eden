Calendar=function(a,f,b,e){this.timeout=this.getDateText=this.getDateToolTip=this.getDateStatus=this.currentDateEl=this.activeDiv=null;this.onSelected=b||null;this.onClose=e||null;this.hidden=this.dragging=!1;this.minYear=1970;this.maxYear=2050;this.dateFormat=Calendar._TT.DEF_DATE_FORMAT;this.ttDateFormat=Calendar._TT.TT_DATE_FORMAT;this.weekNumbers=this.isPopup=!0;this.firstDayOfWeek=typeof a=="number"?a:Calendar._FD;this.showsOtherMonths=!1;this.dateStr=f;this.ar_days=null;this.showsTime=!1;this.time24=
!0;this.yearStep=2;this.hiliteToday=!0;this.activeYear=this.hilitedYear=this.activeMonth=this.hilitedMonth=this.yearsCombo=this.monthsCombo=this.firstdayname=this.tbody=this.element=this.table=this.multiple=null;this.dateClicked=!1;if(typeof Calendar._SDN=="undefined"){if(typeof Calendar._SDN_len=="undefined")Calendar._SDN_len=3;a=[];for(f=8;f>0;)a[--f]=Calendar._DN[f].substr(0,Calendar._SDN_len);Calendar._SDN=a;if(typeof Calendar._SMN_len=="undefined")Calendar._SMN_len=3;a=[];for(f=12;f>0;)a[--f]=
Calendar._MN[f].substr(0,Calendar._SMN_len);Calendar._SMN=a}};Calendar._C=null;Calendar.is_ie=/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent);Calendar.is_ie5=Calendar.is_ie&&/msie 5\.0/i.test(navigator.userAgent);Calendar.is_opera=/opera/i.test(navigator.userAgent);Calendar.is_khtml=/Konqueror|Safari|KHTML/i.test(navigator.userAgent);
Calendar.getAbsolutePos=function(a){var f=0,b=0,e=/^div$/i.test(a.tagName);if(e&&a.scrollLeft)f=a.scrollLeft;if(e&&a.scrollTop)b=a.scrollTop;f={x:a.offsetLeft-f,y:a.offsetTop-b};a.offsetParent&&(a=this.getAbsolutePos(a.offsetParent),f.x+=a.x,f.y+=a.y);return f};Calendar.isRelated=function(a,f){var b=f.relatedTarget;if(!b){var e=f.type;if(e=="mouseover")b=f.fromElement;else if(e=="mouseout")b=f.toElement}for(;b;){if(b==a)return!0;b=b.parentNode}return!1};
Calendar.removeClass=function(a,f){if(a&&a.className){for(var b=a.className.split(" "),e=[],h=b.length;h>0;)b[--h]!=f&&(e[e.length]=b[h]);a.className=e.join(" ")}};Calendar.addClass=function(a,f){Calendar.removeClass(a,f);a.className+=" "+f};Calendar.getElement=function(a){for(a=Calendar.is_ie?window.event.srcElement:a.currentTarget;a.nodeType!=1||/^div$/i.test(a.tagName);)a=a.parentNode;return a};
Calendar.getTargetElement=function(a){for(a=Calendar.is_ie?window.event.srcElement:a.target;a.nodeType!=1;)a=a.parentNode;return a};Calendar.stopEvent=function(a){a||(a=window.event);Calendar.is_ie?(a.cancelBubble=!0,a.returnValue=!1):(a.preventDefault(),a.stopPropagation());return!1};Calendar.addEvent=function(a,f,b){a.attachEvent?a.attachEvent("on"+f,b):a.addEventListener?a.addEventListener(f,b,!0):a["on"+f]=b};
Calendar.removeEvent=function(a,f,b){a.detachEvent?a.detachEvent("on"+f,b):a.removeEventListener?a.removeEventListener(f,b,!0):a["on"+f]=null};Calendar.createElement=function(a,f){var b=null,b=document.createElementNS?document.createElementNS("http://www.w3.org/1999/xhtml",a):document.createElement(a);typeof f!="undefined"&&f.appendChild(b);return b};
Calendar._add_evs=function(a){with(Calendar)addEvent(a,"mouseover",dayMouseOver),addEvent(a,"mousedown",dayMouseDown),addEvent(a,"mouseout",dayMouseOut),is_ie&&(addEvent(a,"dblclick",dayMouseDblClick),a.setAttribute("unselectable",!0))};Calendar.findMonth=function(a){if(typeof a.month!="undefined")return a;else if(typeof a.parentNode.month!="undefined")return a.parentNode;return null};
Calendar.findYear=function(a){if(typeof a.year!="undefined")return a;else if(typeof a.parentNode.year!="undefined")return a.parentNode;return null};
Calendar.showMonthsCombo=function(){var a=Calendar._C;if(!a)return!1;var f=a.activeDiv,b=a.monthsCombo;a.hilitedMonth&&Calendar.removeClass(a.hilitedMonth,"hilite");a.activeMonth&&Calendar.removeClass(a.activeMonth,"active");var e=a.monthsCombo.getElementsByTagName("div")[a.date.getMonth()];Calendar.addClass(e,"active");a.activeMonth=e;a=b.style;a.display="block";f.navtype<0?a.left=f.offsetLeft+"px":(b=b.offsetWidth,typeof b=="undefined"&&(b=50),a.left=f.offsetLeft+f.offsetWidth-b+"px");a.top=f.offsetTop+
f.offsetHeight+"px"};
Calendar.showYearsCombo=function(a){var f=Calendar._C;if(!f)return!1;var b=f.activeDiv,e=f.yearsCombo;f.hilitedYear&&Calendar.removeClass(f.hilitedYear,"hilite");f.activeYear&&Calendar.removeClass(f.activeYear,"active");f.activeYear=null;for(var h=f.date.getFullYear()+(a?1:-1),c=e.firstChild,g=!1,m=12;m>0;--m)h>=f.minYear&&h<=f.maxYear?(c.innerHTML=h,c.year=h,c.style.display="block",g=!0):c.style.display="none",c=c.nextSibling,h+=a?f.yearStep:-f.yearStep;if(g)a=e.style,a.display="block",b.navtype<
0?a.left=b.offsetLeft+"px":(e=e.offsetWidth,typeof e=="undefined"&&(e=50),a.left=b.offsetLeft+b.offsetWidth-e+"px"),a.top=b.offsetTop+b.offsetHeight+"px"};
Calendar.tableMouseUp=function(a){var f=Calendar._C;if(!f)return!1;f.timeout&&clearTimeout(f.timeout);var b=f.activeDiv;if(!b)return!1;var e=Calendar.getTargetElement(a);a||(a=window.event);Calendar.removeClass(b,"active");(e==b||e.parentNode==b)&&Calendar.cellClick(b,a);var h=Calendar.findMonth(e),b=null;if(h){if(b=new Date(f.date),h.month!=b.getMonth())b.setMonth(h.month),f.setDate(b),f.dateClicked=!1,f.callHandler()}else if(e=Calendar.findYear(e))if(b=new Date(f.date),e.year!=b.getFullYear())b.setFullYear(e.year),
f.setDate(b),f.dateClicked=!1,f.callHandler();with(Calendar)return removeEvent(document,"mouseup",tableMouseUp),removeEvent(document,"mouseover",tableMouseOver),removeEvent(document,"mousemove",tableMouseOver),f._hideCombos(),_C=null,stopEvent(a)};
Calendar.tableMouseOver=function(a){var f=Calendar._C;if(f){var b=f.activeDiv,e=Calendar.getTargetElement(a);e==b||e.parentNode==b?(Calendar.addClass(b,"hilite active"),Calendar.addClass(b.parentNode,"rowhilite")):((typeof b.navtype=="undefined"||b.navtype!=50&&(b.navtype==0||Math.abs(b.navtype)>2))&&Calendar.removeClass(b,"active"),Calendar.removeClass(b,"hilite"),Calendar.removeClass(b.parentNode,"rowhilite"));a||(a=window.event);if(b.navtype==50&&e!=b){var h=Calendar.getAbsolutePos(b),c=b.offsetWidth,
g=a.clientX,m=!0;g>h.x+c?(g=g-h.x-c,m=!1):g=h.x-g;g<0&&(g=0);for(var h=b._range,c=b._current,g=Math.floor(g/10)%h.length,j=h.length;--j>=0;)if(h[j]==c)break;for(;g-- >0;)m?--j<0&&(j=h.length-1):++j>=h.length&&(j=0);b.innerHTML=h[j];f.onUpdateTime()}(b=Calendar.findMonth(e))?b.month!=f.date.getMonth()?(f.hilitedMonth&&Calendar.removeClass(f.hilitedMonth,"hilite"),Calendar.addClass(b,"hilite"),f.hilitedMonth=b):f.hilitedMonth&&Calendar.removeClass(f.hilitedMonth,"hilite"):(f.hilitedMonth&&Calendar.removeClass(f.hilitedMonth,
"hilite"),(e=Calendar.findYear(e))?e.year!=f.date.getFullYear()?(f.hilitedYear&&Calendar.removeClass(f.hilitedYear,"hilite"),Calendar.addClass(e,"hilite"),f.hilitedYear=e):f.hilitedYear&&Calendar.removeClass(f.hilitedYear,"hilite"):f.hilitedYear&&Calendar.removeClass(f.hilitedYear,"hilite"));return Calendar.stopEvent(a)}};Calendar.tableMouseDown=function(a){if(Calendar.getTargetElement(a)==Calendar.getElement(a))return Calendar.stopEvent(a)};
Calendar.calDragIt=function(a){var f=Calendar._C;if(!f||!f.dragging)return!1;var b,e;Calendar.is_ie?(e=window.event.clientY+document.body.scrollTop,b=window.event.clientX+document.body.scrollLeft):(b=a.pageX,e=a.pageY);f.hideShowCovered();var h=f.element.style;h.left=b-f.xOffs+"px";h.top=e-f.yOffs+"px";return Calendar.stopEvent(a)};
Calendar.calDragEnd=function(a){var f=Calendar._C;if(!f)return!1;f.dragging=!1;with(Calendar)removeEvent(document,"mousemove",calDragIt),removeEvent(document,"mouseup",calDragEnd),tableMouseUp(a);f.hideShowCovered()};
Calendar.dayMouseDown=function(a){var f=Calendar.getElement(a);if(f.disabled)return!1;var b=f.calendar;b.activeDiv=f;Calendar._C=b;if(f.navtype!=300)with(Calendar)f.navtype==50?(f._current=f.innerHTML,addEvent(document,"mousemove",tableMouseOver)):addEvent(document,Calendar.is_ie5?"mousemove":"mouseover",tableMouseOver),addClass(f,"hilite active"),addEvent(document,"mouseup",tableMouseUp);else b.isPopup&&b._dragStart(a);f.navtype==-1||f.navtype==1?(b.timeout&&clearTimeout(b.timeout),b.timeout=setTimeout("Calendar.showMonthsCombo()",
250)):f.navtype==-2||f.navtype==2?(b.timeout&&clearTimeout(b.timeout),b.timeout=setTimeout(f.navtype>0?"Calendar.showYearsCombo(true)":"Calendar.showYearsCombo(false)",250)):b.timeout=null;return Calendar.stopEvent(a)};Calendar.dayMouseDblClick=function(a){Calendar.cellClick(Calendar.getElement(a),a||window.event);Calendar.is_ie&&document.selection.empty()};
Calendar.dayMouseOver=function(a){var f=Calendar.getElement(a);if(Calendar.isRelated(f,a)||Calendar._C||f.disabled)return!1;if(f.ttip){if(f.ttip.substr(0,1)=="_")f.ttip=f.caldate.print(f.calendar.ttDateFormat)+f.ttip.substr(1);f.calendar.tooltips.innerHTML=f.ttip}f.navtype!=300&&(Calendar.addClass(f,"hilite"),f.caldate&&Calendar.addClass(f.parentNode,"rowhilite"));return Calendar.stopEvent(a)};
Calendar.dayMouseOut=function(a){with(Calendar){var f=getElement(a);if(isRelated(f,a)||_C||f.disabled)return!1;removeClass(f,"hilite");f.caldate&&removeClass(f.parentNode,"rowhilite");if(f.calendar)f.calendar.tooltips.innerHTML=_TT.SEL_DATE;return stopEvent(a)}};
Calendar.cellClick=function(a,f){var b=a.calendar,e=!1,h=!1,c=null;if(typeof a.navtype=="undefined"){if(b.currentDateEl&&(Calendar.removeClass(b.currentDateEl,"selected"),Calendar.addClass(a,"selected"),e=b.currentDateEl==a,!e))b.currentDateEl=a;b.date.setDateOnly(a.caldate);var c=b.date,g=!(b.dateClicked=!a.otherMonth);!g&&!b.currentDateEl?b._toggleMultipleDate(new Date(c)):h=!a.disabled;g&&b._init(b.firstDayOfWeek,c)}else{if(a.navtype==200){Calendar.removeClass(a,"hilite");b.callCloseHandler();
return}c=new Date(b.date);a.navtype==0&&c.setDateOnly(new Date);b.dateClicked=!1;var g=c.getFullYear(),m=c.getMonth(),j=function(a){var g=c.getDate(),b=c.getMonthDays(a);g>b&&c.setDate(b);c.setMonth(a)};switch(a.navtype){case 400:Calendar.removeClass(a,"hilite");e=Calendar._TT.ABOUT;typeof e!="undefined"?e+=b.showsTime?Calendar._TT.ABOUT_TIME:"":e='Help and about box text is not translated into this language.\nIf you know this language and you feel generous please update\nthe corresponding file in "lang" subdir to match calendar-en.js\nand send it back to <mihai_bazon@yahoo.com> to get it into the distribution  ;-)\n\nThank you!\nhttp://dynarch.com/mishoo/calendar.epl\n';
alert(e);return;case -2:g>b.minYear&&c.setFullYear(g-1);break;case -1:m>0?j(m-1):g-- >b.minYear&&(c.setFullYear(g),j(11));break;case 1:m<11?j(m+1):g<b.maxYear&&(c.setFullYear(g+1),j(0));break;case 2:g<b.maxYear&&c.setFullYear(g+1);break;case 100:b.setFirstDayOfWeek(a.fdow);return;case 50:e=a._range;h=a.innerHTML;for(g=e.length;--g>=0;)if(e[g]==h)break;f&&f.shiftKey?--g<0&&(g=e.length-1):++g>=e.length&&(g=0);a.innerHTML=e[g];b.onUpdateTime();return;case 0:if(typeof b.getDateStatus=="function"&&b.getDateStatus(c,
c.getFullYear(),c.getMonth(),c.getDate()))return!1}c.equalsTo(b.date)?a.navtype==0&&(h=e=!0):(b.setDate(c),h=!0)}h&&f&&b.callHandler();e&&(Calendar.removeClass(a,"hilite"),f&&b.callCloseHandler())};
Calendar.prototype.create=function(a){var f=null;a?(f=a,this.isPopup=!1):(f=document.getElementsByTagName("body")[0],this.isPopup=!0);this.date=this.dateStr?new Date(this.dateStr):new Date;this.table=a=Calendar.createElement("table");a.cellSpacing=0;a.cellPadding=0;a.calendar=this;Calendar.addEvent(a,"mousedown",Calendar.tableMouseDown);var b=Calendar.createElement("div");this.element=b;b.className="calendar";if(this.isPopup)b.style.position="absolute",b.style.display="none";b.appendChild(a);var e=
Calendar.createElement("thead",a),h=null,c=null,g=this,b=function(a,b,e){h=Calendar.createElement("td",c);h.colSpan=b;h.className="button";e!=0&&Math.abs(e)<=2&&(h.className+=" nav");Calendar._add_evs(h);h.calendar=g;h.navtype=e;h.innerHTML="<div unselectable='on'>"+a+"</div>";return h},c=Calendar.createElement("tr",e),m=6;this.isPopup&&--m;this.weekNumbers&&++m;b("?",1,400).ttip=Calendar._TT.INFO;this.title=b("",m,300);this.title.className="title";if(this.isPopup)this.title.ttip=Calendar._TT.DRAG_TO_MOVE,
this.title.style.cursor="move",b("&#x00d7;",1,200).ttip=Calendar._TT.CLOSE;c=Calendar.createElement("tr",e);c.className="headrow";this._nav_py=b("&#x00ab;",1,-2);this._nav_py.ttip=Calendar._TT.PREV_YEAR;this._nav_pm=b("&#x2039;",1,-1);this._nav_pm.ttip=Calendar._TT.PREV_MONTH;this._nav_now=b(Calendar._TT.TODAY,this.weekNumbers?4:3,0);this._nav_now.ttip=Calendar._TT.GO_TODAY;this._nav_nm=b("&#x203a;",1,1);this._nav_nm.ttip=Calendar._TT.NEXT_MONTH;this._nav_ny=b("&#x00bb;",1,2);this._nav_ny.ttip=Calendar._TT.NEXT_YEAR;
c=Calendar.createElement("tr",e);c.className="daynames";if(this.weekNumbers)h=Calendar.createElement("td",c),h.className="name wn",h.innerHTML=Calendar._TT.WK;for(e=7;e>0;--e)if(h=Calendar.createElement("td",c),!e)h.navtype=100,h.calendar=this,Calendar._add_evs(h);this.firstdayname=this.weekNumbers?c.firstChild.nextSibling:c.firstChild;this._displayWeekdays();this.tbody=m=Calendar.createElement("tbody",a);for(e=6;e>0;--e){c=Calendar.createElement("tr",m);this.weekNumbers&&(h=Calendar.createElement("td",
c));for(var j=7;j>0;--j)h=Calendar.createElement("td",c),h.calendar=this,Calendar._add_evs(h)}this.showsTime?(c=Calendar.createElement("tr",m),c.className="time",h=Calendar.createElement("td",c),h.className="time",h.colSpan=2,h.innerHTML=Calendar._TT.TIME||"&nbsp;",h=Calendar.createElement("td",c),h.className="time",h.colSpan=this.weekNumbers?4:3,function(){function a(c,b,e,m){var f=Calendar.createElement("span",h);f.className=c;f.innerHTML=b;f.calendar=g;f.ttip=Calendar._TT.TIME_PART;f.navtype=50;
f._range=[];if(typeof e!="number")f._range=e;else for(c=e;c<=m;++c)f._range[f._range.length]=c<10&&m>=10?"0"+c:""+c;Calendar._add_evs(f);return f}var b=g.date.getHours(),e=g.date.getMinutes(),m=!g.time24,f=b>12;m&&f&&(b-=12);var j=a("hour",b,m?1:0,m?12:23),b=Calendar.createElement("span",h);b.innerHTML=":";b.className="colon";var v=a("minute",e,0,59),t=null;h=Calendar.createElement("td",c);h.className="time";h.colSpan=2;m?t=a("ampm",f?"pm":"am",["am","pm"]):h.innerHTML="&nbsp;";g.onSetTime=function(){var a,
c=this.date.getHours(),g=this.date.getMinutes();if(m)(a=c>=12)&&(c-=12),c==0&&(c=12),t.innerHTML=a?"pm":"am";j.innerHTML=c<10?"0"+c:c;v.innerHTML=g<10?"0"+g:g};g.onUpdateTime=function(){var a=this.date,c=parseInt(j.innerHTML,10);m&&(/pm/i.test(t.innerHTML)&&c<12?c+=12:/am/i.test(t.innerHTML)&&c==12&&(c=0));var g=a.getDate(),b=a.getMonth(),e=a.getFullYear();a.setHours(c);a.setMinutes(parseInt(v.innerHTML,10));a.setFullYear(e);a.setMonth(b);a.setDate(g);this.dateClicked=!1;this.callHandler()}}()):this.onSetTime=
this.onUpdateTime=function(){};a=Calendar.createElement("tfoot",a);c=Calendar.createElement("tr",a);c.className="footrow";h=b(Calendar._TT.SEL_DATE,this.weekNumbers?8:7,300);h.className="ttip";if(this.isPopup)h.ttip=Calendar._TT.DRAG_TO_MOVE,h.style.cursor="move";this.tooltips=h;this.monthsCombo=b=Calendar.createElement("div",this.element);b.className="combo";for(e=0;e<Calendar._MN.length;++e)a=Calendar.createElement("div"),a.className=Calendar.is_ie?"label-IEfix":"label",a.month=e,a.innerHTML=Calendar._SMN[e],
b.appendChild(a);this.yearsCombo=b=Calendar.createElement("div",this.element);b.className="combo";for(e=12;e>0;--e)a=Calendar.createElement("div"),a.className=Calendar.is_ie?"label-IEfix":"label",b.appendChild(a);this._init(this.firstDayOfWeek,this.date);f.appendChild(this.element)};
Calendar._keyEvent=function(a){var f=window._dynarch_popupCalendar;if(!f||f.multiple)return!1;Calendar.is_ie&&(a=window.event);var b=Calendar.is_ie||a.type=="keypress",e=a.keyCode;if(a.ctrlKey)switch(e){case 37:b&&Calendar.cellClick(f._nav_pm);break;case 38:b&&Calendar.cellClick(f._nav_py);break;case 39:b&&Calendar.cellClick(f._nav_nm);break;case 40:b&&Calendar.cellClick(f._nav_ny);break;default:return!1}else switch(e){case 32:Calendar.cellClick(f._nav_now);break;case 27:b&&f.callCloseHandler();break;
case 37:case 38:case 39:case 40:if(b){var h,c,g,m,j,b=e==37||e==38;j=e==37||e==39?1:7;var k=function(){m=f.currentDateEl;var a=m.pos;h=a&15;c=a>>4;g=f.ar_days[c][h]};k();for(var p=function(){var a=new Date(f.date);a.setDate(a.getDate()-j);f.setDate(a)},n=function(){var a=new Date(f.date);a.setDate(a.getDate()+j);f.setDate(a)};;){switch(e){case 37:if(--h>=0)g=f.ar_days[c][h];else{h=6;e=38;continue}break;case 38:--c>=0?g=f.ar_days[c][h]:(p(),k());break;case 39:if(++h<7)g=f.ar_days[c][h];else{h=0;e=
40;continue}break;case 40:++c<f.ar_days.length?g=f.ar_days[c][h]:(n(),k())}break}g&&(g.disabled?b?p():n():Calendar.cellClick(g))}break;case 13:b&&Calendar.cellClick(f.currentDateEl,a);break;default:return!1}return Calendar.stopEvent(a)};
Calendar.prototype._init=function(a,f){var b=new Date,e=b.getFullYear(),h=b.getMonth(),b=b.getDate();this.table.style.visibility="hidden";var c=f.getFullYear();if(c<this.minYear)c=this.minYear,f.setFullYear(c);else if(c>this.maxYear)c=this.maxYear,f.setFullYear(c);this.firstDayOfWeek=a;this.date=new Date(f);var g=f.getMonth(),m=f.getDate();f.getMonthDays();f.setDate(1);var j=(f.getDay()-this.firstDayOfWeek)%7;j<0&&(j+=7);f.setDate(0-j);f.setDate(f.getDate()+1);for(var j=this.tbody.firstChild,k=this.ar_days=
[],p=Calendar._TT.WEEKEND,n=this.multiple?this.datesCells={}:null,s=0;s<6;++s,j=j.nextSibling){var u=j.firstChild;if(this.weekNumbers)u.className="day wn",u.innerHTML=f.getWeekNumber(),u=u.nextSibling;j.className="daysrow";for(var w=!1,v,t=k[s]=[],r=0;r<7;++r,u=u.nextSibling,f.setDate(v+1)){v=f.getDate();var A=f.getDay();u.className="day";u.pos=s<<4|r;t[r]=u;var x=f.getMonth()==g;if(x)u.otherMonth=!1,w=!0;else if(this.showsOtherMonths)u.className+=" othermonth",u.otherMonth=!0;else{u.className="emptycell";
u.innerHTML="&nbsp;";u.disabled=!0;continue}u.disabled=!1;u.innerHTML=this.getDateText?this.getDateText(f,v):v;n&&(n[f.print("%Y%m%d")]=u);if(this.getDateStatus){var B=this.getDateStatus(f,c,g,v);if(this.getDateToolTip){var N=this.getDateToolTip(f,c,g,v);if(N)u.title=N}if(B===!0)u.className+=" disabled",u.disabled=!0;else{if(/disabled/i.test(B))u.disabled=!0;u.className+=" "+B}}if(!u.disabled){u.caldate=new Date(f);u.ttip="_";if(!this.multiple&&x&&v==m&&this.hiliteToday)u.className+=" selected",this.currentDateEl=
u;f.getFullYear()==e&&f.getMonth()==h&&v==b&&(u.className+=" today",u.ttip+=Calendar._TT.PART_TODAY);p.indexOf(A.toString())!=-1&&(u.className+=u.otherMonth?" oweekend":" weekend")}}if(!w&&!this.showsOtherMonths)j.className="emptyrow"}this.title.innerHTML=Calendar._MN[g]+", "+c;this.onSetTime();this.table.style.visibility="visible";this._initMultipleDates()};
Calendar.prototype._initMultipleDates=function(){if(this.multiple)for(var a in this.multiple){var f=this.datesCells[a];this.multiple[a]&&f&&(f.className+=" selected")}};Calendar.prototype._toggleMultipleDate=function(a){if(this.multiple){var f=a.print("%Y%m%d"),b=this.datesCells[f];b&&(this.multiple[f]?(Calendar.removeClass(b,"selected"),delete this.multiple[f]):(Calendar.addClass(b,"selected"),this.multiple[f]=a))}};Calendar.prototype.setDateToolTipHandler=function(a){this.getDateToolTip=a};
Calendar.prototype.setDate=function(a){a.equalsTo(this.date)||this._init(this.firstDayOfWeek,a)};Calendar.prototype.refresh=function(){this._init(this.firstDayOfWeek,this.date)};Calendar.prototype.setFirstDayOfWeek=function(a){this._init(a,this.date);this._displayWeekdays()};Calendar.prototype.setDateStatusHandler=Calendar.prototype.setDisabledHandler=function(a){this.getDateStatus=a};Calendar.prototype.setRange=function(a,f){this.minYear=a;this.maxYear=f};
Calendar.prototype.callHandler=function(){if(this.onSelected)this.onSelected(this,this.date.print(this.dateFormat))};Calendar.prototype.callCloseHandler=function(){if(this.onClose)this.onClose(this);this.hideShowCovered()};Calendar.prototype.destroy=function(){this.element.parentNode.removeChild(this.element);Calendar._C=null;window._dynarch_popupCalendar=null};Calendar.prototype.reparent=function(a){var f=this.element;f.parentNode.removeChild(f);a.appendChild(f)};
Calendar._checkCalendar=function(a){var f=window._dynarch_popupCalendar;if(!f)return!1;for(var b=Calendar.is_ie?Calendar.getElement(a):Calendar.getTargetElement(a);b!=null&&b!=f.element;b=b.parentNode);if(b==null)return window._dynarch_popupCalendar.callCloseHandler(),Calendar.stopEvent(a)};
Calendar.prototype.show=function(){for(var a=this.table.getElementsByTagName("tr"),f=a.length;f>0;){var b=a[--f];Calendar.removeClass(b,"rowhilite");for(var b=b.getElementsByTagName("td"),e=b.length;e>0;){var h=b[--e];Calendar.removeClass(h,"hilite");Calendar.removeClass(h,"active")}}this.element.style.display="block";this.hidden=!1;if(this.isPopup)window._dynarch_popupCalendar=this,Calendar.addEvent(document,"keydown",Calendar._keyEvent),Calendar.addEvent(document,"keypress",Calendar._keyEvent),
Calendar.addEvent(document,"mousedown",Calendar._checkCalendar);this.hideShowCovered()};Calendar.prototype.hide=function(){this.isPopup&&(Calendar.removeEvent(document,"keydown",Calendar._keyEvent),Calendar.removeEvent(document,"keypress",Calendar._keyEvent),Calendar.removeEvent(document,"mousedown",Calendar._checkCalendar));this.element.style.display="none";this.hidden=!0;this.hideShowCovered()};Calendar.prototype.showAt=function(a,f){var b=this.element.style;b.left=a+"px";b.top=f+"px";this.show()};
Calendar.prototype.showAtElement=function(a,f){var b=this,e=Calendar.getAbsolutePos(a);if(!f||typeof f!="string")return this.showAt(e.x,e.y+a.offsetHeight),!0;this.element.style.display="block";Calendar.continuation_for_the_fucking_khtml_browser=function(){var h=b.element.offsetWidth,c=b.element.offsetHeight;b.element.style.display="none";var g=f.substr(0,1),m="l";f.length>1&&(m=f.substr(1,1));switch(g){case "T":e.y-=c;break;case "B":e.y+=a.offsetHeight;break;case "C":e.y+=(a.offsetHeight-c)/2;break;
case "t":e.y+=a.offsetHeight-c}switch(m){case "L":e.x-=h;break;case "R":e.x+=a.offsetWidth;break;case "C":e.x+=(a.offsetWidth-h)/2;break;case "l":e.x+=a.offsetWidth-h}e.width=h;e.height=c+40;b.monthsCombo.style.display="none";if(e.x<0)e.x=0;if(e.y<0)e.y=0;h=document.createElement("div");c=h.style;c.position="absolute";c.right=c.bottom=c.width=c.height="0px";document.body.appendChild(h);c=Calendar.getAbsolutePos(h);document.body.removeChild(h);Calendar.is_ie?(c.y+=document.body.scrollTop,c.x+=document.body.scrollLeft):
(c.y+=window.scrollY,c.x+=window.scrollX);h=e.x+e.width-c.x;h>0&&(e.x-=h);h=e.y+e.height-c.y;h>0&&(e.y-=h);b.showAt(e.x,e.y)};Calendar.is_khtml?setTimeout("Calendar.continuation_for_the_fucking_khtml_browser()",10):Calendar.continuation_for_the_fucking_khtml_browser()};Calendar.prototype.setDateFormat=function(a){this.dateFormat=a};Calendar.prototype.setTtDateFormat=function(a){this.ttDateFormat=a};Calendar.prototype.parseDate=function(a,f){if(!f)f=this.dateFormat;this.setDate(Date.parseDate(a,f))};
Calendar.prototype.hideShowCovered=function(){function a(a){var c=a.style.visibility;c||(c=document.defaultView&&typeof document.defaultView.getComputedStyle=="function"?Calendar.is_khtml?"":document.defaultView.getComputedStyle(a,"").getPropertyValue("visibility"):a.currentStyle?a.currentStyle.visibility:"");return c}if(Calendar.is_ie||Calendar.is_opera)for(var f=["applet","iframe","select"],b=this.element,e=Calendar.getAbsolutePos(b),h=e.x,c=b.offsetWidth+h,g=e.y,b=b.offsetHeight+g,m=f.length;m>
0;)for(var j=document.getElementsByTagName(f[--m]),k=null,p=j.length;p>0;){var k=j[--p],e=Calendar.getAbsolutePos(k),n=e.x,s=k.offsetWidth+n,e=e.y,u=k.offsetHeight+e;if(this.hidden||n>c||s<h||e>b||u<g){if(!k.__msh_save_visibility)k.__msh_save_visibility=a(k);k.style.visibility=k.__msh_save_visibility}else{if(!k.__msh_save_visibility)k.__msh_save_visibility=a(k);k.style.visibility="hidden"}}};
Calendar.prototype._displayWeekdays=function(){for(var a=this.firstDayOfWeek,f=this.firstdayname,b=Calendar._TT.WEEKEND,e=0;e<7;++e){f.className="day name";var h=(e+a)%7;if(e)f.ttip=Calendar._TT.DAY_FIRST.replace("%s",Calendar._DN[h]),f.navtype=100,f.calendar=this,f.fdow=h,Calendar._add_evs(f);b.indexOf(h.toString())!=-1&&Calendar.addClass(f,"weekend");f.innerHTML=Calendar._SDN[(e+a)%7];f=f.nextSibling}};
Calendar.prototype._hideCombos=function(){this.monthsCombo.style.display="none";this.yearsCombo.style.display="none"};
Calendar.prototype._dragStart=function(a){if(!this.dragging){this.dragging=!0;var f;Calendar.is_ie?(f=window.event.clientY+document.body.scrollTop,a=window.event.clientX+document.body.scrollLeft):(f=a.clientY+window.scrollY,a=a.clientX+window.scrollX);var b=this.element.style;this.xOffs=a-parseInt(b.left);this.yOffs=f-parseInt(b.top);with(Calendar)addEvent(document,"mousemove",calDragIt),addEvent(document,"mouseup",calDragEnd)}};Date._MD=[31,28,31,30,31,30,31,31,30,31,30,31];Date.SECOND=1E3;
Date.MINUTE=60*Date.SECOND;Date.HOUR=60*Date.MINUTE;Date.DAY=24*Date.HOUR;Date.WEEK=7*Date.DAY;
Date.parseDate=function(a,f){for(var b=new Date,e=0,h=-1,c=0,g=a.split(/\W+/),m=f.match(/%./g),j=0,k=0,p=0,n=0,j=0;j<g.length;++j)if(g[j])switch(m[j]){case "%d":case "%e":c=parseInt(g[j],10);break;case "%m":h=parseInt(g[j],10)-1;break;case "%Y":case "%y":e=parseInt(g[j],10);e<100&&(e+=e>29?1900:2E3);break;case "%b":case "%B":for(k=0;k<12;++k)if(Calendar._MN[k].substr(0,g[j].length).toLowerCase()==g[j].toLowerCase()){h=k;break}break;case "%H":case "%I":case "%k":case "%l":p=parseInt(g[j],10);break;
case "%P":case "%p":/pm/i.test(g[j])&&p<12?p+=12:/am/i.test(g[j])&&p>=12&&(p-=12);break;case "%M":n=parseInt(g[j],10)}isNaN(e)&&(e=b.getFullYear());isNaN(h)&&(h=b.getMonth());isNaN(c)&&(c=b.getDate());isNaN(p)&&(p=b.getHours());isNaN(n)&&(n=b.getMinutes());if(e!=0&&h!=-1&&c!=0)return new Date(e,h,c,p,n,0);e=0;h=-1;for(j=c=0;j<g.length;++j)if(g[j].search(/[a-zA-Z]+/)!=-1){m=-1;for(k=0;k<12;++k)if(Calendar._MN[k].substr(0,g[j].length).toLowerCase()==g[j].toLowerCase()){m=k;break}m!=-1&&(h!=-1&&(c=h+
1),h=m)}else parseInt(g[j],10)<=12&&h==-1?h=g[j]-1:parseInt(g[j],10)>31&&e==0?(e=parseInt(g[j],10),e<100&&(e+=e>29?1900:2E3)):c==0&&(c=g[j]);e==0&&(e=b.getFullYear());if(h!=-1&&c!=0)return new Date(e,h,c,p,n,0);return b};Date.prototype.getMonthDays=function(a){var f=this.getFullYear();typeof a=="undefined"&&(a=this.getMonth());return 0==f%4&&(0!=f%100||0==f%400)&&a==1?29:Date._MD[a]};
Date.prototype.getDayOfYear=function(){var a=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0),f=new Date(this.getFullYear(),0,0,0,0,0);return Math.floor((a-f)/Date.DAY)};Date.prototype.getWeekNumber=function(){var a=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0),f=a.getDay();a.setDate(a.getDate()-(f+6)%7+3);f=a.valueOf();a.setMonth(0);a.setDate(4);return Math.round((f-a.valueOf())/6048E5)+1};
Date.prototype.equalsTo=function(a){return this.getFullYear()==a.getFullYear()&&this.getMonth()==a.getMonth()&&this.getDate()==a.getDate()&&this.getHours()==a.getHours()&&this.getMinutes()==a.getMinutes()};Date.prototype.setDateOnly=function(a){a=new Date(a);this.setDate(1);this.setFullYear(a.getFullYear());this.setMonth(a.getMonth());this.setDate(a.getDate())};
Date.prototype.print=function(a){var f=this.getMonth(),b=this.getDate(),e=this.getFullYear(),h=this.getWeekNumber(),c=this.getDay(),g={},m=this.getHours(),j=m>=12,k=j?m-12:m,p=this.getDayOfYear();k==0&&(k=12);var n=this.getMinutes(),s=this.getSeconds();g["%a"]=Calendar._SDN[c];g["%A"]=Calendar._DN[c];g["%b"]=Calendar._SMN[f];g["%B"]=Calendar._MN[f];g["%C"]=1+Math.floor(e/100);g["%d"]=b<10?"0"+b:b;g["%e"]=b;g["%H"]=m<10?"0"+m:m;g["%I"]=k<10?"0"+k:k;g["%j"]=p<100?p<10?"00"+p:"0"+p:p;g["%k"]=m;g["%l"]=
k;g["%m"]=f<9?"0"+(1+f):1+f;g["%M"]=n<10?"0"+n:n;g["%n"]="\n";g["%p"]=j?"PM":"AM";g["%P"]=j?"pm":"am";g["%s"]=Math.floor(this.getTime()/1E3);g["%S"]=s<10?"0"+s:s;g["%t"]="\t";g["%U"]=g["%W"]=g["%V"]=h<10?"0"+h:h;g["%u"]=c+1;g["%w"]=c;g["%y"]=(""+e).substr(2,2);g["%Y"]=e;g["%%"]="%";f=/%./g;if(!Calendar.is_ie5&&!Calendar.is_khtml)return a.replace(f,function(a){return g[a]||a});b=a.match(f);for(e=0;e<b.length;e++)if(h=g[b[e]])f=RegExp(b[e],"g"),a=a.replace(f,h);return a};
Date.prototype.__msh_oldSetFullYear=Date.prototype.setFullYear;Date.prototype.setFullYear=function(a){var f=new Date(this);f.__msh_oldSetFullYear(a);f.getMonth()!=this.getMonth()&&this.setDate(28);this.__msh_oldSetFullYear(a)};window._dynarch_popupCalendar=null;Calendar._DN=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];Calendar._SDN=["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"];Calendar._FD=0;
Calendar._MN=["January","February","March","April","May","June","July","August","September","October","November","December"];Calendar._SMN=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];Calendar._TT={};Calendar._TT.INFO="About the calendar";
Calendar._TT.ABOUT="DHTML Date/Time Selector\n(c) dynarch.com 2002-2005 / Author: Mihai Bazon\nFor latest version visit: http://www.dynarch.com/projects/calendar/\nDistributed under GNU LGPL.  See http://gnu.org/licenses/lgpl.html for details.\n\nDate selection:\n- Use the \u00ab, \u00bb buttons to select year\n- Use the "+String.fromCharCode(8249)+", "+String.fromCharCode(8250)+" buttons to select month\n- Hold mouse button on any of the above buttons for faster selection.";
Calendar._TT.ABOUT_TIME="\n\nTime selection:\n- Click on any of the time parts to increase it\n- or Shift-click to decrease it\n- or click and drag for faster selection.";Calendar._TT.PREV_YEAR="Prev. year (hold for menu)";Calendar._TT.PREV_MONTH="Prev. month (hold for menu)";Calendar._TT.GO_TODAY="Go Today";Calendar._TT.NEXT_MONTH="Next month (hold for menu)";Calendar._TT.NEXT_YEAR="Next year (hold for menu)";Calendar._TT.SEL_DATE="Select date";Calendar._TT.DRAG_TO_MOVE="Drag to move";
Calendar._TT.PART_TODAY=" (today)";Calendar._TT.DAY_FIRST="Display %s first";Calendar._TT.WEEKEND="0,6";Calendar._TT.CLOSE="Close";Calendar._TT.TODAY="Today";Calendar._TT.TIME_PART="(Shift-)Click or drag to change value";Calendar._TT.DEF_DATE_FORMAT="%Y-%m-%d";Calendar._TT.TT_DATE_FORMAT="%a, %b %e";Calendar._TT.WK="wk";Calendar._TT.TIME="Time:";
Calendar.setup=function(a){function f(c,b){typeof a[c]=="undefined"&&(a[c]=b)}function b(a){var c=a.params,b=a.dateClicked||c.electric;if(b&&c.inputField&&(c.inputField.value=a.date.print(c.ifFormat),typeof c.inputField.onchange=="function"))c.inputField.onchange();if(b&&c.displayArea)c.displayArea.innerHTML=a.date.print(c.daFormat);if(b&&typeof c.onUpdate=="function")c.onUpdate(a);b&&c.flat&&typeof c.flatCallback=="function"&&c.flatCallback(a);b&&c.singleClick&&a.dateClicked&&a.callCloseHandler()}
f("inputField",null);f("displayArea",null);f("button",null);f("eventName","click");f("ifFormat","%Y/%m/%d");f("daFormat","%Y/%m/%d");f("singleClick",!0);f("disableFunc",null);f("dateStatusFunc",a.disableFunc);f("dateText",null);f("firstDay",null);f("align","Br");f("range",[1900,2999]);f("weekNumbers",!0);f("flat",null);f("flatCallback",null);f("onSelect",null);f("onClose",null);f("onUpdate",null);f("date",null);f("showsTime",!1);f("timeFormat","24");f("electric",!0);f("step",2);f("position",null);
f("cache",!1);f("showOthers",!1);f("multiple",null);var e=["inputField","displayArea","button"],h;for(h in e)typeof a[e[h]]=="string"&&(a[e[h]]=document.getElementById(a[e[h]]));if(!a.flat&&!a.multiple&&!a.inputField&&!a.displayArea&&!a.button)return alert("Calendar.setup:\n  Nothing to setup (no fields found).  Please check your code"),!1;if(a.flat!=null){if(typeof a.flat=="string")a.flat=document.getElementById(a.flat);if(!a.flat)return alert("Calendar.setup:\n  Flat specified but can't find parent."),
!1;var c=new Calendar(a.firstDay,a.date,a.onSelect||b);c.showsOtherMonths=a.showOthers;c.showsTime=a.showsTime;c.time24=a.timeFormat=="24";c.params=a;c.weekNumbers=a.weekNumbers;c.setRange(a.range[0],a.range[1]);c.setDateStatusHandler(a.dateStatusFunc);c.getDateText=a.dateText;a.ifFormat&&c.setDateFormat(a.ifFormat);a.inputField&&typeof a.inputField.value=="string"&&c.parseDate(a.inputField.value);c.create(a.flat);c.show();return!1}(a.button||a.displayArea||a.inputField)["on"+a.eventName]=function(){var c=
a.inputField||a.displayArea,e=a.inputField?a.ifFormat:a.daFormat,f=!1,h=window.calendar;if(c)a.date=Date.parseDate(c.value||c.innerHTML,e);!h||!a.cache?(window.calendar=h=new Calendar(a.firstDay,a.date,a.onSelect||b,a.onClose||function(a){a.hide()}),h.showsTime=a.showsTime,h.time24=a.timeFormat=="24",h.weekNumbers=a.weekNumbers,f=!0):(a.date&&h.setDate(a.date),h.hide());if(a.multiple){h.multiple={};for(c=a.multiple.length;--c>=0;){var p=a.multiple[c],n=p.print("%Y%m%d");h.multiple[n]=p}}h.showsOtherMonths=
a.showOthers;h.yearStep=a.step;h.setRange(a.range[0],a.range[1]);h.params=a;h.setDateStatusHandler(a.dateStatusFunc);h.getDateText=a.dateText;h.setDateFormat(e);f&&h.create();h.refresh();a.position?h.showAt(a.position[0],a.position[1]):h.showAtElement(a.button||a.displayArea||a.inputField,a.align);return!1};return c};
$(document).ready(function(){function a(){try{b.abort()}catch(a){}$("#TotalQuantity").remove();$("#inv_quantity_ajax_throbber").length==0&&$('[name = "quantity"]').after('<div id="inv_quantity_ajax_throbber" class="ajax_throbber" style="float:right"/>');url="/eden/inv/inv_item_quantity/";url+=$('[name = "inv_item_id"]').val();b=$.getJSON(url,function(a){var g=a.inv_inv_item.quantity,a=a.supply_item_pack.quantity,b=$('[name = "item_pack_id"] option:selected').text(),e=/\(([0-9]*)\sx/.exec(b);TotalQuantity=
'<span id = "TotalQuantity"> / '+(g*a/(e==null?1:e[1])).toFixed(2)+" "+b+" ("+S3.i18n.in_inv+")</span>";$("#inv_quantity_ajax_throbber").remove();$('[name = "quantity"]').after(TotalQuantity)})}function f(){try{b.abort()}catch(e){}var c=$('[name $= "item_id"]'),g=$('[name = "item_pack_id"]');$('[id$="item_pack_id__row1"]').show();$('[id$="item_pack_id__row"]').show();$("#item_pack_ajax_throbber").length==0&&g.after('<div id="item_pack_ajax_throbber" class="ajax_throbber style="display:inline;"/>');
g.hide();var m;m=$('[name = "item_id"]').length!=0?S3.Ap.concat("/supply/item_pack.json?item_pack.item_id=",c.val()):S3.Ap.concat("/inv/inv_item_packs/",c.val());b=$.ajax({url:m,dataType:"json",context:c,success:function(c){var b="",e="";if(c.length==0)b+='<option value="">'+S3.i18n.no_packs+"</options>";else{for(var m=0;m<c.length;m++)if(c[m].quantity==1){e=c[m].name;break}for(m=0;m<c.length;m++)b+='<option value="'+c[m].id+'">',b+=c[m].quantity==1?c[m].name:c[m].name+" ("+c[m].quantity+" x "+e+
")",b+="</option>"}g.html(b).val(1).show();href=$("#item_pack_add").attr("href")+"&item_id="+$('[name = "item_id"]').val();$("#item_pack_add").attr("href",href).show();$("#item_pack_ajax_throbber").remove();this.attr("name")=="inv_item_id"&&a()}})}var b;$("#inv_send_item_item_pack_id").change(a);var e=$('[name $= "item_id"]').val();e==""|e==void 0?($('[id$="item_pack_id__row1"]').hide(),$('[id$="item_pack_id__row"]').hide()):f();$('[name $= "item_id"]').change(f);$(".quantity.ajax_more").live("click",
function(a){a.preventDefault();var a=$(this),c,g;if(a.hasClass("collapsed")){a.hasClass("fulfil")?(g="inv",c="recv"):a.hasClass("transit")?(c="send",g="inv"):a.hasClass("commit")&&(c="commit",g="req");a.after('<div class="ajax_throbber quantity_req_ajax_throbber"/>').removeClass("collapsed").addClass("expanded");var b=/req_item\/(.*)\//i.exec($(".action-btn",a.parent().parent().parent()).attr("href"))[1],b=S3.Ap.concat("/",g,"/",c,"_item_json/",b);$.ajax({url:b,dataType:"json",context:a,success:function(a){RecvTable=
'<table class="recv_table">';for(i=0;i<a.length;i++)RecvTable+="<tr><td>",i==0?RecvTable+=a[0].id:(RecvURL=S3.Ap.concat("/",g,"/",c,"/",a[i].id),RecvTable+="<a href = '"+RecvURL+"'>",RecvTable+=a[i].datetime!=null?a[i].datetime.substring(0,10)+"</a>":" - </a>"),RecvTable+="</td><td>"+a[i].quantity+"</td></tr>";RecvTable+="</table>";$(".quantity_req_ajax_throbber",this.parent()).remove();this.parent().after(RecvTable)}})}else a.removeClass("expanded").addClass("collapsed"),$(".recv_table",a.parent().parent()).remove()})});
(function(a,f){function b(c,g){c=c?' id="'+n+c+'"':"";return a("<div"+c+(g?' style="'+g+'"':"")+"/>")}function e(a,c){c=c==="x"?I.width():I.height();return typeof a==="string"?Math.round(/%/.test(a)?c/100*parseInt(a,10):parseInt(a,10)):a}function h(a){return o.photo||/\.(gif|png|jpg|jpeg|bmp)(?:\?([^#]*))?(?:#(\.*))?$/i.test(a)}function c(c){for(var g in c)a.isFunction(c[g])&&g.substring(0,2)!=="on"&&(c[g]=c[g].call(Q));c.rel=c.rel||Q.rel||"nofollow";c.href=c.href||a(Q).attr("href");c.title=c.title||
Q.title;return c}function g(c,g){g&&g.call(Q);a.event.trigger(c)}function m(){var a,c=n+"Slideshow_",g="click."+n,b,e;o.slideshow&&G[1]&&(b=function(){P.text(o.slideshowStop).unbind(g).bind(w,function(){if(D<G.length-1||o.loop)a=setTimeout(F.next,o.slideshowSpeed)}).bind(u,function(){clearTimeout(a)}).one(g+" "+v,e);y.removeClass(c+"off").addClass(c+"on");a=setTimeout(F.next,o.slideshowSpeed)},e=function(){clearTimeout(a);P.text(o.slideshowStart).unbind([w,u,v,g].join(" ")).one(g,b);y.removeClass(c+
"on").addClass(c+"off")},o.slideshowAuto?b():e())}function j(b){if(!ea){Q=b;o=c(a.extend({},a.data(Q,p)));G=a(Q);D=0;o.rel!=="nofollow"&&(G=a("."+da).filter(function(){return(a.data(this,p).rel||this.rel)===o.rel}),D=G.index(Q),D===-1&&(G=G.add(Q),D=G.length-1));if(!W){W=ca=!0;y.show();if(o.returnFocus)try{Q.blur(),a(Q).one(t,function(){try{this.focus()}catch(a){}})}catch(m){}O.css({opacity:+o.opacity,cursor:o.overlayClose?"pointer":"auto"}).show();o.w=e(o.initialWidth,"x");o.h=e(o.initialHeight,
"y");F.position(0);B&&I.bind("resize."+N+" scroll."+N,function(){O.css({width:I.width(),height:I.height(),top:I.scrollTop(),left:I.scrollLeft()})}).trigger("scroll."+N);g(s,o.onOpen);E.add(S).add(Y).add(P).add(U).hide();K.html(o.close).show()}F.load(!0)}}var k={transition:"elastic",speed:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,inline:!1,html:!1,iframe:!1,photo:!1,href:!1,title:!1,rel:!1,opacity:0.9,
preloading:!0,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",open:!1,returnFocus:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,overlayClose:!0,escKey:!0,arrowKey:!0},p="colorbox",n="cbox",s=n+"_open",u=n+"_load",w=n+"_complete",v=n+"_cleanup",t=n+"_closed",r=n+"_purge",A=n+"_loaded",x=a.browser.msie&&!a.support.opacity,B=x&&a.browser.version<
7,N=n+"_IE6",O,y,z,J,T,Z,V,ba,G,I,H,C,L,U,E,P,Y,S,K,M,aa,X,R,Q,D,o,W,ca,ea=!1,F,da=n+"Element";F=a.fn[p]=a[p]=function(c,g){var b=this,e;if(!b[0]&&b.selector)return b;c=c||{};if(g)c.onComplete=g;if(!b[0]||b.selector===void 0)b=a("<a/>"),c.open=!0;b.each(function(){a.data(this,p,a.extend({},a.data(this,p)||k,c));a(this).addClass(da)});e=c.open;a.isFunction(e)&&(e=e.call(b));e&&j(b[0]);return b};F.init=function(){I=a(f);y=b().attr({id:p,"class":x?n+"IE":""});O=b("Overlay",B?"position:absolute":"").hide();
z=b("Wrapper");J=b("Content").append(H=b("LoadedContent","width:0; height:0; overflow:hidden"),L=b("LoadingOverlay").add(b("LoadingGraphic")),U=b("Title"),E=b("Current"),Y=b("Next"),S=b("Previous"),P=b("Slideshow").bind(s,m),K=b("Close"));z.append(b().append(b("TopLeft"),T=b("TopCenter"),b("TopRight")),b(!1,"clear:left").append(Z=b("MiddleLeft"),J,V=b("MiddleRight")),b(!1,"clear:left").append(b("BottomLeft"),ba=b("BottomCenter"),b("BottomRight"))).children().children().css({"float":"left"});C=b(!1,
"position:absolute; width:9999px; visibility:hidden; display:none");a("body").prepend(O,y.append(z,C));J.children().hover(function(){a(this).addClass("hover")},function(){a(this).removeClass("hover")}).addClass("hover");M=T.height()+ba.height()+J.outerHeight(!0)-J.height();aa=Z.width()+V.width()+J.outerWidth(!0)-J.width();X=H.outerHeight(!0);R=H.outerWidth(!0);y.css({"padding-bottom":M,"padding-right":aa}).hide();Y.click(F.next);S.click(F.prev);K.click(F.close);J.children().removeClass("hover");a("."+
da).live("click",function(a){a.button!==0&&typeof a.button!=="undefined"||a.ctrlKey||a.shiftKey||a.altKey||(a.preventDefault(),j(this))});O.click(function(){o.overlayClose&&F.close()});a(document).bind("keydown",function(a){W&&o.escKey&&a.keyCode===27&&(a.preventDefault(),F.close());if(W&&o.arrowKey&&!ca&&G[1])if(a.keyCode===37&&(D||o.loop))a.preventDefault(),S.click();else if(a.keyCode===39&&(D<G.length-1||o.loop))a.preventDefault(),Y.click()})};F.remove=function(){y.add(O).remove();a("."+da).die("click").removeData(p).removeClass(da)};
F.position=function(a,c){function g(a){T[0].style.width=ba[0].style.width=J[0].style.width=a.style.width;L[0].style.height=L[1].style.height=J[0].style.height=Z[0].style.height=V[0].style.height=a.style.height}var b,e=Math.max(document.documentElement.clientHeight-o.h-X-M,0)/2+I.scrollTop(),m=Math.max(I.width()-o.w-R-aa,0)/2+I.scrollLeft();b=y.width()===o.w+R&&y.height()===o.h+X?0:a;z[0].style.width=z[0].style.height="9999px";y.dequeue().animate({width:o.w+R,height:o.h+X,top:e,left:m},{duration:b,
complete:function(){g(this);ca=!1;z[0].style.width=o.w+R+aa+"px";z[0].style.height=o.h+X+M+"px";c&&c()},step:function(){g(this)}})};F.resize=function(a){if(W){a=a||{};if(a.width)o.w=e(a.width,"x")-R-aa;if(a.innerWidth)o.w=e(a.innerWidth,"x");H.css({width:o.w});if(a.height)o.h=e(a.height,"y")-X-M;if(a.innerHeight)o.h=e(a.innerHeight,"y");if(!a.innerHeight&&!a.height)a=H.wrapInner("<div style='overflow:auto'></div>").children(),o.h=a.height(),a.replaceWith(a.children());H.css({height:o.h});F.position(o.transition===
"none"?0:o.speed)}};F.prep=function(c){function e(c){var b,j,k,s,r=G.length,u=o.loop;F.position(c,function(){function c(){x&&y[0].style.removeAttribute("filter")}if(W){x&&m&&H.fadeIn(100);H.show();g(A);U.show().html(o.title);if(r>1&&(typeof o.current==="string"&&E.html(o.current.replace(/\{current\}/,D+1).replace(/\{total\}/,r)).show(),Y[u||D<r-1?"show":"hide"]().html(o.next),S[u||D?"show":"hide"]().html(o.previous),b=D?G[D-1]:G[r-1],k=D<r-1?G[D+1]:G[0],o.slideshow&&P.show(),o.preloading)){s=a.data(k,
p).href||k.href;j=a.data(b,p).href||b.href;s=a.isFunction(s)?s.call(k):s;j=a.isFunction(j)?j.call(b):j;if(h(s))a("<img/>")[0].src=s;if(h(j))a("<img/>")[0].src=j}L.hide();o.transition==="fade"?y.fadeTo(f,1,function(){c()}):c();I.bind("resize."+n,function(){F.position(0)});g(w,o.onComplete)}})}if(W){var m,f=o.transition==="none"?0:o.speed;I.unbind("resize."+n);H.remove();H=b("LoadedContent").html(c);H.hide().appendTo(C.show()).css({width:function(){o.w=o.w||H.width();o.w=o.mw&&o.mw<o.w?o.mw:o.w;return o.w}(),
overflow:o.scrolling?"auto":"hidden"}).css({height:function(){o.h=o.h||H.height();o.h=o.mh&&o.mh<o.h?o.mh:o.h;return o.h}()}).prependTo(J);C.hide();a("#"+n+"Photo").css({cssFloat:"none",marginLeft:"auto",marginRight:"auto"});if(B)a("select").not(y.find("select")).filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one(v,function(){this.style.visibility="inherit"});o.transition==="fade"?y.fadeTo(f,0,function(){e(0)}):e(f)}};F.load=function(m){var f,j,k,s=F.prep;ca=
!0;Q=G[D];m||(o=c(a.extend({},a.data(Q,p))));g(r);g(u,o.onLoad);o.h=o.height?e(o.height,"y")-X-M:o.innerHeight&&e(o.innerHeight,"y");o.w=o.width?e(o.width,"x")-R-aa:o.innerWidth&&e(o.innerWidth,"x");o.mw=o.w;o.mh=o.h;if(o.maxWidth)o.mw=e(o.maxWidth,"x")-R-aa,o.mw=o.w&&o.w<o.mw?o.w:o.mw;if(o.maxHeight)o.mh=e(o.maxHeight,"y")-X-M,o.mh=o.h&&o.h<o.mh?o.h:o.mh;f=o.href;L.show();o.inline?(b().hide().insertBefore(a(f)[0]).one(r,function(){a(this).replaceWith(H.children())}),s(a(f))):o.iframe?(y.one(A,function(){var c=
a("<iframe frameborder='0' style='width:100%; height:100%; border:0; display:block'/>")[0];c.name=n+ +new Date;c.src=o.href;if(!o.scrolling)c.scrolling="no";if(x)c.allowtransparency="true";a(c).appendTo(H).one(r,function(){c.src="//about:blank"})}),s(" ")):o.html?s(o.html):h(f)?(j=new Image,j.onload=function(){var c;j.onload=null;j.id=n+"Photo";a(j).css({border:"none",display:"block",cssFloat:"left"});o.scalePhotos&&(k=function(){j.height-=j.height*c;j.width-=j.width*c},o.mw&&j.width>o.mw&&(c=(j.width-
o.mw)/j.width,k()),o.mh&&j.height>o.mh&&(c=(j.height-o.mh)/j.height,k()));if(o.h)j.style.marginTop=Math.max(o.h-j.height,0)/2+"px";G[1]&&(D<G.length-1||o.loop)&&a(j).css({cursor:"pointer"}).click(F.next);if(x)j.style.msInterpolationMode="bicubic";setTimeout(function(){s(j)},1)},setTimeout(function(){j.src=f},1)):f&&C.load(f,function(c,g,b){s(g==="error"?"Request unsuccessful: "+b.statusText:a(this).children())})};F.next=function(){ca||(D=D<G.length-1?D+1:0,F.load())};F.prev=function(){ca||(D=D?D-
1:G.length-1,F.load())};F.close=function(){W&&!ea&&(ea=!0,W=!1,g(v,o.onCleanup),I.unbind("."+n+" ."+N),O.fadeTo("fast",0),y.stop().fadeTo("fast",0,function(){g(r);H.remove();y.add(O).css({opacity:1,cursor:"auto"}).hide();setTimeout(function(){ea=!1;g(t,o.onClosed)},1)}))};F.element=function(){return a(Q)};F.settings=k;a(F.init)})(jQuery,this);
(function(a,f){function b(){this.debug=!0;this._curInst=null;this._isInline=!1;this._disabledInputs=[];this._inDialog=this._timepickerShowing=!1;this._dialogClass="ui-timepicker-dialog";this._mainDivId="ui-timepicker-div";this._inlineClass="ui-timepicker-inline";this._currentClass="ui-timepicker-current";this._dayOverClass="ui-timepicker-days-cell-over";this.regional=[];this.regional[""]={hourText:"Hour",minuteText:"Minute",amPmText:["AM","PM"]};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},
appendText:"",onSelect:null,onClose:null,timeSeparator:":",showPeriod:!1,showLeadingZero:!0,showMinutesLeadingZero:!0,altField:"",defaultTime:""};a.extend(this._defaults,this.regional[""]);this.tpDiv=a('<div id="'+this._mainDivId+'" class="ui-timepicker ui-widget ui-helper-clearfix ui-corner-all " style="display: none"></div>')}function e(c,g){a.extend(c,g);for(var b in g)if(g[b]==null||g[b]==f)c[b]=g[b];return c}a.extend(a.ui,{timepicker:{version:"0.0.1"}});var h=(new Date).getTime();a.extend(b.prototype,
{markerClassName:"hasTimepicker",log:function(){this.debug&&console.log.apply("",arguments)},_widgetTimepicker:function(){return this.tpDiv},setDefaults:function(a){e(this._defaults,a||{});return this},_attachTimepicker:function(c,g){var b=null,e;for(e in this._defaults){var f=c.getAttribute("time:"+e);if(f){b=b||{};try{b[e]=eval(f)}catch(h){b[e]=f}}}e=c.nodeName.toLowerCase();f=e=="div"||e=="span";if(!c.id)this.uuid+=1,c.id="tp"+this.uuid;var n=this._newInst(a(c),f);n.settings=a.extend({},g||{},
b||{});e=="input"?this._connectTimepicker(c,n):f&&this._inlineTimepicker(c,n)},_newInst:function(c,g){return{id:c[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:c,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:g,tpDiv:!g?this.tpDiv:a('<div class="'+this._inlineClass+' ui-timepicker ui-widget  ui-helper-clearfix"></div>')}},_connectTimepicker:function(c,g){var b=a(c);g.append=a([]);g.trigger=a([]);b.hasClass(this.markerClassName)||(this._attachments(b,g),b.addClass(this.markerClassName).keydown(this._doKeyDown).keyup(this._doKeyUp).bind("setData.timepicker",
function(a,c,b){g.settings[c]=b}).bind("getData.timepicker",function(a,c){return this._get(g,c)}),a.data(c,"timepicker",g))},_doKeyDown:function(c){var g=!0;a.timepicker._getInst(c.target)._keyEvent=!0;if(a.timepicker._timepickerShowing)switch(c.keyCode){case 9:a.timepicker._hideTimepicker();g=!1;break;case 27:a.timepicker._hideTimepicker();break;default:g=!1}else c.keyCode==36&&c.ctrlKey?a.timepicker._showTimepicker(this):g=!1;g&&(c.preventDefault(),c.stopPropagation())},_doKeyUp:function(c){c=a.timepicker._getInst(c.target);
a.timepicker._setTimeFromField(c);a.timepicker._updateTimepicker(c)},_attachments:function(c,g){var b=this._get(g,"appendText"),e=this._get(g,"isRTL");g.append&&g.append.remove();if(b)g.append=a('<span class="'+this._appendClass+'">'+b+"</span>"),c[e?"before":"after"](g.append);c.unbind("focus",this._showTimepicker);g.trigger&&g.trigger.remove();b=this._get(g,"showOn");(b=="focus"||b=="both")&&c.focus(this._showTimepicker);if(b=="button"||b=="both"){var b=this._get(g,"buttonText"),f=this._get(g,"buttonImage");
g.trigger=a(this._get(g,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:f,alt:b,title:b}):a('<button type="button"></button>').addClass(this._triggerClass).html(f==""?b:a("<img/>").attr({src:f,alt:b,title:b})));c[e?"before":"after"](g.trigger);g.trigger.click(function(){a.timepicker._timepickerShowing&&a.timepicker._lastInput==c[0]?a.timepicker._hideTimepicker():a.timepicker._showTimepicker(c[0]);return!1})}},_inlineTimepicker:function(c,g){var b=a(c);b.hasClass(this.markerClassName)||
(b.addClass(this.markerClassName).append(g.tpDiv).bind("setData.timepicker",function(a,c,b){g.settings[c]=b}).bind("getData.timepicker",function(a,c){return this._get(g,c)}),a.data(c,"timepicker",g),this._setTimeFromField(g),this._updateTimepicker(g),g.tpDiv.show())},_showTimepicker:function(c){c=c.target||c;c.nodeName.toLowerCase()!="input"&&(c=a("input",c.parentNode)[0]);if(!(a.timepicker._isDisabledTimepicker(c)||a.timepicker._lastInput==c)){var g=a.timepicker._getInst(c);a.timepicker._curInst&&
a.timepicker._curInst!=g&&a.timepicker._curInst.tpDiv.stop(!0,!0);var b=a.timepicker._get(g,"beforeShow");e(g.settings,b?b.apply(c,[c,g]):{});g.lastVal=null;a.timepicker._lastInput=c;a.timepicker._setTimeFromField(g);if(a.timepicker._inDialog)c.value="";if(!a.timepicker._pos)a.timepicker._pos=a.timepicker._findPos(c),a.timepicker._pos[1]+=c.offsetHeight;var f=!1;a(c).parents().each(function(){f|=a(this).css("position")=="fixed";return!f});f&&a.browser.opera&&(a.timepicker._pos[0]-=document.documentElement.scrollLeft,
a.timepicker._pos[1]-=document.documentElement.scrollTop);b={left:a.timepicker._pos[0],top:a.timepicker._pos[1]};a.timepicker._pos=null;g.tpDiv.css({position:"absolute",display:"block",top:"-1000px"});a.timepicker._updateTimepicker(g);g._hoursClicked=!1;g._minutesClicked=!1;b=a.timepicker._checkOffset(g,b,f);g.tpDiv.css({position:a.timepicker._inDialog&&a.blockUI?"static":f?"fixed":"absolute",display:"none",left:b.left+"px",top:b.top+"px"});if(!g.inline){var b=a.timepicker._get(g,"showAnim"),h=a.timepicker._get(g,
"duration"),p=function(){a.timepicker._timepickerShowing=!0;var c=a.timepicker._getBorders(g.tpDiv);g.tpDiv.find("iframe.ui-timepicker-cover").css({left:-c[0],top:-c[1],width:g.tpDiv.outerWidth(),height:g.tpDiv.outerHeight()})};g.tpDiv.zIndex(a(c).zIndex()+1);if(a.effects&&a.effects[b])g.tpDiv.show(b,a.timepicker._get(g,"showOptions"),h,p);else g.tpDiv[b||"show"](b?h:null,p);(!b||!h)&&p();g.input.is(":visible")&&!g.input.is(":disabled")&&g.input.focus();a.timepicker._curInst=g}}},_updateTimepicker:function(c){var g=
this,b=a.timepicker._getBorders(c.tpDiv);c.tpDiv.empty().append(this._generateHTML(c)).find("iframe.ui-timepicker-cover").css({left:-b[0],top:-b[1],width:c.tpDiv.outerWidth(),height:c.tpDiv.outerHeight()}).end().find(".ui-timepicker td a").bind("mouseout",function(){a(this).removeClass("ui-state-hover");this.className.indexOf("ui-timepicker-prev")!=-1&&a(this).removeClass("ui-timepicker-prev-hover");this.className.indexOf("ui-timepicker-next")!=-1&&a(this).removeClass("ui-timepicker-next-hover")}).bind("mouseover",
function(){if(!g._isDisabledTimepicker(c.inline?c.tpDiv.parent()[0]:c.input[0]))a(this).parents(".ui-timepicker-calendar").find("a").removeClass("ui-state-hover"),a(this).addClass("ui-state-hover"),this.className.indexOf("ui-timepicker-prev")!=-1&&a(this).addClass("ui-timepicker-prev-hover"),this.className.indexOf("ui-timepicker-next")!=-1&&a(this).addClass("ui-timepicker-next-hover")}).end().find("."+this._dayOverClass+" a").trigger("mouseover").end()},_generateHTML:function(a){var g,b="",e=this._get(a,
"showPeriod")==!0,f=this._get(a,"showLeadingZero")==!0,h=this._get(a,"showMinutesLeadingZero")==!0,n=this._get(a,"amPmText"),b='<table class="ui-timepicker-table ui-widget-content ui-corner-all"><tr><td class="ui-timepicker-hours"><div class="ui-timepicker-title ui-widget-header ui-helper-clearfix ui-corner-all">'+this._get(a,"hourText")+'</div><table class="ui-timepicker">';b+='<tr><th rowspan="2" class="periods">'+n[0]+"</th>";for(g=0;g<=5;g++)b+=this._generateHTMLHourCell(a,g,e,f);b+="</tr><tr>";
for(g=6;g<=11;g++)b+=this._generateHTMLHourCell(a,g,e,f);b+='</tr><tr><th rowspan="2" class="periods">'+n[1]+"</th>";for(g=12;g<=17;g++)b+=this._generateHTMLHourCell(a,g,e,f);b+="</tr><tr>";for(g=18;g<=23;g++)b+=this._generateHTMLHourCell(a,g,e,f);b+='</tr></table></td><td class="ui-timepicker-minutes"><div class="ui-timepicker-title ui-widget-header ui-helper-clearfix ui-corner-all">'+this._get(a,"minuteText")+'</div><table class="ui-timepicker"><tr>';for(g=0;g<15;g+=5)b+=this._generateHTMLMinuteCell(a,
g,g<10&&h?"0"+g.toString():g.toString());b+="</tr><tr>";for(g=15;g<30;g+=5)b+=this._generateHTMLMinuteCell(a,g,g.toString());b+="</tr><tr>";for(g=30;g<45;g+=5)b+=this._generateHTMLMinuteCell(a,g,g.toString());b+="</tr><tr>";for(g=45;g<60;g+=5)b+=this._generateHTMLMinuteCell(a,g,g.toString());b+="</tr></table></td></tr></table>";return b},_generateHTMLHourCell:function(a,g,b,e){var f=g;g>12&&b&&(f=g-12);f==0&&b&&(f=12);f<10&&e&&(f="0"+f);return'<td onclick="TP_jQuery_'+h+".timepicker.selectHours('#"+
a.id+"', "+g.toString()+', this ); return false;" ondblclick="TP_jQuery_'+h+".timepicker.selectHours('#"+a.id+"', "+g.toString()+', this, true ); return false;" ><a href="#" class="ui-state-default '+(g==a.hours?"ui-state-active":"")+'">'+f.toString()+"</a></td>"},_generateHTMLMinuteCell:function(a,g,b){return'<td onclick="TP_jQuery_'+h+".timepicker.selectMinutes('#"+a.id+"', "+g.toString()+', this ); return false;" ondblclick="TP_jQuery_'+h+".timepicker.selectMinutes('#"+a.id+"', "+g.toString()+
', this, true ); return false;" ><a href="#" class="ui-state-default '+(g==a.minutes?"ui-state-active":"")+'" >'+b+"</a></td>"},_isDisabledTimepicker:function(a){if(!a)return!1;for(var g=0;g<this._disabledInputs.length;g++)if(this._disabledInputs[g]==a)return!0;return!1},_checkOffset:function(c,g,b){var e=c.tpDiv.outerWidth(),f=c.tpDiv.outerHeight(),h=c.input?c.input.outerWidth():0,n=c.input?c.input.outerHeight():0,s=document.documentElement.clientWidth+a(document).scrollLeft(),u=document.documentElement.clientHeight+
a(document).scrollTop();g.left-=this._get(c,"isRTL")?e-h:0;g.left-=b&&g.left==c.input.offset().left?a(document).scrollLeft():0;g.top-=b&&g.top==c.input.offset().top+n?a(document).scrollTop():0;g.left-=Math.min(g.left,g.left+e>s&&s>e?Math.abs(g.left+e-s):0);g.top-=Math.min(g.top,g.top+f>u&&u>f?Math.abs(f+n):0);return g},_findPos:function(c){for(var g=this._get(this._getInst(c),"isRTL");c&&(c.type=="hidden"||c.nodeType!=1);)c=c[g?"previousSibling":"nextSibling"];c=a(c).offset();return[c.left,c.top]},
_getBorders:function(a){var g=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(g(a.css("border-left-width"))),parseFloat(g(a.css("border-top-width")))]},_checkExternalClick:function(c){a.timepicker._curInst&&(c=a(c.target),c[0].id!=a.timepicker._mainDivId&&c.parents("#"+a.timepicker._mainDivId).length==0&&!c.hasClass(a.timepicker.markerClassName)&&!c.hasClass(a.timepicker._triggerClass)&&a.timepicker._timepickerShowing&&(!a.timepicker._inDialog||!a.blockUI)&&a.timepicker._hideTimepicker())},
_hideTimepicker:function(c){var g=this._curInst;if(g&&!(c&&g!=a.data(c,"timepicker"))&&this._timepickerShowing){var c=this._get(g,"showAnim"),b=this._get(g,"duration"),e=function(){a.timepicker._tidyDialog(g);this._curInst=null};if(a.effects&&a.effects[c])g.tpDiv.hide(c,a.timepicker._get(g,"showOptions"),b,e);else g.tpDiv[c=="slideDown"?"slideUp":c=="fadeIn"?"fadeOut":"hide"](c?b:null,e);c||e();(c=this._get(g,"onClose"))&&c.apply(g.input?g.input[0]:null,[g.input?g.input.val():"",g]);this._timepickerShowing=
!1;this._lastInput=null;this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),a.blockUI&&(a.unblockUI(),a("body").append(this.tpDiv)));this._inDialog=!1}},_tidyDialog:function(a){a.tpDiv.removeClass(this._dialogClass).unbind(".ui-timepicker")},_getInst:function(c){try{return a.data(c,"timepicker")}catch(g){throw"Missing instance data for this timepicker";}},_get:function(a,g){return a.settings[g]!==f?a.settings[g]:this._defaults[g]},_setTimeFromField:function(a){if(a.input.val()!=
a.lastVal){var g=this._get(a,"defaultTime"),b=this._getCurrentTimeRounded(a);g!=""&&(b=g);a.inline==!1&&a.input.val()!=""&&(b=a.input.val());g=a.lastVal=b;g=this.parseTime(a,g);a.hours=g.hours;a.minutes=g.minutes}},_getCurrentTimeRounded:function(a){var g=new Date,a=this._get(a,"timeSeparator"),b=g.getMinutes(),b=Math.round(b/5)*5;return g.getHours().toString()+a+b.toString()},parseTime:function(a,g){var b={hours:-1,minutes:-1},e=this._get(a,"timeSeparator"),f=this._get(a,"amPmText"),e=g.indexOf(e);
if(e==-1)return b;b.hours=parseInt(g.substr(0,e),10);b.minutes=parseInt(g.substr(e+1),10);var e=this._get(a,"showPeriod")==!0,h=g.toUpperCase();b.hours<12&&e&&h.indexOf(f[1].toUpperCase())!=-1&&(b.hours+=12);if(b.hours==12&&e&&h.indexOf(f[0].toUpperCase())!=-1)b.hours=0;return b},selectHours:function(c,g,b,e){c=this._getInst(a(c)[0]);a(b).parents(".ui-timepicker-hours:first").find("a").removeClass("ui-state-active");a(b).children("a").addClass("ui-state-active");c.hours=g;this._updateSelectedValue(c);
c._hoursClicked=!0;(c._minutesClicked||e)&&a.timepicker._hideTimepicker()},selectMinutes:function(c,g,b,e){c=this._getInst(a(c)[0]);a(b).parents(".ui-timepicker-minutes:first").find("a").removeClass("ui-state-active");a(b).children("a").addClass("ui-state-active");c.minutes=g;this._updateSelectedValue(c);c._minutesClicked=!0;(c._hoursClicked||e)&&a.timepicker._hideTimepicker()},_updateSelectedValue:function(a){if(a.hours<0||a.hours>23)a.hours=12;if(a.minutes<0||a.minutes>59)a.minutes=0;var g="",b=
this._get(a,"showPeriod")==!0,e=this._get(a,"showLeadingZero")==!0,f=this._get(a,"amPmText"),h=a.minutes?a.minutes:0,n=a.hours?a.hours:0;n||(displayHoyrs=0);b&&(a.hours==0&&(n=12),a.hours<12?g=f[0]:(g=f[1],n>12&&(n-=12)));b=n.toString();e&&n<10&&(b="0"+b);e=h.toString();h<10&&(e="0"+e);h=b+this._get(a,"timeSeparator")+e;g.length>0&&(h+=" "+g);a.input&&(a.input.val(h),a.input.trigger("change"));(g=this._get(a,"onSelect"))&&g.apply(a.input?a.input[0]:null,[h,a]);this._updateAlternate(a,h);return h},
_updateAlternate:function(c,g){var b=this._get(c,"altField");b&&a(b).each(function(){a(this).val(g)})}});a.fn.timepicker=function(c){if(!a.timepicker.initialized)a(document).mousedown(a.timepicker._checkExternalClick).find("body").append(a.timepicker.tpDiv),a.timepicker.initialized=!0;var g=Array.prototype.slice.call(arguments,1);if(typeof c=="string"&&(c=="isDisabled"||c=="getDate"||c=="widget"))return a.timepicker["_"+c+"Datepicker"].apply(a.timepicker,[this[0]].concat(g));if(c=="option"&&arguments.length==
2&&typeof arguments[1]=="string")return a.timepicker["_"+c+"Datepicker"].apply(a.timepicker,[this[0]].concat(g));return this.each(function(){typeof c=="string"?a.timepicker["_"+c+"Datepicker"].apply(a.timepicker,[this].concat(g)):a.timepicker._attachTimepicker(this,c)})};a.timepicker=new b;a.timepicker.initialized=!1;a.timepicker.uuid=(new Date).getTime();a.timepicker.version="1.8.6";window["TP_jQuery_"+h]=a})(jQuery);
(function(a){a.cluetip={version:"1.0.7"};var f,b,e,h,c,g,m,j;a.fn.cluetip=function(n,s){typeof n=="object"&&(s=n,n=null);if(n=="destroy")return this.removeData("thisInfo").unbind(".cluetip");return this.each(function(u){function w(){return!1}var v=this,t=a(this),r=a.extend(!0,{},a.fn.cluetip.defaults,s||{},a.metadata?t.metadata():a.meta?t.data():{}),A=!1,x=+r.cluezIndex;t.data("thisInfo",{title:v.title,zIndex:x});var B=!1,N=0;a("#cluetip").length||(a('<div id="cluetip"><div id="cluetip-outer"><h3 id="cluetip-title"></h3><div id="cluetip-inner"></div></div><div id="cluetip-extra"></div><div id="cluetip-arrows" class="cluetip-arrows"></div></div>')[k](p).hide(),
f=a("#cluetip").css({position:"absolute"}),e=a("#cluetip-outer").css({position:"relative",zIndex:x}),b=a("#cluetip-inner"),h=a("#cluetip-title"),c=a("#cluetip-arrows"),g=a('<div id="cluetip-waitimage"></div>').css({position:"absolute"}).insertBefore(f).hide());var O=r.dropShadow?+r.dropShadowSteps:0;if(!m){m=a([]);for(var y=0;y<O;y++)m=m.add(a("<div></div>").css({zIndex:x-1,opacity:0.1,top:1+y,left:1+y}));m.css({position:"absolute",backgroundColor:"#000"}).prependTo(f)}var z=t.attr(r.attribute),J=
r.cluetipClass;if(!z&&!r.splitTitle&&!n)return!0;r.local&&r.localPrefix&&(z=r.localPrefix+z);r.local&&r.hideLocal&&a(z+":first").hide();var T=parseInt(r.topOffset,10),Z=parseInt(r.leftOffset,10),V,ba,G=isNaN(parseInt(r.height,10))?"auto":/\D/g.test(r.height)?r.height:r.height+"px",I,H,C,L,U,E=parseInt(r.width,10)||275,P=E+(parseInt(f.css("paddingLeft"),10)||0)+(parseInt(f.css("paddingRight"),10)||0)+O,Y=this.offsetWidth,S,K,M,aa,X,R=r.attribute!="title"?t.attr(r.titleAttribute):"";r.splitTitle&&(R==
void 0&&(R=""),X=R.split(r.splitTitle),R=X.shift());r.escapeTitle&&(R=R.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;"));var Q=function(h){if(!r.onActivate(t))return!1;B=!0;f.removeClass().css({width:E});z==t.attr("href")&&t.css("cursor",r.cursor);r.hoverClass&&t.addClass(r.hoverClass);H=t.offset().top;S=t.offset().left;M=h.pageX;L=h.pageY;v.tagName.toLowerCase()!="area"&&(I=a(document).scrollTop(),aa=a(window).width());if(r.positionBy=="fixed")K=Y+S+Z,f.css({left:K});else{K=Y>S&&
S>P||S+Y+P+Z>aa?S-P-Z:Y+S+Z;if(v.tagName.toLowerCase()=="area"||r.positionBy=="mouse"||Y+P>aa)M+20+P>aa?(f.addClass(" cluetip-"+J),K=M-P-Z>=0?M-P-Z-parseInt(f.css("marginLeft"),10)+parseInt(b.css("marginRight"),10):M-P/2):K=M+Z;var m=K<0?h.pageY+T:h.pageY;f.css({left:K>0&&r.positionBy!="bottomTop"?K:M+P/2>aa?aa/2-P/2:Math.max(M-P/2,0),zIndex:t.data("thisInfo").zIndex});c.css({zIndex:t.data("thisInfo").zIndex+1})}ba=a(window).height();if(n)typeof n=="function"&&(n=n.call(v)),b.html(n),D(m);else if(X){h=
X.length;b.html(h?X[0]:"");if(h>1)for(var k=1;k<h;k++)b.append('<div class="split-body">'+X[k]+"</div>");D(m)}else if(!r.local&&z.indexOf("#")!==0)if(/\.(jpe?g|tiff?|gif|png)$/i.test(z))b.html('<img src="'+z+'" alt="'+R+'" />'),D(m);else if(A&&r.ajaxCache)b.html(A),D(m);else{var p=r.ajaxSettings.beforeSend,s=r.ajaxSettings.error,o=r.ajaxSettings.success,w=r.ajaxSettings.complete,h=a.extend(!0,{},r.ajaxSettings,{cache:!1,url:z,beforeSend:function(a){p&&p.call(v,a,f,b);e.children().empty();r.waitImage&&
g.css({top:L+20,left:M+20,zIndex:t.data("thisInfo").zIndex-1}).show()},error:function(a,c){B&&(s?s.call(v,a,c,f,b):b.html("<i>sorry, the contents could not be loaded</i>"))},success:function(a,c){A=r.ajaxProcess.call(v,a);B&&(o&&o.call(v,a,c,f,b),b.html(A))},complete:function(c,e){w&&w.call(v,c,e,f,b);var h=b[0].getElementsByTagName("img");j=h.length;for(var k=0,n=h.length;k<n;k++)h[k].complete&&j--;j&&!a.browser.opera?a(h).bind("load error",function(){j--;j<1&&(g.hide(),B&&D(m))}):(g.hide(),B&&D(m))}});
a.ajax(h)}else r.local&&(h=a(z+(/#\S+$/.test(z)?"":":eq("+u+")")).clone(!0).show(),b.html(h),D(m))},D=function(g){f.addClass("cluetip-"+J);if(r.truncate){var j=b.text().slice(0,r.truncate)+"...";b.html(j)}R?h.show().html(R):r.showTitle?h.show().html("&nbsp;"):h.hide();r.sticky&&(j=a('<div id="cluetip-close"><a href="#">'+r.closeText+"</a></div>"),r.closePosition=="bottom"?j.appendTo(b):r.closePosition=="title"?j.prependTo(h):j.prependTo(b),j.bind("click.cluetip",function(){W();return!1}),r.mouseOutClose?
f.bind("mouseleave.cluetip",function(){W()}):f.unbind("mouseleave.cluetip"));j="";e.css({zIndex:t.data("thisInfo").zIndex,overflow:G=="auto"?"visible":"auto",height:G});V=G=="auto"?Math.max(f.outerHeight(),f.height()):parseInt(G,10);C=H;U=I+ba;r.positionBy=="fixed"?C=H-r.dropShadowSteps+T:K<M&&Math.max(K,0)+P>M||r.positionBy=="bottomTop"?H+V+T>U&&L-I>V+T?(C=L-V-T,j="top"):(C=L+T,j="bottom"):C=H+V+T>U?V>=ba?I:U-V-T:t.css("display")=="block"||v.tagName.toLowerCase()=="area"||r.positionBy=="mouse"?g-
T:H-r.dropShadowSteps;j==""&&(K<S?j="left":j="right");f.css({top:C+"px"}).removeClass().addClass("clue-"+j+"-"+J).addClass(" cluetip-"+J);r.arrows?(g=H-C-r.dropShadowSteps,c.css({top:/(left|right)/.test(j)&&K>=0&&g>0?g+"px":/(left|right)/.test(j)?0:""}).show()):c.hide();m.hide();f.hide()[r.fx.open](r.fx.openSpeed||0);r.dropShadow&&m.css({height:V,width:E,zIndex:t.data("thisInfo").zIndex-1}).show();a.fn.bgiframe&&f.bgiframe();r.delayedClose>0&&(N=setTimeout(W,r.delayedClose));r.onShow.call(v,f,b)},
o=function(){B=!1;g.hide();if(!r.sticky||/click|toggle/.test(r.activation))W(),clearTimeout(N);r.hoverClass&&t.removeClass(r.hoverClass)},W=function(){e.parent().hide().removeClass();r.onHide.call(v,f,b);t.removeClass("cluetip-clicked");R&&t.attr(r.titleAttribute,R);t.css("cursor","");r.arrows&&c.css({top:""})};a(document).bind("hideCluetip",function(){W()});if(/click|toggle/.test(r.activation))t.bind("click.cluetip",function(c){f.is(":hidden")||!t.is(".cluetip-clicked")?(Q(c),a(".cluetip-clicked").removeClass("cluetip-clicked"),
t.addClass("cluetip-clicked")):o(c);this.blur();return!1});else if(r.activation=="focus")t.bind("focus.cluetip",function(a){Q(a)}),t.bind("blur.cluetip",function(a){o(a)});else{t[r.clickThrough?"unbind":"bind"]("click",w);var ca=function(a){if(r.tracking==!0){var c=K-a.pageX,g=C?C-a.pageY:H-a.pageY;t.bind("mousemove.cluetip",function(a){f.css({left:a.pageX+c,top:a.pageY+g})})}};a.fn.hoverIntent&&r.hoverIntent?t.hoverIntent({sensitivity:r.hoverIntent.sensitivity,interval:r.hoverIntent.interval,over:function(a){Q(a);
ca(a)},timeout:r.hoverIntent.timeout,out:function(a){o(a);t.unbind("mousemove.cluetip")}}):t.bind("mouseenter.cluetip",function(a){Q(a);ca(a)}).bind("mouseleave.cluetip",function(a){o(a);t.unbind("mousemove.cluetip")});t.bind("mouseover.cluetip",function(){t.attr("title","")}).bind("mouseleave.cluetip",function(){t.attr("title",t.data("thisInfo").title)})}})};a.fn.cluetip.defaults={width:275,height:"auto",cluezIndex:97,positionBy:"auto",topOffset:15,leftOffset:15,local:!1,localPrefix:null,hideLocal:!0,
attribute:"rel",titleAttribute:"title",splitTitle:"",escapeTitle:!1,showTitle:!0,cluetipClass:"default",hoverClass:"",waitImage:!0,cursor:"help",arrows:!1,dropShadow:!0,dropShadowSteps:6,sticky:!1,mouseOutClose:!1,activation:"hover",clickThrough:!1,tracking:!1,delayedClose:0,closePosition:"top",closeText:"Close",truncate:0,fx:{open:"show",openSpeed:""},hoverIntent:{sensitivity:3,interval:50,timeout:0},onActivate:function(){return!0},onShow:function(){},onHide:function(){},ajaxCache:!0,ajaxProcess:function(a){return a=
a.replace(/<(script|style|title)[^<]+<\/(script|style|title)>/gm,"").replace(/<(link|meta)[^>]+>/g,"")},ajaxSettings:{dataType:"html"},debug:!1};var k="appendTo",p="body";a.cluetip.setup=function(a){if(a&&a.insertionType&&a.insertionType.match(/appendTo|prependTo|insertBefore|insertAfter/))k=a.insertionType;if(a&&a.insertionElement)p=a.insertionElement}})(jQuery);
jQuery&&function(a){function f(a,c,b){for(var e="",h=0;h<c.length;h++)if(c[h].optgroup)e+='<label class="optGroup">',e+=b.optGroupSelectable?'<input type="checkbox" class="optGroup" />'+c[h].optgroup:c[h].optgroup,e+='</label><div class="optGroupContainer">',e+=f(a,c[h].options,b),e+="</div>";else{var n=c[h],s='<label><input type="checkbox" name="'+a+'[]" value="'+n.value+'"';n.selected&&(s+=' checked="checked"');s+=" />"+n.text+"</label>";e+=s}return e}function b(g){var b=a(this),j=b.next(".multiSelectOptions"),
k=b.data("config"),p=b.data("callback");j.html("");var n="";k.selectAll&&(n+='<label class="selectAll"><input type="checkbox" class="selectAll" />'+k.selectAllText+"</label>");n+=f(b.attr("id"),g,k);j.html(n);g=j.width();n=!1;j.height()>k.listHeight?(j.css("height",k.listHeight+"px"),n=!0):j.css("height","");g=n&&g==j.width()?17:0;j.width()+g<b.outerWidth()?j.css("width",b.outerWidth()-2+"px"):j.css("width",j.width()+g+"px");a.fn.bgiframe&&b.next(".multiSelectOptions").bgiframe({width:j.width(),height:j.height()});
k.selectAll&&j.find("INPUT.selectAll").click(function(){j.find("INPUT:checkbox").attr("checked",a(this).attr("checked")).parent("LABEL").toggleClass("checked",a(this).attr("checked"))});k.optGroupSelectable&&(j.addClass("optGroupHasCheckboxes"),j.find("INPUT.optGroup").click(function(){a(this).parent().next().find("INPUT:checkbox").attr("checked",a(this).attr("checked")).parent("LABEL").toggleClass("checked",a(this).attr("checked"))}));j.find("INPUT:checkbox").click(function(){a(this).parent("LABEL").toggleClass("checked",
a(this).attr("checked"));c.call(b);b.focus();a(this).parent().parent().hasClass("optGroupContainer")&&h.call(b,a(this).parent().parent().prev());p&&p(a(this))});j.each(function(){a(this).find("INPUT:checked").parent().addClass("checked")});c.call(b);k.optGroupSelectable&&j.find("LABEL.optGroup").each(function(){h.call(b,a(this))});j.find("LABEL:has(INPUT)").hover(function(){a(this).parent().find("LABEL").removeClass("hover");a(this).addClass("hover")},function(){a(this).parent().find("LABEL").removeClass("hover")});
b.keydown(function(g){var f=a(this).next(".multiSelectOptions");if(f.css("visibility")!="hidden"){if(g.keyCode==9)return a(this).addClass("focus").trigger("click"),a(this).focus().next(":input").focus(),!0;(g.keyCode==27||g.keyCode==37||g.keyCode==39)&&a(this).addClass("focus").trigger("click");if(g.keyCode==40||g.keyCode==38){var h=f.find("LABEL"),j=h.index(h.filter(".hover")),k=-1;j<0?f.find("LABEL:first").addClass("hover"):g.keyCode==40&&j<h.length-1?k=j+1:g.keyCode==38&&j>0&&(k=j-1);k>=0&&(a(h.get(j)).removeClass("hover"),
a(h.get(k)).addClass("hover"),e(f));return!1}if(g.keyCode==13||g.keyCode==32)return g=f.find("LABEL.hover INPUT:checkbox"),g.attr("checked",!g.attr("checked")).parent("LABEL").toggleClass("checked",g.attr("checked")),g.hasClass("selectAll")&&f.find("INPUT:checkbox").attr("checked",g.attr("checked")).parent("LABEL").addClass("checked").toggleClass("checked",g.attr("checked")),c.call(b),p&&p(a(this)),!1;if(g.keyCode>=33&&g.keyCode<=126){var h=f.find("LABEL:startsWith("+String.fromCharCode(g.keyCode)+
")"),n=h.index(h.filter("LABEL.hover")),j=h.filter(function(a){return a>n}),h=(j.length>=1?j:h).filter("LABEL:first");h.length==1&&(f.find("LABEL.hover").removeClass("hover"),h.addClass("hover"),e(f))}}else{if(g.keyCode==38||g.keyCode==40||g.keyCode==13||g.keyCode==32)return a(this).removeClass("focus").trigger("click"),f.find("LABEL:first").addClass("hover"),!1;if(g.keyCode==9)return f.next(":input").focus(),!0}if(g.keyCode==13)return!1})}function e(a){var c=a.find("LABEL.hover").position().top+
a.find("LABEL.hover").outerHeight();c>a.innerHeight()&&a.scrollTop(a.scrollTop()+c-a.innerHeight());a.find("LABEL.hover").position().top<0&&a.scrollTop(a.scrollTop()+a.find("LABEL.hover").position().top)}function h(c){if(a(this).data("config").optGroupSelectable){var b=!0;a(c).next().find("INPUT:checkbox").each(function(){if(!a(this).attr("checked"))return b=!1});a(c).find("INPUT.optGroup").attr("checked",b).parent("LABEL").toggleClass("checked",b)}}function c(){var c=a(this),b=c.next(".multiSelectOptions"),
e=c.data("config"),f=0,h=!0,n="";b.find("INPUT:checkbox").not(".selectAll, .optGroup").each(function(){a(this).attr("checked")?(f++,n=n+a(this).parent().text()+", "):h=!1});n=n.replace(/\s*\,\s*$/,"");f==0?c.find("span").html(e.noneSelected):e.oneOrMoreSelected=="*"?(c.find("span").html(n),c.attr("title",n)):c.find("span").html(e.oneOrMoreSelected.replace("%",f));e.selectAll&&b.find("INPUT.selectAll").attr("checked",h).parent("LABEL").toggleClass("checked",h)}a.extend(a.fn,{multiSelect:function(c,
e){c||(c={});if(c.selectAll==void 0)c.selectAll=!0;if(c.selectAllText==void 0)c.selectAllText="Select All";if(c.noneSelected==void 0)c.noneSelected="Select options";if(c.oneOrMoreSelected==void 0)c.oneOrMoreSelected="% selected";if(c.optGroupSelectable==void 0)c.optGroupSelectable=!1;if(c.listHeight==void 0)c.listHeight=150;a(this).each(function(){var f=a(this),h='<a href="javascript:;" class="multiSelect"><span></span></a>';h+='<div class="multiSelectOptions" style="position: absolute; z-index: 99999; visibility: hidden;"></div>';
a(f).after(h);var p=a(f).next(".multiSelect");p.next(".multiSelectOptions");p.find("span").css("width",a(f).width()+"px");p.data("config",c);p.data("callback",e);var n=[];a(f).children().each(function(){if(this.tagName.toUpperCase()=="OPTGROUP"){var c=[];n.push({optgroup:a(this).attr("label"),options:c});a(this).children("OPTION").each(function(){a(this).val()!=""&&c.push({text:a(this).html(),value:a(this).val(),selected:a(this).attr("selected")})})}else this.tagName.toUpperCase()=="OPTION"&&a(this).val()!=
""&&n.push({text:a(this).html(),value:a(this).val(),selected:a(this).attr("selected")})});a(f).remove();p.attr("id",a(f).attr("id"));b.call(p,n);p.hover(function(){a(this).addClass("hover")},function(){a(this).removeClass("hover")}).click(function(){a(this).hasClass("active")?a(this).multiSelectOptionsHide():a(this).multiSelectOptionsShow();return!1}).focus(function(){a(this).addClass("focus")}).blur(function(){a(this).removeClass("focus")});a(document).click(function(c){a(c.target).parents().andSelf().is(".multiSelectOptions")||
p.multiSelectOptionsHide()})})},multiSelectOptionsUpdate:function(c){b.call(a(this),c)},multiSelectOptionsHide:function(){a(this).removeClass("active").removeClass("hover").next(".multiSelectOptions").css("visibility","hidden")},multiSelectOptionsShow:function(){var c=a(this),b=c.next(".multiSelectOptions");c.data("config");a(".multiSelect").multiSelectOptionsHide();b.find("LABEL").removeClass("hover");c.addClass("active").next(".multiSelectOptions").css("visibility","visible");c.focus();c.next(".multiSelectOptions").scrollTop(0);
b=c.position();c.next(".multiSelectOptions").css({top:b.top+a(this).outerHeight()+"px"});c.next(".multiSelectOptions").css({left:b.left+"px"})},selectedValuesString:function(){var c="";a(this).next(".multiSelectOptions").find("INPUT:checkbox:checked").not(".optGroup, .selectAll").each(function(){c+=a(this).attr("value")+","});return c.replace(/\s*\,\s*$/,"")}});a.expr[":"].startsWith=function(c,b,e){b=e[3];if(!b)return!1;return eval("/^[/s]*"+b+"/i").test(a(c).text())}}(jQuery);
var S3MultiselectWidgetFileCounter=0;
function S3MultiselectWidgetAddClick(a){var f=a.WidgetID,b=[/DummyDisplay0/g,/DummyDisplay1/g,/DummyDisplay2/g,/DummyDisplay3/g,/DummyDisplay4/g],e=[/DummyJSON0/g,/DummyJSON1/g,/DummyJSON2/g,/DummyJSON3/g,/DummyJSON4/g],h=$("#"+f+"_json").val(),c="{",g,m=!0,j=a.NewRow,k="",p="";for(i=0;i<a.ColumnFields.length;i++){var n="#"+f+"_"+a.ColumnFields[i],s=$(n),u=$(n+"_auto_text").val();DisplayValue="";if(s.is("select"))g="'"+s.val()+"'",DisplayValue=$(n+" option:selected").text(),s.val("");else if(u!=void 0){DisplayValue=
u;g=$(n+"_auto_json").val();if(a.ColumnFields[i].slice(-3)=="_id"&&g==""){DisplayValue="";break}$(n+"_auto_text").val("");$(n+"_auto_json").val("");$(n+"_auto_edit").hide()}else s.attr("type")=="file"?(DisplayValue=s.val(),DisplayValue!=""&&(k=n,p=a.ColumnFields[i]+S3MultiselectWidgetFileCounter,g="'"+p+"'",S3MultiselectWidgetFileCounter++)):(DisplayValue=s.val(),s.val(""),s.attr("class")=="currency"&&(DisplayValue=g.replace("$","")),DisplayValue=DisplayValue.replace(/'/g,'"'),g="'"+DisplayValue+
"'");DisplayValue!=""&&(m=!1);j=j.replace(b[i],DisplayValue);j=j.replace(e[i],g);c=c+"'"+a.ColumnFields[i]+"':"+g+","}c=c.slice(0,-1)+"}";!m&&!h.match(c)&&(h!=""&&(h+=","),h+=c,$("#"+f+"_json").val(h),$(j).insertBefore("#"+a.WidgetID+"_input_row"),k!=""&&($(k).attr("id",p),$("#"+p).attr("name",p),$("#"+p).hide(),$('<input class="upload" id="drrpp_framework_file_dummy_file" type="file" />').insertAfter("#"+p)))}
function S3MultiselectWidgetDeleteClick(a,f){var b=f.WidgetID,e=$(a).attr("row_id");$("#"+f.DummyName).val();var h=$("#"+b+"_json").val();$(a).parent().parent().remove();if(e!="New")h!=""&&(h+=","),h=h+"{'id':'"+e+"','deleted':True},";else{e="{";for(i=0;i<f.ColumnFields.length;i++)e=e+"'"+f.ColumnFields[i]+"':'"+$(a).attr(f.ColumnFields[i])+"',";e=e.slice(0,-1)+"}";h=h.replace(e,"")}h=h.replace(",,",",");h.slice(-1)==","&&(h=h.slice(0,-1));$("#"+b+"_json").val(h)}
(function(a,f){function b(b){return!a(b).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};a.ui.version||(a.extend(a.ui,{version:"1.8.11",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,
PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({_focus:a.fn.focus,focus:function(b,f){return typeof b==="number"?this.each(function(){var c=this;setTimeout(function(){a(c).focus();f&&f.call(c)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;b=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,
"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(b){if(b!==f)return this.css("zIndex",b);if(this.length)for(var b=a(this[0]),h;b.length&&b[0]!==document;){h=b.css("position");if(h===
"absolute"||h==="relative"||h==="fixed")if(h=parseInt(b.css("zIndex"),10),!isNaN(h)&&h!==0)return h;b=b.parent()}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.each(["Width","Height"],function(b,h){function c(c,b,e,f){a.each(g,function(){b-=parseFloat(a.curCSS(c,"padding"+this,!0))||0;e&&(b-=parseFloat(a.curCSS(c,
"border"+this+"Width",!0))||0);f&&(b-=parseFloat(a.curCSS(c,"margin"+this,!0))||0)});return b}var g=h==="Width"?["Left","Right"]:["Top","Bottom"],m=h.toLowerCase(),j={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+h]=function(g){if(g===f)return j["inner"+h].call(this);return this.each(function(){a(this).css(m,c(this,g)+"px")})};a.fn["outer"+h]=function(g,b){if(typeof g!=="number")return j["outer"+h].call(this,g);return this.each(function(){a(this).css(m,
c(this,g,!0,b)+"px")})}}),a.extend(a.expr[":"],{data:function(b,f,c){return!!a.data(b,c[3])},focusable:function(e){var f=e.nodeName.toLowerCase(),c=a.attr(e,"tabindex");if("area"===f){f=e.parentNode;c=f.name;if(!e.href||!c||f.nodeName.toLowerCase()!=="map")return!1;e=a("img[usemap=#"+c+"]")[0];return!!e&&b(e)}return(/input|select|textarea|button|object/.test(f)?!e.disabled:"a"==f?e.href||!isNaN(c):!isNaN(c))&&b(e)},tabbable:function(b){var f=a.attr(b,"tabindex");return(isNaN(f)||f>=0)&&a(b).is(":focusable")}}),
a(function(){var b=document.body,f=b.appendChild(f=document.createElement("div"));a.extend(f.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});a.support.minHeight=f.offsetHeight===100;a.support.selectstart="onselectstart"in f;b.removeChild(f).style.display="none"}),a.extend(a.ui,{plugin:{add:function(b,f,c){var b=a.ui[b].prototype,g;for(g in c)b.plugins[g]=b.plugins[g]||[],b.plugins[g].push([f,c[g]])},call:function(a,b,c){if((b=a.plugins[b])&&a.element[0].parentNode)for(var g=0;g<b.length;g++)a.options[b[g][0]]&&
b[g][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(b,f){if(a(b).css("overflow")==="hidden")return!1;var c=f&&f==="left"?"scrollLeft":"scrollTop",g=!1;if(b[c]>0)return!0;b[c]=1;g=b[c]>0;b[c]=0;return g},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(b,f,c,g,m,j){return a.ui.isOverAxis(b,c,m)&&a.ui.isOverAxis(f,g,j)}}))})(jQuery);var s3_gis_pullNext;
function s3_gis_dropdown_select(a,f){s3_gis_pullNext=!1;a==s3_gis_maxlevel?($("#gis_location__label__row").removeClass("hidden").show(),$("#gis_location___row").removeClass("hidden").show(),$("#gis_location_").removeClass("hidden").show()):($("#gis_location_L"+(a+1)+"_label__row").removeClass("hidden").show(),$("#gis_location_L"+(a+1)+"__row").removeClass("hidden").show(),s3_gis_hide_dropdown(a+2));var b=$("#gis_location_name").val(),e=$("#gis_location_lat").val(),h=$("#gis_location_lon").val(),c=
$("#gis_location_addr_street").val(),g=$("#gis_location_postcode").val(),b=b||e||h||c||g?!0:!1;if((e=$("#gis_location_L"+a).val())||f){var m;$.getJSONS3(a==s3_gis_maxlevel?s3_gis_url+"/search.json?filter=%3D&field=level&value=nullnone&parent="+e:s3_gis_url+"/search.json?filter=%3D&field=level&value=L"+(a+1)+"&parent="+e,function(c){if(c.length==0)m=s3_gis_empty_set;else if(!f&&a!=s3_gis_maxlevel&&c.length==1)m=s3_gis_select_location,m+='<option selected="" value="'+c[0].id+'">'+c[0].name+"</option>",
s3_gis_pullNext=!0;else{m=s3_gis_select_location;for(var g=0;g<c.length;g++)m+='<option value="'+c[g].id+'">'+c[g].name+"</option>"}a==s3_gis_maxlevel?$("#gis_location_").html(m):$("#gis_location_L"+(a+1)).html(m)},!1,!0);s3_gis_pullNext?(e=$("#gis_location_L"+(a+1)).val(),b||$("#"+s3_gis_location_id).val(e),s3_gis_dropdown_select(a+1)):b||$("#"+s3_gis_location_id).val(e)}else a!=s3_gis_maxlevel&&(s3_gis_hide_dropdown(a+1),0==a&&!b&&$("#"+s3_gis_location_id).val(""))}
function s3_gis_hide_dropdown(a){for(l=a;l<=s3_gis_maxlevel;l+=1)$("#gis_location_L"+l+"_label__row").hide(),$("#gis_location_L"+l+"__row").hide(),$("#gis_location_L"+l).html(s3_gis_loading_locations);a<parseInt(s3_gis_maxlevel)+2&&($("#gis_location___row").hide(),$("#gis_location__label__row").hide(),$("#gis_location_details-btn").hide(),$("#gis_location_").html(s3_gis_loading_locations))}
function s3_gis_hide_details(){$("#gis_location_name_label").hide();$("#gis_location_name").hide();$("#gis_location_details_hide-btn").hide();$("#gis_location_addr_street_label").hide();$("#gis_location_addr_street_row").hide();$("#gis_location_postcode_label").hide();$("#gis_location_postcode_row").hide();$("#gis_location_map-btn").hide();$("#gis_location_advanced_div").hide()}
function s3_gis_show_details(){$("#gis_location_name_label").removeClass("hidden").show();$("#gis_location_name").removeClass("hidden").show();$("#gis_location_details_hide-btn").removeClass("hidden").show();$("#gis_location_addr_street_label").removeClass("hidden").show();$("#gis_location_addr_street_row").removeClass("hidden").show();$("#gis_location_postcode_label").removeClass("hidden").show();$("#gis_location_postcode_row").removeClass("hidden").show();$("#gis_location_map-btn").removeClass("hidden").show();
$("#gis_location_advanced_div").removeClass("hidden").show()}
function s3_gis_search(){$("#gis_location_search-btn-label").removeClass("hidden").show();$("#gis_location_autocomplete_div").removeClass("hidden").show();$("#gis_location_add-btn").removeClass("hidden").show();$("#gis_location_cancel-btn").hide();$("#gis_location_L0_label__row").hide();$("#gis_location_L0__row").hide();$("#gis_location_L1_label__row").hide();$("#gis_location_L1__row").hide();$("#gis_location_L2_label__row").hide();$("#gis_location_L2__row").hide();$("#gis_location_L3_label__row").hide();
$("#gis_location_L3__row").hide();$("#gis_location_L4_label__row").hide();$("#gis_location_L4__row").hide();$("#gis_location_L5_label__row").hide();$("#gis_location_L5__row").hide();$("#gis_location___row").hide();$("#gis_location__label__row").hide();$("#gis_location_details-btn").hide();s3_gis_hide_details()}
function s3_gis_add_new(){$("#gis_location_cancel-btn").removeClass("hidden").show();$("#gis_location_autocomplete_div").hide();$("#gis_location_search-btn-label").hide();$("#gis_location_search-btn").show();$("#gis_location_L0_label__row").show();$("#gis_location_L0__row").show();$("#gis_location_L1").html()!=s3_gis_loading_locations&&($("#gis_location_L1_label__row").show(),$("#gis_location_L1__row").show());$("#gis_location_L2").html()!=s3_gis_loading_locations&&($("#gis_location_L2_label__row").show(),
$("#gis_location_L2__row").show());$("#gis_location_L3").html()!=s3_gis_loading_locations&&($("#gis_location_L3_label__row").show(),$("#gis_location_L3__row").show());$("#gis_location_L4").html()!=s3_gis_loading_locations&&($("#gis_location_L4_label__row").show(),$("#gis_location_L4__row").show());$("#gis_location_L5").html()!=s3_gis_loading_locations&&($("#gis_location_L5_label__row").show(),$("#gis_location_L5__row").show());$("#gis_location__label__row").hide();$("#gis_location___row").hide();
navigator.geolocation&&$("#gis_location_geolocate-btn").removeClass("hidden").show();if(""!=S3.gis.uuid)$("body").data("uuid",S3.gis.uuid),S3.gis.uuid="";var a=$("#gis_location_name").val(),f=$("#gis_location_addr_street").val(),b=$("#gis_location_postcode").val(),e=$("#gis_location_lat").val(),h=$("#gis_location_lat").val();$("body").data("name",a);$("body").data("addr_street",f);$("body").data("postcode",b);$("body").data("lat",e);$("body").data("lon",h);$("#gis_location_name").val("");$("#gis_location_addr_street").val("");
$("#gis_location_postcode").val("");$("#gis_location_lat").val("");$("#gis_location_lon").val("");s3_gis_show_details();$("#gis_location_details_hide-btn").hide()}
function s3_gis_cancel(){S3.gis.uuid=$("body").data("uuid");$("#gis_location_name").val($("body").data("name"));$("#gis_location_addr_street").val($("body").data("addr_street"));$("#gis_location_postcode").val($("body").data("postcode"));$("#gis_location_lat").val($("body").data("lat"));$("#gis_location_lon").val($("body").data("lon"));$("#gis_location_").val()&&($("#gis_location__label__row").show(),$("#gis_location___row").show());$("#gis_location_search-btn-label").hide();$("#gis_location_search-btn").show();
$("#gis_location_add-btn").show();$("#gis_location_details_hide-btn").show();s3_gis_hide_details()}function s3_gis_update_details(a){$.getJSONS3(s3_gis_url+"/search.json?filter=%3D&field=id&value="+a,function(a){a.length!=0&&($("#gis_location_name").val(a[0].name),$("#gis_location_addr_street").val(a[0].addr_street),$("#gis_location_postcode").val(a[0].addr_postcode),$("#gis_location_lat").val(a[0].lat),$("#gis_location_lon").val(a[0].lon))},!1,!0)}
function s3_gis_save_location(a,f,b,e,h){var c=$("#gis_location_L5").val();if(void 0==c||""==c)if(c=$("#gis_location_L4").val(),void 0==c||""==c)if(c=$("#gis_location_L3").val(),void 0==c||""==c)if(c=$("#gis_location_L2").val(),void 0==c||""==c)if(c=$("#gis_location_L1").val(),void 0==c||""==c)c=$("#gis_location_L0").val();a=""==S3.gis.uuid?s3_gis_url+"/create.url?name="+a:s3_gis_url+"/update.url?uuid="+S3.gis.uuid+"&name="+a;""==f||""==b||(a=a+"&lat="+f+"&lon="+b);""!=e&&(a=a+"&addr_street="+e.replace(/\n/g,
"%0d"));""!=h&&(a=a+"&addr_postcode="+h);void 0==c||""==c||(a=a+"&parent="+c);$.ajax({async:!1,url:a,dataType:"json",success:function(a){""==S3.gis.uuid&&a.status=="success"&&(a=a.message.split("=")[1],$("#"+s3_gis_location_id).val(a))}})}function s3_gis_geolocate(a){var f=a.coords.latitude,a=a.coords.longitude;$("#gis_location_lat").val(f);$("#gis_location_lon").val(a)}var s3_gis_calcDone=!1,s3_gis_calcAnswer;
function s3_gis_convertDD(){var a=$("#DDMMSS_deg").val(),f=$("#DDMMSS_min").val(),b=$("#DDMMSS_sec").val(),e=!1;if(a=="")a=0;else if(isNaN(a)||a>180||a<-180)alert(s3_gis_degrees_validation_error),e=!0;if(f=="")f=0;else if(isNaN(f)||f>60||f<0)alert(s3_gis_minutes_validation_error),e=!0;if(b=="")b=0;else if(isNaN(b)||b>60||b<0)alert(s3_gis_seconds_validation_error),e=!0;e==!1&&(f=f*1+b/60,s3_gis_calcAnswer=a>0?a*1+f/60:a*1-f/60,$("#DDMMSS_dec").val(s3_gis_calcAnswer),s3_gis_calcDone=!0)}
function s3_gis_convertGps(){var a=0,f=0,a=$("#gps_deg").val(),f=$("#gps_min").val(),b=!1;if(a=="")a=0;else if(isNaN(a)||a>180||a<-180)alert(s3_gis_degrees_validation_error),b=!0;if(f=="")f=0;else if(isNaN(f)||f>60||f<0)alert(s3_gis_minutes_validation_error),b=!0;b==!1&&(s3_gis_calcAnswer=a>0?a*1+f/60:a*1-f/60,$("#gps_dec").val(s3_gis_calcAnswer),s3_gis_calcDone=!0)}
function s3_gis_convertFillBack(a){if(s3_gis_calcDone==!0)return a==1?$("#gis_location_lat").attr("value",s3_gis_calcAnswer):$("#gis_location_lon").attr("value",s3_gis_calcAnswer),!0;else alert(s3_gis_no_calculations_error);return!1}
$(function(){if(typeof s3_gis_location_id!="undefined"){$("#gis_location_L0").change(function(){s3_gis_dropdown_select(0)});$("#gis_location_L1").change(function(){s3_gis_dropdown_select(1)});$("#gis_location_L2").change(function(){s3_gis_dropdown_select(2)});$("#gis_location_L3").change(function(){s3_gis_dropdown_select(3)});$("#gis_location_L4").change(function(){s3_gis_dropdown_select(4)});$("#gis_location_").change(function(){var a=$(this).val();$("#"+s3_gis_location_id).val(a);s3_gis_update_details(a);
$("#gis_location__label__row").hide();$("#gis_location___row").hide();$("#gis_location_add-btn").hide();s3_gis_show_details()});$("#gis_location_search-btn").click(function(a){$(this).hide();s3_gis_search();a.preventDefault()});$("#gis_location_add-btn").click(function(a){$(this).hide();s3_gis_add_new();a.preventDefault()});$("#gis_location_cancel-btn").click(function(a){$(this).hide();s3_gis_cancel();a.preventDefault()});$("#gis_location_advanced_checkbox").change(function(a){$("#gis_location_advanced_checkbox").is(":checked")?
($("#gis_location_lat_label").removeClass("hidden").show(),$("#gis_location_lat_row").removeClass("hidden").show(),$("#gis_location_lon_label").removeClass("hidden").show(),$("#gis_location_lon_row").removeClass("hidden").show()):($("#gis_location_lat_label").hide(),$("#gis_location_lat_row").hide(),$("#gis_location_lon_label").hide(),$("#gis_location_lon_row").hide());a.preventDefault()});$("#gis_location_details-btn").click(function(a){$("#gis_location_add-btn").hide();$("#gis_location___row").hide();
$("#gis_location__label__row").hide();$("#gis_location_details-btn").hide();$("#gis_location_details_hide-btn").removeClass("hidden").show();s3_gis_show_details();a.preventDefault()});$("#gis_location_details_hide-btn").click(function(a){$("#gis_location_add-btn").removeClass("hidden").show();$("#gis_location___row").show();$("#gis_location__label__row").show();$("#gis_location_details-btn").removeClass("hidden").show();$("#gis_location_details_hide-btn").hide();s3_gis_hide_details();a.preventDefault()});
$("#gis_location_geolocate-btn").click(function(a){navigator.geolocation.getCurrentPosition(s3_gis_geolocate);a.preventDefault()});var a={val:$("#gis_location_autocomplete").val(),accept:!1};$("#gis_location_autocomplete").autocomplete({source:s3_gis_url+"/search.json?filter=~&field=name&exclude_field=level&exclude_value=XX",minLength:2,search:function(){$("#gis_location_autocomplete_throbber").removeClass("hidden").show();return!0},response:function(a,b,e){$("#gis_location_autocomplete_throbber").hide();
return e},focus:function(a,b){$("#gis_location_autocomplete").val(b.item.name);return!1},select:function(f,b){$("#gis_location_autocomplete").val(b.item.name);$("#"+s3_gis_location_id).val(b.item.id);a.accept=!0;$("ul.ui-autocomplete").hide();$("#gis_location_autocomplete_div").hide();$("#gis_location_search-btn-label").hide();$("#gis_location_search-btn").show();$("#gis_location_L0_label__row").show();$("#gis_location_L0__row").show();var e=b.item.path,h=b.item.id,c,g,m,j,k=[];switch(b.item.level){case "L0":$("#gis_location_L0").val(h);
$("#"+s3_gis_location_id).val(h);s3_gis_dropdown_select(0);break;case "L1":if(e)if(e=e.split("/"),e.length==2&&e[1]==h)$("#gis_location_L0").val(e[0]);else{s3_gis_dropdown_select(0,!0);$("#gis_location_L1").val(h);$("#"+s3_gis_location_id).val(h);break}s3_gis_dropdown_select(0,!0);$("#gis_location_L1").val(h);$("#"+s3_gis_location_id).val(h);s3_gis_dropdown_select(1);break;case "L2":if(e)if(e=e.split("/"),e.length==3&&e[2]==h)$("#gis_location_L0").val(e[0]),c=e[1];else if(e.length==2&&e[1]==h)void 0!=
$("#gis_location_L0 option[value="+e[0]+"]")[0]?$("#gis_location_L0").val(e[0]):c=e[0];else{s3_gis_dropdown_select(1,!0);$("#gis_location_L2").val(h);$("#"+s3_gis_location_id).val(h);break}s3_gis_dropdown_select(0,!0);$("#gis_location_L1").val(c);s3_gis_dropdown_select(1,!0);$("#gis_location_L2").val(h);$("#"+s3_gis_location_id).val(h);s3_gis_dropdown_select(2);break;case "L3":if(e)if(e=e.split("/"),e.length==4&&e[3]==h)$("#gis_location_L0").val(e[0]),c=e[1],g=e[2];else if(e.length==3&&e[2]==h)void 0!=
$("#gis_location_L0 option[value="+e[0]+"]")[0]?($("#gis_location_L0").val(e[0]),k=[e[1]]):(c=e[0],g=e[1]);else if(e.length==2&&e[1]==h)void 0!=$("#gis_location_L0 option[value="+e[0]+"]")[0]?$("#gis_location_L0").val(e[0]):k=[e[0]];else{s3_gis_dropdown_select(2,!0);$("#gis_location_L3").val(h);$("#"+s3_gis_location_id).val(h);break}s3_gis_dropdown_select(0,!0);k[0]&&void 0!=$("#gis_location_L1 option[value="+k[0]+"]")[0]&&(c=k[0]);$("#gis_location_L1").val(c);s3_gis_dropdown_select(1,!0);k[0]&&void 0!=
$("#gis_location_L2 option[value="+k[0]+"]")[0]&&(g=k[0]);$("#gis_location_L2").val(g);s3_gis_dropdown_select(2,!0);$("#gis_location_L3").val(h);$("#"+s3_gis_location_id).val(h);s3_gis_dropdown_select(3);break;case "L4":if(e)if(e=e.split("/"),e.length==5&&e[4]==h)$("#gis_location_L0").val(e[0]),c=e[1],g=e[2],m=e[3];else if(e.length==4&&e[3]==h)void 0!=$("#gis_location_L0 option[value="+e[0]+"]")[0]?($("#gis_location_L0").val(e[0]),k=[e[1],e[2]]):k=[e[0],e[1],e[2]];else if(e.length==3&&e[2]==h)void 0!=
$("#gis_location_L0 option[value="+e[0]+"]")[0]?($("#gis_location_L0").val(e[0]),k=[e[1]]):k=[e[0],e[1]];else if(e.length==2&&e[1]==h)void 0!=$("#gis_location_L0 option[value="+e[0]+"]")[0]?$("#gis_location_L0").val(e[0]):k=[e[0]];else{s3_gis_dropdown_select(3,!0);$("#gis_location_L4").val(h);$("#"+s3_gis_location_id).val(h);break}s3_gis_dropdown_select(0,!0);k[0]&&void 0!=$("#gis_location_L1 option[value="+k[0]+"]")[0]&&(c=k[0]);$("#gis_location_L1").val(c);s3_gis_dropdown_select(1,!0);k[0]&&(void 0!=
$("#gis_location_L2 option[value="+k[0]+"]")[0]?g=k[0]:k[1]&&void 0!=$("#gis_location_L2 option[value="+k[1]+"]")[0]&&(g=k[1]));$("#gis_location_L2").val(g);s3_gis_dropdown_select(2,!0);k[0]&&(void 0!=$("#gis_location_L3 option[value="+k[0]+"]")[0]?m=k[0]:k[1]&&(void 0!=$("#gis_location_L3 option[value="+k[1]+"]")[0]?m=k[1]:k[2]&&void 0!=$("#gis_location_L3 option[value="+k[2]+"]")[0]&&(m=k[2])));$("#gis_location_L3").val(m);s3_gis_dropdown_select(3,!0);$("#gis_location_L4").val(h);$("#"+s3_gis_location_id).val(h);
s3_gis_dropdown_select(4);break;case "L5":break;default:if(e){e=e.split("/");if(e.length==6&&e[5]==h)$("#gis_location_L0").val(e[0]),c=e[1],g=e[2],m=e[4];else if(e.length==5&&e[4]==h)void 0!=$("#gis_location_L0 option[value="+e[0]+"]")[0]?($("#gis_location_L0").val(e[0]),k=[e[1],e[2],e[3]]):k=[e[0],e[1],e[2],e[3]];else if(e.length==4&&e[3]==h)void 0!=$("#gis_location_L0 option[value="+e[0]+"]")[0]?($("#gis_location_L0").val(e[0]),k=[e[1],e[2]]):k=[e[0],e[1],e[2]];else if(e.length==3&&e[2]==h)void 0!=
$("#gis_location_L0 option[value="+e[0]+"]")[0]?($("#gis_location_L0").val(e[0]),k=[e[1]]):k=[e[0],e[1]];else if(e.length==2&&e[1]==h)void 0!=$("#gis_location_L0 option[value="+e[0]+"]")[0]?$("#gis_location_L0").val(e[0]):k=[e[0]];else{s3_gis_dropdown_select(4,!0);$("#gis_location_").val(h);$("#"+s3_gis_location_id).val(h);break}s3_gis_dropdown_select(0,!0);k[0]&&void 0!=$("#gis_location_L1 option[value="+k[0]+"]")[0]&&(c=k[0]);$("#gis_location_L1").val(c);s3_gis_dropdown_select(1,!0);k[0]&&(void 0!=
$("#gis_location_L2 option[value="+k[0]+"]")[0]?g=k[0]:k[1]&&void 0!=$("#gis_location_L2 option[value="+k[1]+"]")[0]&&(g=k[1]));$("#gis_location_L2").val(g);s3_gis_dropdown_select(2,!0);k[0]&&(void 0!=$("#gis_location_L3 option[value="+k[0]+"]")[0]?m=k[0]:k[1]&&(void 0!=$("#gis_location_L3 option[value="+k[1]+"]")[0]?m=k[1]:k[2]&&void 0!=$("#gis_location_L3 option[value="+k[2]+"]")[0]&&(m=k[2])));$("#gis_location_L3").val(m);s3_gis_dropdown_select(3,!0);k[0]&&(void 0!=$("#gis_location_L4 option[value="+
k[0]+"]")[0]?j=k[0]:k[1]&&(void 0!=$("#gis_location_L4 option[value="+k[1]+"]")[0]?j=k[1]:k[2]&&(void 0!=$("#gis_location_L4 option[value="+k[2]+"]")[0]?j=k[2]:k[3]&&void 0!=$("#gis_location_L4 option[value="+k[4]+"]")[0]&&(j=k[3]))));$("#gis_location_L4").val(j);s3_gis_dropdown_select(4,!0);$("#gis_location_").val(h)}$("#"+s3_gis_location_id).val(h);s3_gis_update_details(h);$("#gis_location_details-btn").removeClass("hidden").show()}return!1}}).data("autocomplete")._renderItem=function(a,b){return $("<li></li>").data("item.autocomplete",
b).append("<a>"+b.name+"</a>").appendTo(a)};$("#gis_location_autocomplete").blur(function(){if(!$("#gis_location_autocomplete").val())$("#"+s3_gis_location_id).val(""),a.accept=!0;a.accept?a.val=$("#gis_location_autocomplete").val():$("#gis_location_autocomplete").val(a.val);a.accept=!1});$("form").submit(function(){S3ClearNavigateAwayConfirm();var a=$("#gis_location_name").val(),b=$("#gis_location_lat").val(),e=$("#gis_location_lon").val(),h=$("#gis_location_addr_street").val(),c=$("#gis_location_postcode").val();
s3_gis_save_location(a,b,e,h,c);return!0})}});
Ext.onReady(function(){var a,f=Ext.get("gis_location_converter-btn"),b=Ext.get("gis_location_map-btn");if(b)b.on("click",function(){mapWin.show(this)});if(f)f.on("click",function(){a||(a=new Ext.Window({applyTo:"gis-convert-win",layout:"fit",width:400,height:250,closeAction:"hide",plain:!0,items:new Ext.TabPanel({applyTo:"gis-convert-tabs",autoTabs:!0,activeTab:0,deferredRender:!1,border:!1}),buttons:[{text:s3_gis_fill_lat,disabled:!1,handler:function(){s3_gis_convertFillBack(1)&&(s3_gis_calcDone=
!1,$("#DDMMSS_dec").val(""),$("#gps_dec").val(""))}},{text:s3_gis_fill_lon,handler:function(){s3_gis_convertFillBack(2)&&(s3_gis_calcDone=!1,$("#DDMMSS_dec").val(""),$("#gps_dec").val(""))}}]}));a.show(this)})});
(function(a,f){function b(){this.debug=!1;this._curInst=null;this._keyEvent=!1;this._disabledInputs=[];this._inDialog=this._datepickerShowing=!1;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass=
"ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su",
"Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,
maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1};a.extend(this._defaults,this.regional[""]);this.dpDiv=a('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')}function e(c,g){a.extend(c,g);for(var b in g)if(g[b]==null||g[b]==f)c[b]=
g[b];return c}a.extend(a.ui,{datepicker:{version:"@VERSION"}});var h=(new Date).getTime();a.extend(b.prototype,{markerClassName:"hasDatepicker",log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){e(this._defaults,a||{});return this},_attachDatepicker:function(c,g){var b=null,e;for(e in this._defaults){var f=c.getAttribute("date:"+e);if(f){b=b||{};try{b[e]=eval(f)}catch(h){b[e]=f}}}e=c.nodeName.toLowerCase();f=e=="div"||
e=="span";if(!c.id)this.uuid+=1,c.id="dp"+this.uuid;var n=this._newInst(a(c),f);n.settings=a.extend({},g||{},b||{});e=="input"?this._connectDatepicker(c,n):f&&this._inlineDatepicker(c,n)},_newInst:function(c,g){return{id:c[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:c,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:g,dpDiv:!g?this.dpDiv:a('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')}},_connectDatepicker:function(c,
g){var b=a(c);g.append=a([]);g.trigger=a([]);b.hasClass(this.markerClassName)||(this._attachments(b,g),b.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(a,c,b){g.settings[c]=b}).bind("getData.datepicker",function(a,c){return this._get(g,c)}),this._autoSize(g),a.data(c,"datepicker",g))},_attachments:function(c,g){var b=this._get(g,"appendText"),e=this._get(g,"isRTL");g.append&&g.append.remove();if(b)g.append=
a('<span class="'+this._appendClass+'">'+b+"</span>"),c[e?"before":"after"](g.append);c.unbind("focus",this._showDatepicker);g.trigger&&g.trigger.remove();b=this._get(g,"showOn");(b=="focus"||b=="both")&&c.focus(this._showDatepicker);if(b=="button"||b=="both"){var b=this._get(g,"buttonText"),f=this._get(g,"buttonImage");g.trigger=a(this._get(g,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:f,alt:b,title:b}):a('<button type="button"></button>').addClass(this._triggerClass).html(f==
""?b:a("<img/>").attr({src:f,alt:b,title:b})));c[e?"before":"after"](g.trigger);g.trigger.click(function(){a.datepicker._datepickerShowing&&a.datepicker._lastInput==c[0]?a.datepicker._hideDatepicker():a.datepicker._showDatepicker(c[0]);return!1})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var g=new Date(2009,11,20),b=this._get(a,"dateFormat");if(b.match(/[DM]/)){var e=function(a){for(var c=0,g=0,b=0;b<a.length;b++)if(a[b].length>c)c=a[b].length,g=b;return g};g.setMonth(e(this._get(a,
b.match(/MM/)?"monthNames":"monthNamesShort")));g.setDate(e(this._get(a,b.match(/DD/)?"dayNames":"dayNamesShort"))+20-g.getDay())}a.input.attr("size",this._formatDate(a,g).length)}},_inlineDatepicker:function(c,b){var e=a(c);e.hasClass(this.markerClassName)||(e.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(a,c,e){b.settings[c]=e}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),a.data(c,"datepicker",b),this._setDate(b,this._getDefaultDate(b),!0),
this._updateDatepicker(b),this._updateAlternate(b),b.dpDiv.show())},_dialogDatepicker:function(c,b,f,h,k){c=this._dialogInst;if(!c)this.uuid+=1,this._dialogInput=a('<input type="text" id="dp'+this.uuid+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>'),this._dialogInput.keydown(this._doKeyDown),a("body").append(this._dialogInput),c=this._dialogInst=this._newInst(this._dialogInput,!1),c.settings={},a.data(this._dialogInput[0],"datepicker",c);e(c.settings,h||{});b=b&&b.constructor==
Date?this._formatDate(c,b):b;this._dialogInput.val(b);this._pos=k?k.length?k:[k.pageX,k.pageY]:null;if(!this._pos)this._pos=[document.documentElement.clientWidth/2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/2-150+(document.documentElement.scrollTop||document.body.scrollTop)];this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");c.settings.onSelect=f;this._inDialog=!0;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);
a.blockUI&&a.blockUI(this.dpDiv);a.data(this._dialogInput[0],"datepicker",c);return this},_destroyDatepicker:function(c){var b=a(c),e=a.data(c,"datepicker");if(b.hasClass(this.markerClassName)){var f=c.nodeName.toLowerCase();a.removeData(c,"datepicker");f=="input"?(e.append.remove(),e.trigger.remove(),b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(f=="div"||f=="span")&&b.removeClass(this.markerClassName).empty()}},
_enableDatepicker:function(c){var b=a(c),e=a.data(c,"datepicker");if(b.hasClass(this.markerClassName)){var f=c.nodeName.toLowerCase();f=="input"?(c.disabled=!1,e.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):(f=="div"||f=="span")&&b.children("."+this._inlineClass).children().removeClass("ui-state-disabled");this._disabledInputs=a.map(this._disabledInputs,function(a){return a==c?null:a})}},_disableDatepicker:function(c){var b=a(c),e=
a.data(c,"datepicker");if(b.hasClass(this.markerClassName)){var f=c.nodeName.toLowerCase();f=="input"?(c.disabled=!0,e.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):(f=="div"||f=="span")&&b.children("."+this._inlineClass).children().addClass("ui-state-disabled");this._disabledInputs=a.map(this._disabledInputs,function(a){return a==c?null:a});this._disabledInputs[this._disabledInputs.length]=c}},_isDisabledDatepicker:function(a){if(!a)return!1;
for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]==a)return!0;return!1},_getInst:function(c){try{return a.data(c,"datepicker")}catch(b){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(c,b,h){var j=this._getInst(c);if(arguments.length==2&&typeof b=="string")return b=="defaults"?a.extend({},a.datepicker._defaults):j?b=="all"?a.extend({},j.settings):this._get(j,b):null;var k=b||{};typeof b=="string"&&(k={},k[b]=h);if(j){this._curInst==j&&this._hideDatepicker();
var p=this._getDateDatepicker(c,!0),n=this._getMinMaxDate(j,"min"),s=this._getMinMaxDate(j,"max");e(j.settings,k);if(n!==null&&k.dateFormat!==f&&k.minDate===f)j.settings.minDate=this._formatDate(j,n);if(s!==null&&k.dateFormat!==f&&k.maxDate===f)j.settings.maxDate=this._formatDate(j,s);this._attachments(a(c),j);this._autoSize(j);this._setDateDatepicker(c,p);this._updateDatepicker(j)}},_changeDatepicker:function(a,b,e){this._optionDatepicker(a,b,e)},_refreshDatepicker:function(a){(a=this._getInst(a))&&
this._updateDatepicker(a)},_setDateDatepicker:function(a,b){var e=this._getInst(a);e&&(this._setDate(e,b),this._updateDatepicker(e),this._updateAlternate(e))},_getDateDatepicker:function(a,b){var e=this._getInst(a);e&&!e.inline&&this._setDateFromField(e,b);return e?this._getDate(e):null},_doKeyDown:function(c){var b=a.datepicker._getInst(c.target),e=!0,f=b.dpDiv.is(".ui-datepicker-rtl");b._keyEvent=!0;if(a.datepicker._datepickerShowing)switch(c.keyCode){case 9:a.datepicker._hideDatepicker();e=!1;
break;case 13:return e=a("td."+a.datepicker._dayOverClass+":not(."+a.datepicker._currentClass+")",b.dpDiv),e[0]?a.datepicker._selectDay(c.target,b.selectedMonth,b.selectedYear,e[0]):a.datepicker._hideDatepicker(),!1;case 27:a.datepicker._hideDatepicker();break;case 33:a.datepicker._adjustDate(c.target,c.ctrlKey?-a.datepicker._get(b,"stepBigMonths"):-a.datepicker._get(b,"stepMonths"),"M");break;case 34:a.datepicker._adjustDate(c.target,c.ctrlKey?+a.datepicker._get(b,"stepBigMonths"):+a.datepicker._get(b,
"stepMonths"),"M");break;case 35:(c.ctrlKey||c.metaKey)&&a.datepicker._clearDate(c.target);e=c.ctrlKey||c.metaKey;break;case 36:(c.ctrlKey||c.metaKey)&&a.datepicker._gotoToday(c.target);e=c.ctrlKey||c.metaKey;break;case 37:if(c.ctrlKey||c.metaKey)a.datepicker._adjustDate(c.target,f?1:-1,"D");e=c.ctrlKey||c.metaKey;c.originalEvent.altKey&&a.datepicker._adjustDate(c.target,c.ctrlKey?-a.datepicker._get(b,"stepBigMonths"):-a.datepicker._get(b,"stepMonths"),"M");break;case 38:(c.ctrlKey||c.metaKey)&&a.datepicker._adjustDate(c.target,
-7,"D");e=c.ctrlKey||c.metaKey;break;case 39:if(c.ctrlKey||c.metaKey)a.datepicker._adjustDate(c.target,f?-1:1,"D");e=c.ctrlKey||c.metaKey;c.originalEvent.altKey&&a.datepicker._adjustDate(c.target,c.ctrlKey?+a.datepicker._get(b,"stepBigMonths"):+a.datepicker._get(b,"stepMonths"),"M");break;case 40:(c.ctrlKey||c.metaKey)&&a.datepicker._adjustDate(c.target,7,"D");e=c.ctrlKey||c.metaKey;break;default:e=!1}else c.keyCode==36&&c.ctrlKey?a.datepicker._showDatepicker(this):e=!1;e&&(c.preventDefault(),c.stopPropagation())},
_doKeyPress:function(c){var b=a.datepicker._getInst(c.target);if(a.datepicker._get(b,"constrainInput")){var b=a.datepicker._possibleChars(a.datepicker._get(b,"dateFormat")),e=String.fromCharCode(c.charCode==f?c.keyCode:c.charCode);return c.ctrlKey||c.metaKey||e<" "||!b||b.indexOf(e)>-1}},_doKeyUp:function(c){c=a.datepicker._getInst(c.target);if(c.input.val()!=c.lastVal)try{if(a.datepicker.parseDate(a.datepicker._get(c,"dateFormat"),c.input?c.input.val():null,a.datepicker._getFormatConfig(c)))a.datepicker._setDateFromField(c),
a.datepicker._updateAlternate(c),a.datepicker._updateDatepicker(c)}catch(b){a.datepicker.log(b)}return!0},_showDatepicker:function(c){c=c.target||c;c.nodeName.toLowerCase()!="input"&&(c=a("input",c.parentNode)[0]);if(!(a.datepicker._isDisabledDatepicker(c)||a.datepicker._lastInput==c)){var b=a.datepicker._getInst(c);a.datepicker._curInst&&a.datepicker._curInst!=b&&a.datepicker._curInst.dpDiv.stop(!0,!0);var f=a.datepicker._get(b,"beforeShow");e(b.settings,f?f.apply(c,[c,b]):{});b.lastVal=null;a.datepicker._lastInput=
c;a.datepicker._setDateFromField(b);if(a.datepicker._inDialog)c.value="";if(!a.datepicker._pos)a.datepicker._pos=a.datepicker._findPos(c),a.datepicker._pos[1]+=c.offsetHeight;var h=!1;a(c).parents().each(function(){h|=a(this).css("position")=="fixed";return!h});h&&a.browser.opera&&(a.datepicker._pos[0]-=document.documentElement.scrollLeft,a.datepicker._pos[1]-=document.documentElement.scrollTop);f={left:a.datepicker._pos[0],top:a.datepicker._pos[1]};a.datepicker._pos=null;b.dpDiv.empty();b.dpDiv.css({position:"absolute",
display:"block",top:"-1000px"});a.datepicker._updateDatepicker(b);f=a.datepicker._checkOffset(b,f,h);b.dpDiv.css({position:a.datepicker._inDialog&&a.blockUI?"static":h?"fixed":"absolute",display:"none",left:f.left+"px",top:f.top+"px"});if(!b.inline){var f=a.datepicker._get(b,"showAnim"),k=a.datepicker._get(b,"duration"),p=function(){a.datepicker._datepickerShowing=!0;var c=b.dpDiv.find("iframe.ui-datepicker-cover");if(c.length){var e=a.datepicker._getBorders(b.dpDiv);c.css({left:-e[0],top:-e[1],width:b.dpDiv.outerWidth(),
height:b.dpDiv.outerHeight()})}};b.dpDiv.zIndex(a(c).zIndex()+1);if(a.effects&&(a.effects.effect[f]||a.effects[f]))b.dpDiv.show(f,a.datepicker._get(b,"showOptions"),k,p);else b.dpDiv[f||"show"](f?k:null,p);(!f||!k)&&p();b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus();a.datepicker._curInst=b}}},_updateDatepicker:function(c){var b=this,e=a.datepicker._getBorders(c.dpDiv);c.dpDiv.empty().append(this._generateHTML(c));var f=c.dpDiv.find("iframe.ui-datepicker-cover");f.length&&f.css({left:-e[0],
top:-e[1],width:c.dpDiv.outerWidth(),height:c.dpDiv.outerHeight()});c.dpDiv.find("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a").bind("mouseout",function(){a(this).removeClass("ui-state-hover");this.className.indexOf("ui-datepicker-prev")!=-1&&a(this).removeClass("ui-datepicker-prev-hover");this.className.indexOf("ui-datepicker-next")!=-1&&a(this).removeClass("ui-datepicker-next-hover")}).bind("mouseover",function(){if(!b._isDisabledDatepicker(c.inline?c.dpDiv.parent()[0]:
c.input[0]))a(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),a(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&a(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&a(this).addClass("ui-datepicker-next-hover")}).end().find("."+this._dayOverClass+" a").trigger("mouseover").end();e=this._getNumberOfMonths(c);f=e[1];f>1?c.dpDiv.addClass("ui-datepicker-multi-"+f).css("width",17*f+"em"):c.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");
c.dpDiv[(e[0]!=1||e[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi");c.dpDiv[(this._get(c,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");c==a.datepicker._curInst&&a.datepicker._datepickerShowing&&c.input&&c.input.is(":visible")&&!c.input.is(":disabled")&&c.input[0]!=document.activeElement&&c.input.focus();if(c.yearshtml){var h=c.yearshtml;setTimeout(function(){h===c.yearshtml&&c.dpDiv.find("select.ui-datepicker-year:first").replaceWith(c.yearshtml);h=c.yearshtml=null},0)}},_getBorders:function(a){var b=
function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(c,b,e){var f=c.dpDiv.outerWidth(),h=c.dpDiv.outerHeight(),p=c.input?c.input.outerWidth():0,n=c.input?c.input.outerHeight():0,s=document.documentElement.clientWidth+a(document).scrollLeft(),u=document.documentElement.clientHeight+a(document).scrollTop();b.left-=this._get(c,"isRTL")?f-p:0;b.left-=e&&b.left==c.input.offset().left?a(document).scrollLeft():
0;b.top-=e&&b.top==c.input.offset().top+n?a(document).scrollTop():0;b.left-=Math.min(b.left,b.left+f>s&&s>f?Math.abs(b.left+f-s):0);b.top-=Math.min(b.top,b.top+h>u&&u>h?Math.abs(h+n):0);return b},_findPos:function(c){for(var b=this._get(this._getInst(c),"isRTL");c&&(c.type=="hidden"||c.nodeType!=1||a.expr.filters.hidden(c));)c=c[b?"previousSibling":"nextSibling"];c=a(c).offset();return[c.left,c.top]},_hideDatepicker:function(c){var b=this._curInst;if(b&&!(c&&b!=a.data(c,"datepicker"))&&this._datepickerShowing){var c=
this._get(b,"showAnim"),e=this._get(b,"duration"),f=function(){a.datepicker._tidyDialog(b);this._curInst=null};if(a.effects&&(a.effects.effect[c]||a.effects[c]))b.dpDiv.hide(c,a.datepicker._get(b,"showOptions"),e,f);else b.dpDiv[c=="slideDown"?"slideUp":c=="fadeIn"?"fadeOut":"hide"](c?e:null,f);c||f();(c=this._get(b,"onClose"))&&c.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b]);this._datepickerShowing=!1;this._lastInput=null;this._inDialog&&(this._dialogInput.css({position:"absolute",
left:"0",top:"-100px"}),a.blockUI&&(a.unblockUI(),a("body").append(this.dpDiv)));this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(c){a.datepicker._curInst&&(c=a(c.target),c[0].id!=a.datepicker._mainDivId&&c.parents("#"+a.datepicker._mainDivId).length==0&&!c.hasClass(a.datepicker.markerClassName)&&!c.hasClass(a.datepicker._triggerClass)&&a.datepicker._datepickerShowing&&(!a.datepicker._inDialog||!a.blockUI)&&
a.datepicker._hideDatepicker())},_adjustDate:function(c,b,e){var c=a(c),f=this._getInst(c[0]);this._isDisabledDatepicker(c[0])||(this._adjustInstDate(f,b+(e=="M"?this._get(f,"showCurrentAtPos"):0),e),this._updateDatepicker(f))},_gotoToday:function(c){var c=a(c),b=this._getInst(c[0]);if(this._get(b,"gotoCurrent")&&b.currentDay)b.selectedDay=b.currentDay,b.drawMonth=b.selectedMonth=b.currentMonth,b.drawYear=b.selectedYear=b.currentYear;else{var e=new Date;b.selectedDay=e.getDate();b.drawMonth=b.selectedMonth=
e.getMonth();b.drawYear=b.selectedYear=e.getFullYear()}this._notifyChange(b);this._adjustDate(c)},_selectMonthYear:function(c,b,e){var c=a(c),f=this._getInst(c[0]);f._selectingMonthYear=!1;f["selected"+(e=="M"?"Month":"Year")]=f["draw"+(e=="M"?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10);this._notifyChange(f);this._adjustDate(c)},_clickMonthYear:function(c){var b=this._getInst(a(c)[0]);b.input&&b._selectingMonthYear&&setTimeout(function(){b.input.focus()},0);b._selectingMonthYear=
!b._selectingMonthYear},_selectDay:function(c,b,e,f){var h=a(c);if(!a(f).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(h[0]))h=this._getInst(h[0]),h.selectedDay=h.currentDay=a("a",f).html(),h.selectedMonth=h.currentMonth=b,h.selectedYear=h.currentYear=e,this._selectDate(c,this._formatDate(h,h.currentDay,h.currentMonth,h.currentYear))},_clearDate:function(c){c=a(c);this._getInst(c[0]);this._selectDate(c,"")},_selectDate:function(c,b){var e=this._getInst(a(c)[0]),b=b!=null?b:this._formatDate(e);
e.input&&e.input.val(b);this._updateAlternate(e);var f=this._get(e,"onSelect");f?f.apply(e.input?e.input[0]:null,[b,e]):e.input&&e.input.trigger("change");e.inline?this._updateDatepicker(e):(this._hideDatepicker(),this._lastInput=e.input[0],typeof e.input[0]!="object"&&e.input.focus(),this._lastInput=null)},_updateAlternate:function(c){var b=this._get(c,"altField");if(b){var e=this._get(c,"altFormat")||this._get(c,"dateFormat"),f=this._getDate(c),h=this.formatDate(e,f,this._getFormatConfig(c));a(b).each(function(){a(this).val(h)})}},
noWeekends:function(a){a=a.getDay();return[a>0&&a<6,""]},iso8601Week:function(a){a=new Date(a.getTime());a.setDate(a.getDate()+4-(a.getDay()||7));var b=a.getTime();a.setMonth(0);a.setDate(1);return Math.floor(Math.round((b-a)/864E5)/7)+1},parseDate:function(a,b,e){if(a==null||b==null)throw"Invalid arguments";b=typeof b=="object"?b.toString():b+"";if(b=="")return null;for(var f=(e?e.shortYearCutoff:null)||this._defaults.shortYearCutoff,f=typeof f!="string"?f:(new Date).getFullYear()%100+parseInt(f,
10),h=(e?e.dayNamesShort:null)||this._defaults.dayNamesShort,p=(e?e.dayNames:null)||this._defaults.dayNames,n=(e?e.monthNamesShort:null)||this._defaults.monthNamesShort,s=(e?e.monthNames:null)||this._defaults.monthNames,u=e=-1,w=-1,v=-1,t=!1,r=function(b){(b=O+1<a.length&&a.charAt(O+1)==b)&&O++;return b},A=function(a){var c=r(a),a=b.substring(N).match(RegExp("^\\d{1,"+(a=="@"?14:a=="!"?20:a=="y"&&c?4:a=="o"?3:2)+"}"));if(!a)throw"Missing number at position "+N;N+=a[0].length;return parseInt(a[0],
10)},x=function(a,c,e){a=r(a)?e:c;for(c=0;c<a.length;c++)if(b.substr(N,a[c].length).toLowerCase()==a[c].toLowerCase())return N+=a[c].length,c+1;throw"Unknown name at position "+N;},B=function(){if(b.charAt(N)!=a.charAt(O))throw"Unexpected literal at position "+N;N++},N=0,O=0;O<a.length;O++)if(t)a.charAt(O)=="'"&&!r("'")?t=!1:B();else switch(a.charAt(O)){case "d":w=A("d");break;case "D":x("D",h,p);break;case "o":v=A("o");break;case "m":u=A("m");break;case "M":u=x("M",n,s);break;case "y":e=A("y");break;
case "@":var y=new Date(A("@")),e=y.getFullYear(),u=y.getMonth()+1,w=y.getDate();break;case "!":y=new Date((A("!")-this._ticksTo1970)/1E4);e=y.getFullYear();u=y.getMonth()+1;w=y.getDate();break;case "'":r("'")?B():t=!0;break;default:B()}e==-1?e=(new Date).getFullYear():e<100&&(e+=(new Date).getFullYear()-(new Date).getFullYear()%100+(e<=f?0:-100));if(v>-1){u=1;w=v;do{f=this._getDaysInMonth(e,u-1);if(w<=f)break;u++;w-=f}while(1)}y=this._daylightSavingAdjust(new Date(e,u-1,w));if(y.getFullYear()!=e||
y.getMonth()+1!=u||y.getDate()!=w)throw"Invalid date";return y},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*864E9,formatDate:function(a,b,e){if(!b)return"";var f=(e?e.dayNamesShort:null)||this._defaults.dayNamesShort,h=(e?e.dayNames:null)||this._defaults.dayNames,
p=(e?e.monthNamesShort:null)||this._defaults.monthNamesShort,e=(e?e.monthNames:null)||this._defaults.monthNames,n=function(b){(b=t+1<a.length&&a.charAt(t+1)==b)&&t++;return b},s=function(a,c,b){c=""+c;if(n(a))for(;c.length<b;)c="0"+c;return c},u=function(a,c,b,e){return n(a)?e[c]:b[c]},w="",v=!1;if(b)for(var t=0;t<a.length;t++)if(v)a.charAt(t)=="'"&&!n("'")?v=!1:w+=a.charAt(t);else switch(a.charAt(t)){case "d":w+=s("d",b.getDate(),2);break;case "D":w+=u("D",b.getDay(),f,h);break;case "o":w+=s("o",
(b.getTime()-(new Date(b.getFullYear(),0,0)).getTime())/864E5,3);break;case "m":w+=s("m",b.getMonth()+1,2);break;case "M":w+=u("M",b.getMonth(),p,e);break;case "y":w+=n("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case "@":w+=b.getTime();break;case "!":w+=b.getTime()*1E4+this._ticksTo1970;break;case "'":n("'")?w+="'":v=!0;break;default:w+=a.charAt(t)}return w},_possibleChars:function(a){for(var b="",e=!1,f=function(b){(b=h+1<a.length&&a.charAt(h+1)==b)&&h++;return b},h=0;h<
a.length;h++)if(e)a.charAt(h)=="'"&&!f("'")?e=!1:b+=a.charAt(h);else switch(a.charAt(h)){case "d":case "m":case "y":case "@":b+="0123456789";break;case "D":case "M":return null;case "'":f("'")?b+="'":e=!0;break;default:b+=a.charAt(h)}return b},_get:function(a,b){return a.settings[b]!==f?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!=a.lastVal){var e=this._get(a,"dateFormat"),f=a.lastVal=a.input?a.input.val():null,h,p;h=p=this._getDefaultDate(a);var n=this._getFormatConfig(a);
try{h=this.parseDate(e,f,n)||p}catch(s){this.log(s),f=b?"":f}a.selectedDay=h.getDate();a.drawMonth=a.selectedMonth=h.getMonth();a.drawYear=a.selectedYear=h.getFullYear();a.currentDay=f?h.getDate():0;a.currentMonth=f?h.getMonth():0;a.currentYear=f?h.getFullYear():0;this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(c,b,e){var g;var f=function(a){var b=new Date;b.setDate(b.getDate()+
a);return b};if(g=(b=b==null||b===""?e:typeof b=="string"?function(b){try{return a.datepicker.parseDate(a.datepicker._get(c,"dateFormat"),b,a.datepicker._getFormatConfig(c))}catch(e){}for(var f=(b.toLowerCase().match(/^c/)?a.datepicker._getDate(c):null)||new Date,g=f.getFullYear(),h=f.getMonth(),f=f.getDate(),j=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,m=j.exec(b);m;){switch(m[2]||"d"){case "d":case "D":f+=parseInt(m[1],10);break;case "w":case "W":f+=parseInt(m[1],10)*7;break;case "m":case "M":h+=parseInt(m[1],
10);f=Math.min(f,a.datepicker._getDaysInMonth(g,h));break;case "y":case "Y":g+=parseInt(m[1],10),f=Math.min(f,a.datepicker._getDaysInMonth(g,h))}m=j.exec(b)}return new Date(g,h,f)}(b):typeof b=="number"?isNaN(b)?e:f(b):new Date(b.getTime()))&&b.toString()=="Invalid Date"?e:b,b=g)b.setHours(0),b.setMinutes(0),b.setSeconds(0),b.setMilliseconds(0);return this._daylightSavingAdjust(b)},_daylightSavingAdjust:function(a){if(!a)return null;a.setHours(a.getHours()>12?a.getHours()+2:0);return a},_setDate:function(a,
b,e){var f=!b,h=a.selectedMonth,p=a.selectedYear,b=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=b.getDate();a.drawMonth=a.selectedMonth=a.currentMonth=b.getMonth();a.drawYear=a.selectedYear=a.currentYear=b.getFullYear();(h!=a.selectedMonth||p!=a.selectedYear)&&!e&&this._notifyChange(a);this._adjustInstDate(a);a.input&&a.input.val(f?"":this._formatDate(a))},_getDate:function(a){return!a.currentYear||a.input&&a.input.val()==""?null:this._daylightSavingAdjust(new Date(a.currentYear,
a.currentMonth,a.currentDay))},_generateHTML:function(b){var e=new Date,e=this._daylightSavingAdjust(new Date(e.getFullYear(),e.getMonth(),e.getDate())),f=this._get(b,"isRTL"),j=this._get(b,"showButtonPanel"),k=this._get(b,"hideIfNoPrevNext"),p=this._get(b,"navigationAsDateFormat"),n=this._getNumberOfMonths(b),s=this._get(b,"showCurrentAtPos"),u=this._get(b,"stepMonths"),w=n[0]!=1||n[1]!=1,v=this._daylightSavingAdjust(!b.currentDay?new Date(9999,9,9):new Date(b.currentYear,b.currentMonth,b.currentDay)),
t=this._getMinMaxDate(b,"min"),r=this._getMinMaxDate(b,"max"),s=b.drawMonth-s,A=b.drawYear;s<0&&(s+=12,A--);if(r)for(var x=this._daylightSavingAdjust(new Date(r.getFullYear(),r.getMonth()-n[0]*n[1]+1,r.getDate())),x=t&&x<t?t:x;this._daylightSavingAdjust(new Date(A,s,1))>x;)s--,s<0&&(s=11,A--);b.drawMonth=s;b.drawYear=A;var x=this._get(b,"prevText"),x=!p?x:this.formatDate(x,this._daylightSavingAdjust(new Date(A,s-u,1)),this._getFormatConfig(b)),x=this._canAdjustMonth(b,-1,A,s)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+
h+".datepicker._adjustDate('#"+b.id+"', -"+u+", 'M');\" title=\""+x+'"><span class="ui-icon ui-icon-circle-triangle-'+(f?"e":"w")+'">'+x+"</span></a>":k?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+x+'"><span class="ui-icon ui-icon-circle-triangle-'+(f?"e":"w")+'">'+x+"</span></a>",B=this._get(b,"nextText"),B=!p?B:this.formatDate(B,this._daylightSavingAdjust(new Date(A,s+u,1)),this._getFormatConfig(b)),k=this._canAdjustMonth(b,1,A,s)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+
h+".datepicker._adjustDate('#"+b.id+"', +"+u+", 'M');\" title=\""+B+'"><span class="ui-icon ui-icon-circle-triangle-'+(f?"w":"e")+'">'+B+"</span></a>":k?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+B+'"><span class="ui-icon ui-icon-circle-triangle-'+(f?"w":"e")+'">'+B+"</span></a>",u=this._get(b,"currentText"),B=this._get(b,"gotoCurrent")&&b.currentDay?v:e,u=!p?u:this.formatDate(u,B,this._getFormatConfig(b)),p=!b.inline?'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+
h+'.datepicker._hideDatepicker();">'+this._get(b,"closeText")+"</button>":"",j=j?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(f?p:"")+(this._isInRange(b,B)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+h+".datepicker._gotoToday('#"+b.id+"');\">"+u+"</button>":"")+(f?"":p)+"</div>":"",p=parseInt(this._get(b,"firstDay"),10),p=isNaN(p)?0:p,u=this._get(b,"showWeek"),B=this._get(b,"dayNames");this._get(b,"dayNamesShort");
var N=this._get(b,"dayNamesMin"),O=this._get(b,"monthNames"),y=this._get(b,"monthNamesShort"),z=this._get(b,"beforeShowDay"),J=this._get(b,"showOtherMonths"),T=this._get(b,"selectOtherMonths");this._get(b,"calculateWeek");for(var Z=this._getDefaultDate(b),V="",ba=0;ba<n[0];ba++){for(var G="",I=0;I<n[1];I++){var H=this._daylightSavingAdjust(new Date(A,s,b.selectedDay)),C=" ui-corner-all",L="";if(w){L+='<div class="ui-datepicker-group';if(n[1]>1)switch(I){case 0:L+=" ui-datepicker-group-first";C=" ui-corner-"+
(f?"right":"left");break;case n[1]-1:L+=" ui-datepicker-group-last";C=" ui-corner-"+(f?"left":"right");break;default:L+=" ui-datepicker-group-middle",C=""}L+='">'}L+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+C+'">'+(/all|left/.test(C)&&ba==0?f?k:x:"")+(/all|right/.test(C)&&ba==0?f?x:k:"")+this._generateMonthYearHeader(b,s,A,t,r,ba>0||I>0,O,y)+'</div><table class="ui-datepicker-calendar"><thead><tr>';for(var U=u?'<th class="ui-datepicker-week-col">'+this._get(b,"weekHeader")+
"</th>":"",C=0;C<7;C++){var E=(C+p)%7;U+="<th"+((C+p+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+B[E]+'">'+N[E]+"</span></th>"}L+=U+"</tr></thead><tbody>";U=this._getDaysInMonth(A,s);if(A==b.selectedYear&&s==b.selectedMonth)b.selectedDay=Math.min(b.selectedDay,U);for(var C=(this._getFirstDayOfMonth(A,s)-p+7)%7,U=w?6:Math.ceil((C+U)/7),E=this._daylightSavingAdjust(new Date(A,s,1-C)),P=0;P<U;P++){L+="<tr>";for(var Y=!u?"":'<td class="ui-datepicker-week-col">'+this._get(b,"calculateWeek")(E)+
"</td>",C=0;C<7;C++){var S=z?z.apply(b.input?b.input[0]:null,[E]):[!0,""],K=E.getMonth()!=s,M=K&&!T||!S[0]||t&&E<t||r&&E>r;Y+='<td class="'+((C+p+6)%7>=5?" ui-datepicker-week-end":"")+(K?" ui-datepicker-other-month":"")+(E.getTime()==H.getTime()&&s==b.selectedMonth&&b._keyEvent||Z.getTime()==E.getTime()&&Z.getTime()==H.getTime()?" "+this._dayOverClass:"")+(M?" "+this._unselectableClass+" ui-state-disabled":"")+(K&&!J?"":" "+S[1]+(E.getTime()==v.getTime()?" "+this._currentClass:"")+(E.getTime()==e.getTime()?
" ui-datepicker-today":""))+'"'+((!K||J)&&S[2]?' title="'+S[2]+'"':"")+(M?"":' onclick="DP_jQuery_'+h+".datepicker._selectDay('#"+b.id+"',"+E.getMonth()+","+E.getFullYear()+', this);return false;"')+">"+(K&&!J?"&#xa0;":M?'<span class="ui-state-default">'+E.getDate()+"</span>":'<a class="ui-state-default'+(E.getTime()==e.getTime()?" ui-state-highlight":"")+(E.getTime()==v.getTime()?" ui-state-active":"")+(K?" ui-priority-secondary":"")+'" href="#">'+E.getDate()+"</a>")+"</td>";E.setDate(E.getDate()+
1);E=this._daylightSavingAdjust(E)}L+=Y+"</tr>"}s++;s>11&&(s=0,A++);L+="</tbody></table>"+(w?"</div>"+(n[0]>0&&I==n[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"");G+=L}V+=G}V+=j+(a.browser.msie&&parseInt(a.browser.version,10)<7&&!b.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':"");b._keyEvent=!1;return V},_generateMonthYearHeader:function(b,e,f,j,k,p,n,s){var u=this._get(b,"changeMonth"),w=this._get(b,"changeYear"),v=this._get(b,"showMonthAfterYear"),
t='<div class="ui-datepicker-title">',r="";if(p||!u)r+='<span class="ui-datepicker-month">'+n[e]+"</span>";else{var n=j&&j.getFullYear()==f,A=k&&k.getFullYear()==f;r+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+h+".datepicker._selectMonthYear('#"+b.id+"', this, 'M');\" onclick=\"DP_jQuery_"+h+".datepicker._clickMonthYear('#"+b.id+"');\">";for(var x=0;x<12;x++)if((!n||x>=j.getMonth())&&(!A||x<=k.getMonth()))r+='<option value="'+x+'"'+(x==e?' selected="selected"':"")+">"+s[x]+"</option>";
r+="</select>"}v||(t+=r+(p||!u||!w?"&#xa0;":""));b.yearshtml="";if(p||!w)t+='<span class="ui-datepicker-year">'+f+"</span>";else{var s=this._get(b,"yearRange").split(":"),B=(new Date).getFullYear(),n=function(a){a=a.match(/c[+-].*/)?f+parseInt(a.substring(1),10):a.match(/[+-].*/)?B+parseInt(a,10):parseInt(a,10);return isNaN(a)?B:a},e=n(s[0]),s=Math.max(e,n(s[1]||"")),e=j?Math.max(e,j.getFullYear()):e,s=k?Math.min(s,k.getFullYear()):s;for(b.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+
h+".datepicker._selectMonthYear('#"+b.id+"', this, 'Y');\" onclick=\"DP_jQuery_"+h+".datepicker._clickMonthYear('#"+b.id+"');\">";e<=s;e++)b.yearshtml+='<option value="'+e+'"'+(e==f?' selected="selected"':"")+">"+e+"</option>";b.yearshtml+="</select>";a.browser.mozilla?t+='<select class="ui-datepicker-year"><option value="'+f+'" selected="selected">'+f+"</option></select>":(t+=b.yearshtml,b.yearshtml=null)}t+=this._get(b,"yearSuffix");v&&(t+=(p||!u||!w?"&#xa0;":"")+r);t+="</div>";return t},_adjustInstDate:function(a,
b,e){var f=a.drawYear+(e=="Y"?b:0),h=a.drawMonth+(e=="M"?b:0),b=Math.min(a.selectedDay,this._getDaysInMonth(f,h))+(e=="D"?b:0),f=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(f,h,b)));a.selectedDay=f.getDate();a.drawMonth=a.selectedMonth=f.getMonth();a.drawYear=a.selectedYear=f.getFullYear();(e=="M"||e=="Y")&&this._notifyChange(a)},_restrictMinMax:function(a,b){var e=this._getMinMaxDate(a,"min"),f=this._getMinMaxDate(a,"max"),e=e&&b<e?e:b;return f&&e>f?f:e},_notifyChange:function(a){var b=
this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){a=this._get(a,"numberOfMonths");return a==null?[1,1]:typeof a=="number"?[1,a]:a},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,e,
f){var h=this._getNumberOfMonths(a),e=this._daylightSavingAdjust(new Date(e,f+(b<0?b:h[0]*h[1]),1));b<0&&e.setDate(this._getDaysInMonth(e.getFullYear(),e.getMonth()));return this._isInRange(a,e)},_isInRange:function(a,b){var e=this._getMinMaxDate(a,"min"),f=this._getMinMaxDate(a,"max");return(!e||b.getTime()>=e.getTime())&&(!f||b.getTime()<=f.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff"),b=typeof b!="string"?b:(new Date).getFullYear()%100+parseInt(b,10);return{shortYearCutoff:b,
dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,e,f){if(!b)a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear;b=b?typeof b=="object"?b:this._daylightSavingAdjust(new Date(f,e,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),b,this._getFormatConfig(a))}});
a.fn.datepicker=function(b){if(!this.length)return this;if(!a.datepicker.initialized)a(document).mousedown(a.datepicker._checkExternalClick).find("body").append(a.datepicker.dpDiv),a.datepicker.initialized=!0;var e=Array.prototype.slice.call(arguments,1);if(typeof b=="string"&&(b=="isDisabled"||b=="getDate"||b=="widget"))return a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(e));if(b=="option"&&arguments.length==2&&typeof arguments[1]=="string")return a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,
[this[0]].concat(e));return this.each(function(){typeof b=="string"?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this].concat(e)):a.datepicker._attachDatepicker(this,b)})};a.datepicker=new b;a.datepicker.initialized=!1;a.datepicker.uuid=(new Date).getTime();a.datepicker.version="@VERSION";window["DP_jQuery_"+h]=a})(jQuery);
(function(a,f){var b=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var c=0,f;(f=b[c])!=null;c++)a(f).triggerHandler("remove");e(b)};a.widget=function(e,c,f){var m=e.split(".")[0],j,e=e.split(".")[1];j=m+"-"+e;if(!f)f=c,c=a.Widget;a.expr[":"][j]=function(b){return!!a.data(b,e)};a[m]=a[m]||{};a[m][e]=a.extend(function(b,c){if(!this._createWidget)return new a[m][e](b,c);arguments.length&&this._createWidget(b,c)},a[m][e]);var k=new c;k.options=a.extend(!0,{},k.options);a.each(f,function(e,
h){a.isFunction(h)&&(f[e]=function(){var a=function(a){return c.prototype[a].apply(this,b.call(arguments,1))},e=function(a,b){return c.prototype[a].apply(this,b)};return function(){var b=this._super,c=this._superApply,f;this._super=a;this._superApply=e;f=h.apply(this,arguments);this._super=b;this._superApply=c;return f}}())});a[m][e].prototype=a.extend(!0,k,{namespace:m,widgetName:e,widgetEventPrefix:e,widgetBaseClass:j},f);a.widget.bridge(e,a[m][e])};a.widget.bridge=function(e,c){a.fn[e]=function(g){var m=
typeof g==="string",j=b.call(arguments,1),k=this,g=!m&&j.length?a.extend.apply(null,[!0,g].concat(j)):g;m?this.each(function(){var b=a.data(this,e);if(!b)return a.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+g+"'");if(!a.isFunction(b[g])||g.charAt(0)==="_")return a.error("no such method '"+g+"' for "+e+" widget instance");var c=b[g].apply(b,j);if(c!==b&&c!==f)return k=c.jquery?k.pushStack(c.get()):c,!1}):this.each(function(){var b=a.data(this,e);b?b.option(g||
{})._init():c(g,this)});return k}};a.Widget=function(b,c){if(!this._createWidget)return new a[namespace][name](b,c);arguments.length&&this._createWidget(b,c)};a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1},_createWidget:function(b,c){c=a(c||this.defaultElement||this)[0];this.element=a(c);this.options=a.extend(!0,{},this.options,this._getCreateOptions(),b);this.bindings=a();this.hoverable=a();this.focusable=a();c!==this&&(a.data(c,this.widgetName,
this),this._bind({remove:"destroy"}));this._create();this._trigger("create");this._init()},_getCreateOptions:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy();this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled");this.bindings.unbind("."+this.widgetName);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},
_destroy:a.noop,widget:function(){return this.element},option:function(b,c){var e=b,m,j,k;if(arguments.length===0)return a.extend({},this.options);if(typeof b==="string"){if(c===f)return this.options[b];e={};m=b.split(".");b=m.shift();if(m.length){j=e[b]=a.extend(!0,{},this.options[b]);for(k=0;k<m.length-1;k++)j[m[k]]=j[m[k]]||{},j=j[m[k]];j[m.pop()]=c}else e[b]=c}this._setOptions(e);return this},_setOptions:function(b){var c=this;a.each(b,function(a,b){c._setOption(a,b)});return this},_setOption:function(a,
b){this.options[a]=b;a==="disabled"&&(this.widget().toggleClass(this.widgetBaseClass+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"));return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_bind:function(b,c){c?(b=a(b),this.bindings=this.bindings.add(b)):(c=b,b=this.element);var e=this;a.each(c,function(c,f){b.bind(c+"."+e.widgetName,
function(){if(!(e.options.disabled===!0||a(this).hasClass("ui-state-disabled")))return(typeof f==="string"?e[f]:f).apply(e,arguments)})})},_hoverable:function(b){this.hoverable=this.hoverable.add(b);this._bind(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b);this._bind(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},
_trigger:function(b,c,e){var f=this.options[b],c=a.Event(c);c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase();e=e||{};if(c.originalEvent)for(var b=a.event.props.length,j;b;)j=a.event.props[--b],c[j]=c.originalEvent[j];this.element.trigger(c,e);e=a.isArray(e)?[c].concat(e):[c,e];return!(a.isFunction(f)&&f.apply(this.element[0],e)===!1||c.isDefaultPrevented())}};if(a.uiBackCompat!==!1)a.Widget.prototype._getCreateOptions=function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]}})(jQuery);
function popup(a){newwindow=window.open(a,"name","height=400,width=600");window.focus&&newwindow.focus();return!1}function collapse(a){jQuery("#"+a).slideToggle()}function fade(a,f){f>0?jQuery("#"+a).hide().fadeIn("slow"):jQuery("#"+a).show().fadeOut("slow")}
function ajax(a,f,b){query="";if(typeof f=="string")(d=jQuery(f).serialize())&&(query=d);else{pcs=[];for(i=0;i<f.length;i++)(q=jQuery("#"+f[i]).serialize())&&pcs.push(q);pcs.length>0&&(query=pcs.join("&"))}jQuery.ajax({type:"POST",url:a,data:query,success:function(a){b&&(b==":eval"?eval(a):jQuery("#"+b).html(a))}})}String.prototype.reverse=function(){return this.split("").reverse().join("")};
function web2py_ajax_init(){jQuery(".hidden").hide();jQuery(".error").hide().slideDown("slow");jQuery(".flash").click(function(){jQuery(this).fadeOut("slow");return!1});jQuery("input.string").attr("size",50);jQuery("textarea.text").attr("cols",50).attr("rows",10);jQuery("input.integer").keyup(function(){this.value=this.value.reverse().replace(/[^0-9\-]|\-(?=.)/g,"").reverse()});jQuery("input.double").keyup(function(){this.value=this.value.reverse().replace(/[^0-9\-\.]|[\-](?=.)|[\.](?=[0-9]*[\.])/g,
"").reverse()})}jQuery(document).ready(function(){jQuery(".flash").hide().slideDown("slow");jQuery(".flash").html()!=""&&jQuery(".flash").slideDown("slow");web2py_ajax_init()});function web2py_trap_form(a,f){jQuery("#"+f+" form").each(function(){var b=jQuery(this);b.hasClass("no_trap")||b.submit(function(){jQuery(".flash").hide().html("");web2py_ajax_page("post",a,b.serialize(),f);return!1})})}
function web2py_ajax_page(a,f,b,e){jQuery.ajax({type:a,url:f,data:b,beforeSend:function(a){a.setRequestHeader("web2py-component-location",document.location);a.setRequestHeader("web2py-component-element",e)},complete:function(a){(command=a.getResponseHeader("web2py-component-command"))&&eval(command);(flash=a.getResponseHeader("web2py-component-flash"))&&jQuery(".flash").html(flash).slideDown()},success:function(a){jQuery("#"+e).html(a);web2py_trap_form(f,e);web2py_ajax_init()}})}
function web2py_component(a,f){jQuery(document).ready(function(){web2py_ajax_page("get",a,null,f)})}(function(a){a.fn.elementExists=function(){return jQuery(this).length>0}})(jQuery);(function(a){a.fn.formElementType=function(){return jQuery(this).elementExists()?jQuery(this).attr("type"):""}})(jQuery);(function(a){a.fn.isTextBox=function(){return jQuery(this).formElementType()==="text"}})(jQuery);(function(a){a.fn.isTextArea=function(){return jQuery(this).formElementType()==="textarea"}})(jQuery);
(function(a){a.fn.isPassword=function(){return jQuery(this).formElementType()==="password"}})(jQuery);(function(a){a.fn.isHiddenInput=function(){return jQuery(this).formElementType()==="hidden"}})(jQuery);(function(a){a.fn.isCheckBox=function(){return jQuery(this).formElementType()==="checkbox"}})(jQuery);(function(a){a.fn.isRadioBox=function(){return jQuery(this).formElementType()==="radio"}})(jQuery);(function(a){a.fn.isButton=function(){return jQuery(this).formElementType()==="button"}})(jQuery);
(function(a){a.fn.isSubmitButton=function(){return jQuery(this).formElementType()==="submit"}})(jQuery);(function(a){a.fn.isResetButton=function(){return jQuery(this).formElementType()==="reset"}})(jQuery);(function(a){a.fn.isSelectBox=function(){var a=jQuery(this).formElementType(),b=this.attr("size");return a!=="select-one"?!1:typeof b==="undefined"?!1:parseInt(b)>1}})(jQuery);(function(a){a.fn.isMultiSelectBox=function(){return jQuery(this).formElementType()==="select-multiple"}})(jQuery);
(function(a){a.fn.isDropDownList=function(){var a=jQuery(this).formElementType(),b=this.attr("size");return a!=="select-one"?!1:typeof b==="undefined"?!0:parseInt(b)<=1}})(jQuery);(function(a){a.fn.isChecked=function(){return jQuery(this).is(":checked")}})(jQuery);
(function(a){a.fn.isSelected=function(){var a=jQuery(this);if(arguments.length===0)return!1;var b=!1,e=arguments[0],h=arguments;if(a.isRadioBox()){if(a=jQuery("input[type='radio'][name='"+a.attr("name")+"'][checked]"),a.length===1)return e===a.val()}else if(a.isSelectBox()||a.isDropDownList()){if(a=jQuery("#"+a.attr("id")+" option:selected"),a.length===1)return e===a.val()}else a.isMultiSelectBox()&&(a=jQuery("#"+a.attr("id")+" option:selected"),jQuery.each(a,function(){var a=jQuery(this);b=!1;for(var e=
0;e<h.length;e++)if(h[e]===a.val()){b=!0;break}}));return b}})(jQuery);
(function(a){a.fn.selectedItem=function(a){var b=jQuery(this);if(typeof a==="undefined"||isNaN(a))a=0;if(b.isRadioBox()){var e=jQuery("input[type='radio'][name='"+b.attr("name")+"'][checked]");a>e.length-1?a=e.length-1:a<0&&(a=0);if(e.length>0)return jQuery(e[a])}else if(b.isSelectBox()||b.isMultiSelectBox()||b.isDropDownList())if(e=jQuery("#"+b.attr("id")+" option:selected"),a>e.length-1?a=e.length-1:a<0&&(a=0),e.length>0)return jQuery(e[a]);return b}})(jQuery);
(function(a){a.fn.firstSelectedItem=function(){return jQuery(this).selectedItem()}})(jQuery);(function(a){a.fn.lastSelectedItem=function(){return jQuery(this).selectedItem(Number.MAX_VALUE)}})(jQuery);(function(a){a.fn.selectedValue=function(){return jQuery(this).selectedItem(0).val()}})(jQuery);
(function(a){a.fn.selectedValues=function(){var a=[],b=jQuery(this);b.isMultiSelectBox()?(b=jQuery("#"+b.attr("id")+" option:selected"),jQuery.each(b,function(){a.push(jQuery(this).val())})):a.push(b.selectedValue());return a}})(jQuery);
(function(a){a.fn.itemExists=function(a){var b=jQuery(this),e=!1;if(b.isRadioBox())e=jQuery("input[type='radio'][name='"+b.attr("name")+"'][value='"+a+"']").length===1;else if(b.isSelectBox()||b.isMultiSelectBox()||b.isDropDownList())b=jQuery("#"+b.attr("id")+" option"),jQuery.each(b,function(){if(jQuery(this).val()===a)return e=!0,!1});else return jQuery(this).val()===a;return e}})(jQuery);
jQuery(document).ready(function(){jQuery(".s3_checkbox_label").cluetip({activation:"hover",positionBy:"auto",local:!0,hideLocal:!1,showTitle:!1,topOffset:0,mouseOutClose:!0,arrows:!0,clickThrough:!0})});
jQuery.fn.fancyZoom=function(a){function f(e){if(m)return!1;m=!0;var f=$($(this).attr("href")),g=a.height,j=window.innerWidth||window.document.documentElement.clientWidth||window.document.body.clientWidth,v=window.innerHeight||window.document.documentElement.clientHeight||window.document.body.clientHeight,t=window.pageYOffset||window.document.documentElement.scrollTop||window.document.body.scrollTop,r={width:j,height:v,x:window.pageXOffset||window.document.documentElement.scrollLeft||window.document.body.scrollLeft,
y:t},j=(a.width||f.width())+60,v=(g||f.height())+60,g=Math.max(r.height/2-v/2+t,0),r=r.width/2-j/2,t=e.pageY,e=e.pageX;k.attr("curTop",t);k.attr("curLeft",e);k.attr("scaleImg",a.scaleImg?"true":"false");$("#zoom").hide().css({position:"absolute",top:t+"px",left:e+"px",width:"1px",height:"1px"});h();k.hide();a.closeOnClick&&$("#zoom").click(b);a.scaleImg?(p.html(f.html()),$("#zoom_content img").css("width","100%")):p.html("");$("#zoom").animate({top:g+"px",left:r+"px",opacity:"show",width:j,height:v},
500,null,function(){a.scaleImg!=!0&&p.html(f.html());c();k.show();m=!1});return!1}function b(){if(m)return!1;m=!0;$("#zoom").unbind("click");h();k.attr("scaleImg")!="true"&&p.html("");k.hide();$("#zoom").animate({top:k.attr("curTop")+"px",left:k.attr("curLeft")+"px",opacity:"hide",width:"1px",height:"1px"},500,null,function(){k.attr("scaleImg")=="true"&&p.html("");c();m=!1});return!1}function e(a){$("#zoom_table td").each(function(){var b=$(this).css("background-image").replace(/\.(png|gif|none)\"\)$/,
"."+a+'")');$(this).css("background-image",b)});var b=k.children("img"),c=b.attr("src").replace(/\.(png|gif|none)$/,"."+a);b.attr("src",c)}function h(){$.browser.msie&&parseFloat($.browser.version)>=7&&e("gif")}function c(){$.browser.msie&&$.browser.version>=7&&e("png")}var g=(a=a||{})&&a.directory?a.directory:"images",m=!1;if($("#zoom").length==0){var j=$.browser.msie?"gif":"png";$("body").append('<div id="zoom" style="display:none;">                   <table id="zoom_table" style="border-collapse:collapse; width:100%; height:100%;">                     <tbody>                       <tr>                         <td class="tl" style="background:url('+
g+"/tl."+j+') 0 0 no-repeat; width:20px height:20px; overflow:hidden;" />                         <td class="tm" style="background:url('+g+"/tm."+j+') 0 0 repeat-x; height:20px; overflow:hidden;" />                         <td class="tr" style="background:url('+g+"/tr."+j+') 100% 0 no-repeat; width:20px height:20px; overflow:hidden;" />                       </tr>                       <tr>                         <td class="ml" style="background:url('+g+"/ml."+j+') 0 0 repeat-y; width:20px; overflow:hidden;" />                         <td class="mm" style="background:#fff; vertical-align:top; padding:10px;">                           <div id="zoom_content">                           </div>                         </td>                         <td class="mr" style="background:url('+
g+"/mr."+j+') 100% 0 repeat-y;  width:20px; overflow:hidden;" />                       </tr>                       <tr>                         <td class="bl" style="background:url('+g+"/bl."+j+') 0 100% no-repeat; width:20px height:20px; overflow:hidden;" />                         <td class="bm" style="background:url('+g+"/bm."+j+') 0 100% repeat-x; height:20px; overflow:hidden;" />                         <td class="br" style="background:url('+g+"/br."+j+') 100% 100% no-repeat; width:20px height:20px; overflow:hidden;" />                       </tr>                     </tbody>                   </table>                   <a href="#" title="Close" id="zoom_close" style="position:absolute; top:0; left:0;">                     <img src="'+
g+"/closebox."+j+'" alt="Close" style="border:none; margin:0; padding:0;" />                   </a>                 </div>');$("html").click(function(a){$(a.target).parents("#zoom:visible").length==0&&b()});$(document).keyup(function(a){a.keyCode==27&&$("#zoom:visible").length>0&&b()});$("#zoom_close").click(b)}$("#zoom");$("#zoom_table");var k=$("#zoom_close"),p=$("#zoom_content");$("td.ml,td.mm,td.mr");this.each(function(){$($(this).attr("href")).hide();$(this).click(f)});return this};
(function(a,f){a.ui=a.ui||{};var b=/left|center|right/,e=/top|center|bottom/,h=/[+-]\d+%?/,c=/^\w+/,g=/%$/,m=a.fn.position;a.fn.position=function(f){if(!f||!f.of)return m.apply(this,arguments);var f=a.extend({},f),k=a(f.of),p=k[0],n=(f.collision||"flip").split(" "),s={},u,w,v,t;p.nodeType===9?(w=k.width(),v=k.height(),t={top:0,left:0}):a.isWindow(p)?(w=k.width(),v=k.height(),t={top:k.scrollTop(),left:k.scrollLeft()}):p.preventDefault?(f.at="left top",w=v=0,t={top:f.of.pageY,left:f.of.pageX}):(w=k.outerWidth(),
v=k.outerHeight(),t=k.offset());a.each(["my","at"],function(){var a=(f[this]||"").split(" "),g,k;a.length===1&&(a=b.test(a[0])?a.concat(["center"]):e.test(a[0])?["center"].concat(a):["center","center"]);a[0]=b.test(a[0])?a[0]:"center";a[1]=e.test(a[1])?a[1]:"center";g=h.exec(a[0]);k=h.exec(a[1]);s[this]=[g?g[0]:0,k?k[0]:0];f[this]=[c.exec(a[0])[0],c.exec(a[1])[0]]});n.length===1&&(n[1]=n[0]);f.at[0]==="right"?t.left+=w:f.at[0]==="center"&&(t.left+=w/2);f.at[1]==="bottom"?t.top+=v:f.at[1]==="center"&&
(t.top+=v/2);u=[parseInt(s.at[0],10)*(g.test(s.at[0])?w/100:1),parseInt(s.at[1],10)*(g.test(s.at[1])?v/100:1)];t.left+=u[0];t.top+=u[1];return this.each(function(){var b=a(this),c=b.outerWidth(),e=b.outerHeight(),h=parseInt(a.curCSS(this,"marginLeft",!0))||0,k=parseInt(a.curCSS(this,"marginTop",!0))||0,m=c+h+(parseInt(a.curCSS(this,"marginRight",!0))||0),p=e+k+(parseInt(a.curCSS(this,"marginBottom",!0))||0),z=a.extend({},t),J=[parseInt(s.my[0],10)*(g.test(s.my[0])?b.outerWidth()/100:1),parseInt(s.my[1],
10)*(g.test(s.my[1])?b.outerHeight()/100:1)],T;f.my[0]==="right"?z.left-=c:f.my[0]==="center"&&(z.left-=c/2);f.my[1]==="bottom"?z.top-=e:f.my[1]==="center"&&(z.top-=e/2);z.left+=J[0];z.top+=J[1];z.left=Math.round(z.left);z.top=Math.round(z.top);T={left:z.left-h,top:z.top-k};a.each(["left","top"],function(b,g){if(a.ui.position[n[b]])a.ui.position[n[b]][g](z,{targetWidth:w,targetHeight:v,elemWidth:c,elemHeight:e,collisionPosition:T,collisionWidth:m,collisionHeight:p,offset:[u[0]+J[0],u[1]+J[1]],my:f.my,
at:f.at})});a.fn.bgiframe&&b.bgiframe();b.offset(a.extend(z,{using:f.using}))})};a.ui.position={fit:{left:function(b,c){var e=a(window),e=c.collisionPosition.left+c.collisionWidth-e.width()-e.scrollLeft();b.left=e>0?b.left-e:Math.max(b.left-c.collisionPosition.left,b.left)},top:function(b,c){var e=a(window),e=c.collisionPosition.top+c.collisionHeight-e.height()-e.scrollTop();b.top=e>0?b.top-e:Math.max(b.top-c.collisionPosition.top,b.top)}},flip:{left:function(b,c){if(c.at[0]!=="center"){var e=a(window),
e=c.collisionPosition.left+c.collisionWidth-e.width()-e.scrollLeft(),f=c.my[0]==="left"?-c.elemWidth:c.my[0]==="right"?c.elemWidth:0,g=c.at[0]==="left"?c.targetWidth:-c.targetWidth,h=-2*c.offset[0];b.left+=c.collisionPosition.left<0?f+g+h:e>0?f+g+h:0}},top:function(b,c){if(c.at[1]!=="center"){var e=a(window),e=c.collisionPosition.top+c.collisionHeight-e.height()-e.scrollTop(),f=c.my[1]==="top"?-c.elemHeight:c.my[1]==="bottom"?c.elemHeight:0,g=c.at[1]==="top"?c.targetHeight:-c.targetHeight,h=-2*c.offset[1];
b.top+=c.collisionPosition.top<0?f+g+h:e>0?f+g+h:0}}}};a.uiBackCompat!==!1&&function(a){var b=a.fn.position;a.fn.position=function(c){if(!c||!("offset"in c))return b.call(this,c);var e=c.offset.split(" "),g=c.at.split(" ");e.length===1&&(e[1]=e[0]);/^\d/.test(e[0])&&(e[0]="+"+e[0]);/^\d/.test(e[1])&&(e[1]="+"+e[1]);g.length===1&&(/left|center|right/.test(g[0])?g[1]="center":(g[1]=g[0],g[0]="center"));return b.call(this,a.extend(c,{at:g[0]+e[0]+" "+g[1]+e[1],offset:f}))}}(jQuery)})(jQuery);
(function(a){var f=0;a.widget("ui.menu",{defaultElement:"<ul>",delay:150,options:{position:{my:"left top",at:"right top"}},_create:function(){var b=this;this.activeMenu=this.element;this.menuId=this.element.attr("id")||"ui-menu-"+f++;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({id:this.menuId,role:"listbox"}).bind("click.menu",function(e){var f=a(e.target).closest(".ui-menu-item:has(a)");if(b.options.disabled)return!1;f.length&&(e.preventDefault(),(!b.active||b.active[0]!==
f[0])&&b.focus(e,f),b.select(e))}).bind("mouseover.menu",function(e){if(!b.options.disabled){var f=a(e.target).closest(".ui-menu-item");f.length&&b.focus(e,f)}}).bind("mouseout.menu",function(e){b.options.disabled||a(e.target).closest(".ui-menu-item").length&&b.blur(e)});this.refresh();this.element.attr("tabIndex",0).bind("keydown.menu",function(e){if(!b.options.disabled)switch(e.keyCode){case a.ui.keyCode.PAGE_UP:b.previousPage(e);e.preventDefault();e.stopImmediatePropagation();break;case a.ui.keyCode.PAGE_DOWN:b.nextPage(e);
e.preventDefault();e.stopImmediatePropagation();break;case a.ui.keyCode.UP:b.previous(e);e.preventDefault();e.stopImmediatePropagation();break;case a.ui.keyCode.DOWN:b.next(e);e.preventDefault();e.stopImmediatePropagation();break;case a.ui.keyCode.LEFT:b.left(e)&&e.stopImmediatePropagation();e.preventDefault();break;case a.ui.keyCode.RIGHT:b.right(e)&&e.stopImmediatePropagation();e.preventDefault();break;case a.ui.keyCode.ENTER:b.select(e);e.preventDefault();e.stopImmediatePropagation();break;case a.ui.keyCode.ESCAPE:b.left(e)&&
e.stopImmediatePropagation();e.preventDefault();break;default:e.stopPropagation();clearTimeout(b.filterTimer);var f=b.previousFilter||"",c=String.fromCharCode(e.keyCode),g=!1;c==f?g=!0:c=f+c;var m=function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},f=b.widget().children(".ui-menu-item").filter(function(){return RegExp("^"+m(c),"i").test(a(this).children("a").text())}),f=g&&f.index(b.active.next())!=-1?b.active.nextAll(".ui-menu-item"):f;f.length||(c=String.fromCharCode(e.keyCode),f=b.widget().children(".ui-menu-item").filter(function(){return RegExp("^"+
m(c),"i").test(a(this).children("a").text())}));f.length?(b.focus(e,f),f.length>1?(b.previousFilter=c,b.filterTimer=setTimeout(function(){delete b.previousFilter},1E3)):delete b.previousFilter):delete b.previousFilter}})},_destroy:function(){this.element.removeClass("ui-menu ui-widget ui-widget-content ui-corner-all").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-activedescendant");this.element.children(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").children("a").removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").unbind(".menu")},
refresh:function(){var a=this.element.find("ul:not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide();a.prev("a").prepend('<span class="ui-icon ui-icon-carat-1-e"></span>');a.add(this.element).children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").attr("tabIndex",-1)},focus:function(b,e){var f=this;this.blur();if(this._hasScroll()){var c=parseFloat(a.curCSS(this.element[0],"borderTopWidth",!0))||
0,g=parseFloat(a.curCSS(this.element[0],"paddingTop",!0))||0,c=e.offset().top-this.element.offset().top-c-g,g=this.element.attr("scrollTop"),m=this.element.height(),j=e.height();c<0?this.element.attr("scrollTop",g+c):c+j>m&&this.element.attr("scrollTop",g+c-m+j)}this.active=e.first().children("a").addClass("ui-state-focus").attr("id",function(a,b){return f.itemId=b||f.menuId+"-activedescendant"}).end();this.element.removeAttr("aria-activedescendant").attr("aria-activedescendant",f.itemId);f.timer=
setTimeout(function(){f._close()},f.delay);c=a(">ul",e);c.length&&/^mouse/.test(b.type)&&f._startOpening(c);this.activeMenu=e.parent();this._trigger("focus",b,{item:e})},blur:function(b){if(this.active)clearTimeout(this.timer),this.active.children("a").removeClass("ui-state-focus"),a("#"+this.menuId+"-activedescendant").removeAttr("id"),this.element.removeAttr("aria-activedescenant"),this._trigger("blur",b),this.active=null},_startOpening:function(a){clearTimeout(this.timer);var e=this;e.timer=setTimeout(function(){e._close();
e._open(a)},e.delay)},_open:function(b){this.element.find(".ui-menu").not(b.parents()).hide();var e=a.extend({},{of:this.active},a.type(this.options.position)=="function"?this.options.position(this.active):this.options.position);b.show().position(e);this.active.find(">a:first").addClass("ui-state-active")},closeAll:function(){this.element.find("ul").hide().end().find("a.ui-state-active").removeClass("ui-state-active");this.blur();this.activeMenu=this.element},_close:function(){this.active.parent().find("ul").hide().end().find("a.ui-state-active").removeClass("ui-state-active")},
left:function(a){var e=this.active&&this.active.parents("li").first();if(e&&e.length)return this.active.parent().hide(),this.focus(a,e),!0},right:function(a){var e=this.active&&this.active.children("ul").children("li").first();if(e&&e.length)return this._open(e.parent()),this.focus(a,e),!0},next:function(a){this._move("next",".ui-menu-item","first",a)},previous:function(a){this._move("prev",".ui-menu-item","last",a)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},
last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(a,e,f,c){this.active?(a=this.active[a+"All"](".ui-menu-item").eq(0),a.length?this.focus(c,a):this.focus(c,this.activeMenu.children(e)[f]())):this.focus(c,this.activeMenu.children(e)[f]())},nextPage:function(b){if(this._hasScroll())if(!this.active||this.last())this.focus(b,this.activeMenu.children(".ui-menu-item").first());else{var e=this.active.offset().top,f=this.element.height(),c;this.active.nextAll(".ui-menu-item").each(function(){c=
a(this);return a(this).offset().top-e-f<0});this.focus(b,c)}else this.focus(b,this.activeMenu.children(".ui-menu-item")[!this.active||this.last()?"first":"last"]())},previousPage:function(b){if(this._hasScroll())if(!this.active||this.first())this.focus(b,this.activeMenu.children(".ui-menu-item").last());else{var e=this.active.offset().top,f=this.element.height(),c;this.active.prevAll(".ui-menu-item").each(function(){c=a(this);return a(this).offset().top-e+f>0});this.focus(b,c)}else this.focus(b,this.activeMenu.children(".ui-menu-item")[!this.active||
this.first()?":last":":first"]())},_hasScroll:function(){return this.element.height()<this.element.attr("scrollHeight")},select:function(a){var e={item:this.active};this.closeAll();this._trigger("select",a,e)}});a.ui.menu.version="@VERSION"})(jQuery);
(function(a){var f=0;a.widget("ui.autocomplete",{defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var b=this,e=this.element[0].ownerDocument,f,c;this.valueMethod=this.element[this.element.is("input")?"val":"text"];this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",
function(e){if(!b.options.disabled&&!b.element.attr("readonly")){c=f=!1;var m=a.ui.keyCode;switch(e.keyCode){case m.PAGE_UP:b._move("previousPage",e);break;case m.PAGE_DOWN:b._move("nextPage",e);break;case m.UP:b._move("previous",e);e.preventDefault();break;case m.DOWN:b._move("next",e);e.preventDefault();break;case m.ENTER:case m.NUMPAD_ENTER:b.menu.active&&(f=!0,e.preventDefault()),c=!0;case m.TAB:if(!b.menu.active)break;b.menu.select(e);break;case m.ESCAPE:b._value(b.term);b.close(e);break;default:clearTimeout(b.searching),
b.searching=setTimeout(function(){if(b.term!=b._value())b.selectedItem=null,b.search(null,e)},b.options.delay)}}}).bind("keypress.autocomplete",function(b){f&&(f=!1,b.preventDefault());if(b.keyCode==a.ui.keyCode.ENTER||b.keyCode==a.ui.keyCode.NUMPAD_ENTER)c=!0}).bind("keyup.autocomplete",function(e){if(c)c=!1;else if(!(e.keyCode!=a.ui.keyCode.ENTER&&e.keyCode!=a.ui.keyCode.NUMPAD_ENTER)&&!b.options.disabled&&!b.element.attr("readonly"))clearTimeout(b.searching),b.searching=setTimeout(function(){if(b.term!=
b.element.val())b.selectedItem=null,b.search(null,e)},b.options.delay)}).bind("focus.autocomplete",function(){if(!b.options.disabled)b.selectedItem=null,b.previous=b._value()}).bind("blur.autocomplete",function(a){if(!b.options.disabled)clearTimeout(b.searching),b.closing=setTimeout(function(){b.close(a);b._change(a)},150)});this._initSource();this.response=function(){return b._response.apply(b,arguments)};this.menu=a("<ul></ul>").addClass("ui-autocomplete").appendTo(a(this.options.appendTo||"body",
e)[0]).mousedown(function(c){var e=b.menu.element[0];a(c.target).closest(".ui-menu-item").length||setTimeout(function(){a(document).one("mousedown",function(c){c.target!==b.element[0]&&c.target!==e&&!a.contains(e,c.target)&&b.close()})},1);setTimeout(function(){clearTimeout(b.closing)},13)}).menu({input:a(),focus:function(a,c){var e=c.item.data("item.autocomplete");!1!==b._trigger("focus",a,{item:e})&&/^key/.test(a.originalEvent.type)&&b._value(e.value)},select:function(a,c){var f=c.item.data("item.autocomplete"),
h=b.previous;if(b.element[0]!==e.activeElement)b.element.focus(),b.previous=h,setTimeout(function(){b.previous=h;b.selectedItem=f},1);!1!==b._trigger("select",a,{item:f})&&b._value(f.value);b.term=b._value();b.close(a);b.selectedItem=f},blur:function(){b.menu.element.is(":visible")&&b._value()!==b.term&&b._value(b.term)}}).zIndex(this.element.zIndex()+1).hide().data("menu");a.fn.bgiframe&&this.menu.element.bgiframe()},_destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");
this.menu.element.remove()},_setOption:function(b,e){this._super("_setOption",b,e);b==="source"&&this._initSource();b==="appendTo"&&this.menu.element.appendTo(a(e||"body",this.element[0].ownerDocument)[0]);b==="disabled"&&e&&this.xhr&&this.xhr.abort()},_initSource:function(){var b=this,e,h;a.isArray(this.options.source)?(e=this.options.source,this.source=function(b,f){f(a.ui.autocomplete.filter(e,b.term))}):typeof this.options.source==="string"?(h=this.options.source,this.source=function(c,e){b.xhr&&
b.xhr.abort();b.xhr=a.ajax({url:h,data:c,dataType:"json",autocompleteRequest:++f,success:function(a){this.autocompleteRequest===f&&e(a)},error:function(){this.autocompleteRequest===f&&e([])}})}):this.source=this.options.source},search:function(a,e){a=a!=null?a:this._value();this.term=this._value();if(a.length<this.options.minLength)return this.close(e);clearTimeout(this.closing);if(this._trigger("search",e)!==!1)return this._search(a)},_search:function(a){this.pending++;this.element.addClass("ui-autocomplete-loading");
this.source({term:a},this.response)},_response:function(a){a&&(a=this._normalize(a));this._trigger("response",null,{content:a});!this.options.disabled&&a&&a.length?(this._suggest(a),this._trigger("open")):this.close();this.pending--;this.pending||this.element.removeClass("ui-autocomplete-loading")},close:function(a){clearTimeout(this.closing);this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this._trigger("close",a))},_change:function(a){this.previous!==this._value()&&this._trigger("change",
a,{item:this.selectedItem})},_normalize:function(b){if(b.length&&b[0].label&&b[0].value)return b;return a.map(b,function(b){if(typeof b==="string")return{label:b,value:b};return a.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(b){var e=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(e,b);this.menu.blur();this.menu.refresh();e.show();this._resizeMenu();e.position(a.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next(new a.Event("mouseover"))},
_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth(),this.element.outerWidth()))},_renderMenu:function(b,e){var f=this;a.each(e,function(a,e){f._renderItem(b,e)})},_renderItem:function(b,e){return a("<li></li>").data("item.autocomplete",e).append(a("<a></a>").text(e.label)).appendTo(b)},_move:function(a,e){if(this.menu.element.is(":visible"))if(this.menu.first()&&/^previous/.test(a)||this.menu.last()&&/^next/.test(a))this._value(this.term),this.menu.blur();
else this.menu[a](e);else this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)}});a.extend(a.ui.autocomplete,{version:"@VERSION",escapeRegex:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(b,e){var f=RegExp(a.ui.autocomplete.escapeRegex(e),"i");return a.grep(b,function(a){return f.test(a.label||a.value||a)})}})})(jQuery);
$(document).ready(function(){S3.rtl?$('div.label label[id!="delete_record__label"]').prepend(":"):$('div.label label[id!="delete_record__label"]').append(":")});var S3={gis:{}},popupWin=null;function openPopup(a){!popupWin||popupWin.closed?popupWin=window.open(a,"popupWin","width=640, height=480"):popupWin.focus()}
$(document).ready(function(){try{$(".zoom").fancyZoom({scaleImg:!0,closeOnClick:!0,directory:S3.Ap.concat("/static/media")})}catch(a){}$("input.date").datepicker({changeMonth:!0,changeYear:!0,showOn:"both",buttonImage:S3.Ap.concat("/static/img/jquery-ui/calendar.gif"),buttonImageOnly:!0,dateFormat:"yy-mm-dd",isRTL:S3.rtl});$(".error").hide().slideDown("slow");$(".error").click(function(){$(this).fadeOut("slow");return!1});$(".warning").hide().slideDown("slow");$(".warning").click(function(){$(this).fadeOut("slow");
return!1});$(".information").hide().slideDown("slow");$(".information").click(function(){$(this).fadeOut("slow");return!1});$(".confirmation").hide().slideDown("slow");$(".confirmation").click(function(){$(this).fadeOut("slow");return!1});$(".hoverable").hover(function(){$(this).addClass("hovered")},function(){$(this).removeClass("hovered")});$("#modulenav li").hover(function(){var a=$(this).width(),e=$("ul",this).width();e!=null&&e<a&&$("ul",this).css({width:a.toString()+"px"});$("ul",this).css("display",
"block")},function(){$("ul",this).css("display","none")});$("#subnav li").hover(function(){var a=$(this).width()-2;$("ul",this).css({display:"block",width:a.toString()+"px"})},function(){$("ul",this).css("display","none")});$("a.colorbox").attr("href",function(a,e){var f="";try{f=$(this).parents("tr").attr("id").replace(/__row/,"")}catch(c){if(f=="")return e}var g=e;e.indexOf("&caller=")==-1&&(g=e+"&caller="+f);return g});$(".colorbox").click(function(){$.fn.colorbox({iframe:!0,width:"99%",height:"99%",
href:this.href,title:this.title});return!1});$(".tooltip").cluetip({activation:"hover",sticky:!1,splitTitle:"|"});var f='<img src="'+S3.Ap.concat("/static/img/cross2.png")+'" alt="close" />';$(".stickytip").cluetip({activation:"hover",sticky:!0,closePosition:"title",closeText:f,splitTitle:"|"});$(".ajaxtip").cluetip({activation:"click",sticky:!0,closePosition:"title",closeText:f,width:380});now=new Date;$("form").append("<input type='hidden' value="+now.getTimezoneOffset()+" name='_utc_offset'/>")});
function s3_tb_remove(){$.fn.colorbox.close()}
(function(a){a.ajaxS3=function(f){var b=a.extend({},a.ajaxS3Settings,f);b.tryCount=0;f.message&&s3_showStatus(S3.i18n.ajax_get+" "+(f.message?f.message:S3.i18n.ajax_fmd)+"...",this.ajaxS3Settings.msgTimeout);b.success=function(a,b){s3_hideStatus();f.success&&f.success(a,b)};b.error=function(b,h){h=="timeout"?(this.tryCount++,this.tryCount<=this.retryLimit?(s3_showStatus(S3.i18n.ajax_get+" "+(f.message?f.message:S3.i18n.ajax_fmd)+"... "+S3.i18n.ajax_rtr+" "+this.tryCount,a.ajaxS3Settings.msgTimeout),
a.ajax(this)):s3_showStatus(S3.i18n.ajax_wht+" "+(this.retryLimit+1)+" "+S3.i18n.ajax_gvn,a.ajaxS3Settings.msgTimeout,!1,!0)):b.status==500?s3_showStatus(S3.i18n.ajax_500,a.ajaxS3Settings.msgTimeout,!1,!0):s3_showStatus(S3.i18n.ajax_dwn,a.ajaxS3Settings.msgTimeout,!1,!0)};a.ajax(b)};a.postS3=function(f,b,e,h){return a.ajaxS3({type:"POST",url:f,data:b,success:e,dataType:h})};a.getS3=function(f,b,e,h,c,g){a.isFunction(b)&&(g=c,c=h,h=e,e=b,b=null);if(g)var m=!1;return a.ajaxS3({type:"GET",url:f,async:m,
data:b,success:e,dataType:h,message:c})};a.getJSONS3=function(f,b,e,h,c){a.isFunction(b)&&(c=h,h=e,e=b,b=null);c||(c=!1);return a.getS3(f,b,e,"json",h,c)};a.ajaxS3Settings={timeout:1E4,msgTimeout:2E3,retryLimit:10,dataType:"json",async:!0,type:"GET"};a.ajaxS3Setup=function(f){a.extend(a.ajaxS3Settings,f)}})($);
function S3StatusBar(a,f){var b=this,e=null;this.elementId="_showstatus";this.prependMultiline=!0;this.showCloseButton=!1;this.afterTimeoutText=null;this.cssClass="statusbar";this.highlightClass="statusbarhighlight";this.errorClass="statusbarerror";this.closeButtonClass="statusbarclose";this.additive=!1;$.extend(this,f);a&&(e=$(a));e||(e=$("<div id='_statusbar' class='"+b.cssClass+"'><div class='"+b.closeButtonClass+"'>"+(b.showCloseButton?" X </div></div>":"")).appendTo(document.body).show());$("."+
b.cssClass).click(function(){$(e).hide()});this.show=function(a,c,f,m){f||f==void 0&&b.additive?(a="<div style='margin-bottom: 2px;' >"+a+"</div>",b.prependMultiline?e.prepend(a):e.append(a)):b.showCloseButton?(f=e.find("div.statusbarclose"),e.text(a).prepend(f)):e.text(a);e.show();c&&(m?e.addClass(b.errorClass):e.addClass(b.highlightClass),setTimeout(function(){e.removeClass(b.highlightClass);b.afterTimeoutText&&b.show(b.afterTimeoutText)},c))};this.release=function(){_statusbar&&($("#_statusbar").remove(),
_statusbar=void 0)}}var _statusbar=null;function s3_showStatus(a,f,b,e){_statusbar||(_statusbar=new S3StatusBar);_statusbar.show(a,f,b,e)}function s3_hideStatus(){_statusbar&&_statusbar.release()}function S3SetNavigateAwayConfirm(){window.onbeforeunload=function(){return S3.i18n.unsaved_changes}}function S3ClearNavigateAwayConfirm(){window.onbeforeunload=function(){}}
function S3EnableNavigateAwayConfirm(){$(document).ready(function(){$("[class=error]").length>0&&S3SetNavigateAwayConfirm();$(":input:not(input[id=gis_location_advanced_checkbox])").keypress(S3SetNavigateAwayConfirm);$(":input:not(input[id=gis_location_advanced_checkbox])").change(S3SetNavigateAwayConfirm);$("form").submit(S3ClearNavigateAwayConfirm)})}function S3ConfirmClick(a,f){$(a).click(function(a){return confirm(f)?!0:(a.preventDefault(),!1)})}
function s3_viewMap(a){var a=S3.Ap.concat("/gis/display_feature/")+a,f=$("#map").html(),a="<iframe width='640' height='480' src='"+a+"'></iframe>",b=$('<a href="#">'+S3.i18n.close_map+"</a>");b.bind("click",function(a){$("#map").html(f);a.preventDefault()});$("#map").html(a);$("#map").append($("<div style='margin-bottom: 10px' />").append(b))}
function s3_viewMapMulti(a,f,b,e){var a=S3.Ap.concat("/gis/display_feature//?module=")+a+"&resource="+f+"&instance="+b+"&jresource="+e,h=$("#map").html(),a='<iframe width="640" height="480" src="'+a+'"></iframe>',f=$('<a href="#">'+S3.i18n.close_map+"</a>");f.bind("click",function(a){$("#map").html(h);a.preventDefault()});$("#map").html(a);$("#map").append($("<div style='margin-bottom: 10px' />").append(f))};
